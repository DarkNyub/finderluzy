"use strict";(self.webpackChunkfinderluzy=self.webpackChunkfinderluzy||[]).push([[179],{289:()=>{function Ge(t){return"function"==typeof t}function jd(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const $g=jd(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function $u(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class lr{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Ge(r))try{r()}catch(s){e=s instanceof $g?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{EO(s)}catch(o){e=e??[],o instanceof $g?e=[...e,...o.errors]:e.push(o)}}if(e)throw new $g(e)}}add(e){var n;if(e&&e!==this)if(this.closed)EO(e);else{if(e instanceof lr){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&$u(n,e)}remove(e){const{_finalizers:n}=this;n&&$u(n,e),e instanceof lr&&e._removeParent(this)}}lr.EMPTY=(()=>{const t=new lr;return t.closed=!0,t})();const vO=lr.EMPTY;function IO(t){return t instanceof lr||t&&"closed"in t&&Ge(t.remove)&&Ge(t.add)&&Ge(t.unsubscribe)}function EO(t){Ge(t)?t():t.unsubscribe()}const fa={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Gg={setTimeout(t,e,...n){const{delegate:r}=Gg;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Gg;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function wO(t){Gg.setTimeout(()=>{const{onUnhandledError:e}=fa;if(!e)throw t;e(t)})}function HE(){}const TY=WE("C",void 0,void 0);function WE(t,e,n){return{kind:t,value:e,error:n}}let pa=null;function qg(t){if(fa.useDeprecatedSynchronousErrorHandling){const e=!pa;if(e&&(pa={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=pa;if(pa=null,n)throw r}}else t()}class KE extends lr{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,IO(e)&&e.add(this)):this.destination=RY}static create(e,n,r){return new $d(e,n,r)}next(e){this.isStopped?YE(function CY(t){return WE("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?YE(function DY(t){return WE("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?YE(TY,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const bY=Function.prototype.bind;function QE(t,e){return bY.call(t,e)}class SY{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){zg(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){zg(r)}else zg(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){zg(n)}}}class $d extends KE{constructor(e,n,r){let i;if(super(),Ge(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&fa.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&QE(e.next,s),error:e.error&&QE(e.error,s),complete:e.complete&&QE(e.complete,s)}):i=e}this.destination=new SY(i)}}function zg(t){fa.useDeprecatedSynchronousErrorHandling?function AY(t){fa.useDeprecatedSynchronousErrorHandling&&pa&&(pa.errorThrown=!0,pa.error=t)}(t):wO(t)}function YE(t,e){const{onStoppedNotification:n}=fa;n&&Gg.setTimeout(()=>n(t,e))}const RY={closed:!0,next:HE,error:function xY(t){throw t},complete:HE},XE="function"==typeof Symbol&&Symbol.observable||"@@observable";function ro(t){return t}function TO(t){return 0===t.length?ro:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let ft=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function NY(t){return t&&t instanceof KE||function MY(t){return t&&Ge(t.next)&&Ge(t.error)&&Ge(t.complete)}(t)&&IO(t)}(n)?n:new $d(n,r,i);return qg(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=DO(r))((i,s)=>{const o=new $d({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[XE](){return this}pipe(...n){return TO(n)(this)}toPromise(n){return new(n=DO(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function DO(t){var e;return null!==(e=t??fa.Promise)&&void 0!==e?e:Promise}const kY=jd(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Rr=(()=>{class t extends ft{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new CO(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new kY}next(n){qg(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){qg(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){qg(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?vO:(this.currentObservers=null,s.push(n),new lr(()=>{this.currentObservers=null,$u(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new ft;return n.source=this,n}}return t.create=(e,n)=>new CO(e,n),t})();class CO extends Rr{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:vO}}function AO(t){return Ge(t?.lift)}function Ht(t){return e=>{if(AO(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ut(t,e,n,r,i){return new OY(t,e,n,r,i)}class OY extends KE{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ke(t,e){return Ht((n,r)=>{let i=0;n.subscribe(Ut(r,s=>{r.next(t.call(e,s,i++))}))})}function ew(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function io(t){return this instanceof io?(this.v=t,this):new io(t)}function RO(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function nw(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){!function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}(a,u,(o=t[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const PO=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function MO(t){return Ge(t?.then)}function NO(t){return Ge(t[XE])}function kO(t){return Symbol.asyncIterator&&Ge(t?.[Symbol.asyncIterator])}function OO(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const FO=function nX(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function VO(t){return Ge(t?.[FO])}function LO(t){return function xO(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function u(h){h.value instanceof io?Promise.resolve(h.value.v).then(c,l):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield io(n.read());if(i)return yield io(void 0);yield yield io(r)}}finally{n.releaseLock()}})}function UO(t){return Ge(t?.getReader)}function Pr(t){if(t instanceof ft)return t;if(null!=t){if(NO(t))return function rX(t){return new ft(e=>{const n=t[XE]();if(Ge(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(PO(t))return function iX(t){return new ft(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(MO(t))return function sX(t){return new ft(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,wO)})}(t);if(kO(t))return BO(t);if(VO(t))return function oX(t){return new ft(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(UO(t))return function aX(t){return BO(LO(t))}(t)}throw OO(t)}function BO(t){return new ft(e=>{(function uX(t,e){var n,r,i,s;return function bO(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(l.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=RO(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function gs(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function pn(t,e,n=1/0){return Ge(e)?pn((r,i)=>ke((s,o)=>e(r,s,i,o))(Pr(t(r,i))),n):("number"==typeof e&&(n=e),Ht((r,i)=>function cX(t,e,n,r,i,s,o,a){const u=[];let c=0,l=0,d=!1;const h=()=>{d&&!u.length&&!c&&e.complete()},f=g=>c<r?p(g):u.push(g),p=g=>{s&&e.next(g),c++;let m=!1;Pr(n(g,l++)).subscribe(Ut(e,v=>{i?.(v),s?f(v):e.next(v)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;u.length&&c<r;){const v=u.shift();o?gs(e,o,()=>p(v)):p(v)}h()}catch(v){e.error(v)}}))};return t.subscribe(Ut(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,t,n)))}function Gu(t=1/0){return pn(ro,t)}const Ri=new ft(t=>t.complete());function rw(t){return t[t.length-1]}function jO(t){return Ge(rw(t))?t.pop():void 0}function Gd(t){return function dX(t){return t&&Ge(t.schedule)}(rw(t))?t.pop():void 0}function Hg(t,e=0){return Ht((n,r)=>{n.subscribe(Ut(r,i=>gs(r,t,()=>r.next(i),e),()=>gs(r,t,()=>r.complete(),e),i=>gs(r,t,()=>r.error(i),e)))})}function Wg(t,e=0){return Ht((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function $O(t,e){if(!t)throw new Error("Iterable cannot be null");return new ft(n=>{gs(n,e,()=>{const r=t[Symbol.asyncIterator]();gs(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function en(t,e){return e?function yX(t,e){if(null!=t){if(NO(t))return function fX(t,e){return Pr(t).pipe(Wg(e),Hg(e))}(t,e);if(PO(t))return function gX(t,e){return new ft(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(MO(t))return function pX(t,e){return Pr(t).pipe(Wg(e),Hg(e))}(t,e);if(kO(t))return $O(t,e);if(VO(t))return function mX(t,e){return new ft(n=>{let r;return gs(n,e,()=>{r=t[FO](),gs(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>Ge(r?.return)&&r.return()})}(t,e);if(UO(t))return function _X(t,e){return $O(LO(t),e)}(t,e)}throw OO(t)}(t,e):Pr(t)}class Yr extends Rr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function ie(...t){return en(t,Gd(t))}function GO(t={}){const{connector:e=(()=>new Rr),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,c=0,l=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=u=void 0,l=d=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return Ht((g,m)=>{c++,!d&&!l&&h();const v=u=u??e();m.add(()=>{c--,0===c&&!d&&!l&&(a=iw(p,i))}),v.subscribe(m),!o&&c>0&&(o=new $d({next:y=>v.next(y),error:y=>{d=!0,h(),a=iw(f,n,y),v.error(y)},complete:()=>{l=!0,h(),a=iw(f,r),v.complete()}}),Pr(g).subscribe(o))})(s)}}function iw(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new $d({next:()=>{r.unsubscribe(),t()}});return Pr(e(...n)).subscribe(r)}function Pi(t,e){return Ht((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(Ut(r,u=>{i?.unsubscribe();let c=0;const l=s++;Pr(t(u,l)).subscribe(i=Ut(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function EX(t,e){return t===e}function Oe(t){for(let e in t)if(t[e]===Oe)return e;throw Error("Could not find renamed property on target object.")}function Kg(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Wt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Wt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function sw(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const wX=Oe({__forward_ref__:Oe});function He(t){return t.__forward_ref__=He,t.toString=function(){return Wt(this())},t}function re(t){return ow(t)?t():t}function ow(t){return"function"==typeof t&&t.hasOwnProperty(wX)&&t.__forward_ref__===He}function aw(t){return t&&!!t.\u0275providers}const qO="https://g.co/ng/security#xss";class R extends Error{constructor(e,n){super(function Qg(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function ue(t){return"string"==typeof t?t:null==t?"":String(t)}function uw(t,e){throw new R(-201,!1)}function Xr(t,e){null==t&&function ee(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Z(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function dr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Yg(t){return zO(t,Jg)||zO(t,HO)}function zO(t,e){return t.hasOwnProperty(e)?t[e]:null}function Xg(t){return t&&(t.hasOwnProperty(cw)||t.hasOwnProperty(RX))?t[cw]:null}const Jg=Oe({\u0275prov:Oe}),cw=Oe({\u0275inj:Oe}),HO=Oe({ngInjectableDef:Oe}),RX=Oe({ngInjectorDef:Oe});var ye=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ye||{});let lw;function hr(t){const e=lw;return lw=t,e}function KO(t,e,n){const r=Yg(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ye.Optional?null:void 0!==e?e:void uw(Wt(t))}const We=globalThis,qd={},gw="__NG_DI_FLAG__",Zg="ngTempTokenPath",NX=/\n/gm,YO="__source";let qu;function so(t){const e=qu;return qu=t,e}function FX(t,e=ye.Default){if(void 0===qu)throw new R(-203,!1);return null===qu?KO(t,void 0,e):qu.get(t,e&ye.Optional?null:void 0,e)}function J(t,e=ye.Default){return(function WO(){return lw}()||FX)(re(t),e)}function q(t,e=ye.Default){return J(t,em(e))}function em(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function mw(t){const e=[];for(let n=0;n<t.length;n++){const r=re(t[n]);if(Array.isArray(r)){if(0===r.length)throw new R(900,!1);let i,s=ye.Default;for(let o=0;o<r.length;o++){const a=r[o],u=VX(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(J(i,s))}else e.push(J(r))}return e}function zd(t,e){return t[gw]=e,t.prototype[gw]=e,t}function VX(t){return t[gw]}function ms(t){return{toString:t}.toString()}var tm=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(tm||{}),fi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(fi||{});const Mi={},Re=[],nm=Oe({\u0275cmp:Oe}),_w=Oe({\u0275dir:Oe}),yw=Oe({\u0275pipe:Oe}),JO=Oe({\u0275mod:Oe}),_s=Oe({\u0275fac:Oe}),Hd=Oe({__NG_ELEMENT_ID__:Oe}),ZO=Oe({__NG_ENV_ID__:Oe});function eF(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function vw(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];nF(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function tF(t){return 3===t||4===t||6===t}function nF(t){return 64===t.charCodeAt(0)}function Wd(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||rF(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function rF(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const iF="ng-template";function BX(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==eF(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function sF(t){return 4===t.type&&t.value!==iF}function jX(t,e,n){return e===(4!==t.type||n?t.value:iF)}function $X(t,e,n){let r=4;const i=t.attrs||[],s=function zX(t){for(let e=0;e<t.length;e++)if(tF(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!jX(t,u,n)||""===u&&1===e.length){if(pi(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!BX(t.attrs,c,n)){if(pi(r))return!1;o=!0}continue}const d=GX(8&r?"class":u,i,sF(t),n);if(-1===d){if(pi(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==eF(f,c,0)||2&r&&c!==h){if(pi(r))return!1;o=!0}}}}else{if(!o&&!pi(r)&&!pi(u))return!1;if(o&&pi(u))continue;o=!1,r=u|1&r}}return pi(r)||o}function pi(t){return 0==(1&t)}function GX(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function HX(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function oF(t,e,n=!1){for(let r=0;r<e.length;r++)if($X(t,e[r],n))return!0;return!1}function aF(t,e){return t?":not("+e.trim()+")":e}function KX(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!pi(o)&&(e+=aF(s,i),i=""),r=o,s=s||!pi(r);n++}return""!==i&&(e+=aF(s,i)),e}function Kd(t){return ms(()=>{const e=cF(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===tm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||fi.Emulated,styles:t.styles||Re,_:null,schemas:t.schemas||null,tView:null,id:""};lF(n);const r=t.dependencies;return n.directiveDefs=rm(r,!1),n.pipeDefs=rm(r,!0),n.id=function nJ(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function JX(t){return De(t)||gn(t)}function ZX(t){return null!==t}function Nr(t){return ms(()=>({type:t.type,bootstrap:t.bootstrap||Re,declarations:t.declarations||Re,imports:t.imports||Re,exports:t.exports||Re,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function uF(t,e){if(null==t)return Mi;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function te(t){return ms(()=>{const e=cF(t);return lF(e),e})}function De(t){return t[nm]||null}function gn(t){return t[_w]||null}function Yn(t){return t[yw]||null}function kr(t,e){const n=t[JO]||null;if(!n&&!0===e)throw new Error(`Type ${Wt(t)} does not have '\u0275mod' property.`);return n}function cF(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Mi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Re,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:uF(t.inputs,e),outputs:uF(t.outputs)}}function lF(t){t.features?.forEach(e=>e(t))}function rm(t,e){if(!t)return null;const n=e?Yn:JX;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(ZX)}const yt=0,G=1,fe=2,ct=3,gi=4,Qd=5,kn=6,Hu=7,St=8,oo=9,Wu=10,ce=11,Yd=12,dF=13,Ku=14,xt=15,Xd=16,Qu=17,Ni=18,Jd=19,hF=20,ao=21,ys=22,Zd=23,eh=24,ve=25,Iw=1,fF=2,ki=7,Yu=9,mn=11;function pr(t){return Array.isArray(t)&&"object"==typeof t[Iw]}function Xn(t){return Array.isArray(t)&&!0===t[Iw]}function Ew(t){return 0!=(4&t.flags)}function ma(t){return t.componentOffset>-1}function sm(t){return 1==(1&t.flags)}function mi(t){return!!t.template}function ww(t){return 0!=(512&t[fe])}function _a(t,e){return t.hasOwnProperty(_s)?t[_s]:null}let _n=null,om=!1;function Jr(t){const e=_n;return _n=t,e}const mF={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function yF(t){if(!nh(t)||t.dirty){if(!t.producerMustRecompute(t)&&!EF(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function IF(t){t.dirty=!0,function vF(t){if(void 0===t.liveConsumerNode)return;const e=om;om=!0;try{for(const n of t.liveConsumerNode)n.dirty||IF(n)}finally{om=e}}(t),t.consumerMarkedDirty?.(t)}function Dw(t){return t&&(t.nextProducerIndex=0),Jr(t)}function Cw(t,e){if(Jr(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(nh(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)am(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function EF(t){Xu(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(yF(n),r!==n.version))return!0}return!1}function wF(t){if(Xu(t),nh(t))for(let e=0;e<t.producerNode.length;e++)am(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function am(t,e){if(function DF(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Xu(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)am(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Xu(i),i.producerIndexOfThis[r]=e}}function nh(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Xu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let CF=null;const xF=()=>{},gJ=(()=>({...mF,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:xF}))();class mJ{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Zr(){return RF}function RF(t){return t.type.prototype.ngOnChanges&&(t.setInput=yJ),_J}function _J(){const t=MF(this),e=t?.current;if(e){const n=t.previous;if(n===Mi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function yJ(t,e,n,r){const i=this.declaredInputs[n],s=MF(t)||function vJ(t,e){return t[PF]=e}(t,{previous:Mi,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new mJ(u&&u.currentValue,e,a===Mi),t[r]=e}Zr.ngInherit=!0;const PF="__ngSimpleChanges__";function MF(t){return t[PF]||null}const Oi=function(t,e,n){};function Ke(t){for(;Array.isArray(t);)t=t[yt];return t}function um(t,e){return Ke(e[t])}function gr(t,e){return Ke(e[t.index])}function OF(t,e){return t.data[e]}function Or(t,e){const n=e[t];return pr(n)?n:n[yt]}function co(t,e){return null==e?null:t[e]}function FF(t){t[Qu]=0}function CJ(t){1024&t[fe]||(t[fe]|=1024,LF(t,1))}function VF(t){1024&t[fe]&&(t[fe]&=-1025,LF(t,-1))}function LF(t,e){let n=t[ct];if(null===n)return;n[Qd]+=e;let r=n;for(n=n[ct];null!==n&&(1===e&&1===r[Qd]||-1===e&&0===r[Qd]);)n[Qd]+=e,r=n,n=n[ct]}const ne={lFrame:QF(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function jF(){return ne.bindingsEnabled}function C(){return ne.lFrame.lView}function Ce(){return ne.lFrame.tView}function yn(){let t=$F();for(;null!==t&&64===t.type;)t=t.parent;return t}function $F(){return ne.lFrame.currentTNode}function Fi(t,e){const n=ne.lFrame;n.currentTNode=t,n.isParent=e}function Rw(){return ne.lFrame.isParent}function ec(){return ne.lFrame.bindingIndex++}function UJ(t,e){const n=ne.lFrame;n.bindingIndex=n.bindingRootIndex=t,Mw(e)}function Mw(t){ne.lFrame.currentDirectiveIndex=t}function kw(t){ne.lFrame.currentQueryIndex=t}function jJ(t){const e=t[G];return 2===e.type?e.declTNode:1===e.type?t[kn]:null}function WF(t,e,n){if(n&ye.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&ye.Host||(i=jJ(s),null===i||(s=s[Ku],10&i.type))););if(null===i)return!1;e=i,t=s}const r=ne.lFrame=KF();return r.currentTNode=e,r.lView=t,!0}function Ow(t){const e=KF(),n=t[G];ne.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function KF(){const t=ne.lFrame,e=null===t?null:t.child;return null===e?QF(t):e}function QF(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function YF(){const t=ne.lFrame;return ne.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const XF=YF;function Fw(){const t=YF();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Zn(){return ne.lFrame.selectedIndex}function ya(t){ne.lFrame.selectedIndex=t}let ZF=!0;function cm(){return ZF}function lo(t){ZF=t}function lm(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),null!=l&&(t.destroyHooks??=[]).push(n,l)}}function dm(t,e,n){eV(t,e,3,n)}function hm(t,e,n,r){(3&t[fe])===n&&eV(t,e,n,r)}function Vw(t,e){let n=t[fe];(3&n)===e&&(n&=8191,n+=1,t[fe]=n)}function eV(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[Qu]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[Qu]+=65536),(a<s||-1==s)&&(QJ(t,n,e,u),t[Qu]=(4294901760&t[Qu])+u+2),u++}function tV(t,e){Oi(4,t,e);const n=Jr(null);try{e.call(t)}finally{Jr(n),Oi(5,t,e)}}function QJ(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[fe]>>13<t[Qu]>>16&&(3&t[fe])===e&&(t[fe]+=8192,tV(a,s)):tV(a,s)}const tc=-1;class ih{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Uw(t){return t!==tc}function sh(t){return 32767&t}function oh(t,e){let n=function ZJ(t){return t>>16}(t),r=e;for(;n>0;)r=r[Ku],n--;return r}let Bw=!0;function fm(t){const e=Bw;return Bw=t,e}const nV=255,rV=5;let eZ=0;const Vi={};function pm(t,e){const n=iV(t,e);if(-1!==n)return n;const r=e[G];r.firstCreatePass&&(t.injectorIndex=e.length,jw(r.data,t),jw(e,null),jw(r.blueprint,null));const i=gm(t,e),s=t.injectorIndex;if(Uw(i)){const o=sh(i),a=oh(i,e),u=a[G].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|u[o+c]}return e[s+8]=i,s}function jw(t,e){t.push(0,0,0,0,0,0,0,0,e)}function iV(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function gm(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=dV(i),null===r)return tc;if(n++,i=i[Ku],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return tc}function $w(t,e,n){!function tZ(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Hd)&&(r=n[Hd]),null==r&&(r=n[Hd]=eZ++);const i=r&nV;e.data[t+(i>>rV)]|=1<<i}(t,e,n)}function sV(t,e,n){if(n&ye.Optional||void 0!==t)return t;uw()}function oV(t,e,n,r){if(n&ye.Optional&&void 0===r&&(r=null),!(n&(ye.Self|ye.Host))){const i=t[oo],s=hr(void 0);try{return i?i.get(e,r,n&ye.Optional):KO(e,r,n&ye.Optional)}finally{hr(s)}}return sV(r,0,n)}function aV(t,e,n,r=ye.Default,i){if(null!==t){if(2048&e[fe]&&!(r&ye.Self)){const o=function aZ(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[fe]&&!(512&o[fe]);){const a=uV(s,o,n,r|ye.Self,Vi);if(a!==Vi)return a;let u=s.parent;if(!u){const c=o[hF];if(c){const l=c.get(n,Vi,r);if(l!==Vi)return l}u=dV(o),o=o[Ku]}s=u}return i}(t,e,n,r,Vi);if(o!==Vi)return o}const s=uV(t,e,n,r,Vi);if(s!==Vi)return s}return oV(e,n,r,i)}function uV(t,e,n,r,i){const s=function iZ(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Hd)?t[Hd]:void 0;return"number"==typeof e?e>=0?e&nV:oZ:e}(n);if("function"==typeof s){if(!WF(e,t,r))return r&ye.Host?sV(i,0,r):oV(e,n,r,i);try{let o;if(o=s(r),null!=o||r&ye.Optional)return o;uw()}finally{XF()}}else if("number"==typeof s){let o=null,a=iV(t,e),u=tc,c=r&ye.Host?e[xt][kn]:null;for((-1===a||r&ye.SkipSelf)&&(u=-1===a?gm(t,e):e[a+8],u!==tc&&lV(r,!1)?(o=e[G],a=sh(u),e=oh(u,e)):a=-1);-1!==a;){const l=e[G];if(cV(s,a,l.data)){const d=rZ(a,e,n,o,r,c);if(d!==Vi)return d}u=e[a+8],u!==tc&&lV(r,e[G].data[a+8]===c)&&cV(s,a,e)?(o=l,a=sh(u),e=oh(u,e)):a=-1}}return i}function rZ(t,e,n,r,i,s){const o=e[G],a=o.data[t+8],l=function mm(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,l=s>>20,h=i?a+l:t.directiveEnd;for(let f=r?a:a+l;f<h;f++){const p=o[f];if(f<u&&n===p||f>=u&&p.type===n)return f}if(i){const f=o[u];if(f&&mi(f)&&f.type===n)return u}return null}(a,o,n,null==r?ma(a)&&Bw:r!=o&&0!=(3&a.type),i&ye.Host&&s===a);return null!==l?va(e,o,l,a):Vi}function va(t,e,n,r){let i=t[n];const s=e.data;if(function YJ(t){return t instanceof ih}(i)){const o=i;o.resolving&&function TX(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new R(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Ne(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ue(t)}(s[n]));const a=fm(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?hr(o.injectImpl):null;WF(t,r,ye.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function KJ(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=RF(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==c&&hr(c),fm(a),o.resolving=!1,XF()}}return i}function cV(t,e,n){return!!(n[e+(t>>rV)]&1<<t)}function lV(t,e){return!(t&ye.Self||t&ye.Host&&e)}class er{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return aV(this._tNode,this._lView,e,em(r),n)}}function oZ(){return new er(yn(),C())}function vn(t){return ms(()=>{const e=t.prototype.constructor,n=e[_s]||Gw(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[_s]||Gw(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Gw(t){return ow(t)?()=>{const e=Gw(re(t));return e&&e()}:_a(t)}function dV(t){const e=t[G],n=e.type;return 2===n?e.declTNode:1===n?t[kn]:null}const rc="__parameters__";function sc(t,e,n){return ms(()=>{const r=function qw(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,c,l){const d=u.hasOwnProperty(rc)?u[rc]:Object.defineProperty(u,rc,{value:[]})[rc];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function ac(t,e){t.forEach(n=>Array.isArray(n)?ac(n,e):e(n))}function fV(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ym(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Fr(t,e,n){let r=uc(t,e);return r>=0?t[1|r]=n:(r=~r,function pZ(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function zw(t,e){const n=uc(t,e);if(n>=0)return t[1|n]}function uc(t,e){return function pV(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const mr=zd(sc("Optional"),8),Im=zd(sc("SkipSelf"),4);function Cm(t){return 128==(128&t.flags)}var ho=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ho||{});const Yw=new Map;let LZ=0;const Jw="__ngContext__";function On(t,e){pr(e)?(t[Jw]=e[Jd],function BZ(t){Yw.set(t[Jd],t)}(e)):t[Jw]=e}let Zw;function eT(t,e){return Zw(t,e)}function hh(t){const e=t[ct];return Xn(e)?e[ct]:e}function kV(t){return FV(t[Yd])}function OV(t){return FV(t[gi])}function FV(t){for(;null!==t&&!Xn(t);)t=t[gi];return t}function dc(t,e,n,r,i){if(null!=r){let s,o=!1;Xn(r)?s=r:pr(r)&&(o=!0,r=r[yt]);const a=Ke(r);0===t&&null!==n?null==i?BV(e,n,a):Ia(e,n,a,i||null,!0):1===t&&null!==n?Ia(e,n,a,i||null,!0):2===t?function Mm(t,e,n){const r=Rm(t,e);r&&function see(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function uee(t,e,n,r,i){const s=n[ki];s!==Ke(n)&&dc(e,t,r,s,i);for(let a=mn;a<n.length;a++){const u=n[a];ph(u[G],u,t,e,r,s)}}(e,t,s,n,i)}}function Sm(t,e,n){return t.createElement(e,n)}function LV(t,e){const n=t[Yu],r=n.indexOf(e);VF(e),n.splice(r,1)}function xm(t,e){if(t.length<=mn)return;const n=mn+e,r=t[n];if(r){const i=r[Xd];null!==i&&i!==t&&LV(i,r),e>0&&(t[n-1][gi]=r[gi]);const s=ym(t,mn+e);!function XZ(t,e){ph(t,e,e[ce],2,null,null),e[yt]=null,e[kn]=null}(r[G],r);const o=s[Ni];null!==o&&o.detachView(s[G]),r[ct]=null,r[gi]=null,r[fe]&=-129}return r}function nT(t,e){if(!(256&e[fe])){const n=e[ce];e[Zd]&&wF(e[Zd]),e[eh]&&wF(e[eh]),n.destroyNode&&ph(t,e,n,3,null,null),function eee(t){let e=t[Yd];if(!e)return rT(t[G],t);for(;e;){let n=null;if(pr(e))n=e[Yd];else{const r=e[mn];r&&(n=r)}if(!n){for(;e&&!e[gi]&&e!==t;)pr(e)&&rT(e[G],e),e=e[ct];null===e&&(e=t),pr(e)&&rT(e[G],e),n=e&&e[gi]}e=n}}(e)}}function rT(t,e){if(!(256&e[fe])){e[fe]&=-129,e[fe]|=256,function iee(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof ih)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];Oi(4,a,u);try{u.call(a)}finally{Oi(5,a,u)}}else{Oi(4,i,s);try{s.call(i)}finally{Oi(5,i,s)}}}}}(t,e),function ree(t,e){const n=t.cleanup,r=e[Hu];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[Hu]=null);const i=e[ao];if(null!==i){e[ao]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[G].type&&e[ce].destroy();const n=e[Xd];if(null!==n&&Xn(e[ct])){n!==e[ct]&&LV(n,e);const r=e[Ni];null!==r&&r.detachView(t)}!function jZ(t){Yw.delete(t[Jd])}(e)}}function iT(t,e,n){return function UV(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[yt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===fi.None||s===fi.Emulated)return null}return gr(r,n)}}(t,e.parent,n)}function Ia(t,e,n,r,i){t.insertBefore(e,n,r,i)}function BV(t,e,n){t.appendChild(e,n)}function jV(t,e,n,r,i){null!==r?Ia(t,e,n,r,i):BV(t,e,n)}function Rm(t,e){return t.parentNode(e)}let sT,Nm,cT,qV=function GV(t,e,n){return 40&t.type?gr(t,n):null};function Pm(t,e,n,r){const i=iT(t,r,e),s=e[ce],a=function $V(t,e,n){return qV(t,e,n)}(r.parent||e[kn],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)jV(s,i,n[u],a,!1);else jV(s,i,n,a,!1);void 0!==sT&&sT(s,r,e,n,i)}function fh(t,e){if(null!==e){const n=e.type;if(3&n)return gr(e,t);if(4&n)return oT(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return fh(t,r);{const i=t[e.index];return Xn(i)?oT(-1,i):Ke(i)}}if(32&n)return eT(e,t)()||Ke(t[e.index]);{const r=HV(t,e);return null!==r?Array.isArray(r)?r[0]:fh(hh(t[xt]),r):fh(t,e.next)}}return null}function HV(t,e){return null!==e?t[xt][kn].projection[e.projection]:null}function oT(t,e){const n=mn+t+1;if(n<e.length){const r=e[n],i=r[G].firstChild;if(null!==i)return fh(r,i)}return e[ki]}function aT(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&On(Ke(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)aT(t,e,n.child,r,i,s,!1),dc(e,t,i,a,s);else if(32&u){const c=eT(n,r);let l;for(;l=c();)dc(e,t,i,l,s);dc(e,t,i,a,s)}else 16&u?KV(t,e,r,n,i,s):dc(e,t,i,a,s);n=o?n.projectionNext:n.next}}function ph(t,e,n,r,i,s){aT(n,r,t.firstChild,e,i,s,!1)}function KV(t,e,n,r,i,s){const o=n[xt],u=o[kn].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)dc(e,t,i,u[c],s);else{let c=u;const l=o[ct];Cm(r)&&(c.flags|=128),aT(t,e,c,l,i,s,!0)}}function QV(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function YV(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&vw(t,e,r),null!==i&&QV(t,e,i),null!==s&&function lee(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}function hc(t){return function uT(){if(void 0===Nm&&(Nm=null,We.trustedTypes))try{Nm=We.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Nm}()?.createHTML(t)||t}class Ea{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qO})`}}class gee extends Ea{getTypeName(){return"HTML"}}class mee extends Ea{getTypeName(){return"Style"}}class _ee extends Ea{getTypeName(){return"Script"}}class yee extends Ea{getTypeName(){return"URL"}}class vee extends Ea{getTypeName(){return"ResourceURL"}}function Vr(t){return t instanceof Ea?t.changingThisBreaksApplicationSecurity:t}function Li(t,e){const n=function Iee(t){return t instanceof Ea&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${qO})`)}return n===e}class Aee{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(hc(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class bee{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=hc(e),n}}const xee=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Om(t){return(t=String(t)).match(xee)?t:"unsafe:"+t}function Es(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function gh(...t){const e={};for(const n of t)for(const r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}const t2=Es("area,br,col,hr,img,wbr"),n2=Es("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),r2=Es("rp,rt"),dT=gh(t2,gh(n2,Es("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),gh(r2,Es("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),gh(r2,n2)),hT=Es("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),i2=gh(hT,Es("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Es("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ree=Es("script,style,template");class Pee{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!dT.hasOwnProperty(n))return this.sanitizedSomething=!0,!Ree.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!i2.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=s.value;hT[a]&&(u=Om(u)),this.buf.push(" ",o,'="',s2(u),'"')}return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();dT.hasOwnProperty(n)&&!t2.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(s2(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const Mee=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Nee=/([^\#-~ |!])/g;function s2(t){return t.replace(/&/g,"&amp;").replace(Mee,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Nee,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Fm;function o2(t,e){let n=null;try{Fm=Fm||function e2(t){const e=new bee(t);return function See(){try{return!!(new window.DOMParser).parseFromString(hc(""),"text/html")}catch{return!1}}()?new Aee(e):e}(t);let r=e?String(e):"";n=Fm.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=Fm.getInertBodyElement(r)}while(r!==s);return hc((new Pee).sanitizeChildren(fT(n)||n))}finally{if(n){const r=fT(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function fT(t){return"content"in t&&function kee(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ti=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ti||{});class W{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Z({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const _h=new W("ENVIRONMENT_INITIALIZER"),l2=new W("INJECTOR",-1),d2=new W("INJECTOR_DEF_TYPES");class pT{get(e,n=qd){if(n===qd){const r=new Error(`NullInjectorError: No provider for ${Wt(e)}!`);throw r.name="NullInjectorError",r}return n}}function jee(...t){return{\u0275providers:f2(0,t),\u0275fromNgModule:!0}}function f2(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return ac(e,o=>{const a=o;Vm(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&p2(i,s),n}function p2(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];gT(i,s=>{e(s,r)})}}function Vm(t,e,n,r){if(!(t=re(t)))return!1;let i=null,s=Xg(t);const o=!s&&De(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=Xg(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of u)Vm(c,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{ac(s.imports,l=>{Vm(l,e,n,r)&&(c||=[],c.push(l))})}finally{}void 0!==c&&p2(c,e)}if(!a){const c=_a(i)||(()=>new i);e({provide:i,useFactory:c,deps:Re},i),e({provide:d2,useValue:i,multi:!0},i),e({provide:_h,useValue:()=>J(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const c=t;gT(u,l=>{e(l,c)})}}}return i!==t&&void 0!==t.providers}function gT(t,e){for(let n of t)aw(n)&&(n=n.\u0275providers),Array.isArray(n)?gT(n,e):e(n)}const $ee=Oe({provide:String,useValue:Oe});function mT(t){return null!==t&&"object"==typeof t&&$ee in t}function wa(t){return"function"==typeof t}const _T=new W("Set Injector scope."),Lm={},qee={};let yT;function Um(){return void 0===yT&&(yT=new pT),yT}class ni{}class Bm extends ni{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,IT(e,o=>this.processProvider(o)),this.records.set(l2,pc(void 0,this)),i.has("environment")&&this.records.set(ni,pc(void 0,this));const s=this.records.get(_T);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(d2.multi,Re,ye.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=so(this),r=hr(void 0);try{return e()}finally{so(n),hr(r)}}get(e,n=qd,r=ye.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ZO))return e[ZO](this);r=em(r);const s=so(this),o=hr(void 0);try{if(!(r&ye.SkipSelf)){let u=this.records.get(e);if(void 0===u){const c=function Qee(t){return"function"==typeof t||"object"==typeof t&&t instanceof W}(e)&&Yg(e);u=c&&this.injectableDefInScope(c)?pc(vT(e),Lm):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&ye.Self?Um():this.parent).get(e,n=r&ye.Optional&&n===qd?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Zg]=a[Zg]||[]).unshift(Wt(e)),s)throw a;return function LX(t,e,n,r){const i=t[Zg];throw e[YO]&&i.unshift(e[YO]),t.message=function UX(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Wt(e);if(Array.isArray(e))i=e.map(Wt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Wt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(NX,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Zg]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{hr(o),so(s)}}resolveInjectorInitializers(){const e=so(this),n=hr(void 0);try{const i=this.get(_h.multi,Re,ye.Self);for(const s of i)s()}finally{so(e),hr(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Wt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new R(205,!1)}processProvider(e){let n=wa(e=re(e))?e:re(e&&e.provide);const r=function Hee(t){return mT(t)?pc(void 0,t.useValue):pc(_2(t),Lm)}(e);if(wa(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=pc(void 0,Lm,!0),i.factory=()=>mw(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Lm&&(n.value=qee,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Kee(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=re(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function vT(t){const e=Yg(t),n=null!==e?e.factory:_a(t);if(null!==n)return n;if(t instanceof W)throw new R(204,!1);if(t instanceof Function)return function zee(t){const e=t.length;if(e>0)throw function ch(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new R(204,!1);const n=function xX(t){return t&&(t[Jg]||t[HO])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new R(204,!1)}function _2(t,e,n){let r;if(wa(t)){const i=re(t);return _a(i)||vT(i)}if(mT(t))r=()=>re(t.useValue);else if(function m2(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...mw(t.deps||[]));else if(function g2(t){return!(!t||!t.useExisting)}(t))r=()=>J(re(t.useExisting));else{const i=re(t&&(t.useClass||t.provide));if(!function Wee(t){return!!t.deps}(t))return _a(i)||vT(i);r=()=>new i(...mw(t.deps))}return r}function pc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function IT(t,e){for(const n of t)Array.isArray(n)?IT(n,e):n&&aw(n)?IT(n.\u0275providers,e):e(n)}const jm=new W("AppId",{providedIn:"root",factory:()=>Yee}),Yee="ng",y2=new W("Platform Initializer"),fo=new W("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),v2=new W("CSP nonce",{providedIn:"root",factory:()=>function fc(){if(void 0!==cT)return cT;if(typeof document<"u")return document;throw new R(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let I2=(t,e,n)=>null;function ST(t,e,n=!1){return I2(t,e,n)}class ote{}class T2{}class ute{resolveComponentFactory(e){throw function ate(t){const e=Error(`No component factory found for ${Wt(t)}.`);return e.ngComponent=t,e}(e)}}let Wm=(()=>{class t{static#e=this.NULL=new ute}return t})();function cte(){return _c(yn(),C())}function _c(t,e){return new yr(gr(t,e))}let yr=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=cte}return t})();class C2{}let Ui=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function dte(){const t=C(),n=Or(yn().index,t);return(pr(n)?n:t)[ce]}()}return t})(),hte=(()=>{class t{static#e=this.\u0275prov=Z({token:t,providedIn:"root",factory:()=>null})}return t})();class yc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const A2=new yc("16.2.7"),PT={};function R2(t,e=null,n=null,r){const i=P2(t,e,n,r);return i.resolveInjectorInitializers(),i}function P2(t,e=null,n=null,r,i=new Set){const s=[n||Re,jee(t)];return r=r||("object"==typeof t?void 0:Wt(t)),new Bm(s,e||Um(),r||null,i)}let Fn=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=qd;static#t=this.NULL=new pT;static create(n,r){if(Array.isArray(n))return R2({name:""},r,n,"");{const i=n.name??"";return R2({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=Z({token:t,providedIn:"any",factory:()=>J(l2)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function NT(t){return t.ngOriginalError}class ws{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&NT(e);for(;n&&NT(n);)n=NT(n);return n||null}}function OT(t){return e=>{setTimeout(t,void 0,e)}}const vt=class vte extends Rr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=OT(s),i&&(i=OT(i)),o&&(o=OT(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof lr&&e.add(a),a}};function N2(...t){}class Fe{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vt(!1),this.onMicrotaskEmpty=new vt(!1),this.onStable=new vt(!1),this.onError=new vt(!1),typeof Zone>"u")throw new R(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Ite(){const t="function"==typeof We.requestAnimationFrame;let e=We[t?"requestAnimationFrame":"setTimeout"],n=We[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function Tte(t){const e=()=>{!function wte(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(We,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,VT(t),t.isCheckStableRunning=!0,FT(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),VT(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function Cte(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return k2(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),O2(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return k2(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),O2(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,VT(t),FT(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fe.isInAngularZone())throw new R(909,!1)}static assertNotInAngularZone(){if(Fe.isInAngularZone())throw new R(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Ete,N2,N2);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const Ete={};function FT(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function VT(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function k2(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function O2(t){t._nesting--,FT(t)}class Dte{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vt,this.onMicrotaskEmpty=new vt,this.onStable=new vt,this.onError=new vt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const F2=new W("",{providedIn:"root",factory:V2});function V2(){const t=q(Fe);let e=!0;return function vX(...t){const e=Gd(t),n=function hX(t,e){return"number"==typeof rw(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Pr(r[0]):Gu(n)(en(r,e)):Ri}(new ft(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new ft(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{Fe.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(GO()))}function Ts(t){return t instanceof Function?t():t}let LT=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Z({token:t,providedIn:"root",factory:()=>new t})}return t})();function Ih(t){for(;t;){t[fe]|=64;const e=hh(t);if(ww(t)&&!e)return t;t=e}return null}const $2=new W("",{providedIn:"root",factory:()=>!1});let Qm=null;function H2(t,e){return t[e]??Q2()}function W2(t,e){const n=Q2();n.producerNode?.length&&(t[e]=Qm,n.lView=t,Qm=K2())}const Ote={...mF,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ih(t.lView)},lView:null};function K2(){return Object.create(Ote)}function Q2(){return Qm??=K2(),Qm}const he={};function Bi(t){Y2(Ce(),C(),Zn()+t,!1)}function Y2(t,e,n,r){if(!r)if(3==(3&e[fe])){const s=t.preOrderCheckHooks;null!==s&&dm(e,s,n)}else{const s=t.preOrderHooks;null!==s&&hm(e,s,0,n)}ya(n)}function P(t,e=ye.Default){const n=C();return null===n?J(t,e):aV(yn(),n,re(t),e)}function Ym(t,e,n,r,i,s,o,a,u,c,l){const d=e.blueprint.slice();return d[yt]=i,d[fe]=140|r,(null!==c||t&&2048&t[fe])&&(d[fe]|=2048),FF(d),d[ct]=d[Ku]=t,d[St]=n,d[Wu]=o||t&&t[Wu],d[ce]=a||t&&t[ce],d[oo]=u||t&&t[oo]||null,d[kn]=s,d[Jd]=function UZ(){return LZ++}(),d[ys]=l,d[hF]=c,d[xt]=2==e.type?t[xt]:d,d}function Ec(t,e,n,r,i){let s=t.data[e];if(null===s)s=function UT(t,e,n,r,i){const s=$F(),o=Rw(),u=t.data[e]=function Gte(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Zu(){return null!==ne.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function LJ(){return ne.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function rh(){const t=ne.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Fi(s,!0),s}function Eh(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function J2(t,e,n,r,i){const s=H2(e,Zd),o=Zn(),a=2&r;try{ya(-1),a&&e.length>ve&&Y2(t,e,ve,!1),Oi(a?2:0,i);const c=a?s:null,l=Dw(c);try{null!==c&&(c.dirty=!1),n(r,i)}finally{Cw(c,l)}}finally{a&&null===e[Zd]&&W2(e,Zd),ya(o),Oi(a?3:1,i)}}function BT(t,e,n){if(Ew(e)){const r=Jr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{Jr(r)}}}function jT(t,e,n){jF()&&(function Yte(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;ma(n)&&function rne(t,e,n){const r=gr(e,t),i=Z2(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Xm(t,Ym(t,i,null,o,r,e,null,t[Wu].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||pm(n,e),On(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],c=va(e,t,a,n);On(c,e),null!==o&&ine(0,a-i,c,u,0,o),mi(u)&&(Or(n.index,e)[St]=va(e,t,a,n))}}(t,e,n,gr(n,e)),64==(64&n.flags)&&iL(t,e,n))}function $T(t,e,n=gr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function Z2(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=GT(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function GT(t,e,n,r,i,s,o,a,u,c,l){const d=ve+r,h=d+i,f=function Vte(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:he);return n}(d,h),p="function"==typeof c?c():c;return f[G]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:p,incompleteFirstPass:!1,ssrId:l}}let eL=t=>null;function tL(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?nL(n,e,i,s):r.hasOwnProperty(i)&&nL(n,e,r[i],s)}return n}function nL(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function qT(t,e,n,r){if(jF()){const i=null===r?null:{"":-1},s=function Jte(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(oF(e,o.selectors,!1))if(r||(r=[]),mi(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),zT(t,e,a.length)}else r.unshift(o),zT(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&rL(t,e,n,o,i,a),i&&function Zte(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new R(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Wd(n.mergedAttrs,n.attrs)}function rL(t,e,n,r,i,s){for(let c=0;c<r.length;c++)$w(pm(n,e),t,r[c].type);!function tne(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let c=0;c<r.length;c++){const l=r[c];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,u=Eh(t,e,r.length,null);for(let c=0;c<r.length;c++){const l=r[c];n.mergedAttrs=Wd(n.mergedAttrs,l.hostAttrs),nne(t,n,e,u,l),ene(u,l,i),null!==l.contentQueries&&(n.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=64);const d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function qte(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,c=null;for(let l=e.directiveStart;l<i;l++){const d=s[l],h=n?n.get(d):null,p=h?h.outputs:null;u=tL(d.inputs,l,u,h?h.inputs:null),c=tL(d.outputs,l,c,p);const g=null===u||null===o||sF(e)?null:sne(u,l,o);a.push(g)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}(t,n,s)}function iL(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function BJ(){return ne.lFrame.currentDirectiveIndex}();try{ya(s);for(let a=r;a<i;a++){const u=t.data[a],c=e[a];Mw(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Xte(u,c)}}finally{ya(-1),Mw(o)}}function Xte(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function zT(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function ene(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;mi(e)&&(n[""]=t)}}function nne(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=_a(i.type)),o=new ih(s,mi(i),P);t.blueprint[r]=o,n[r]=o,function Kte(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function Qte(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,Eh(t,n,i.hostVars,he),i)}function ine(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)sL(r,n,o[a++],o[a++],o[a++])}function sL(t,e,n,r,i){const s=Jr(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{Jr(s)}}function sne(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function oL(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function aL(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];kw(n[r]),o.contentQueries(2,e[s],s)}}}function Xm(t,e){return t[Yd]?t[dF][gi]=e:t[Yd]=e,t[dF]=e,e}function WT(t,e,n){kw(0);const r=Jr(null);try{e(t,n)}finally{Jr(r)}}function dL(t,e){const n=t[oo],r=n?n.get(ws,null):null;r&&r.handleError(e)}function KT(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];sL(t.data[o],e[o],r,a,i)}}function one(t,e){const n=Or(e,t),r=n[G];!function ane(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[yt];null!==i&&null===n[ys]&&(n[ys]=ST(i,n[oo])),QT(r,n,n[St])}function QT(t,e,n){Ow(e);try{const r=t.viewQuery;null!==r&&WT(1,r,n);const i=t.template;null!==i&&J2(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&aL(t,e),t.staticViewQueries&&WT(2,t.viewQuery,n);const s=t.components;null!==s&&function une(t,e){for(let n=0;n<e.length;n++)one(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[fe]&=-5,Fw()}}let hL=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function pJ(t,e,n){const r=Object.create(gJ);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>IF(r),run:()=>{if(r.dirty=!1,r.hasRun&&!EF(r))return;r.hasRun=!0;const o=Dw(r);try{r.cleanupFn(),r.cleanupFn=xF,r.fn(i)}finally{Cw(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,c=>{this.all.has(c)&&this.queue.set(c,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Z({token:t,providedIn:"root",factory:()=>new t})}return t})();function Jm(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=sw(i,a):2==s&&(r=sw(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function wh(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(Ke(s)),Xn(s)&&fL(s,r);const o=n.type;if(8&o)wh(t,e,n.child,r);else if(32&o){const a=eT(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=HV(e,n);if(Array.isArray(a))r.push(...a);else{const u=hh(e[xt]);wh(u[G],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function fL(t,e){for(let n=mn;n<t.length;n++){const r=t[n],i=r[G].firstChild;null!==i&&wh(r[G],r,i,e)}t[ki]!==t[yt]&&e.push(t[ki])}function Zm(t,e,n,r=!0){const i=e[Wu],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{pL(t,e,t.template,n)}catch(u){throw r&&dL(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function pL(t,e,n,r){const i=e[fe];if(256!=(256&i)){e[Wu].effectManager?.flush(),Ow(e);try{FF(e),function qF(t){return ne.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&J2(t,e,n,2,r);const o=3==(3&i);if(o){const c=t.preOrderCheckHooks;null!==c&&dm(e,c,null)}else{const c=t.preOrderHooks;null!==c&&hm(e,c,0,null),Vw(e,0)}if(function dne(t){for(let e=kV(t);null!==e;e=OV(e)){if(!e[fF])continue;const n=e[Yu];for(let r=0;r<n.length;r++){CJ(n[r])}}}(e),gL(e,2),null!==t.contentQueries&&aL(t,e),o){const c=t.contentCheckHooks;null!==c&&dm(e,c)}else{const c=t.contentHooks;null!==c&&hm(e,c,1),Vw(e,1)}!function Fte(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=H2(e,eh);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)ya(~s);else{const o=s,a=n[++i],u=n[++i];UJ(a,o),r.dirty=!1;const c=Dw(r);try{u(2,e[o])}finally{Cw(r,c)}}}}finally{null===e[eh]&&W2(e,eh),ya(-1)}}(t,e);const a=t.components;null!==a&&_L(e,a,0);const u=t.viewQuery;if(null!==u&&WT(2,u,r),o){const c=t.viewCheckHooks;null!==c&&dm(e,c)}else{const c=t.viewHooks;null!==c&&hm(e,c,2),Vw(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[fe]&=-73,VF(e)}finally{Fw()}}}function gL(t,e){for(let n=kV(t);null!==n;n=OV(n))for(let r=mn;r<n.length;r++)mL(n[r],e)}function hne(t,e,n){mL(Or(e,t),n)}function mL(t,e){if(!function TJ(t){return 128==(128&t[fe])}(t))return;const n=t[G],r=t[fe];if(80&r&&0===e||1024&r||2===e)pL(n,t,n.template,t[St]);else if(t[Qd]>0){gL(t,1);const i=n.components;null!==i&&_L(t,i,1)}}function _L(t,e,n){for(let r=0;r<e.length;r++)hne(t,e[r],n)}class Th{get rootNodes(){const e=this._lView,n=e[G];return wh(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[St]}set context(e){this._lView[St]=e}get destroyed(){return 256==(256&this._lView[fe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[ct];if(Xn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(xm(e,r),ym(n,r))}this._attachedToViewContainer=!1}nT(this._lView[G],this._lView)}onDestroy(e){!function UF(t,e){if(256==(256&t[fe]))throw new R(911,!1);null===t[ao]&&(t[ao]=[]),t[ao].push(e)}(this._lView,e)}markForCheck(){Ih(this._cdRefInjectingView||this._lView)}detach(){this._lView[fe]&=-129}reattach(){this._lView[fe]|=128}detectChanges(){Zm(this._lView[G],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new R(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ZZ(t,e){ph(t,e,e[ce],2,null,null)}(this._lView[G],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new R(902,!1);this._appRef=e}}class fne extends Th{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Zm(e[G],e,e[St],!1)}checkNoChanges(){}get context(){return null}}class yL extends Wm{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=De(e);return new Dh(n,this.ngModule)}}function vL(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class gne{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=em(r);const i=this.injector.get(e,PT,r);return i!==PT||n===PT?i:this.parentInjector.get(e,n,r)}}class Dh extends T2{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=vL(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return vL(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function QX(t){return t.map(KX).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof ni?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new gne(e,s):e,a=o.get(C2,null);if(null===a)throw new R(407,!1);const d={rendererFactory:a,sanitizer:o.get(hte,null),effectManager:o.get(hL,null),afterRenderEventManager:o.get(LT,null)},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?function Lte(t,e,n,r){const s=r.get($2,!1)||n===fi.ShadowDom,o=t.selectRootElement(e,s);return function Ute(t){eL(t)}(o),o}(h,r,this.componentDef.encapsulation,o):Sm(h,f,function pne(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),v=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let y=null;null!==p&&(y=ST(p,o,!0));const w=GT(0,null,null,1,0,null,null,null,null,null,null),A=Ym(null,w,null,v,null,null,d,h,o,null,y);let N,j;Ow(A);try{const ae=this.componentDef;let ze,hi=null;ae.findHostDirectiveDefs?(ze=[],hi=new Map,ae.findHostDirectiveDefs(ae,ze,hi),ze.push(ae)):ze=[ae];const Bd=function _ne(t,e){const n=t[G],r=ve;return t[r]=e,Ec(n,r,2,"#host",null)}(A,p),O1e=function yne(t,e,n,r,i,s,o){const a=i[G];!function vne(t,e,n,r){for(const i of t)e.mergedAttrs=Wd(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Jm(e,e.mergedAttrs,!0),null!==n&&YV(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=ST(e,i[oo]));const c=s.rendererFactory.createRenderer(e,n);let l=16;n.signals?l=4096:n.onPush&&(l=64);const d=Ym(i,Z2(n),null,l,i[t.index],t,s,c,null,null,u);return a.firstCreatePass&&zT(a,t,r.length-1),Xm(i,d),i[t.index]=d}(Bd,p,ae,ze,A,d,h);j=OF(w,ve),p&&function Ene(t,e,n,r){if(r)vw(t,n,["ng-version",A2.full]);else{const{attrs:i,classes:s}=function YX(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!pi(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&vw(t,n,i),s&&s.length>0&&QV(t,n,s.join(" "))}}(h,ae,p,r),void 0!==n&&function wne(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(j,this.ngContentSelectors,n),N=function Ine(t,e,n,r,i,s){const o=yn(),a=i[G],u=gr(o,i);rL(a,i,o,n,null,r);for(let l=0;l<n.length;l++)On(va(i,a,o.directiveStart+l,o),i);iL(a,i,o),u&&On(u,i);const c=va(i,a,o.directiveStart+o.componentOffset,o);if(t[St]=i[St]=c,null!==s)for(const l of s)l(c,e);return BT(a,o,t),c}(O1e,ae,ze,hi,A,[Tne]),QT(w,A,null)}finally{Fw()}return new mne(this.componentType,N,_c(j,A),A,j)}}class mne extends ote{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new fne(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;KT(s[G],s,i,e,n),this.previousInputValues.set(e,n),Ih(Or(this._tNode.index,s))}}get injector(){return new er(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Tne(){const t=yn();lm(C()[G],t)}function Ve(t){let e=function IL(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(mi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new R(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=e_(t.inputs),o.inputTransforms=e_(t.inputTransforms),o.declaredInputs=e_(t.declaredInputs),o.outputs=e_(t.outputs);const a=i.hostBindings;a&&bne(t,a);const u=i.viewQuery,c=i.contentQueries;if(u&&Cne(t,u),c&&Ane(t,c),Kg(t.inputs,i.inputs),Kg(t.declaredInputs,i.declaredInputs),Kg(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Kg(o.inputTransforms,i.inputTransforms)),mi(i)&&i.data.animation){const l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===Ve&&(n=!1)}}e=Object.getPrototypeOf(e)}!function Dne(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Wd(i.hostAttrs,n=Wd(n,i.hostAttrs))}}(r)}function e_(t){return t===Mi?{}:t===Re?[]:t}function Cne(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function Ane(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function bne(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function t_(t){return!!function YT(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Vn(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}let LL=function UL(t,e,n,r){return lo(!0),e[ce].createComment("")};function Da(t,e,n){const r=C();return Vn(r,ec(),e)&&function Lr(t,e,n,r,i,s,o,a){const u=gr(e,n);let l,c=e.inputs;!a&&null!=c&&(l=c[r])?(KT(t,n,l,r,i),ma(e)&&function Hte(t,e){const n=Or(e,t);16&n[fe]||(n[fe]|=64)}(n,e.index)):3&e.type&&(r=function zte(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(Ce(),function pt(){const t=ne.lFrame;return OF(t.tView,t.selectedIndex)}(),r,t,e,r[ce],n,!1),Da}function n0(t,e,n,r,i){const o=i?"class":"style";KT(t,n,e.inputs[o],o,r)}function Qe(t,e,n,r){const i=C(),s=Ce(),o=ve+t,a=i[ce],u=s.firstCreatePass?function rre(t,e,n,r,i,s){const o=e.consts,u=Ec(e,t,2,r,co(o,i));return qT(e,n,u,co(o,s)),null!==u.attrs&&Jm(u,u.attrs,!1),null!==u.mergedAttrs&&Jm(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],c=BL(s,i,u,a,e,t);i[o]=c;const l=sm(u);return Fi(u,!0),YV(a,c,u),32!=(32&u.flags)&&cm()&&Pm(s,i,c,u),0===function bJ(){return ne.lFrame.elementDepthCount}()&&On(c,i),function SJ(){ne.lFrame.elementDepthCount++}(),l&&(jT(s,i,u),BT(s,u,i)),null!==r&&$T(i,u),Qe}function nt(){let t=yn();Rw()?function Pw(){ne.lFrame.isParent=!1}():(t=t.parent,Fi(t,!1));const e=t;(function RJ(t){return ne.skipHydrationRootTNode===t})(e)&&function kJ(){ne.skipHydrationRootTNode=null}(),function xJ(){ne.lFrame.elementDepthCount--}();const n=Ce();return n.firstCreatePass&&(lm(n,t),Ew(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function XJ(t){return 0!=(8&t.flags)}(e)&&n0(n,e,C(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function JJ(t){return 0!=(16&t.flags)}(e)&&n0(n,e,C(),e.stylesWithoutHost,!1),nt}function Pc(t,e,n,r){return Qe(t,e,n,r),nt(),Pc}let BL=(t,e,n,r,i,s)=>(lo(!0),Sm(r,i,function JF(){return ne.lFrame.currentNamespace}()));function xh(t){return!!t&&"function"==typeof t.then}function GL(t){return!!t&&"function"==typeof t.subscribe}function Ln(t,e,n,r){const i=C(),s=Ce(),o=yn();return function zL(t,e,n,r,i,s,o){const a=sm(r),c=t.firstCreatePass&&function cL(t){return t.cleanup||(t.cleanup=[])}(t),l=e[St],d=function uL(t){return t[Hu]||(t[Hu]=[])}(e);let h=!0;if(3&r.type||o){const g=gr(r,e),m=o?o(g):g,v=d.length,y=o?A=>o(Ke(A[r.index])):r.index;let w=null;if(!o&&a&&(w=function lre(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[Hu],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==w)(w.__ngLastListenerFn__||w).__ngNextListenerFn__=s,w.__ngLastListenerFn__=s,h=!1;else{s=WL(r,e,l,s,!1);const A=n.listen(m,i,s);d.push(s,A),c&&c.push(i,y,v,v+1)}}else s=WL(r,e,l,s,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const N=e[p[m]][p[m+1]].subscribe(s),j=d.length;d.push(s,N),c&&c.push(i,r.index,j,-(j+1))}}}(s,i,i[ce],o,t,e,r),Ln}function HL(t,e,n,r){try{return Oi(6,e,n),!1!==n(r)}catch(i){return dL(t,i),!1}finally{Oi(7,e,n)}}function WL(t,e,n,r,i){return function s(o){if(o===Function)return r;Ih(t.componentOffset>-1?Or(t.index,e):e);let u=HL(e,n,r,o),c=s.__ngNextListenerFn__;for(;c;)u=HL(e,n,c,o)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function o_(t,e){return t<<17|e<<2}function po(t){return t>>17&32767}function a0(t){return 2|t}function Ca(t){return(131068&t)>>2}function u0(t,e){return-131069&t|e<<2}function c0(t){return 1|t}function rU(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?po(s):Ca(s),u=!1;for(;0!==a&&(!1===u||o);){const l=t[a+1];Ire(t[a],e)&&(u=!0,t[a+1]=r?c0(l):a0(l)),a=r?po(l):Ca(l)}u&&(t[n+1]=r?a0(s):c0(s))}function Ire(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&uc(t,e)>=0}function a_(t,e){return function _i(t,e,n,r){const i=C(),s=Ce(),o=function Is(t){const e=ne.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function hU(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[Zn()],o=function dU(t,e){return e>=t.expandoStartIndex}(t,n);(function mU(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function xre(t,e,n,r){const i=function Nw(t){const e=ne.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Rh(n=l0(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=l0(i,t,e,n,r),null===s){let u=function Rre(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Ca(r))return t[po(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=l0(null,t,e,u[1],r),u=Rh(u,e.attrs,r),function Pre(t,e,n,r){t[po(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function Mre(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Rh(r,t[s].hostAttrs,n);return Rh(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function yre(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=po(o),u=Ca(o);t[r]=n;let l,c=!1;if(Array.isArray(n)?(l=n[1],(null===l||uc(n,l)>0)&&(c=!0)):l=n,i)if(0!==u){const h=po(t[a+1]);t[r+1]=o_(h,a),0!==h&&(t[h+1]=u0(t[h+1],r)),t[a+1]=function mre(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=o_(a,0),0!==a&&(t[a+1]=u0(t[a+1],r)),a=r;else t[r+1]=o_(u,0),0===a?a=r:t[u+1]=u0(t[u+1],r),u=r;c&&(t[r+1]=a0(t[r+1])),rU(t,l,r,!0),rU(t,l,r,!1),function vre(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&uc(s,e)>=0&&(n[r+1]=c0(n[r+1]))}(e,l,t,r,s),o=o_(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==he&&Vn(i,o,e)&&function pU(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1],l=function _re(t){return 1==(1&t)}(c)?gU(u,e,n,i,Ca(c),o):void 0;u_(l)||(u_(s)||function gre(t){return 2==(2&t)}(c)&&(s=gU(u,null,n,i,a,o)),function cee(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:ho.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ho.Important),t.setStyle(n,r,i,s))}}(r,o,um(Zn(),n),i,s))}(s,s.data[Zn()],i,i[ce],t,i[o+1]=function Fre(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Wt(Vr(t)))),t}(e,n),r,o)}(t,e,null,!0),a_}function l0(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=Rh(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Rh(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Fr(t,o,!!n||e[++s]))}return void 0===t?null:t}function gU(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],c=Array.isArray(u),l=c?u[1]:u,d=null===l;let h=n[i+1];h===he&&(h=d?Re:void 0);let f=d?zw(h,r):l===r?h:void 0;if(c&&!u_(f)&&(f=zw(u,r)),u_(f)&&(a=f,o))return a;const p=t[i+1];i=o?po(p):Ca(p)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=zw(u,r))}return a}function u_(t){return void 0!==t}function In(t,e=""){const n=C(),r=Ce(),i=t+ve,s=r.firstCreatePass?Ec(r,i,1,e,null):r.data[i],o=_U(r,n,s,e,t);n[i]=o,cm()&&Pm(r,n,o,s),Fi(s,!1)}let _U=(t,e,n,r,i)=>(lo(!0),function bm(t,e){return t.createText(e)}(e[ce],r));function Nc(t){return d0("",t,""),Nc}function d0(t,e,n){const r=C(),i=function Tc(t,e,n,r){return Vn(t,ec(),n)?e+ue(n)+r:he}(r,t,e,n);return i!==he&&function Ds(t,e,n){const r=um(e,t);!function VV(t,e,n){t.setValue(e,n)}(t[ce],r,n)}(r,Zn(),i),d0}const Oc="en-US";let UU=Oc;function p0(t,e,n,r,i){if(t=re(t),Array.isArray(t))for(let s=0;s<t.length;s++)p0(t[s],e,n,r,i);else{const s=Ce(),o=C(),a=yn();let u=wa(t)?t:re(t.provide);const c=_2(t),l=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(wa(t)||!t.multi){const f=new ih(c,i,P),p=m0(u,e,i?l:l+h,d);-1===p?($w(pm(a,o),s,u),g0(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{const f=m0(u,e,l+h,d),p=m0(u,e,l,l+h),m=p>=0&&n[p];if(i&&!m||!i&&!(f>=0&&n[f])){$w(pm(a,o),s,u);const v=function rse(t,e,n,r,i){const s=new ih(t,n,P);return s.multi=[],s.index=e,s.componentProviders=0,lB(s,i,r&&!n),s}(i?nse:tse,n.length,i,r,c);!i&&m&&(n[p].providerFactory=v),g0(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),o.push(v)}else g0(s,t,f>-1?f:p,lB(n[i?p:f],c,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function g0(t,e,n,r){const i=wa(e),s=function Gee(t){return!!t.useClass}(e);if(i||s){const u=(s?re(e.useClass):e).prototype.ngOnDestroy;if(u){const c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const l=c.indexOf(n);-1===l?c.push(n,[r,u]):c[l+1].push(r,u)}else c.push(n,u)}}}function lB(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function m0(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function tse(t,e,n,r){return _0(this.multi,[])}function nse(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=va(n,n[G],this.providerFactory.index,r);s=a.slice(0,o),_0(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],_0(i,s);return s}function _0(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function lt(t,e=[]){return n=>{n.providersResolver=(r,i)=>function ese(t,e,n){const r=Ce();if(r.firstCreatePass){const i=mi(t);p0(n,r.data,r.blueprint,i,!0),p0(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class ba{}class dB{}class y0 extends ba{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yL(this);const i=kr(e);this._bootstrapComponents=Ts(i.bootstrap),this._r3Injector=P2(e,n,[{provide:ba,useValue:this},{provide:Wm,useValue:this.componentFactoryResolver},...r],Wt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class v0 extends dB{constructor(e){super(),this.moduleType=e}create(e){return new y0(this.moduleType,e,[])}}class hB extends ba{constructor(e){super(),this.componentFactoryResolver=new yL(this),this.instance=null;const n=new Bm([...e.providers,{provide:ba,useValue:this},{provide:Wm,useValue:this.componentFactoryResolver}],e.parent||Um(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function I0(t,e,n=null){return new hB({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let ose=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=f2(0,n.type),i=r.length>0?I0([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Z({token:t,providedIn:"environment",factory:()=>new t(J(ni))})}return t})();function fB(t){t.getStandaloneInjector=e=>e.get(ose).getOrCreateStandaloneInjector(t)}function kse(t,e,n,r=!0){const i=e[G];if(function tee(t,e,n,r){const i=mn+r,s=n.length;r>0&&(n[i-1][gi]=e),r<s-mn?(e[gi]=n[i],fV(n,mn+r,e)):(n.push(e),e[gi]=null),e[ct]=n;const o=e[Xd];null!==o&&n!==o&&function nee(t,e){const n=t[Yu];e[xt]!==e[ct][ct][xt]&&(t[fF]=!0),null===n?t[Yu]=[e]:n.push(e)}(o,e);const a=e[Ni];null!==a&&a.insertView(t),e[fe]|=128}(i,e,t,n),r){const s=oT(n,t),o=e[ce],a=Rm(o,t[ki]);null!==a&&function JZ(t,e,n,r,i,s){r[yt]=i,r[kn]=e,ph(t,r,n,1,i,s)}(i,t[kn],o,e,a,s)}}Symbol;let Cs=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Vse}return t})();const Ose=Cs,Fse=class extends Ose{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function Nse(t,e,n,r){const i=e.tView,a=Ym(t,i,n,4096&t[fe]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Xd]=t[e.index];const c=t[Ni];return null!==c&&(a[Ni]=c.createEmbeddedView(i)),QT(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new Th(i)}};function Vse(){return function f_(t,e){return 4&t.type?new Fse(e,t,_c(t,e)):null}(yn(),C())}let ii=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Gse}return t})();function Gse(){return function PB(t,e){let n;const r=e[t.index];return Xn(r)?n=r:(n=oL(r,e,null,t),e[t.index]=n,Xm(e,n)),MB(n,e,t,r),new xB(n,t,e)}(yn(),C())}const qse=ii,xB=class extends qse{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return _c(this._hostTNode,this._hostLView)}get injector(){return new er(this._hostTNode,this._hostLView)}get parentInjector(){const e=gm(this._hostTNode,this._hostLView);if(Uw(e)){const n=oh(e,this._hostLView),r=sh(e);return new er(n[G].data[r+8],n)}return new er(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=RB(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-mn}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function uh(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}const u=o?e:new Dh(De(e)),c=r||this.parentInjector;if(!s&&null==u.ngModule){const m=(o?c:this.parentInjector).get(ni,null);m&&(s=m)}De(u.componentType??{});const f=u.create(c,i,null,s);return this.insertImpl(f.hostView,a,false),f}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function DJ(t){return Xn(t[ct])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const c=i[ct],l=new xB(c,c[kn],c[ct]);l.detach(l.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return kse(a,i,o,!r),e.attachToViewContainerRef(),fV(T0(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=RB(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=xm(this._lContainer,n);r&&(ym(T0(this._lContainer),n),nT(r[G],r))}detach(e){const n=this._adjustIndex(e,-1),r=xm(this._lContainer,n);return r&&null!=ym(T0(this._lContainer),n)?new Th(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function RB(t){return t[8]}function T0(t){return t[8]||(t[8]=[])}let MB=function NB(t,e,n,r){if(t[ki])return;let i;i=8&n.type?Ke(r):function zse(t,e){const n=t[ce],r=n.createComment(""),i=gr(e,t);return Ia(n,Rm(n,i),r,function oee(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[ki]=i};const k0=new W("Application Initializer");let O0=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=q(k0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(xh(s))n.push(s);else if(GL(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ij=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const As=new W("LocaleId",{providedIn:"root",factory:()=>q(As,ye.Optional|ye.SkipSelf)||function woe(){return typeof $localize<"u"&&$localize.locale||Oc}()});let sj=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Yr(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Coe{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let oj=(()=>{class t{compileModuleSync(n){return new v0(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=Ts(kr(n).declarations).reduce((o,a)=>{const u=De(a);return u&&o.push(new Dh(u)),o},[]);return new Coe(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const lj=new W(""),__=new W("");let B0,L0=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,B0||(function zoe(t){B0=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(J(Fe),J(U0),J(__))};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac})}return t})(),U0=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return B0?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),go=null;const dj=new W("AllowMultipleToken"),j0=new W("PlatformDestroyListeners"),$0=new W("appBootstrapListener");class fj{constructor(e,n){this.name=e,this.token=n}}function gj(t,e,n=[]){const r=`Platform: ${e}`,i=new W(r);return(s=[])=>{let o=G0();if(!o||o.injector.get(dj,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function Koe(t){if(go&&!go.get(dj,!1))throw new R(400,!1);(function hj(){!function cJ(t){CF=t}(()=>{throw new R(600,!1)})})(),go=t;const e=t.get(_j);(function pj(t){t.get(y2,null)?.forEach(n=>n())})(t)}(function mj(t=[],e){return Fn.create({name:e,providers:[{provide:_T,useValue:"platform"},{provide:j0,useValue:new Set([()=>go=null])},...t]})}(a,r))}return function Yoe(t){const e=G0();if(!e)throw new R(401,!1);return e}()}}function G0(){return go?.get(_j)??null}let _j=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function Xoe(t="zone.js",e){return"noop"===t?new Dte:"zone.js"===t?new Fe(e):t}(r?.ngZone,function yj(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function sse(t,e,n){return new y0(t,e,n)}(n.moduleType,this.injector,function Tj(t){return[{provide:Fe,useFactory:t},{provide:_h,multi:!0,useFactory:()=>{const e=q(Zoe,{optional:!0});return()=>e.initialize()}},{provide:wj,useFactory:Joe},{provide:F2,useFactory:V2}]}(()=>i)),o=s.injector.get(ws,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{y_(this._modules,s),a.unsubscribe()})}),function vj(t,e,n){try{const r=n();return xh(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(O0);return a.runInitializers(),a.donePromise.then(()=>(function BU(t){Xr(t,"Expected localeId to be defined"),"string"==typeof t&&(UU=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(As,Oc)||Oc),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=Ij({},r);return function Hoe(t,e,n){const r=new v0(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(Lc);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new R(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new R(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(j0,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(J(Fn))};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Ij(t,e){return Array.isArray(e)?e.reduce(Ij,t):{...t,...e}}let Lc=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=q(wj),this.zoneIsStable=q(F2),this.componentTypes=[],this.components=[],this.isStable=q(sj).hasPendingTasks.pipe(Pi(n=>n?ie(!1):this.zoneIsStable),function IX(t,e=ro){return t=t??EX,Ht((n,r)=>{let i,s=!0;n.subscribe(Ut(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}(),GO()),this._injector=q(ni)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof T2;if(!this._injector.get(O0).done)throw!i&&function zu(t){const e=De(t)||gn(t)||Yn(t);return null!==e&&e.standalone}(n),new R(405,!1);let o;o=i?n:this._injector.get(Wm).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function Woe(t){return t.isBoundToModule}(o)?void 0:this._injector.get(ba),c=o.create(Fn.NULL,[],r||o.selector,a),l=c.location.nativeElement,d=c.injector.get(lj,null);return d?.registerApplication(l),c.onDestroy(()=>{this.detachView(c.hostView),y_(this.components,c),d?.unregisterApplication(l)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new R(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;y_(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get($0,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>y_(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new R(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function y_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const wj=new W("",{providedIn:"root",factory:()=>q(ws).handleError.bind(void 0)});function Joe(){const t=q(Fe),e=q(ws);return n=>t.runOutsideAngular(()=>e.handleError(n))}let Zoe=(()=>{class t{constructor(){this.zone=q(Fe),this.applicationRef=q(Lc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let v_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=tae}return t})();function tae(t){return function nae(t,e,n){if(ma(t)&&!n){const r=Or(t.index,e);return new Th(r,r)}return 47&t.type?new Th(e[xt],e):null}(yn(),C(),16==(16&t))}class bj{constructor(){}supports(e){return t_(e)}create(e){return new uae(e)}}const aae=(t,e)=>e;class uae{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||aae}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<xj(r,i,s)?n:r,a=xj(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,l=u-i;if(c!=l){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;l<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=l-c}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!t_(e))throw new R(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function kne(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new cae(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new Sj),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Sj),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class cae{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lae{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class Sj{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new lae,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xj(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Pj(){return new w_([new bj])}let w_=(()=>{class t{static#e=this.\u0275prov=Z({token:t,providedIn:"root",factory:Pj});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Pj()),deps:[[t,new Im,new mr]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new R(901,!1)}}return t})();const gae=gj(null,"core",[]);let mae=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(J(Lc))};static#t=this.\u0275mod=Nr({type:t});static#n=this.\u0275inj=dr({})}return t})();let Q0=null;function mo(){return Q0}class Rae{}const Er=new W("DocumentToken");let Y0=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:function(){return q(Mae)},providedIn:"platform"})}return t})();const Pae=new W("Location Initialized");let Mae=(()=>{class t extends Y0{constructor(){super(),this._doc=q(Er),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return mo().getBaseHref(this._doc)}onPopState(n){const r=mo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=mo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function X0(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function jj(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function bs(t){return t&&"?"!==t[0]?"?"+t:t}let xa=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:function(){return q(Gj)},providedIn:"root"})}return t})();const $j=new W("appBaseHref");let Gj=(()=>{class t extends xa{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??q(Er).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return X0(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+bs(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+bs(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+bs(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(J(Y0),J($j,8))};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Nae=(()=>{class t extends xa{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=X0(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+bs(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+bs(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(J(Y0),J($j,8))};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac})}return t})(),J0=(()=>{class t{constructor(n){this._subject=new vt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function Fae(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(jj(qj(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+bs(r))}normalize(n){return t.stripTrailingSlash(function Oae(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,qj(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+bs(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+bs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=bs;static#t=this.joinWithSlash=X0;static#n=this.stripTrailingSlash=jj;static#r=this.\u0275fac=function(r){return new(r||t)(J(xa))};static#i=this.\u0275prov=Z({token:t,factory:function(){return function kae(){return new J0(J(xa))}()},providedIn:"root"})}return t})();function qj(t){return t.replace(/\/index.html$/,"")}class Tue{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let t$=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Tue(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),n$(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{n$(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(P(ii),P(Cs),P(w_))};static#t=this.\u0275dir=te({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function n$(t,e){t.context.$implicit=e.item}let o$=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Nr({type:t});static#n=this.\u0275inj=dr({})}return t})();function u$(t){return"server"===t}let Zue=(()=>{class t{static#e=this.\u0275prov=Z({token:t,providedIn:"root",factory:()=>new ece(J(Er),window)})}return t})();class ece{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function tce(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Cce extends Rae{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class gD extends Cce{static makeCurrent(){!function xae(t){Q0||(Q0=t)}(new gD)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Ace(){return qh=qh||document.querySelector("base"),qh?qh.getAttribute("href"):null}();return null==n?null:function bce(t){F_=F_||document.createElement("a"),F_.setAttribute("href",t);const e=F_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){qh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Iue(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let F_,qh=null,xce=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac})}return t})();const mD=new W("EventManagerPlugins");let f$=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new R(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(J(mD),J(Fe))};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac})}return t})();class p${constructor(e){this._doc=e}}const _D="ng-app-id";let g$=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=u$(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${_D}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(_D),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(_D,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(J(Er),J(jm),J(v2,8),J(fo))};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac})}return t})();const yD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vD=/%COMP%/g,Nce=new W("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function _$(t,e){return e.map(n=>n.replace(vD,t))}let y$=(()=>{class t{constructor(n,r,i,s,o,a,u,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=u$(a),this.defaultRenderer=new ID(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===fi.ShadowDom&&(r={...r,encapsulation:fi.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof I$?i.applyToHost(n):i instanceof ED&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case fi.Emulated:s=new I$(u,c,r,this.appId,l,o,a,d);break;case fi.ShadowDom:return new Vce(u,c,n,r,o,a,this.nonce,d);default:s=new ED(u,c,r,l,o,a,d)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(J(f$),J(g$),J(jm),J(Nce),J(Er),J(fo),J(Fe),J(v2))};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac})}return t})();class ID{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(yD[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(v$(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(v$(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new R(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=yD[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=yD[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(ho.DashCase|ho.Important)?e.style.setProperty(n,r,i&ho.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&ho.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=mo().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function v$(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Vce extends ID{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=_$(i.id,i.styles);for(const l of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ED extends ID{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?_$(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class I$ extends ED{constructor(e,n,r,i,s,o,a,u){const c=i+"-"+r.id;super(e,n,r,s,o,a,u,c),this.contentAttr=function kce(t){return"_ngcontent-%COMP%".replace(vD,t)}(c),this.hostAttr=function Oce(t){return"_nghost-%COMP%".replace(vD,t)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let Lce=(()=>{class t extends p${constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(J(Er))};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac})}return t})();const E$=["alt","control","meta","shift"],Uce={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bce={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let jce=(()=>{class t extends p${constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mo().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),E$.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=Uce[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),E$.forEach(o=>{o!==i&&(0,Bce[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(J(Er))};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac})}return t})();const T$=[{provide:fo,useValue:"browser"},{provide:y2,useValue:function $ce(){gD.makeCurrent()},multi:!0},{provide:Er,useFactory:function qce(){return function pee(t){cT=t}(document),document},deps:[]}],zce=gj(gae,"browser",T$),Hce=new W(""),D$=[{provide:__,useClass:class Sce{addToWindow(e){We.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new R(5103,!1);return s},We.getAllAngularTestabilities=()=>e.getAllTestabilities(),We.getAllAngularRootElements=()=>e.getAllRootElements(),We.frameworkStabilizers||(We.frameworkStabilizers=[]),We.frameworkStabilizers.push(r=>{const i=We.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?mo().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:lj,useClass:L0,deps:[Fe,U0,__]},{provide:L0,useClass:L0,deps:[Fe,U0,__]}],C$=[{provide:_T,useValue:"root"},{provide:ws,useFactory:function Gce(){return new ws},deps:[]},{provide:mD,useClass:Lce,multi:!0,deps:[Er,Fe,fo]},{provide:mD,useClass:jce,multi:!0,deps:[Er]},y$,g$,f$,{provide:C2,useExisting:y$},{provide:class nce{},useClass:xce,deps:[]},[]];let Wce=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:jm,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(J(Hce,12))};static#t=this.\u0275mod=Nr({type:t});static#n=this.\u0275inj=dr({providers:[...C$,...D$],imports:[o$,mae]})}return t})(),A$=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(J(Er))};static#t=this.\u0275prov=Z({token:t,factory:function(r){let i=null;return i=r?new r:function Qce(){return new A$(J(Er))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;let x$=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:function(r){let i=null;return i=r?new(r||t):J(R$),i},providedIn:"root"})}return t})(),R$=(()=>{class t extends x${constructor(n){super(),this._doc=n}sanitize(n,r){if(null==r)return null;switch(n){case ti.NONE:return r;case ti.HTML:return Li(r,"HTML")?Vr(r):o2(this._doc,String(r)).toString();case ti.STYLE:return Li(r,"Style")?Vr(r):r;case ti.SCRIPT:if(Li(r,"Script"))return Vr(r);throw new R(5200,!1);case ti.URL:return Li(r,"URL")?Vr(r):Om(String(r));case ti.RESOURCE_URL:if(Li(r,"ResourceURL"))return Vr(r);throw new R(5201,!1);default:throw new R(5202,!1)}}bypassSecurityTrustHtml(n){return function Eee(t){return new gee(t)}(n)}bypassSecurityTrustStyle(n){return function wee(t){return new mee(t)}(n)}bypassSecurityTrustScript(n){return function Tee(t){return new _ee(t)}(n)}bypassSecurityTrustUrl(n){return function Dee(t){return new yee(t)}(n)}bypassSecurityTrustResourceUrl(n){return function Cee(t){return new vee(t)}(n)}static#e=this.\u0275fac=function(r){return new(r||t)(J(Er))};static#t=this.\u0275prov=Z({token:t,factory:function(r){let i=null;return i=r?new r:function Zce(t){return new R$(t.get(Er))}(J(Fn)),i},providedIn:"root"})}return t})();const{isArray:ele}=Array,{getPrototypeOf:tle,prototype:nle,keys:rle}=Object;function M$(t){if(1===t.length){const e=t[0];if(ele(e))return{args:e,keys:null};if(function ile(t){return t&&"object"==typeof t&&tle(t)===nle}(e)){const n=rle(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:sle}=Array;function N$(t){return ke(e=>function ole(t,e){return sle(e)?t(...e):t(e)}(t,e))}function k$(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}let O$=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(P(Ui),P(yr))};static#t=this.\u0275dir=te({type:t})}return t})(),Ra=(()=>{class t extends O${static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=vn(t)))(i||t)}}();static#t=this.\u0275dir=te({type:t,features:[Ve]})}return t})();const Hi=new W("NgValueAccessor"),cle={provide:Hi,useExisting:He(()=>V_),multi:!0},dle=new W("CompositionEventMode");let V_=(()=>{class t extends O${constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function lle(){const t=mo()?mo().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(P(Ui),P(yr),P(dle,8))};static#t=this.\u0275dir=te({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Ln("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[lt([cle]),Ve]})}return t})();const Un=new W("NgValidators"),vo=new W("NgAsyncValidators");function H$(t){return null!=t}function W$(t){return xh(t)?en(t):t}function K$(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function Q$(t,e){return e.map(n=>n(t))}function Y$(t){return t.map(e=>function fle(t){return!t.validate}(e)?e:n=>e.validate(n))}function TD(t){return null!=t?function X$(t){if(!t)return null;const e=t.filter(H$);return 0==e.length?null:function(n){return K$(Q$(n,e))}}(Y$(t)):null}function DD(t){return null!=t?function J$(t){if(!t)return null;const e=t.filter(H$);return 0==e.length?null:function(n){return function ale(...t){const e=jO(t),{args:n,keys:r}=M$(t),i=new ft(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,c=o;for(let l=0;l<o;l++){let d=!1;Pr(n[l]).subscribe(Ut(s,h=>{d||(d=!0,c--),a[l]=h},()=>u--,void 0,()=>{(!u||!d)&&(c||s.next(r?k$(r,a):a),s.complete())}))}});return e?i.pipe(N$(e)):i}(Q$(n,e).map(W$)).pipe(ke(K$))}}(Y$(t)):null}function Z$(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function CD(t){return t?Array.isArray(t)?t:[t]:[]}function U_(t,e){return Array.isArray(t)?t.includes(e):t===e}function n4(t,e){const n=CD(e);return CD(t).forEach(i=>{U_(n,i)||n.push(i)}),n}function r4(t,e){return CD(e).filter(n=>!U_(t,n))}class i4{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=TD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=DD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class ir extends i4{get formDirective(){return null}get path(){return null}}class Io extends i4{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class s4{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let o4=(()=>{class t extends s4{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(P(Io,2))};static#t=this.\u0275dir=te({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&a_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ve]})}return t})(),a4=(()=>{class t extends s4{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(P(ir,10))};static#t=this.\u0275dir=te({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&a_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Ve]})}return t})();const zh="VALID",j_="INVALID",jc="PENDING",Hh="DISABLED";function SD(t){return($_(t)?t.validators:t)||null}function xD(t,e){return($_(e)?e.asyncValidators:t)||null}function $_(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class d4{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===zh}get invalid(){return this.status===j_}get pending(){return this.status==jc}get disabled(){return this.status===Hh}get enabled(){return this.status!==Hh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(n4(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(n4(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(r4(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(r4(e,this._rawAsyncValidators))}hasValidator(e){return U_(this._rawValidators,e)}hasAsyncValidator(e){return U_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=jc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Hh,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=zh,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zh||this.status===jc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hh:zh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=jc,this._hasOwnPendingAsyncValidator=!0;const n=W$(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new vt,this.statusChanges=new vt}_calculateStatus(){return this._allControlsDisabled()?Hh:this.errors?j_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jc)?jc:this._anyControlsHaveStatus(j_)?j_:zh}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){$_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function _le(t){return Array.isArray(t)?TD(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function yle(t){return Array.isArray(t)?DD(t):t||null}(this._rawAsyncValidators)}}class RD extends d4{constructor(e,n,r){super(SD(n),xD(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function l4(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new R(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function c4(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new R(1e3,"");if(!r[n])throw new R(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const $c=new W("CallSetDisabledState",{providedIn:"root",factory:()=>G_}),G_="always";function Wh(t,e,n=G_){PD(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function Ele(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&h4(t,e)})}(t,e),function Tle(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function wle(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&h4(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function Ile(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function H_(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function PD(t,e){const n=function e4(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Z$(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function t4(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(Z$(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();H_(e._rawValidators,i),H_(e._rawAsyncValidators,i)}function h4(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const Sle={provide:ir,useExisting:He(()=>K_)},Kh=(()=>Promise.resolve())();let K_=(()=>{class t extends ir{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new vt,this.form=new RD({},TD(n),DD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Kh.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Wh(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Kh.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Kh.then(()=>{const r=this._findContainer(n.path),i=new RD({});(function f4(t,e){PD(t,e)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Kh.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Kh.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function p4(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(r){return new(r||t)(P(Un,10),P(vo,10),P($c,8))};static#t=this.\u0275dir=te({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Ln("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[lt([Sle]),Ve]})}return t})();function g4(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function m4(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const _4=class extends d4{constructor(e=null,n,r){super(SD(n),xD(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),$_(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=m4(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){g4(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){g4(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){m4(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Ple={provide:Io,useExisting:He(()=>OD)},I4=(()=>Promise.resolve())();let OD=(()=>{class t extends Io{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new _4,this._registered=!1,this.name="",this.update=new vt,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function kD(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===V_?n=s:function Ale(t){return Object.getPrototypeOf(t.constructor)===Ra}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function ND(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Wh(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){I4.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&function Uc(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}(r);I4.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function q_(t,e){return[...e.path,t]}(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||t)(P(ir,9),P(Un,10),P(vo,10),P(Hi,10),P(v_,8),P($c,8))};static#t=this.\u0275dir=te({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[lt([Ple]),Ve,Zr]})}return t})(),E4=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=te({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})(),T4=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Nr({type:t});static#n=this.\u0275inj=dr({})}return t})(),tde=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Nr({type:t});static#n=this.\u0275inj=dr({imports:[T4]})}return t})(),rde=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:$c,useValue:n.callSetDisabledState??G_}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Nr({type:t});static#n=this.\u0275inj=dr({imports:[tde]})}return t})();function j4(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function _(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(u){j4(s,r,i,o,a,"next",u)}function a(u){j4(s,r,i,o,a,"throw",u)}o(void 0)})}}const $4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},GD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;u||(f=64,o||(h=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($4(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==d)throw new ade;r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ade extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Gc=function(t){return function(t){const e=$4(t);return GD.encodeByteArray(e,!0)}(t).replace(/\./g,"")},Q_=function(t){try{return GD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},Y_=()=>{try{return function lde(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Q_(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},q4=()=>{var t;return null===(t=Y_())||void 0===t?void 0:t.config};class X_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function Br(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function qD(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Eo(){try{return"object"==typeof indexedDB}catch{return!1}}function qc(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}})}function zD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class wr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ei.prototype.create)}}class Ei{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function wde(t,e){return t.replace(Tde,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new wr(i,`${this.serviceName}: ${o} (${i}).`,r)}}const Tde=/\{\$([^}]+)}/g;function HD(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(H4(s)&&H4(o)){if(!HD(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function H4(t){return null!==t&&"object"==typeof t}function W4(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class Cde{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function Ade(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=WD),void 0===i.error&&(i.error=WD),void 0===i.complete&&(i.complete=WD);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WD(){}const bde=1e3,Sde=2,xde=144e5,Rde=.5;function QD(t,e=bde,n=Sde){const r=e*Math.pow(n,t),i=Math.round(Rde*r*(Math.random()-.5)*2);return Math.min(xde,r+i)}function jr(t){return t&&t._delegate?t._delegate:t}class jt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ma="[DEFAULT]";class Mde{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new X_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function kde(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ma})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ma){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return _(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Ma){return this.instances.has(e)}getOptions(e=Ma){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===Ma?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=Ma){return this.component?this.component.multipleInstances?e:Ma:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ode{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Mde(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const YD=[];var _e=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(_e||{});const K4={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},Fde=_e.INFO,Vde={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},Lde=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=Vde[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class wo{constructor(e){this.name=e,this._logLevel=Fde,this._logHandler=Lde,this._userLogHandler=null,YD.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?K4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const Ude=(t,e)=>e.some(n=>t instanceof n);let Q4,Y4;const X4=new WeakMap,XD=new WeakMap,J4=new WeakMap,JD=new WeakMap,ZD=new WeakMap;let eC={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return XD.get(t);if("objectStoreNames"===e)return t.objectStoreNames||J4.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return To(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Hde(t){return"function"==typeof t?function zde(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function jde(){return Y4||(Y4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(tC(this),e),To(X4.get(this))}:function(...e){return To(t.apply(tC(this),e))}:function(e,...n){const r=t.call(tC(this),e,...n);return J4.set(r,e.sort?e.sort():[e]),To(r)}}(t):(t instanceof IDBTransaction&&function Gde(t){if(XD.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});XD.set(t,e)}(t),Ude(t,function Bde(){return Q4||(Q4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,eC):t)}function To(t){if(t instanceof IDBRequest)return function $de(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(To(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&X4.set(n,t)}).catch(()=>{}),ZD.set(e,t),e}(t);if(JD.has(t))return JD.get(t);const e=Hde(t);return e!==t&&(JD.set(t,e),ZD.set(e,t)),e}const tC=t=>ZD.get(t);function Z4(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=To(o);return r&&o.addEventListener("upgradeneeded",u=>{r(To(o.result),u.oldVersion,u.newVersion,To(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Wde=["get","getKey","getAll","getAllKeys","count"],Kde=["put","add","delete","clear"],nC=new Map;function eG(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(nC.get(e))return nC.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Kde.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Wde.includes(n))return;const s=function(){var o=_(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return nC.set(e,s),s}!function qde(t){eC=t(eC)}(t=>({...t,get:(e,n,r)=>eG(e,n)||t.get(e,n,r),has:(e,n)=>!!eG(e,n)||t.has(e,n)}));class Qde{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function Yde(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const rC="@firebase/app",Na=new wo("@firebase/app"),Z_="[DEFAULT]",whe={[rC]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ka=new Map,ey=new Map;function The(t,e){try{t.container.addComponent(e)}catch(n){Na.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zc(t){const e=t.name;if(ey.has(e))return Na.debug(`There were multiple attempts to register component ${e}.`),!1;ey.set(e,t);for(const n of ka.values())The(n,t);return!0}const Rs=new Ei("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Che{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rs.create("app-deleted",{appName:this._name})}}const ty="9.23.0";function rG(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Z_,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Rs.create("bad-app-name",{appName:String(i)});if(n||(n=q4()),!n)throw Rs.create("no-options");const s=ka.get(i);if(s){if(HD(n,s.options)&&HD(r,s.config))return s;throw Rs.create("duplicate-app",{appName:i})}const o=new Ode(i);for(const u of ey.values())o.addComponent(u);const a=new Che(n,r,o);return ka.set(i,a),a}function iG(t=Z_){const e=ka.get(t);if(!e&&t===Z_&&q4())return rG();if(!e)throw Rs.create("no-app",{appName:t});return e}function sG(){return Array.from(ka.values())}function ai(t,e,n){var r;let i=null!==(r=whe[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Na.warn(a.join(" "))}zc(new jt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Ahe="firebase-heartbeat-database",bhe=1,Qh="firebase-heartbeat-store";let sC=null;function oG(){return sC||(sC=Z4(Ahe,bhe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Qh)}}).catch(t=>{throw Rs.create("idb-open",{originalErrorMessage:t.message})})),sC}function oC(){return(oC=_(function*(t){try{return yield(yield oG()).transaction(Qh).objectStore(Qh).get(uG(t))}catch(e){if(e instanceof wr)Na.warn(e.message);else{const n=Rs.create("idb-get",{originalErrorMessage:e?.message});Na.warn(n.message)}}})).apply(this,arguments)}function aG(t,e){return aC.apply(this,arguments)}function aC(){return(aC=_(function*(t,e){try{const r=(yield oG()).transaction(Qh,"readwrite");yield r.objectStore(Qh).put(e,uG(t)),yield r.done}catch(n){if(n instanceof wr)Na.warn(n.message);else{const r=Rs.create("idb-set",{originalErrorMessage:n?.message});Na.warn(r.message)}}})).apply(this,arguments)}function uG(t){return`${t.name}!${t.options.appId}`}class Phe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Nhe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return _(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=cG();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return _(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=cG(),{heartbeatsToSend:r,unsentEntries:i}=function Mhe(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),lG(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),lG(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Gc(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function cG(){return(new Date).toISOString().substring(0,10)}class Nhe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(function*(){return!!Eo()&&qc().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return _(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function She(t){return oC.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return _(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return aG(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return _(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return aG(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function lG(t){return Gc(JSON.stringify({version:2,heartbeats:t})).length}!function khe(t){zc(new jt("platform-logger",e=>new Qde(e),"PRIVATE")),zc(new jt("heartbeat",e=>new Phe(e),"PRIVATE")),ai(rC,"0.9.13",t),ai(rC,"0.9.13","esm2017"),ai("fire-js","")}(""),ai("firebase","9.23.0","app");class Vhe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function Lhe(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const uC="@firebase/app",Oa=new wo("@firebase/app"),lfe={[uC]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Fa=new Map,ry=new Map;function dfe(t,e){try{t.container.addComponent(e)}catch(n){Oa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $r(t){const e=t.name;if(ry.has(e))return Oa.debug(`There were multiple attempts to register component ${e}.`),!1;ry.set(e,t);for(const n of Fa.values())dfe(n,t);return!0}function cC(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const Ps=new Ei("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});function Tr(t,e,n){var r;let i=null!==(r=lfe[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Oa.warn(a.join(" "))}$r(new jt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const gfe="firebase-heartbeat-database",mfe=1,Yh="firebase-heartbeat-store";let dC=null;function fG(){return dC||(dC=Z4(gfe,mfe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Yh)}}).catch(t=>{throw Ps.create("idb-open",{originalErrorMessage:t.message})})),dC}function hC(){return(hC=_(function*(t){try{return yield(yield fG()).transaction(Yh).objectStore(Yh).get(gG(t))}catch(e){if(e instanceof wr)Oa.warn(e.message);else{const n=Ps.create("idb-get",{originalErrorMessage:e?.message});Oa.warn(n.message)}}})).apply(this,arguments)}function pG(t,e){return fC.apply(this,arguments)}function fC(){return(fC=_(function*(t,e){try{const r=(yield fG()).transaction(Yh,"readwrite");yield r.objectStore(Yh).put(e,gG(t)),yield r.done}catch(n){if(n instanceof wr)Oa.warn(n.message);else{const r=Ps.create("idb-set",{originalErrorMessage:n?.message});Oa.warn(r.message)}}})).apply(this,arguments)}function gG(t){return`${t.name}!${t.options.appId}`}class Ife{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wfe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return _(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=mG();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return _(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=mG(),{heartbeatsToSend:r,unsentEntries:i}=function Efe(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),_G(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_G(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Gc(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function mG(){return(new Date).toISOString().substring(0,10)}class wfe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(function*(){return!!Eo()&&qc().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return _(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function _fe(t){return hC.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return _(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return pG(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return _(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return pG(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function _G(t){return Gc(JSON.stringify({version:2,heartbeats:t})).length}!function Tfe(t){$r(new jt("platform-logger",e=>new Vhe(e),"PRIVATE")),$r(new jt("heartbeat",e=>new Ife(e),"PRIVATE")),Tr(uC,"0.9.19",t),Tr(uC,"0.9.19","esm2017"),Tr("fire-js","")}("");const Dfe=(t,e)=>e.some(n=>t instanceof n);let yG,vG;const IG=new WeakMap,pC=new WeakMap,EG=new WeakMap,gC=new WeakMap,mC=new WeakMap;let _C={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return pC.get(t);if("objectStoreNames"===e)return t.objectStoreNames||EG.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Do(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Pfe(t){return"function"==typeof t?function Rfe(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Afe(){return vG||(vG=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(yC(this),e),Do(IG.get(this))}:function(...e){return Do(t.apply(yC(this),e))}:function(e,...n){const r=t.call(yC(this),e,...n);return EG.set(r,e.sort?e.sort():[e]),Do(r)}}(t):(t instanceof IDBTransaction&&function Sfe(t){if(pC.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});pC.set(t,e)}(t),Dfe(t,function Cfe(){return yG||(yG=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,_C):t)}function Do(t){if(t instanceof IDBRequest)return function bfe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Do(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&IG.set(n,t)}).catch(()=>{}),mC.set(e,t),e}(t);if(gC.has(t))return gC.get(t);const e=Pfe(t);return e!==t&&(gC.set(t,e),mC.set(e,t)),e}const yC=t=>mC.get(t),Nfe=["get","getKey","getAll","getAllKeys","count"],kfe=["put","add","delete","clear"],vC=new Map;function wG(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(vC.get(e))return vC.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=kfe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Nfe.includes(n))return;const s=function(){var o=_(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return vC.set(e,s),s}!function xfe(t){_C=t(_C)}(t=>({...t,get:(e,n,r)=>wG(e,n)||t.get(e,n,r),has:(e,n)=>!!wG(e,n)||t.has(e,n)}));const TG="@firebase/installations",IC="0.6.4",DG=1e4,CG=`w:${IC}`,AG="FIS_v2",Ofe="https://firebaseinstallations.googleapis.com/v1",Ffe=36e5,Ms=new Ei("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function bG(t){return t instanceof wr&&t.code.includes("request-failed")}function EC({projectId:t}){return`${Ofe}/projects/${t}/installations`}function SG(t){return{token:t.token,requestStatus:2,expiresIn:Bfe(t.expiresIn),creationTime:Date.now()}}function wC(t,e){return TC.apply(this,arguments)}function TC(){return(TC=_(function*(t,e){const r=(yield e.json()).error;return Ms.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function xG({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function DC(t){return CC.apply(this,arguments)}function CC(){return(CC=_(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function Bfe(t){return Number(t.replace("s","000"))}function AC(){return(AC=_(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=EC(t),i=xG(t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:AG,appId:t.appId,sdkVersion:CG})},u=yield DC(()=>fetch(r,a));if(u.ok){const c=yield u.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:SG(c.authToken)}}throw yield wC("Create Installation",u)})).apply(this,arguments)}function PG(t){return new Promise(e=>{setTimeout(e,t)})}const qfe=/^[cdef][\w-]{21}$/,bC="";function zfe(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function Hfe(t){return function Gfe(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return qfe.test(n)?n:bC}catch{return bC}}function Hc(t){return`${t.appName}!${t.appId}`}const Wc=new Map;function MG(t,e){const n=Hc(t);NG(n,e),function Qfe(t,e){const n=function kG(){return!Va&&"BroadcastChannel"in self&&(Va=new BroadcastChannel("[Firebase] FID Change"),Va.onmessage=t=>{NG(t.data.key,t.data.fid)}),Va}();n&&n.postMessage({key:t,fid:e}),function OG(){0===Wc.size&&Va&&(Va.close(),Va=null)}()}(n,e)}function NG(t,e){const n=Wc.get(t);if(n)for(const r of n)r(e)}let Va=null;const Yfe="firebase-installations-database",Xfe=1,La="firebase-installations-store";let SC=null;function xC(){return SC||(SC=function Mfe(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Do(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Do(o.result),u.oldVersion,u.newVersion,Do(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}(Yfe,Xfe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(La)}})),SC}function iy(t,e){return RC.apply(this,arguments)}function RC(){return(RC=_(function*(t,e){const n=Hc(t),i=(yield xC()).transaction(La,"readwrite"),s=i.objectStore(La),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&MG(t,e.fid),e})).apply(this,arguments)}function PC(t){return MC.apply(this,arguments)}function MC(){return(MC=_(function*(t){const e=Hc(t),r=(yield xC()).transaction(La,"readwrite");yield r.objectStore(La).delete(e),yield r.done})).apply(this,arguments)}function Xh(t,e){return NC.apply(this,arguments)}function NC(){return(NC=_(function*(t,e){const n=Hc(t),i=(yield xC()).transaction(La,"readwrite"),s=i.objectStore(La),o=yield s.get(n),a=e(o);return void 0===a?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&MG(t,a.fid),a})).apply(this,arguments)}function kC(t){return OC.apply(this,arguments)}function OC(){return OC=_(function*(t){let e;const n=yield Xh(t.appConfig,r=>{const i=function Jfe(t){return VG(t||{fid:zfe(),registrationStatus:0})}(r),s=function Zfe(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Ms.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function epe(t,e){return FC.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:tpe(t)}:{installationEntry:e}}(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===bC?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}}),OC.apply(this,arguments)}function FC(){return FC=_(function*(t,e){try{const n=yield function $fe(t,e){return AC.apply(this,arguments)}(t,e);return iy(t.appConfig,n)}catch(n){throw bG(n)&&409===n.customData.serverCode?yield PC(t.appConfig):yield iy(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}),FC.apply(this,arguments)}function tpe(t){return VC.apply(this,arguments)}function VC(){return(VC=_(function*(t){let e=yield FG(t.appConfig);for(;1===e.registrationStatus;)yield PG(100),e=yield FG(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield kC(t);return r||n}return e})).apply(this,arguments)}function FG(t){return Xh(t,e=>{if(!e)throw Ms.create("installation-not-found");return VG(e)})}function VG(t){return function npe(t){return 1===t.registrationStatus&&t.registrationTime+DG<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function LC(){return(LC=_(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=function ipe(t,{fid:e}){return`${EC(t)}/${e}/authTokens:generate`}(t,n),i=function RG(t,{refreshToken:e}){const n=xG(t);return n.append("Authorization",function jfe(t){return`${AG} ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:CG,appId:t.appId}})},u=yield DC(()=>fetch(r,a));if(u.ok)return SG(yield u.json());throw yield wC("Generate Auth Token",u)})).apply(this,arguments)}function UC(t){return BC.apply(this,arguments)}function BC(){return BC=_(function*(t,e=!1){let n;const r=yield Xh(t.appConfig,s=>{if(!UG(s))throw Ms.create("not-registered");const o=s.authToken;if(!e&&function ape(t){return 2===t.requestStatus&&!function upe(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Ffe}(t)}(o))return s;if(1===o.requestStatus)return n=function spe(t,e){return jC.apply(this,arguments)}(t,e),s;{if(!navigator.onLine)throw Ms.create("app-offline");const a=function cpe(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(s);return n=function ope(t,e){return $C.apply(this,arguments)}(t,a),a}});return n?yield n:r.authToken}),BC.apply(this,arguments)}function jC(){return(jC=_(function*(t,e){let n=yield LG(t.appConfig);for(;1===n.authToken.requestStatus;)yield PG(100),n=yield LG(t.appConfig);const r=n.authToken;return 0===r.requestStatus?UC(t,e):r})).apply(this,arguments)}function LG(t){return Xh(t,e=>{if(!UG(e))throw Ms.create("not-registered");return function lpe(t){return 1===t.requestStatus&&t.requestTime+DG<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function $C(){return $C=_(function*(t,e){try{const n=yield function rpe(t,e){return LC.apply(this,arguments)}(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield iy(t.appConfig,r),n}catch(n){if(!bG(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield iy(t.appConfig,r)}else yield PC(t.appConfig);throw n}}),$C.apply(this,arguments)}function UG(t){return void 0!==t&&2===t.registrationStatus}function GC(){return(GC=_(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield kC(e);return r?r.catch(console.error):UC(e).catch(console.error),n.fid})).apply(this,arguments)}function qC(){return qC=_(function*(t,e=!1){const n=t;return yield function fpe(t){return zC.apply(this,arguments)}(n),(yield UC(n,e)).token}),qC.apply(this,arguments)}function zC(){return(zC=_(function*(t){const{registrationPromise:e}=yield kC(t);e&&(yield e)})).apply(this,arguments)}function KC(t){return Ms.create("missing-app-config-values",{valueName:t})}const BG="installations",ype=t=>{const e=t.getProvider("app").getImmediate(),n=function mpe(t){if(!t||!t.options)throw KC("App Configuration");if(!t.name)throw KC("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw KC(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:cC(e,"heartbeat"),_delete:()=>Promise.resolve()}},vpe=t=>{const n=cC(t.getProvider("app").getImmediate(),BG).getImmediate();return{getId:()=>function dpe(t){return GC.apply(this,arguments)}(n),getToken:i=>function hpe(t){return qC.apply(this,arguments)}(n,i)}};(function Ipe(){$r(new jt(BG,ype,"PUBLIC")),$r(new jt("installations-internal",vpe,"PRIVATE"))})(),Tr(TG,IC),Tr(TG,IC,"esm2017");const QC="@firebase/remote-config",Dr=new Ei("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ppe{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var n=this;return _(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield n.client.fetch(e),o=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(n.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function Mpe(t=navigator){return t.languages&&t.languages[0]||t.language}class Npe{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var n=this;return _(function*(){const[r,i]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:n.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:n.appId,language_code:Mpe()},c={method:"POST",headers:a,body:JSON.stringify(u)},l=fetch(o,c),d=new Promise((v,y)=>{e.signal.addEventListener(()=>{const w=new Error("The operation was aborted.");w.name="AbortError",y(w)})});let h;try{yield Promise.race([l,d]),h=yield l}catch(v){let y="fetch-client-network";throw"AbortError"===v?.name&&(y="fetch-timeout"),Dr.create(y,{originalErrorMessage:v?.message})}let f=h.status;const p=h.headers.get("ETag")||void 0;let g,m;if(200===h.status){let v;try{v=yield h.json()}catch(y){throw Dr.create("fetch-client-parse",{originalErrorMessage:y?.message})}g=v.entries,m=v.state}if("INSTANCE_STATE_UNSPECIFIED"===m?f=500:"NO_CHANGE"===m?f=304:("NO_TEMPLATE"===m||"EMPTY_CONFIG"===m)&&(g={}),304!==f&&200!==f)throw Dr.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:g}})()}}class Fpe{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return _(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){var i=this;return _(function*(){yield function kpe(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Dr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function Ope(t){if(!(t instanceof wr&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+QD(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class Upe{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function oy(t,e){const n=t.target.error||void 0;return Dr.create(e,{originalErrorMessage:n&&n?.message})}const Ua="app_namespace_store";class Gpe{constructor(e,n,r,i=function $pe(){return new Promise((t,e)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=r=>{e(oy(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ua,{keyPath:"compositeKey"})}}catch(n){e(Dr.create("storage-open",{originalErrorMessage:n?.message}))}})}()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return _(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Ua],"readonly").objectStore(Ua),u=n.createCompositeKey(e);try{const c=a.get(u);c.onerror=l=>{s(oy(l,"storage-get"))},c.onsuccess=l=>{const d=l.target.result;i(d?d.value:void 0)}}catch(c){s(Dr.create("storage-get",{originalErrorMessage:c?.message}))}})})()}set(e,n){var r=this;return _(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const u=i.transaction([Ua],"readwrite").objectStore(Ua),c=r.createCompositeKey(e);try{const l=u.put({compositeKey:c,value:n});l.onerror=d=>{o(oy(d,"storage-set"))},l.onsuccess=()=>{s()}}catch(l){o(Dr.create("storage-set",{originalErrorMessage:l?.message}))}})})()}delete(e){var n=this;return _(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Ua],"readwrite").objectStore(Ua),u=n.createCompositeKey(e);try{const c=a.delete(u);c.onerror=l=>{s(oy(l,"storage-delete"))},c.onsuccess=()=>{i()}}catch(c){s(Dr.create("storage-delete",{originalErrorMessage:c?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class qpe{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return _(function*(){const n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield n;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Hpe(){return eA.apply(this,arguments)}function eA(){return(eA=_(function*(){if(!Eo())return!1;try{return yield qc()}catch{return!1}})).apply(this,arguments)}!function zpe(){$r(new jt("remote-config",function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Dr.create("registration-window");if(!Eo())throw Dr.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Dr.create("registration-project-id");if(!o)throw Dr.create("registration-api-key");if(!a)throw Dr.create("registration-app-id");const u=new Gpe(a,r.name,n=n||"firebase"),c=new qpe(u),l=new wo(QC);l.logLevel=_e.ERROR;const d=new Npe(i,"10.4.0",n,s,o,a),h=new Fpe(d,u),f=new Ppe(h,u,c,l),p=new Upe(r,f,c,u,l);return function Spe(t){const e=jr(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),Tr(QC,"0.4.4"),Tr(QC,"0.4.4","esm2017")}();const Wpe=(t,e)=>e.some(n=>t instanceof n);let qG,zG;const HG=new WeakMap,tA=new WeakMap,WG=new WeakMap,nA=new WeakMap,rA=new WeakMap;let iA={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return tA.get(t);if("objectStoreNames"===e)return t.objectStoreNames||WG.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ns(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function ege(t){return"function"==typeof t?function Zpe(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Qpe(){return zG||(zG=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(sA(this),e),Ns(HG.get(this))}:function(...e){return Ns(t.apply(sA(this),e))}:function(e,...n){const r=t.call(sA(this),e,...n);return WG.set(r,e.sort?e.sort():[e]),Ns(r)}}(t):(t instanceof IDBTransaction&&function Xpe(t){if(tA.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});tA.set(t,e)}(t),Wpe(t,function Kpe(){return qG||(qG=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,iA):t)}function Ns(t){if(t instanceof IDBRequest)return function Ype(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ns(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&HG.set(n,t)}).catch(()=>{}),rA.set(e,t),e}(t);if(nA.has(t))return nA.get(t);const e=ege(t);return e!==t&&(nA.set(t,e),rA.set(e,t)),e}const sA=t=>rA.get(t);function KG(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ns(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ns(o.result),u.oldVersion,u.newVersion,Ns(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function oA(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),Ns(n).then(()=>{})}const tge=["get","getKey","getAll","getAllKeys","count"],nge=["put","add","delete","clear"],aA=new Map;function QG(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(aA.get(e))return aA.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=nge.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!tge.includes(n))return;const s=function(){var o=_(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return aA.set(e,s),s}!function Jpe(t){iA=t(iA)}(t=>({...t,get:(e,n,r)=>QG(e,n)||t.get(e,n,r),has:(e,n)=>!!QG(e,n)||t.has(e,n)}));const rge="/firebase-messaging-sw.js",ige="/firebase-cloud-messaging-push-scope",YG="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",sge="https://fcmregistrations.googleapis.com/v1",XG="google.c.a.c_id",oge="google.c.a.c_l",age="google.c.a.ts";var ay=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(ay||{});function ks(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function lge(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const uA="fcm_token_details_db",dge=5,JG="fcm_token_object_Store";function cA(){return cA=_(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(uA))return null;let e=null;return(yield KG(uA,dge,{upgrade:(r=_(function*(i,s,o,a){var u;if(s<2||!i.objectStoreNames.contains(JG))return;const c=a.objectStore(JG),l=yield c.index("fcmSenderId").get(t);if(yield c.clear(),l)if(2===s){const d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(u=d.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:ks(d.vapidKey)}}}else if(3===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:ks(d.auth),p256dh:ks(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:ks(d.vapidKey)}}}else if(4===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:ks(d.auth),p256dh:ks(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:ks(d.vapidKey)}}}}),function(s,o,a,u){return r.apply(this,arguments)})})).close(),yield oA(uA),yield oA("fcm_vapid_details_db"),yield oA("undefined"),function fge(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),cA.apply(this,arguments)}const pge="firebase-messaging-database",gge=1,Ba="firebase-messaging-store";let lA=null;function dA(){return lA||(lA=KG(pge,gge,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Ba)}})),lA}function ZG(t){return hA.apply(this,arguments)}function hA(){return hA=_(function*(t){const e=mA(t),r=yield(yield dA()).transaction(Ba).objectStore(Ba).get(e);if(r)return r;{const i=yield function hge(t){return cA.apply(this,arguments)}(t.appConfig.senderId);if(i)return yield fA(t,i),i}}),hA.apply(this,arguments)}function fA(t,e){return pA.apply(this,arguments)}function pA(){return(pA=_(function*(t,e){const n=mA(t),i=(yield dA()).transaction(Ba,"readwrite");return yield i.objectStore(Ba).put(e,n),yield i.done,e})).apply(this,arguments)}function gA(){return(gA=_(function*(t){const e=mA(t),r=(yield dA()).transaction(Ba,"readwrite");yield r.objectStore(Ba).delete(e),yield r.done})).apply(this,arguments)}function mA({appConfig:t}){return t.appId}const En=new Ei("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function yge(t,e){return _A.apply(this,arguments)}function _A(){return(_A=_(function*(t,e){const n=yield EA(t),r=tq(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(IA(t.appConfig),i)).json()}catch(o){throw En.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw En.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw En.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function yA(){return(yA=_(function*(t,e){const n=yield EA(t),r=tq(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${IA(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw En.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw En.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw En.create("token-update-no-token");return s.token})).apply(this,arguments)}function eq(t,e){return vA.apply(this,arguments)}function vA(){return(vA=_(function*(t,e){const r={method:"DELETE",headers:yield EA(t)};try{const s=yield(yield fetch(`${IA(t.appConfig)}/${e}`,r)).json();if(s.error)throw En.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw En.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function IA({projectId:t}){return`${sge}/projects/${t}/registrations`}function EA(t){return wA.apply(this,arguments)}function wA(){return(wA=_(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function tq({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==YG&&(i.web.applicationPubKey=r),i}const Ige=6048e5;function TA(){return TA=_(function*(t){const e=yield function Tge(t,e){return bA.apply(this,arguments)}(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:ks(e.getKey("auth")),p256dh:ks(e.getKey("p256dh"))},r=yield ZG(t.firebaseDependencies);if(r){if(function Dge(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}(r.subscriptionOptions,n))return Date.now()>=r.createTime+Ige?function wge(t,e){return CA.apply(this,arguments)}(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield eq(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return rq(t.firebaseDependencies,n)}return rq(t.firebaseDependencies,n)}),TA.apply(this,arguments)}function DA(){return DA=_(function*(t){const e=yield ZG(t.firebaseDependencies);e&&(yield eq(t.firebaseDependencies,e.token),yield function mge(t){return gA.apply(this,arguments)}(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}),DA.apply(this,arguments)}function CA(){return CA=_(function*(t,e){try{const n=yield function vge(t,e){return yA.apply(this,arguments)}(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield fA(t.firebaseDependencies,r),n}catch(n){throw yield function nq(t){return DA.apply(this,arguments)}(t),n}}),CA.apply(this,arguments)}function rq(t,e){return AA.apply(this,arguments)}function AA(){return(AA=_(function*(t,e){const r={token:yield yge(t,e),createTime:Date.now(),subscriptionOptions:e};return yield fA(t,r),r.token})).apply(this,arguments)}function bA(){return(bA=_(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:lge(e)})})).apply(this,arguments)}function iq(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function Cge(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}(e,t),function Age(t,e){e.data&&(t.data=e.data)}(e,t),function bge(t,e){var n,r,i,s,o;if(!(e.fcmOptions||null!==(n=e.notification)&&void 0!==n&&n.click_action))return;t.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(t.fcmOptions.link=a);const u=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}(e,t),e}function sq(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function SA(t){return En.create("missing-app-config-values",{valueName:t})}sq("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),sq("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Rge{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function xge(t){if(!t||!t.options)throw SA("App Configuration Object");if(!t.name)throw SA("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw SA(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function xA(){return(xA=_(function*(t){try{t.swRegistration=yield navigator.serviceWorker.register(rge,{scope:ige}),t.swRegistration.update().catch(()=>{})}catch(e){throw En.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function RA(){return(RA=_(function*(t,e){if(!e&&!t.swRegistration&&(yield function oq(t){return xA.apply(this,arguments)}(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw En.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function PA(){return(PA=_(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=YG)})).apply(this,arguments)}function MA(){return MA=_(function*(t,e){if(!navigator)throw En.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw En.create("permission-blocked");return yield function Mge(t,e){return PA.apply(this,arguments)}(t,e?.vapidKey),yield function Pge(t,e){return RA.apply(this,arguments)}(t,e?.serviceWorkerRegistration),function Ege(t){return TA.apply(this,arguments)}(t)}),MA.apply(this,arguments)}function NA(){return(NA=_(function*(t,e,n){const r=function kge(t){switch(t){case ay.NOTIFICATION_CLICKED:return"notification_open";case ay.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[XG],message_name:n[oge],message_time:n[age],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function kA(){return kA=_(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===ay.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(iq(n)):t.onMessageHandler.next(iq(n)));const r=n.data;(function Sge(t){return"object"==typeof t&&!!t&&XG in t})(r)&&"1"===r["google.c.a.e"]&&(yield function Nge(t,e,n){return NA.apply(this,arguments)}(t,n.messageType,r))}),kA.apply(this,arguments)}const uq="@firebase/messaging",Fge=t=>{const e=new Rge(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function Oge(t,e){return kA.apply(this,arguments)}(e,n)),e},Vge=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>function aq(t,e){return MA.apply(this,arguments)}(e,r)}};function lq(){return OA.apply(this,arguments)}function OA(){return(OA=_(function*(){try{yield qc()}catch{return!1}return typeof window<"u"&&Eo()&&zD()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Lge(){$r(new jt("messaging",Fge,"PUBLIC")),$r(new jt("messaging-internal",Vge,"PRIVATE")),Tr(uq,"0.12.4"),Tr(uq,"0.12.4","esm2017")}();const uy="analytics",jge="firebase_id",$ge="origin",Gge=6e4,qge="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",LA="https://www.googletagmanager.com/gtag/js",tn=new wo("@firebase/analytics"),sr=new Ei("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Hge(t){if(!t.startsWith(LA)){const e=sr.create("invalid-gtag-resource",{gtagURL:t});return tn.warn(e.message),""}return t}function dq(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function UA(){return(UA=_(function*(t,e,n,r,i,s){const o=r[i];try{if(o)yield e[o];else{const u=(yield dq(n)).find(c=>c.measurementId===i);u&&(yield e[u.appId])}}catch(a){tn.error(a)}t("config",i,s)})).apply(this,arguments)}function BA(){return(BA=_(function*(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield dq(n);for(const u of o){const c=a.find(d=>d.measurementId===u),l=c&&e[c.appId];if(!l){s=[];break}s.push(l)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){tn.error(s)}})).apply(this,arguments)}const tme=30,hq=new class rme{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function ime(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function jA(){return(jA=_(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:ime(r)},s=qge.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const u=yield o.json();null!==(e=u.error)&&void 0!==e&&e.message&&(a=u.error.message)}catch{}throw sr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function $A(){return($A=_(function*(t,e=hq,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw sr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw sr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new cme;return setTimeout(_(function*(){a.abort()}),void 0!==n?n:Gge),fq({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function fq(t,e,n){return GA.apply(this,arguments)}function GA(){return GA=_(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=hq){var s;const{appId:o,measurementId:a}=t;try{yield function ame(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(sr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(u){if(a)return tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:o,measurementId:a};throw u}try{const u=yield function sme(t){return jA.apply(this,arguments)}(t);return i.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!function ume(t){if(!(t instanceof wr&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(i.deleteThrottleMetadata(o),a)return tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw u}const l=503===Number(null===(s=c?.customData)||void 0===s?void 0:s.httpStatus)?QD(n,i.intervalMillis,tme):QD(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(o,d),tn.debug(`Calling attemptFetch again in ${l} millis`),fq(t,d,r,i)}}),GA.apply(this,arguments)}class cme{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let qA,XA;function zA(){return(zA=_(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const s=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function JA(){return(JA=_(function*(){if(!Eo())return tn.warn(sr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield qc()}catch(t){return tn.warn(sr.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}return!0})).apply(this,arguments)}function ZA(){return ZA=_(function*(t,e,n,r,i,s,o){var a;const u=function ome(t){return $A.apply(this,arguments)}(t);u.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&tn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>tn.error(f)),e.push(u);const c=function mme(){return JA.apply(this,arguments)}().then(f=>{if(f)return r.getId()}),[l,d]=yield Promise.all([u,c]);(function eme(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(LA)&&n.src.includes(t))return n;return null})(s)||function Kge(t,e){const n=function Wge(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}("firebase-js-sdk-policy",{createScriptURL:Hge}),r=document.createElement("script"),i=`${LA}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,l.measurementId),XA&&(i("consent","default",XA),function pq(t){XA=t}(void 0)),i("js",new Date);const h=null!==(a=o?.config)&&void 0!==a?a:{};return h[$ge]="firebase",h.update=!0,null!=d&&(h[jge]=d),i("config",l.measurementId,h),qA&&(i("set",qA),function gq(t){qA=t}(void 0)),l.measurementId}),ZA.apply(this,arguments)}class yme{constructor(e){this.app=e}_delete(){return delete Wi[this.app.options.appId],Promise.resolve()}}let Wi={},mq=[];const _q={};let vq,Ki,cy="dataLayer",eb=!1;function Ime(t,e,n){!function vme(){const t=[];if(qD()&&t.push("This is a browser extension environment."),zD()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=sr.create("invalid-analytics-context",{errorInfo:e});tn.warn(n.message)}}();const r=t.options.appId;if(!r)throw sr.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw sr.create("no-api-key");tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Wi[r])throw sr.create("already-exists",{id:r});if(!eb){!function Qge(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(cy);const{wrappedGtag:s,gtagCore:o}=function Zge(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function Jge(t,e,n,r){function s(){return s=_(function*(o,...a){try{if("event"===o){const[u,c]=a;yield function Xge(t,e,n,r,i){return BA.apply(this,arguments)}(t,e,n,u,c)}else if("config"===o){const[u,c]=a;yield function Yge(t,e,n,r,i,s){return UA.apply(this,arguments)}(t,e,n,r,u,c)}else if("consent"===o){const[u]=a;t("consent","update",u)}else if("get"===o){const[u,c,l]=a;t("get",u,c,l)}else if("set"===o){const[u]=a;t("set",u)}else t(o,...a)}catch(u){tn.error(u)}}),s.apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}(Wi,mq,_q,cy,"gtag");Ki=s,vq=o,eb=!0}return Wi[r]=function _me(t,e,n,r,i,s,o){return ZA.apply(this,arguments)}(t,mq,_q,e,vq,cy,n),new yme(t)}function wme(){return tb.apply(this,arguments)}function tb(){return(tb=_(function*(){if(qD()||!zD()||!Eo())return!1;try{return yield qc()}catch{return!1}})).apply(this,arguments)}const Iq="@firebase/analytics";!function Dme(){$r(new jt(uy,(e,{options:n})=>Ime(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),$r(new jt("analytics-internal",function t(e){try{const n=e.getProvider(uy).getImmediate();return{logEvent:(r,i,s)=>function Tme(t,e,n,r){t=jr(t),function lme(t,e,n,r,i){return zA.apply(this,arguments)}(Ki,Wi[t.app.options.appId],e,n,r).catch(i=>tn.error(i))}(n,r,i,s)}}catch(n){throw sr.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),Tr(Iq,"0.10.0"),Tr(Iq,"0.10.0","esm2017")}();class Cme extends lr{constructor(e,n){super()}schedule(e,n=0){return this}}const ly={setInterval(t,e,...n){const{delegate:r}=ly;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=ly;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class wq extends Cme{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return ly.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&ly.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,$u(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const Tq={now:()=>(Tq.delegate||Date).now(),delegate:void 0};class Jh{constructor(e,n=Jh.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Jh.now=Tq.now;class Dq extends Jh{constructor(e,n=Jh.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const Sme=new class bme extends Dq{}(class Ame extends wq{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),xme=new Dq(wq);function wn(t,e,n){const r=Ge(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ht((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Ut(s,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),s.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):ro}const rb=new yc("7.6.1"),ib="__angularfire_symbol__analyticsIsSupportedValue",sb="__angularfire_symbol__analyticsIsSupported",ob="__angularfire_symbol__remoteConfigIsSupportedValue",ab="__angularfire_symbol__remoteConfigIsSupported",ub="__angularfire_symbol__messagingIsSupportedValue",cb="__angularfire_symbol__messagingIsSupported";globalThis[sb]||(globalThis[sb]=wme().then(t=>globalThis[ib]=t).catch(()=>globalThis[ib]=!1)),globalThis[cb]||(globalThis[cb]=lq().then(t=>globalThis[ub]=t).catch(()=>globalThis[ub]=!1)),globalThis[ab]||(globalThis[ab]=Hpe().then(t=>globalThis[ob]=t).catch(()=>globalThis[ob]=!1));const hb=(t,e)=>{const n=e?[e]:sG(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function Kc(){}class Cq{constructor(e,n=Sme){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class Rme{constructor(e){this.zone=e,this.task=null}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Kc,{},Kc,Kc)),n.pipe(wn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Aq=(()=>{class t{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Cq(Zone.current)),this.insideAngular=n.run(()=>new Cq(Zone.current,xme)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(n){return new(n||t)(J(Fe))},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ja(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function $a(t){return ja().ngZone.run(()=>t())}function Mme(t){return ja(),function Nme(t){return function(n){return(n=n.lift(new Rme(t.ngZone))).pipe(Wg(t.outsideAngular),Hg(t.insideAngular))}}(ja())(t)}const kme=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),$a(()=>t.apply(void 0,r))},Ga=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||(n=$a(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Kc,{},Kc,Kc)))),r[s]=kme(r[s],n));const i=function Pme(t){return ja().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof ft){const s=ja();return i.pipe(Wg(s.outsideAngular),Hg(s.insideAngular))}return $a(()=>i)}return i instanceof ft?i.pipe(Mme):i instanceof Promise?$a(()=>new Promise((s,o)=>i.then(a=>$a(()=>s(a)),a=>$a(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:$a(()=>i)};class Qc{constructor(e){return e}}class bq{constructor(){return sG()}}const fb=new W("angularfire2._apps"),Fme={provide:Qc,useFactory:function Ome(t){return t&&1===t.length?t[0]:new Qc(iG())},deps:[[new mr,fb]]},Vme={provide:bq,deps:[[new mr,fb]]};function Lme(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Qc(r)}}let Ume=(()=>{class t{constructor(n){ai("angularfire",rb.full,"core"),ai("angularfire",rb.full,"app"),ai("angular",A2.full,n.toString())}}return t.\u0275fac=function(n){return new(n||t)(J(fo))},t.\u0275mod=Nr({type:t}),t.\u0275inj=dr({providers:[Fme,Vme]}),t})();function Bme(t,...e){return{ngModule:Ume,providers:[{provide:fb,useFactory:Lme(t),multi:!0,deps:[Fe,Fn,Aq,...e]}]}}const jme=Ga(rG,!0);const $me=function Sq(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},xq=new Ei("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),dy=new wo("@firebase/auth");function hy(t,...e){dy.logLevel<=_e.ERROR&&dy.error(`Auth (${ty}): ${t}`,...e)}function Cr(t,...e){throw pb(t,...e)}function Qi(t,...e){return pb(t,...e)}function pb(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xq.create(t,...e)}function k(t,e,...n){if(!t)throw pb(e,...n)}function Yi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hy(e),new Error(e)}function Co(t,e){t||Yi(e)}function Pq(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class ef{constructor(e,n){this.shortDelay=e,this.longDelay=n,Co(n>e,"Short delay should be less than long delay!"),this.isMobile=function yde(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Br())}()||function Ide(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return function qme(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function gb(){return"http:"===Pq()||"https:"===Pq()}()||qD()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class Mq{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Hme={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Wme=new ef(3e4,6e4);function Et(t,e,n,r){return _b.apply(this,arguments)}function _b(){return(_b=_(function*(t,e,n,r,i={}){return Nq(t,i,_(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=W4(Object.assign({key:t.config.apiKey},o)).slice(1),u=yield t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),Mq.fetch()(kq(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function Nq(t,e,n){return yb.apply(this,arguments)}function yb(){return(yb=_(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Hme),e);try{const i=new Kme(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw tf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw tf(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===u)throw tf(t,"email-already-in-use",o);if("USER_DISABLED"===u)throw tf(t,"user-disabled",o);const l=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw function Rq(t,e,n){const r=Object.assign(Object.assign({},$me()),{[e]:n});return new Ei("auth","Firebase",r).create(e,{appName:t.name})}(t,l,c);Cr(t,l)}}catch(i){if(i instanceof wr)throw i;Cr(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function kq(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?function mb(t,e){Co(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}(t.config,i):`${t.config.apiScheme}://${i}`}class Kme{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qi(this.auth,"network-request-failed")),Wme.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function tf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Qi(t,e,r);return i.customData._tokenResponse=n,i}function Ib(){return(Ib=_(function*(t,e){return Et(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function wb(){return(wb=_(function*(t,e){return Et(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function nf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Tb(){return(Tb=_(function*(t,e=!1){const n=jr(t),r=yield n.getIdToken(e),i=fy(r);k(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:nf(Db(i.auth_time)),issuedAtTime:nf(Db(i.iat)),expirationTime:nf(Db(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function Db(t){return 1e3*Number(t)}function fy(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return hy("JWT malformed, contained fewer than 3 sections"),null;try{const i=Q_(n);return i?JSON.parse(i):(hy("Failed to decode base64 JWT payload"),null)}catch(i){return hy("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Fs(t,e){return Cb.apply(this,arguments)}function Cb(){return(Cb=_(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof wr&&function e_e({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class t_e{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(_(function*(){yield n.iteration()}),r)}iteration(){var e=this;return _(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class Oq{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nf(this.lastLoginAt),this.creationTime=nf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function rf(t){return Ab.apply(this,arguments)}function Ab(){return Ab=_(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield Fs(t,function Xme(t,e){return wb.apply(this,arguments)}(n,{idToken:r}));k(i?.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function i_e(t){return t.map(e=>{var{providerId:n}=e,r=ew(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],a=function r_e(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,o),l=!!t.isAnonymous&&!(t.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Oq(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)}),Ab.apply(this,arguments)}function bb(){return(bb=_(function*(t){const e=jr(t);yield rf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function Sb(){return(Sb=_(function*(t,e){const n=yield Nq(t,{},_(function*(){const r=W4({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=kq(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Mq.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class sf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){k(e.idToken,"internal-error"),k(typeof e.idToken<"u","internal-error"),k(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function Zme(t){const e=fy(t);return k(e,"internal-error"),k(typeof e.exp<"u","internal-error"),k(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return _(function*(){return k(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return _(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function s_e(t,e){return Sb.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new sf;return r&&(k("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(k("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(k("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sf,this.toJSON())}_performRefresh(){return Yi("not implemented")}}function Ao(t,e){k("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class qa{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ew(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new t_e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Oq(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return _(function*(){const r=yield Fs(n,n.stsTokenManager.getToken(n.auth,e));return k(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function Jme(t){return Tb.apply(this,arguments)}(this,e)}reload(){return function n_e(t){return bb.apply(this,arguments)}(this)}_assign(e){this!==e&&(k(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){k(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return _(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield rf(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return _(function*(){const n=yield e.getIdToken();return yield Fs(e,function Qme(t,e){return Ib.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,l;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,f=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,g=null!==(a=n.tenantId)&&void 0!==a?a:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,v=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,{uid:w,emailVerified:A,isAnonymous:N,providerData:j,stsTokenManager:ae}=n;k(w&&ae,e,"internal-error");const ze=sf.fromJSON(this.name,ae);k("string"==typeof w,e,"internal-error"),Ao(d,e.name),Ao(h,e.name),k("boolean"==typeof A,e,"internal-error"),k("boolean"==typeof N,e,"internal-error"),Ao(f,e.name),Ao(p,e.name),Ao(g,e.name),Ao(m,e.name),Ao(v,e.name),Ao(y,e.name);const hi=new qa({uid:w,auth:e,email:h,emailVerified:A,displayName:d,isAnonymous:N,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:ze,createdAt:v,lastLoginAt:y});return j&&Array.isArray(j)&&(hi.providerData=j.map(Bd=>Object.assign({},Bd))),m&&(hi._redirectEventId=m),hi}static _fromIdTokenResponse(e,n,r=!1){return _(function*(){const i=new sf;i.updateFromServerResponse(n);const s=new qa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield rf(s),s})()}}const Fq=new Map;function Vs(t){Co(t instanceof Function,"Expected a class definition");let e=Fq.get(t);return e?(Co(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Fq.set(t,e),e)}const Vq=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(function*(){return!0})()}_set(n,r){var i=this;return _(function*(){i.storage[n]=r})()}_get(n){var r=this;return _(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return _(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function py(t,e,n){return`firebase:${t}:${e}:${n}`}class Xc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=py(this.userKey,i.apiKey,s),this.fullPersistenceKey=py("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return _(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?qa._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return _(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(function*(){if(!n.length)return new Xc(Vs(Vq),e,r);const i=(yield Promise.all(n.map(function(){var c=_(function*(l){if(yield l._isAvailable())return l});return function(l){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||Vs(Vq);const o=py(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const l=yield c._get(o);if(l){const d=qa._fromJSON(e,l);c!==s&&(a=d),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(function(){var c=_(function*(l){if(l!==s)try{yield l._remove(o)}catch{}});return function(l){return c.apply(this,arguments)}}())),new Xc(s,e,r)):new Xc(s,e,r)})()}}function Lq(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function jq(t=Br()){return/iemobile/i.test(t)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function Uq(t=Br()){return/firefox\//i.test(t)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function Gq(t=Br()){return/blackberry/i.test(t)}(e))return"Blackberry";if(function qq(t=Br()){return/webos/i.test(t)}(e))return"Webos";if(function xb(t=Br()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function Bq(t=Br()){return/crios\//i.test(t)}(e))&&!e.includes("edge/"))return"Chrome";if(function $q(t=Br()){return/android/i.test(t)}(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function zq(t,e=[]){let n;switch(t){case"Browser":n=Lq(Br());break;case"Worker":n=`${Lq(Br())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ty}/${r}`}function Hq(t,e){return Pb.apply(this,arguments)}function Pb(){return(Pb=_(function*(t,e){return Et(t,"GET","/v2/recaptchaConfig",function gt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}(t,e))})).apply(this,arguments)}function Kq(t){return void 0!==t&&void 0!==t.enterprise}class Qq{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>"EMAIL_PASSWORD_PROVIDER"===n.provider&&"OFF"!==n.enforcementState)}}class Xq{constructor(e){this.type="recaptcha-enterprise",this.auth=nn(e)}verify(e="verify",n=!1){var r=this;return _(function*(){function s(){return s=_(function*(a){if(!n){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var u=_(function*(c,l){Hq(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(void 0!==d.recaptchaKey){const h=new Qq(d);return null==a.tenantId?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,c(h.siteKey)}l(new Error("recaptcha Enterprise site key undefined"))}).catch(d=>{l(d)})});return function(c,l){return u.apply(this,arguments)}}())}),s.apply(this,arguments)}function o(a,u,c){const l=window.grecaptcha;Kq(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(d=>{u(d)}).catch(()=>{u("NO_RECAPTCHA")})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,u)=>{(function i(a){return s.apply(this,arguments)})(r.auth).then(c=>{if(!n&&Kq(window.grecaptcha))o(c,a,u);else{if(typeof window>"u")return void u(new Error("RecaptchaVerifier is only supported in browser"));(function Mb(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Qi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",function c_e(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)})})("https://www.google.com/recaptcha/enterprise.js?render="+c).then(()=>{o(c,a,u)}).catch(l=>{u(l)})}}).catch(c=>{u(c)})})})()}}class f_e{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return _(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class p_e{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jq(this),this.idTokenSubscription=new Jq(this),this.beforeStateQueue=new f_e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xq,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=Vs(n)),this._initializationPromise=this.queue(_(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield Xc.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return _(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return _(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,u=s?._redirectEventId,c=yield n.tryRedirectSignIn(e);(!a||a===u)&&c?.user&&(s=c.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(a){s=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return k(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return _(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return _(function*(){try{yield rf(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function zme(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return _(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return _(function*(){const r=e?jr(e):null;return r&&k(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return _(function*(){if(!r._deleted)return e&&k(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(_(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return _(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(_(function*(){yield n.assertedPersistence.setPersistence(Vs(e))}))}initializeRecaptchaConfig(){var e=this;return _(function*(){const n=yield Hq(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Qq(n);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new Xq(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ei("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return _(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return _(function*(){if(!n.redirectPersistenceManager){const r=e&&Vs(e)||n._popupRedirectResolver;k(r,n,"argument-error"),n.redirectPersistenceManager=yield Xc.create(n,[Vs(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return _(function*(){var r,i;return n._isInitialized&&(yield n.queue(_(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return _(function*(){if(e===n.currentUser)return n.queue(_(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return k(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof n?e.addObserver(n,r,i):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return _(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return k(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zq(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return _(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return _(function*(){var n;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function Gme(t,...e){dy.logLevel<=_e.WARN&&dy.warn(`Auth (${ty}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function nn(t){return jr(t)}class Jq{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Dde(t,e){const n=new Cde(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return k(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}(function Yq(t){return`__${t}${Math.floor(1e6*Math.random())}`})("rcb"),new ef(3e4,6e4),new ef(2e3,1e4),new ef(3e4,6e4),new ef(5e3,15e3),encodeURIComponent("fac");var bz="@firebase/auth";class ove{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return _(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){k(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}Y_(),function uve(t){zc(new jt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;k(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zq(t)},c=new p_e(r,i,s,u);return function m_e(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Vs);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zc(new jt("auth-internal",e=>{const n=nn(e.getProvider("auth").getImmediate());return new ove(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ai(bz,"0.23.2",function ave(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),ai(bz,"0.23.2","esm2017")}("Browser");class Pz{constructor(){return hb("auth")}}const Ix=new Map,Mz={activated:!1,tokenObservers:[]},gve={initialized:!1,enabled:!1};function wt(t){return Ix.get(t)||Object.assign({},Mz)}function by(){return gve}const Ex="https://content-firebaseappcheck.googleapis.com/v1",vve="exchangeDebugToken",Nz={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Eve{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return _(function*(){n.stop();try{n.pending=new X_,yield function wve(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new X_,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const Tn=new Ei("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function wx(t){if(!wt(t).activated)throw Tn.create("use-before-activation",{appName:t.name})}function Ry(t,e){return Dx.apply(this,arguments)}function Dx(){return Dx=_(function*({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(t,s)}catch(d){throw Tn.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==o.status)throw Tn.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw Tn.create("fetch-parse-error",{originalErrorMessage:d?.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Tn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(u[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+c,issuedAtTimeMillis:l}}),Dx.apply(this,arguments)}function kz(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${Ex}/projects/${n}/apps/${r}:${vve}?key=${i}`,body:{debug_token:e}}}const Ave="firebase-app-check-database",bve=1,df="firebase-app-check-store";let Py=null;function Cx(){return Cx=_(function*(t,e){const r=(yield function Fz(){return Py||(Py=new Promise((t,e)=>{try{const n=indexedDB.open(Ave,bve);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Tn.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(df,{keyPath:"compositeKey"})}}catch(n){e(Tn.create("storage-open",{originalErrorMessage:n?.message}))}}),Py)}()).transaction(df,"readwrite"),s=r.objectStore(df).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var c;a(Tn.create("storage-set",{originalErrorMessage:null===(c=u.target.error)||void 0===c?void 0:c.message}))}})}),Cx.apply(this,arguments)}const hf=new wo("@firebase/app-check");function Sx(t,e){return Eo()?function xve(t,e){return function Vz(t,e){return Cx.apply(this,arguments)}(function Uz(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{hf.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Rx(){return by().enabled}function Px(){return Mx.apply(this,arguments)}function Mx(){return Mx=_(function*(){const t=by();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Mx.apply(this,arguments)}const Ove={error:"UNKNOWN_ERROR"};function Fve(t){return GD.encodeString(JSON.stringify(t),!1)}function My(t){return Nx.apply(this,arguments)}function Nx(){return Nx=_(function*(t,e=!1){const n=t.app;wx(n);const r=wt(n);let s,i=r.token;if(i&&!Zc(i)&&(r.token=void 0,i=void 0),!i){const u=yield r.cachedTokenPromise;u&&(Zc(u)?i=u:yield Sx(n,void 0))}if(!e&&i&&Zc(i))return{token:i.token};let a,o=!1;if(Rx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ry(kz(n,yield Px()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=yield r.exchangeTokenPromise;return yield Sx(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield wt(n).exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?hf.warn(u.message):hf.error(u),s=u}return i?s?a=Zc(i)?{token:i.token,internalError:s}:Gz(s):(a={token:i.token},r.token=i,yield Sx(n,i)):a=Gz(s),o&&function $z(t,e){const n=wt(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(n,a),a}),Nx.apply(this,arguments)}function kx(){return kx=_(function*(t){const e=t.app;wx(e);const{provider:n}=wt(e);if(Rx()){const r=yield Px(),{token:i}=yield Ry(kz(e,r),t.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield n.getToken();return{token:r}}}),kx.apply(this,arguments)}function Fx(t,e){const n=wt(t),r=n.tokenObservers.filter(i=>i.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function jz(t){const{app:e}=t,n=wt(e);let r=n.tokenRefresher;r||(r=function Vve(t){const{app:e}=t;return new Eve(_(function*(){let r;if(r=wt(e).token?yield My(t,!0):yield My(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const n=wt(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Nz.RETRIAL_MIN_WAIT,Nz.RETRIAL_MAX_WAIT)}(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Zc(t){return t.expireTimeMillis-Date.now()>0}function Gz(t){return{token:Fve(Ove),error:t}}class Lve{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=wt(this.app);for(const n of e)Fx(this.app,n.next);return Promise.resolve()}}const Xz="app-check-internal";!function Jve(){$r(new jt("app-check",t=>function Uve(t,e){return new Lve(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(Xz).initialize()})),$r(new jt(Xz,t=>function Bve(t){return{getToken:e=>My(t,e),getLimitedUseToken:()=>function Bz(t){return kx.apply(this,arguments)}(t),addTokenListener:e=>function Ox(t,e,n,r){const{app:i}=t,s=wt(i);if(s.tokenObservers=[...s.tokenObservers,{next:n,error:r,type:e}],s.token&&Zc(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),jz(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>jz(t))}(t,"INTERNAL",e),removeTokenListener:e=>Fx(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Tr("@firebase/app-check","0.8.0")}();class Zz{constructor(){return hb("app-check")}}typeof window<"u"&&window;var U,rIe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wi={},jx=jx||{},le=rIe||self;function ky(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ff(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var $x="closure_uid_"+(1e9*Math.random()>>>0),sIe=0;function oIe(t,e,n){return t.call.apply(t.bind,arguments)}function aIe(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Bn(t,e,n){return(Bn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oIe:aIe).apply(null,arguments)}function Oy(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function rn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function So(){this.s=this.s,this.o=this.o}So.prototype.s=!1,So.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function iIe(t){Object.prototype.hasOwnProperty.call(t,$x)&&t[$x]||(t[$x]=++sIe)}(this)},So.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const e9=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Gx(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function t9(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(ky(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function jn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}jn.prototype.h=function(){this.defaultPrevented=!0};var cIe=function(){if(!le.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{le.addEventListener("test",()=>{},e),le.removeEventListener("test",()=>{},e)}catch{}return t}();function pf(t){return/^[\s\xa0]*$/.test(t)}function Fy(){var t=le.navigator;return t&&(t=t.userAgent)?t:""}function Xi(t){return-1!=Fy().indexOf(t)}function qx(t){return qx[" "](t),t}qx[" "]=function(){};var Hx,dIe=Xi("Opera"),el=Xi("Trident")||Xi("MSIE"),n9=Xi("Edge"),zx=n9||el,r9=Xi("Gecko")&&!(-1!=Fy().toLowerCase().indexOf("webkit")&&!Xi("Edge"))&&!(Xi("Trident")||Xi("MSIE"))&&!Xi("Edge"),hIe=-1!=Fy().toLowerCase().indexOf("webkit")&&!Xi("Edge");function i9(){var t=le.document;return t?t.documentMode:void 0}e:{var Wx="",Kx=function(){var t=Fy();return r9?/rv:([^\);]+)(\)|;)/.exec(t):n9?/Edge\/([\d\.]+)/.exec(t):el?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):hIe?/WebKit\/(\S+)/.exec(t):dIe?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Kx&&(Wx=Kx?Kx[1]:""),el){var Qx=i9();if(null!=Qx&&Qx>parseFloat(Wx)){Hx=String(Qx);break e}}Hx=Wx}var fIe=le.document&&el&&(i9()||parseInt(Hx,10))||void 0;function gf(t,e){if(jn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(r9){e:{try{qx(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:pIe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&gf.$.h.call(this)}}rn(gf,jn);var pIe={2:"touch",3:"pen",4:"mouse"};gf.prototype.h=function(){gf.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var mf="closure_listenable_"+(1e6*Math.random()|0),gIe=0;function mIe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++gIe,this.fa=this.ia=!1}function Vy(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Xx(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function o9(t){const e={};for(const n in t)e[n]=t[n];return e}const a9="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function u9(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<a9.length;s++)n=a9[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ly(t){this.src=t,this.g={},this.h=0}function Jx(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=e9(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Vy(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Zx(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}Ly.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Zx(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new mIe(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var eR="closure_lm_"+(1e6*Math.random()|0),tR={};function c9(t,e,n,r,i){if(r&&r.once)return d9(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)c9(t,e[s],n,r,i);return null}return n=sR(n),t&&t[mf]?t.O(e,n,ff(r)?!!r.capture:!!r,i):l9(t,e,n,!1,r,i)}function l9(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=ff(i)?!!i.capture:!!i,a=rR(t);if(a||(t[eR]=a=new Ly(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function yIe(){const e=vIe;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)cIe||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(f9(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function d9(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)d9(t,e[s],n,r,i);return null}return n=sR(n),t&&t[mf]?t.P(e,n,ff(r)?!!r.capture:!!r,i):l9(t,e,n,!0,r,i)}function h9(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)h9(t,e[s],n,r,i);else r=ff(r)?!!r.capture:!!r,n=sR(n),t&&t[mf]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Zx(s=t.g[e],n,r,i))&&(Vy(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=rR(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Zx(e,n,r,i)),(n=-1<t?e[t]:null)&&nR(n))}function nR(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[mf])Jx(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(f9(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=rR(e))?(Jx(n,t),0==n.h&&(n.src=null,e[eR]=null)):Vy(t)}}}function f9(t){return t in tR?tR[t]:tR[t]="on"+t}function vIe(t,e){if(t.fa)t=!0;else{e=new gf(e,this);var n=t.listener,r=t.la||t.src;t.ia&&nR(t),t=n.call(r,e)}return t}function rR(t){return(t=t[eR])instanceof Ly?t:null}var iR="__closure_events_fn_"+(1e9*Math.random()>>>0);function sR(t){return"function"==typeof t?t:(t[iR]||(t[iR]=function(e){return t.handleEvent(e)}),t[iR])}function sn(){So.call(this),this.i=new Ly(this),this.S=this,this.J=null}function Dn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new jn(e,t);else if(e instanceof jn)e.target=e.target||t;else{var i=e;u9(e=new jn(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Uy(o,r,!0,e)&&i}if(i=Uy(o=e.g=t,r,!0,e)&&i,i=Uy(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Uy(o=e.g=n[s],r,!1,e)&&i}function Uy(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&Jx(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}rn(sn,So),sn.prototype[mf]=!0,sn.prototype.removeEventListener=function(t,e,n,r){h9(this,t,e,n,r)},sn.prototype.N=function(){if(sn.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Vy(n[r]);delete t.g[e],t.h--}}this.J=null},sn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},sn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var oR=le.JSON.stringify;function EIe(){var t=aR;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var p9=new class IIe{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new TIe,t=>t.reset());class TIe{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function DIe(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function CIe(t){le.setTimeout(()=>{throw t},0)}let _f,yf=!1,aR=new class wIe{constructor(){this.h=this.g=null}add(e,n){const r=p9.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},g9=()=>{const t=le.Promise.resolve(void 0);_f=()=>{t.then(AIe)}};var AIe=()=>{for(var t;t=EIe();){try{t.h.call(t.g)}catch(n){CIe(n)}var e=p9;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}yf=!1};function By(t,e){sn.call(this),this.h=t||1,this.g=e||le,this.j=Bn(this.qb,this),this.l=Date.now()}function uR(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function cR(t,e,n){if("function"==typeof t)n&&(t=Bn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Bn(t.handleEvent,t)}return 2147483647<Number(e)?-1:le.setTimeout(t,e||0)}function m9(t){t.g=cR(()=>{t.g=null,t.i&&(t.i=!1,m9(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}rn(By,sn),(U=By.prototype).ga=!1,U.T=null,U.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Dn(this,"tick"),this.ga&&(uR(this),this.start()))}},U.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},U.N=function(){By.$.N.call(this),uR(this),delete this.g};class bIe extends So{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:m9(this)}N(){super.N(),this.g&&(le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vf(t){So.call(this),this.h=t,this.g={}}rn(vf,So);var _9=[];function y9(t,e,n,r){Array.isArray(n)||(n&&(_9[0]=n.toString()),n=_9);for(var i=0;i<n.length;i++){var s=c9(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function v9(t){Xx(t.g,function(e,n){this.g.hasOwnProperty(n)&&nR(e)},t),t.g={}}function jy(){this.g=!0}function tl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function PIe(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return oR(n)}catch{return e}}(t,n)+(r?" "+r:"")})}vf.prototype.N=function(){vf.$.N.call(this),v9(this)},vf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jy.prototype.Ea=function(){this.g=!1},jy.prototype.info=function(){};var Ka={},I9=null;function $y(){return I9=I9||new sn}function E9(t){jn.call(this,Ka.Ta,t)}function If(t){const e=$y();Dn(e,new E9(e))}function w9(t,e){jn.call(this,Ka.STAT_EVENT,t),this.stat=e}function or(t){const e=$y();Dn(e,new w9(e,t))}function T9(t,e){jn.call(this,Ka.Ua,t),this.size=e}function Ef(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return le.setTimeout(function(){t()},e)}Ka.Ta="serverreachability",rn(E9,jn),Ka.STAT_EVENT="statevent",rn(w9,jn),Ka.Ua="timingevent",rn(T9,jn);var Gy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},D9={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function lR(){}function A9(){}lR.prototype.h=null;var fR,wf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function dR(){jn.call(this,"d")}function hR(){jn.call(this,"c")}function qy(){}function Tf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new vf(this),this.P=MIe,this.V=new By(t=zx?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new b9}function b9(){this.i=null,this.g="",this.h=!1}rn(dR,jn),rn(hR,jn),rn(qy,lR),qy.prototype.g=function(){return new XMLHttpRequest},qy.prototype.i=function(){return{}},fR=new qy;var MIe=45e3,pR={},zy={};function gR(t,e,n){t.L=1,t.v=Qy(Us(e)),t.s=n,t.S=!0,S9(t,null)}function S9(t,e){t.G=Date.now(),Df(t),t.A=Us(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),L9(n.i,"t",r),t.C=0,n=t.l.J,t.h=new b9,t.g=uH(t.l,n?e:null,!t.s),0<t.O&&(t.M=new bIe(Bn(t.Pa,t,t.g),t.O)),y9(t.U,t.g,"readystatechange",t.nb),e=t.I?o9(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),If(),function SIe(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.W,t.s)}function x9(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function R9(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=NIe(t,n),i==zy){4==e&&(t.o=4,or(14),r=!1),tl(t.j,t.m,null,"[Incomplete Response]");break}if(i==pR){t.o=4,or(15),tl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}tl(t.j,t.m,i,null),mR(t,i)}x9(t)&&i!=zy&&i!=pR&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,or(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),TR(e),e.M=!0,or(11))):(tl(t.j,t.m,n,"[Invalid Chunked Response]"),Qa(t),Cf(t))}function NIe(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?zy:(n=Number(e.substring(n,r)),isNaN(n)?pR:(r+=1)+n>e.length?zy:(e=e.slice(r,r+n),t.C=r+n,e))}function Df(t){t.Y=Date.now()+t.P,P9(t,t.P)}function P9(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Ef(Bn(t.lb,t),e)}function Hy(t){t.B&&(le.clearTimeout(t.B),t.B=null)}function Cf(t){0==t.l.H||t.J||iH(t.l,t)}function Qa(t){Hy(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,uR(t.V),v9(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function mR(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||_R(n.i,t)))if(!t.K&&_R(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;tv(n),Zy(n)}wR(n),or(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ef(Bn(n.ib,n),6e3));if(1>=j9(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Xa(n,11)}else if((t.K||n.g==t)&&tv(n),!pf(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const l=c[3];null!=l&&(n.ra=l,n.l.info("VER="+n.ra));const d=c[4];null!=d&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(n.L=r=1.5*h,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(yR(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,rt(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=aH(r,r.J?r.pa:null,r.Y),o.K){$9(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.B&&(Hy(a),Df(a)),r.g=o}else nH(r);0<n.j.length&&ev(n)}else"stop"!=c[0]&&"close"!=c[0]||Xa(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Xa(n,7):ER(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}If()}catch{}}function M9(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ky(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function OIe(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ky(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function kIe(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(ky(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(U=Tf.prototype).setTimeout=function(t){this.P=t},U.nb=function(t){t=t.target;const e=this.M;e&&3==Ji(t)?e.l():this.Pa(t)},U.Pa=function(t){try{if(t==this.g)e:{const l=Ji(this.g);var e=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||zx||this.g&&(this.h.h||this.g.ja()||Y9(this.g)))){this.J||4!=l||7==e||If(),Hy(this);var n=this.g.da();this.ca=n;t:if(x9(this)){var r=Y9(this.g);t="";var i=r.length,s=4==Ji(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Qa(this),Cf(this);var o="";break t}this.h.i=new le.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function xIe(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pf(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,or(12),Qa(this),Cf(this);break e}tl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mR(this,n)}this.S?(R9(this,l,o),zx&&this.i&&3==l&&(y9(this.U,this.V,"tick",this.mb),this.V.start())):(tl(this.j,this.m,o,null),mR(this,o)),4==l&&Qa(this),this.i&&!this.J&&(4==l?iH(this.l,this):(this.i=!1,Df(this)))}else(function ZIe(t){const e={};t=(t.g&&2<=Ji(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(pf(t[r]))continue;var n=DIe(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function _Ie(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,or(12)):(this.o=0,or(13)),Qa(this),Cf(this)}}}catch{}},U.mb=function(){if(this.g){var t=Ji(this.g),e=this.g.ja();this.C<e.length&&(Hy(this),R9(this,t,e),this.i&&4!=t&&Df(this))}},U.cancel=function(){this.J=!0,Qa(this)},U.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function RIe(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(If(),or(17)),Qa(this),this.o=2,Cf(this)):P9(this,this.Y-t)};var N9=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ya(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ya){this.h=t.h,Wy(this,t.j),this.s=t.s,this.g=t.g,Ky(this,t.m),this.l=t.l;var e=t.i,n=new Sf;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),k9(this,n),this.o=t.o}else t&&(e=String(t).match(N9))?(this.h=!1,Wy(this,e[1]||"",!0),this.s=Af(e[2]||""),this.g=Af(e[3]||"",!0),Ky(this,e[4]),this.l=Af(e[5]||"",!0),k9(this,e[6]||"",!0),this.o=Af(e[7]||"")):(this.h=!1,this.i=new Sf(null,this.h))}function Us(t){return new Ya(t)}function Wy(t,e,n){t.j=n?Af(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ky(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function k9(t,e,n){e instanceof Sf?(t.i=e,function $Ie(t,e){e&&!t.j&&(xo(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(F9(this,r),L9(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=bf(e,BIe)),t.i=new Sf(e,t.h))}function rt(t,e,n){t.i.set(e,n)}function Qy(t){return rt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Af(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function bf(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,VIe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function VIe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ya.prototype.toString=function(){var t=[],e=this.j;e&&t.push(bf(e,O9,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(bf(e,O9,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(bf(n,"/"==n.charAt(0)?UIe:LIe,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",bf(n,jIe)),t.join("")};var O9=/[#\/\?@]/g,LIe=/[#\?:]/g,UIe=/[#\?]/g,BIe=/[#\?@]/g,jIe=/#/g;function Sf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function xo(t){t.g||(t.g=new Map,t.h=0,t.i&&function FIe(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function F9(t,e){xo(t),e=nl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function V9(t,e){return xo(t),e=nl(t,e),t.g.has(e)}function L9(t,e,n){F9(t,e),0<n.length&&(t.i=null,t.g.set(nl(t,e),Gx(n)),t.h+=n.length)}function nl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function U9(t){this.l=t||qIe,t=le.PerformanceNavigationTiming?0<(t=le.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(le.g&&le.g.Ka&&le.g.Ka()&&le.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(U=Sf.prototype).add=function(t,e){xo(this),this.i=null,t=nl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},U.forEach=function(t,e){xo(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},U.ta=function(){xo(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},U.Z=function(t){xo(this);let e=[];if("string"==typeof t)V9(this,t)&&(e=e.concat(this.g.get(nl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},U.set=function(t,e){return xo(this),this.i=null,V9(this,t=nl(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},U.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},U.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var qIe=10;function B9(t){return!!t.h||!!t.g&&t.g.size>=t.j}function j9(t){return t.h?1:t.g?t.g.size:0}function _R(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function yR(t,e){t.g?t.g.add(e):t.h=e}function $9(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function G9(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Gx(t.i)}U9.prototype.cancel=function(){if(this.i=G9(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var zIe=class{stringify(t){return le.JSON.stringify(t,void 0)}parse(t){return le.JSON.parse(t,void 0)}};function HIe(){this.g=new zIe}function WIe(t,e,n){const r=n||"";try{M9(t,function(i,s){let o=i;ff(i)&&(o=oR(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Yy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function xf(t){this.l=t.ec||null,this.j=t.ob||!1}function Xy(t,e){sn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=vR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rn(xf,lR),xf.prototype.g=function(){return new Xy(this.l,this.j)},xf.prototype.i=function(t){return function(){return t}}({}),rn(Xy,sn);var vR=0;function q9(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Rf(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Pf(t)}function Pf(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(U=Xy.prototype).open=function(t,e){if(this.readyState!=vR)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Pf(this)},U.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||le).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},U.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rf(this)),this.readyState=vR},U.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Pf(this)),this.g&&(this.readyState=3,Pf(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof le.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;q9(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},U.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Rf(this):Pf(this),3==this.readyState&&q9(this)}},U.Za=function(t){this.g&&(this.response=this.responseText=t,Rf(this))},U.Ya=function(t){this.g&&(this.response=t,Rf(this))},U.ka=function(){this.g&&Rf(this)},U.setRequestHeader=function(t,e){this.v.append(t,e)},U.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},U.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Xy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var QIe=le.JSON.parse;function Tt(t){sn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=z9,this.L=this.M=!1}rn(Tt,sn);var z9="",YIe=/^https?$/i,XIe=["POST","PUT"];function H9(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,W9(t),Jy(t)}function W9(t){t.F||(t.F=!0,Dn(t,"complete"),Dn(t,"error"))}function K9(t){if(t.h&&typeof jx<"u"&&(!t.C[1]||4!=Ji(t)||2!=t.da()))if(t.v&&4==Ji(t))cR(t.La,0,t);else if(Dn(t,"readystatechange"),4==Ji(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(N9)[1]||null;!i&&le.self&&le.self.location&&(i=le.self.location.protocol.slice(0,-1)),r=!YIe.test(i?i.toLowerCase():"")}n=r}if(n)Dn(t,"complete"),Dn(t,"success");else{t.m=6;try{var s=2<Ji(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",W9(t)}}finally{Jy(t)}}}function Jy(t,e){if(t.g){Q9(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Dn(t,"ready");try{n.onreadystatechange=r}catch{}}}function Q9(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(le.clearTimeout(t.A),t.A=null)}function Ji(t){return t.g?t.g.readyState:0}function Y9(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case z9:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function X9(t){let e="";return Xx(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function IR(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=X9(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):rt(t,e,n))}function Mf(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function J9(t){this.Ga=0,this.j=[],this.l=new jy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Mf("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Mf("baseRetryDelayMs",5e3,t),this.hb=Mf("retryDelaySeedMs",1e4,t),this.eb=Mf("forwardChannelMaxRetries",2,t),this.xa=Mf("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new U9(t&&t.concurrentRequestLimit),this.Ja=new HIe,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ER(t){if(Z9(t),3==t.H){var e=t.W++,n=Us(t.I);if(rt(n,"SID",t.K),rt(n,"RID",e),rt(n,"TYPE","terminate"),Nf(t,n),(e=new Tf(t,t.l,e)).L=2,e.v=Qy(Us(n)),n=!1,le.navigator&&le.navigator.sendBeacon)try{n=le.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&le.Image&&((new Image).src=e.v,n=!0),n||(e.g=uH(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Df(e)}oH(t)}function Zy(t){t.g&&(TR(t),t.g.cancel(),t.g=null)}function Z9(t){Zy(t),t.u&&(le.clearTimeout(t.u),t.u=null),tv(t),t.i.cancel(),t.m&&("number"==typeof t.m&&le.clearTimeout(t.m),t.m=null)}function ev(t){if(!B9(t.i)&&!t.m){t.m=!0;var e=t.Na;_f||g9(),yf||(_f(),yf=!0),aR.add(e,t),t.C=0}}function eH(t,e){var n;n=e?e.m:t.W++;const r=Us(t.I);rt(r,"SID",t.K),rt(r,"RID",n),rt(r,"AID",t.V),Nf(t,r),t.o&&t.s&&IR(r,t.o,t.s),n=new Tf(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=tH(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),yR(t.i,n),gR(n,r,e)}function Nf(t,e){t.na&&Xx(t.na,function(n,r){rt(e,r,n)}),t.h&&M9({},function(n,r){rt(e,r,n)})}function tH(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Bn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].g;const l=i[u].map;if(c-=s,0>c)s=Math.max(0,i[u].g-100),a=!1;else try{WIe(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function nH(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;_f||g9(),yf||(_f(),yf=!0),aR.add(e,t),t.A=0}}function wR(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Ef(Bn(t.Ma,t),sH(t,t.A)),t.A++,0))}function TR(t){null!=t.B&&(le.clearTimeout(t.B),t.B=null)}function rH(t){t.g=new Tf(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Us(t.wa);rt(e,"RID","rpc"),rt(e,"SID",t.K),rt(e,"AID",t.V),rt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&rt(e,"TO",t.qa),rt(e,"TYPE","xmlhttp"),Nf(t,e),t.o&&t.s&&IR(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Qy(Us(e)),n.s=null,n.S=!0,S9(n,t)}function tv(t){null!=t.v&&(le.clearTimeout(t.v),t.v=null)}function iH(t,e){var n=null;if(t.g==e){tv(t),TR(t),t.g=null;var r=2}else{if(!_R(t.i,e))return;n=e.F,$9(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;Dn(r=$y(),new T9(r,n)),ev(t)}else nH(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function eEe(t,e){return!(j9(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Ef(Bn(t.Na,t,e),sH(t,t.C)),t.C++,0)))}(t,e)||2==r&&wR(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Xa(t,5);break;case 4:Xa(t,10);break;case 3:Xa(t,6);break;default:Xa(t,2)}}function sH(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Xa(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Bn(t.pb,t);n||(n=new Ya("//www.google.com/images/cleardot.gif"),le.location&&"http"==le.location.protocol||Wy(n,"https"),Qy(n)),function KIe(t,e){const n=new jy;if(le.Image){const r=new Image;r.onload=Oy(Yy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Oy(Yy,n,r,"TestLoadImage: error",!1,e),r.onabort=Oy(Yy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Oy(Yy,n,r,"TestLoadImage: timeout",!1,e),le.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else or(2);t.H=0,t.h&&t.h.za(e),oH(t),Z9(t)}function oH(t){if(t.H=0,t.ma=[],t.h){const e=G9(t.i);(0!=e.length||0!=t.j.length)&&(t9(t.ma,e),t9(t.ma,t.j),t.i.i.length=0,Gx(t.j),t.j.length=0),t.h.ya()}}function aH(t,e,n){var r=n instanceof Ya?Us(n):new Ya(n);if(""!=r.g)e&&(r.g=e+"."+r.g),Ky(r,r.m);else{var i=le.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ya(null);r&&Wy(s,r),e&&(s.g=e),i&&Ky(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&rt(r,n,e),rt(r,"VER",t.ra),Nf(t,r),r}function uH(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Tt(n&&t.Ha&&!t.va?new xf({ob:!0}):t.va)).Oa(t.J),e}function cH(){}function nv(){if(el&&!(10<=Number(fIe)))throw Error("Environmental error: no available transport.")}function Gr(t,e){sn.call(this),this.g=new J9(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!pf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pf(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new rl(this)}function lH(t){dR.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function dH(){hR.call(this),this.status=1}function rl(t){this.g=t}function Ti(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function DR(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function Le(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(U=Tt.prototype).Oa=function(t){this.M=t},U.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():fR.g(),this.C=function C9(t){return t.h||(t.h=t.i())}(this.u?this.u:fR),this.g.onreadystatechange=Bn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void H9(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=le.FormData&&t instanceof le.FormData,!(0<=e9(XIe,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Q9(this),0<this.B&&((this.L=function JIe(t){return el&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bn(this.ua,this)):this.A=cR(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){H9(this,s)}},U.ua=function(){typeof jx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Dn(this,"timeout"),this.abort(8))},U.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Dn(this,"complete"),Dn(this,"abort"),Jy(this))},U.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jy(this,!0)),Tt.$.N.call(this)},U.La=function(){this.s||(this.G||this.v||this.l?K9(this):this.kb())},U.kb=function(){K9(this)},U.isActive=function(){return!!this.g},U.da=function(){try{return 2<Ji(this)?this.g.status:-1}catch{return-1}},U.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},U.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),QIe(e)}},U.Ia=function(){return this.m},U.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(U=J9.prototype).ra=8,U.H=1,U.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Tf(this,this.l,t);let s=this.s;if(this.U&&(s?(s=o9(s),u9(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=tH(this,i,e),rt(n=Us(this.I),"RID",t),rt(n,"CVER",22),this.F&&rt(n,"X-HTTP-Session-Id",this.F),Nf(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(X9(s)))+"&"+e:this.o&&IR(n,this.o,s)),yR(this.i,i),this.bb&&rt(n,"TYPE","init"),this.P?(rt(n,"$req",e),rt(n,"SID","null"),i.aa=!0,gR(i,n,null)):gR(i,n,e),this.H=2}}else 3==this.H&&(t?eH(this,t):0==this.j.length||B9(this.i)||eH(this))},U.Ma=function(){if(this.u=null,rH(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ef(Bn(this.jb,this),t)}},U.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,or(10),Zy(this),rH(this))},U.ib=function(){null!=this.v&&(this.v=null,Zy(this),wR(this),or(19))},U.pb=function(t){t?(this.l.info("Successfully pinged google.com"),or(2)):(this.l.info("Failed to ping google.com"),or(1))},U.isActive=function(){return!!this.h&&this.h.isActive(this)},(U=cH.prototype).Ba=function(){},U.Aa=function(){},U.za=function(){},U.ya=function(){},U.isActive=function(){return!0},U.Va=function(){},nv.prototype.g=function(t,e){return new Gr(t,e)},rn(Gr,sn),Gr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;or(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=aH(t,null,t.Y),ev(t)},Gr.prototype.close=function(){ER(this.g)},Gr.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=oR(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&ev(e)},Gr.prototype.N=function(){this.g.h=null,delete this.j,ER(this.g),delete this.g,Gr.$.N.call(this)},rn(lH,dR),rn(dH,hR),rn(rl,cH),rl.prototype.Ba=function(){Dn(this.g,"a")},rl.prototype.Aa=function(t){Dn(this.g,new lH(t))},rl.prototype.za=function(t){Dn(this.g,new dH)},rl.prototype.ya=function(){Dn(this.g,"b")},rn(Ti,function tEe(){this.blockSize=-1}),Ti.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ti.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)DR(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){DR(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){DR(this,r),i=0;break}}this.h=i,this.i+=e},Ti.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var nEe={};function CR(t){return-128<=t&&128>t?function lIe(t,e){var n=nEe;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Le([0|e],0>e?-1:0)}):new Le([0|t],0>t?-1:0)}function Zi(t){if(isNaN(t)||!isFinite(t))return il;if(0>t)return Cn(Zi(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=AR;return new Le(e,0)}var AR=4294967296,il=CR(0),bR=CR(1),fH=CR(16777216);function Bs(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function ci(t){return-1==t.h}function Cn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Le(n,~t.h).add(bR)}function rv(t,e){return t.add(Cn(e))}function iv(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function kf(t,e){this.g=t,this.h=e}function sv(t,e){if(Bs(e))throw Error("division by zero");if(Bs(t))return new kf(il,il);if(ci(t))return e=sv(Cn(t),e),new kf(Cn(e.g),Cn(e.h));if(ci(e))return e=sv(t,Cn(e)),new kf(Cn(e.g),e.h);if(30<t.g.length){if(ci(t)||ci(e))throw Error("slowDivide_ only works with positive integers.");for(var n=bR,r=e;0>=r.X(t);)n=pH(n),r=pH(r);var i=sl(n,1),s=sl(r,1);for(r=sl(r,2),n=sl(n,2);!Bs(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=sl(r,1),n=sl(n,1)}return e=rv(t,i.R(e)),new kf(i,e)}for(i=il;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Zi(n)).R(e);ci(o)||0<o.X(t);)o=(s=Zi(n-=r)).R(e);Bs(s)&&(s=bR),i=i.add(s),t=rv(t,o)}return new kf(i,t)}function pH(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Le(n,t.h)}function sl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Le(i,t.h)}(U=Le.prototype).ea=function(){if(ci(this))return-Cn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:AR+r)*e,e*=AR}return t},U.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Bs(this))return"0";if(ci(this))return"-"+Cn(this).toString(t);for(var e=Zi(Math.pow(t,6)),n=this,r="";;){var i=sv(n,e).g,s=((0<(n=rv(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Bs(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},U.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},U.X=function(t){return ci(t=rv(this,t))?-1:Bs(t)?0:1},U.abs=function(){return ci(this)?Cn(this):this},U.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new Le(n,-2147483648&n[n.length-1]?-1:0)},U.R=function(t){if(Bs(this)||Bs(t))return il;if(ci(this))return ci(t)?Cn(this).R(Cn(t)):Cn(Cn(this).R(t));if(ci(t))return Cn(this.R(Cn(t)));if(0>this.X(fH)&&0>t.X(fH))return Zi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,iv(n,2*r+2*i),n[2*r+2*i+1]+=s*u,iv(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,iv(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,iv(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Le(n,0)},U.gb=function(t){return sv(this,t).h},U.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Le(n,this.h&t.h)},U.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Le(n,this.h|t.h)},U.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Le(n,this.h^t.h)},nv.prototype.createWebChannel=nv.prototype.g,Gr.prototype.send=Gr.prototype.u,Gr.prototype.open=Gr.prototype.m,Gr.prototype.close=Gr.prototype.close,Gy.NO_ERROR=0,Gy.TIMEOUT=8,Gy.HTTP_ERROR=6,D9.COMPLETE="complete",A9.EventType=wf,wf.OPEN="a",wf.CLOSE="b",wf.ERROR="c",wf.MESSAGE="d",sn.prototype.listen=sn.prototype.O,Tt.prototype.listenOnce=Tt.prototype.P,Tt.prototype.getLastError=Tt.prototype.Sa,Tt.prototype.getLastErrorCode=Tt.prototype.Ia,Tt.prototype.getStatus=Tt.prototype.da,Tt.prototype.getResponseJson=Tt.prototype.Wa,Tt.prototype.getResponseText=Tt.prototype.ja,Tt.prototype.send=Tt.prototype.ha,Tt.prototype.setWithCredentials=Tt.prototype.Oa,Ti.prototype.digest=Ti.prototype.l,Ti.prototype.reset=Ti.prototype.reset,Ti.prototype.update=Ti.prototype.j,Le.prototype.add=Le.prototype.add,Le.prototype.multiply=Le.prototype.R,Le.prototype.modulo=Le.prototype.gb,Le.prototype.compare=Le.prototype.X,Le.prototype.toNumber=Le.prototype.ea,Le.prototype.toString=Le.prototype.toString,Le.prototype.getBits=Le.prototype.D,Le.fromNumber=Zi,Le.fromString=function hH(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Cn(hH(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Zi(Math.pow(e,8)),r=il,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Zi(Math.pow(e,s)),r=r.R(s).add(Zi(o))):r=(r=r.R(n)).add(Zi(o))}return r};var rEe=wi.createWebChannelTransport=function(){return new nv},iEe=wi.getStatEventTarget=function(){return $y()},SR=wi.ErrorCode=Gy,sEe=wi.EventType=D9,oEe=wi.Event=Ka,gH=wi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ov=(wi.FetchXmlHttpFactory=xf,wi.WebChannel=A9),aEe=wi.XhrIo=Tt,uEe=wi.Md5=Ti,ol=wi.Integer=Le;const mH="@firebase/firestore";class on{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let al="10.4.0";const Ro=new wo("@firebase/firestore");function ul(){return Ro.logLevel}function x(t,...e){if(Ro.logLevel<=_e.DEBUG){const n=e.map(xR);Ro.debug(`Firestore (${al}): ${t}`,...n)}}function Pt(t,...e){if(Ro.logLevel<=_e.ERROR){const n=e.map(xR);Ro.error(`Firestore (${al}): ${t}`,...n)}}function qr(t,...e){if(Ro.logLevel<=_e.WARN){const n=e.map(xR);Ro.warn(`Firestore (${al}): ${t}`,...n)}}function xR(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function z(t="Unexpected state"){const e=`FIRESTORE (${al}) INTERNAL ASSERTION FAILED: `+t;throw Pt(e),new Error(e)}function K(t,e){t||z()}function O(t,e){return t}const T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class b extends wr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class _H{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cEe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(on.UNAUTHENTICATED))}shutdown(){}}class dEe{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new Yt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Yt,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(_(function*(){yield c.promise,yield s(r.currentUser)}))},u=c=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Yt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K("string"==typeof r.accessToken),new _H(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return K(null===e||"string"==typeof e),new on(e)}}class hEe{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fEe{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new hEe(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yH{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pEe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,x("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(K("string"==typeof n.token),this.R=n.token,new yH(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function gEe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class vH{static V(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=gEe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function se(t,e){return t<e?-1:t>e?1:0}function cl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class mt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new b(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new b(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new b(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new b(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new mt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new mt(0,0))}static max(){return new Y(new mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Of{constructor(e,n,r){void 0===n?n=0:n>e.length&&z(),void 0===r?r=e.length-n:r>e.length-n&&z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Of.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Of?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ae extends Of{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new b(T.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const mEe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends Of{construct(e,n,r){return new Dt(e,n,r)}static isValidIdentifier(e){return mEe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new b(T.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new b(T.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new b(T.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new b(T.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(n)}static emptyPath(){return new Dt([])}}class F{constructor(e){this.path=e}static fromPath(e){return new F(Ae.fromString(e))}static fromName(e){return new F(Ae.fromString(e).popFirst(5))}static empty(){return new F(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ae.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new F(new Ae(e.slice()))}}function wH(t){return new zr(t.readTime,t.key,-1)}class zr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zr(Y.min(),F.empty(),-1)}static max(){return new zr(Y.max(),F.empty(),-1)}}function PR(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=F.comparator(t.documentKey,e.documentKey),0!==n?n:se(t.largestBatchId,e.largestBatchId))}const TH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vEe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Po(t){return MR.apply(this,arguments)}function MR(){return MR=_(function*(t){if(t.code!==T.FAILED_PRECONDITION||t.message!==TH)throw t;x("LocalStore","Unexpectedly lost primary lease")}),MR.apply(this,arguments)}class I{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new I((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof I?n:I.resolve(n)}catch(n){return I.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):I.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):I.reject(n)}static resolve(e){return new I((n,r)=>{n(e)})}static reject(e){return new I((n,r)=>{r(e)})}static waitFor(e){return new I((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=I.resolve(!1);for(const r of e)n=n.next(i=>i?I.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new I((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new I((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}function Mo(t){return"IndexedDbTransactionError"===t.name}let Hr=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this._e&&this._e(n),n}}return t.ae=-1,t})();function Vf(t){return null==t}function Lf(t){return 0===t&&1/t==-1/0}function MH(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function No(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}class Je{constructor(e,n){this.comparator=e,this.root=n||An.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cv(this.root,e,this.comparator,!1)}getReverseIterator(){return new cv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cv(this.root,e,this.comparator,!0)}}class cv{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class An{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??An.RED,this.left=i??An.EMPTY,this.right=s??An.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new An(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return An.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return An.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,An.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,An.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();const e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}}An.EMPTY=null,An.RED=!0,An.BLACK=!1,An.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,n,r,i,s){return this}insert(e,n,r){return new An(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ze{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kH(this.data.getIterator())}getIteratorFrom(e){return new kH(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class kH{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ar{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new Ar([])}unionWith(e){let n=new Ze(Dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ar(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class OH extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new OH("Invalid base64 string: "+s):s}}(e);return new Xt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const $Ee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ko(t){if(K(!!t),"string"==typeof t){let e=0;const n=$Ee.exec(t);if(K(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ct(t.seconds),nanos:Ct(t.nanos)}}function Ct(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function js(t){return"string"==typeof t?Xt.fromBase64String(t):Xt.fromUint8Array(t)}function lv(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function dv(t){const e=t.mapValue.fields.__previous_value__;return lv(e)?dv(e):e}function Uf(t){const e=ko(t.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}class GEe{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class tu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new tu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof tu&&e.projectId===this.projectId&&e.database===this.database}}const Oo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Fo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?lv(t)?4:UH(t)?9007199254740991:10:z()}function ts(t,e){if(t===e)return!0;const n=Fo(t);if(n!==Fo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Uf(t).isEqual(Uf(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ko(i.timestampValue),a=ko(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,js(t.bytesValue).isEqual(js(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ct(i.geoPointValue.latitude)===Ct(s.geoPointValue.latitude)&&Ct(i.geoPointValue.longitude)===Ct(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ct(i.integerValue)===Ct(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ct(i.doubleValue),a=Ct(s.doubleValue);return o===a?Lf(o)===Lf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return cl(t.arrayValue.values||[],e.arrayValue.values||[],ts);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(MH(o)!==MH(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!ts(o[u],a[u])))return!1;return!0}(t,e);default:return z()}var s}function Bf(t,e){return void 0!==(t.values||[]).find(n=>ts(n,e))}function Vo(t,e){if(t===e)return 0;const n=Fo(t),r=Fo(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ct(s.integerValue||s.doubleValue),u=Ct(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return FH(t.timestampValue,e.timestampValue);case 4:return FH(Uf(t),Uf(e));case 5:return se(t.stringValue,e.stringValue);case 6:return function(s,o){const a=js(s),u=js(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const l=se(a[c],u[c]);if(0!==l)return l}return se(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=se(Ct(s.latitude),Ct(o.latitude));return 0!==a?a:se(Ct(s.longitude),Ct(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let c=0;c<a.length&&c<u.length;++c){const l=Vo(a[c],u[c]);if(l)return l}return se(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Oo.mapValue&&o===Oo.mapValue)return 0;if(s===Oo.mapValue)return 1;if(o===Oo.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let d=0;d<u.length&&d<l.length;++d){const h=se(u[d],l[d]);if(0!==h)return h;const f=Vo(a[u[d]],c[l[d]]);if(0!==f)return f}return se(u.length,l.length)}(t.mapValue,e.mapValue);default:throw z()}}function FH(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return se(t,e);const n=ko(t),r=ko(e),i=se(n.seconds,r.seconds);return 0!==i?i:se(n.nanos,r.nanos)}function fl(t){return OR(t)}function OR(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ko(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?js(t.bytesValue).toBase64():"referenceValue"in t?F.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=OR(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${OR(n.fields[o])}`;return i+"}"}(t.mapValue):z()}function FR(t){return!!t&&"integerValue"in t}function jf(t){return!!t&&"arrayValue"in t}function VH(t){return!!t&&"nullValue"in t}function LH(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pv(t){return!!t&&"mapValue"in t}function $f(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return No(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$f(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$f(t.arrayValue.values[n]);return e}return Object.assign({},t)}function UH(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$f(n)}setAll(e){let n=Dt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=$f(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());pv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ts(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];pv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){No(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new bn($f(this.value))}}class it{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new it(e,0,Y.min(),Y.min(),Y.min(),bn.empty(),0)}static newFoundDocument(e,n,r,i){return new it(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new it(e,2,n,Y.min(),Y.min(),bn.empty(),0)}static newUnknownDocument(e,n){return new it(e,3,n,Y.min(),Y.min(),bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof it&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new it(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Lo{constructor(e,n){this.position=e,this.inclusive=n}}function GH(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?F.comparator(F.fromName(o.referenceValue),n.key):Vo(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function qH(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ts(t.position[n],e.position[n]))return!1;return!0}class pl{constructor(e,n="asc"){this.field=e,this.dir=n}}function HEe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class zH{}class Ie extends zH{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new WEe(e,n,r):"array-contains"===n?new YEe(e,r):"in"===n?new XH(e,r):"not-in"===n?new XEe(e,r):"array-contains-any"===n?new JEe(e,r):new Ie(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new KEe(e,r):new QEe(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Vo(n,this.value)):null!==n&&Fo(this.value)===Fo(n)&&this.matchesComparison(Vo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ue extends zH{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Ue(e,n)}matches(e){return gl(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return null!==e?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function gl(t){return"and"===t.op}function LR(t){return function HH(t){for(const e of t.filters)if(e instanceof Ue)return!1;return!0}(t)&&gl(t)}function UR(t){if(t instanceof Ie)return t.field.canonicalString()+t.op.toString()+fl(t.value);if(LR(t))return t.filters.map(e=>UR(e)).join(",");{const e=t.filters.map(n=>UR(n)).join(",");return`${t.op}(${e})`}}function WH(t,e){return t instanceof Ie?(r=t,(i=e)instanceof Ie&&r.op===i.op&&r.field.isEqual(i.field)&&ts(r.value,i.value)):t instanceof Ue?function(r,i){return i instanceof Ue&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&WH(o,i.filters[a]),!0)}(t,e):void z();var r,i}function QH(t){return t instanceof Ie?`${(n=t).field.canonicalString()} ${n.op} ${fl(n.value)}`:t instanceof Ue?function(n){return n.op.toString()+" {"+n.getFilters().map(QH).join(" ,")+"}"}(t):"Filter";var n}class WEe extends Ie{constructor(e,n,r){super(e,n,r),this.key=F.fromName(r.referenceValue)}matches(e){const n=F.comparator(e.key,this.key);return this.matchesComparison(n)}}class KEe extends Ie{constructor(e,n){super(e,"in",n),this.keys=YH(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QEe extends Ie{constructor(e,n){super(e,"not-in",n),this.keys=YH(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function YH(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>F.fromName(r.referenceValue))}class YEe extends Ie{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jf(n)&&Bf(n.arrayValue,this.value)}}class XH extends Ie{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Bf(this.value.arrayValue,n)}}class XEe extends Ie{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Bf(this.value.arrayValue,n)}}class JEe extends Ie{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bf(this.value.arrayValue,r))}}class ZEe{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.he=null}}function BR(t,e=null,n=[],r=[],i=null,s=null,o=null){return new ZEe(t,e,n,r,i,s,o)}function ru(t){const e=O(t);if(null===e.he){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>UR(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Vf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fl(r)).join(",")),e.he=n}return e.he}function Gf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!HEe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!WH(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qH(t.startAt,e.startAt)&&qH(t.endAt,e.endAt)}function gv(t){return F.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class $s{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.Pe=null,this.Ie=null,this.de=null}}function ml(t){return new $s(t)}function t7(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function _l(t){const e=O(t);if(null===e.Pe){e.Pe=[];const n=function _v(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}(e),r=function jR(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==n&&null===r)n.isKeyField()||e.Pe.push(new pl(n)),e.Pe.push(new pl(Dt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new pl(Dt.keyField(),s))}}}return e.Pe}function ar(t){const e=O(t);return e.Ie||(e.Ie=function n7(t,e){if("F"===t.limitType)return BR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new pl(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Lo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Lo(t.startAt.position,t.startAt.inclusive):null;return BR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,_l(t))),e.Ie}function yv(t,e,n){return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qf(t,e){return Gf(ar(t),ar(e))&&t.limitType===e.limitType}function r7(t){return`${ru(ar(t))}|lt:${t.limitType}`}function yl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>QH(i)).join(", ")}]`),Vf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>fl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>fl(i)).join(",")),`Target(${r})`}(ar(t))}; limitType=${t.limitType})`}function zf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):F.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of _l(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,u){const c=GH(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,_l(r),i)||r.endAt&&!function(o,a,u){const c=GH(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,_l(r),i)));var r,i}function s7(t){return(e,n)=>{let r=!1;for(const i of _l(t)){const s=ewe(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function ewe(t,e,n){const r=t.field.isKeyField()?F.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return null!==u&&null!==c?Vo(u,c):z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}class Gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){No(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return function NH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(this.inner)}size(){return this.innerSize}}const twe=new Je(F.comparator);function br(){return twe}const o7=new Je(F.comparator);function Hf(...t){let e=o7;for(const n of t)e=e.insert(n.key,n);return e}function a7(t){let e=o7;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ns(){return Wf()}function u7(){return Wf()}function Wf(){return new Gs(t=>t.toString(),(t,e)=>t.isEqual(e))}new Je(F.comparator);const rwe=new Ze(F.comparator);function pe(...t){let e=rwe;for(const n of t)e=e.add(n);return e}const iwe=new Ze(se);class vv{constructor(){this._=void 0}}function swe(t,e,n){return t instanceof vl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&lv(s)&&(s=dv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof iu?f7(t,e):t instanceof su?p7(t,e):function(i,s){const o=function h7(t,e){return t instanceof Il?FR(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}(i,s),a=g7(o)+g7(i.Te);return FR(o)&&FR(i.Te)?function l7(t){return{integerValue:""+t}}(a):function c7(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lf(e)?"-0":e}}(i.serializer,a)}(t,e)}function owe(t,e,n){return t instanceof iu?f7(t,e):t instanceof su?p7(t,e):n}class vl extends vv{}class iu extends vv{constructor(e){super(),this.elements=e}}function f7(t,e){const n=m7(e);for(const r of t.elements)n.some(i=>ts(i,r))||n.push(r);return{arrayValue:{values:n}}}class su extends vv{constructor(e){super(),this.elements=e}}function p7(t,e){let n=m7(e);for(const r of t.elements)n=n.filter(i=>!ts(i,r));return{arrayValue:{values:n}}}class Il extends vv{constructor(e,n){super(),this.serializer=e,this.Te=n}}function g7(t){return Ct(t.integerValue||t.doubleValue)}function m7(t){return jf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class dt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dt}static exists(e){return new dt(void 0,e)}static updateTime(e){return new dt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Iv(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class zR{}function _7(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new wl(t.key,dt.none()):new El(t.key,t.data,dt.none());{const n=t.data,r=bn.empty();let i=new Ze(Dt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new qs(t.key,r,new Ar(i.toArray()),dt.none())}}function cwe(t,e,n){t instanceof El?function(i,s,o){const a=i.value.clone(),u=I7(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof qs?function(i,s,o){if(!Iv(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=I7(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(v7(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Qf(t,e,n,r){return t instanceof El?function(s,o,a,u){if(!Iv(s.precondition,o))return a;const c=s.value.clone(),l=E7(s.fieldTransforms,u,o);return c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof qs?function(s,o,a,u){if(!Iv(s.precondition,o))return a;const c=E7(s.fieldTransforms,u,o),l=o.data;return l.setAll(v7(s)),l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):(a=n,Iv(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function y7(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&cl(r,i,(s,o)=>function awe(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof iu&&i instanceof iu||r instanceof su&&i instanceof su?cl(r.elements,i.elements,ts):r instanceof Il&&i instanceof Il?ts(r.Te,i.Te):r instanceof vl&&i instanceof vl);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class El extends zR{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qs extends zR{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function v7(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function I7(t,e,n){const r=new Map;K(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,owe(o,a,n[i]))}return r}function E7(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,swe(s,o,e))}return r}class wl extends zR{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&cwe(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Qf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Qf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=u7();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=_7(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&cl(this.mutations,e.mutations,(n,r)=>y7(n,r))&&cl(this.baseMutations,e.baseMutations,(n,r)=>y7(n,r))}}class QR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class hwe{constructor(e,n){this.count=e,this.unchangedNames=n}}var Gt,be;function T7(t){if(void 0===t)return Pt("GRPC error has no .code"),T.UNKNOWN;switch(t){case Gt.OK:return T.OK;case Gt.CANCELLED:return T.CANCELLED;case Gt.UNKNOWN:return T.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return T.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return T.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return T.INTERNAL;case Gt.UNAVAILABLE:return T.UNAVAILABLE;case Gt.UNAUTHENTICATED:return T.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return T.INVALID_ARGUMENT;case Gt.NOT_FOUND:return T.NOT_FOUND;case Gt.ALREADY_EXISTS:return T.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return T.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return T.FAILED_PRECONDITION;case Gt.ABORTED:return T.ABORTED;case Gt.OUT_OF_RANGE:return T.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return T.UNIMPLEMENTED;case Gt.DATA_LOSS:return T.DATA_LOSS;default:return z()}}(be=Gt||(Gt={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";const fwe=new ol([4294967295,4294967295],0);function C7(t){const e=function D7(){return new TextEncoder}().encode(t),n=new uEe;return n.update(e),new Uint8Array(n.digest())}function A7(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ol([n,r],0),new ol([i,s],0)]}class YR{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yf(`Invalid padding: ${n}`);if(r<0)throw new Yf(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Yf(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Yf(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=ol.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(ol.fromNumber(r)));return 1===i.compare(fwe)&&(i=new ol([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ae)return!1;const n=C7(e),[r,i]=A7(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new YR(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ae)return;const n=C7(e),[r,i]=A7(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Yf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Jf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xf(Y.min(),i,new Je(se),br(),pe())}}class Jf{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Jf(r,n,pe(),pe(),pe())}}class wv{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class b7{constructor(e,n){this.targetId=e,this.ye=n}}class S7{constructor(e,n,r=Xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class x7{constructor(){this.we=0,this.Se=P7(),this.be=Xt.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}get current(){return this.De}get resumeToken(){return this.be}get ve(){return 0!==this.we}get Fe(){return this.Ce}Me(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}xe(){let e=pe(),n=pe(),r=pe();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:z()}}),new Jf(this.be,this.De,e,n,r)}Oe(){this.Ce=!1,this.Se=P7()}Ne(e,n){this.Ce=!0,this.Se=this.Se.insert(e,n)}Be(e){this.Ce=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.Ce=!0,this.De=!0}}class pwe{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=br(),this.Ue=R7(),this.We=new Je(se)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){const n=e.targetId,r=e.ye.count,i=this.et(n);if(i){const s=i.target;if(gv(s))if(0===r){const o=new F(s.path);this.je(n,o,it.newNoDocument(o,Y.min()))}else K(1===r);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),u=a?this.rt(a,e,o):1;0!==u&&(this.Ze(n),this.We=this.We.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=js(r).toUint8Array()}catch(u){if(u instanceof OH)return qr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new YR(o,i,s)}catch(u){return qr(u instanceof Yf?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ae?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.je(n,s,null),i++)}),i}_t(e){const n=new Map;this.Ke.forEach((s,o)=>{const a=this.et(o);if(a){if(s.current&&gv(a.target)){const u=new F(a.target.path);null!==this.$e.get(u)||this.ut(o,u)||this.je(o,u,it.newNoDocument(u,e))}s.Fe&&(n.set(o,s.xe()),s.Oe())}});let r=pe();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.et(u);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new Xf(e,n,this.We,this.$e,r);return this.$e=br(),this.Ue=R7(),this.We=new Je(se),i}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new x7,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Ze(se),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=null!==this.et(e);return n||x("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.ve?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new x7),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function R7(){return new Je(F.comparator)}function P7(){return new Je(F.comparator)}const gwe={asc:"ASCENDING",desc:"DESCENDING"},mwe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_we={and:"AND",or:"OR"};class ywe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function XR(t,e){return t.useProto3Json||Vf(e)?e:{value:e}}function Mt(t){return K(!!t),Y.fromTimestamp(function(n){const r=ko(n);return new mt(r.seconds,r.nanos)}(t))}function N7(t){const e=Ae.fromString(t);return K($7(e)),e}function rs(t,e){const n=N7(e);if(n.get(1)!==t.databaseId.projectId)throw new b(T.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new b(T.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new F(O7(n))}function ZR(t,e){return function JR(t,e){return(r=t,new Ae(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}(t.databaseId,e)}function ep(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function O7(t){return K(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function L7(t,e){return{documents:[ZR(t,e.path)]}}function t1(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ZR(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ZR(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return j7(Ue.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(c=>{return{field:Uo((d=c).field),direction:Dwe(d.dir)};var d})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=XR(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function U7(t){let e=function k7(t){const e=N7(t);return 4===e.length?Ae.emptyPath():O7(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){K(1===r);const l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){const h=B7(d);return h instanceof Ue&&LR(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(h=>{return new pl(Dl((p=h).field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction));var p}));let a=null;n.limit&&(a=function(d){let h;return h="object"==typeof d?d.value:d,Vf(h)?null:h}(n.limit));let u=null;var d;n.startAt&&(u=new Lo((d=n.startAt).values||[],!!d.before));let c=null;return n.endAt&&(c=function(d){return new Lo(d.values||[],!d.before)}(n.endAt)),function e7(t,e,n,r,i,s,o,a){return new $s(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",u,c)}function B7(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Dl(n.unaryFilter.field);return Ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Dl(n.unaryFilter.field);return Ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Dl(n.unaryFilter.field);return Ie.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Dl(n.unaryFilter.field);return Ie.create(o,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(t):void 0!==t.fieldFilter?Ie.create(Dl((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Ue.create(n.compositeFilter.filters.map(r=>B7(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(n.compositeFilter.op))}(t):z();var n}function Dwe(t){return gwe[t]}function Cwe(t){return mwe[t]}function Awe(t){return _we[t]}function Uo(t){return{fieldPath:t.canonicalString()}}function Dl(t){return Dt.fromServerFormat(t.fieldPath)}function j7(t){return t instanceof Ie?function(n){if("=="===n.op){if(LH(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NAN"}};if(VH(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(LH(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NOT_NAN"}};if(VH(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uo(n.field),op:Cwe(n.op),value:n.value}}}(t):t instanceof Ue?function(n){const r=n.getFilters().map(i=>j7(i));return 1===r.length?r[0]:{compositeFilter:{op:Awe(n.op),filters:r}}}(t):z()}function $7(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class zs{constructor(e,n,r,i,s=Y.min(),o=Y.min(),a=Xt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new zs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class G7{constructor(e){this.ht=e}}function n1(t){const e=U7({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?yv(e,e.limit,"L"):e}class cu{constructor(){}dt(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.At(n,5);else if("booleanValue"in e)this.At(n,10),n.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(n,15),n.Rt(Ct(e.integerValue));else if("doubleValue"in e){const r=Ct(e.doubleValue);isNaN(r)?this.At(n,13):(this.At(n,15),Lf(r)?n.Rt(0):n.Rt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.At(n,20),"string"==typeof r?n.Vt(r):(n.Vt(`${r.seconds||""}`),n.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,n),this.gt(n);else if("bytesValue"in e)this.At(n,30),n.yt(js(e.bytesValue)),this.gt(n);else if("referenceValue"in e)this.wt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.At(n,45),n.Rt(r.latitude||0),n.Rt(r.longitude||0)}else"mapValue"in e?UH(e)?this.At(n,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,n),this.gt(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.gt(n)):z()}ft(e,n){this.At(n,25),this.Dt(e,n)}Dt(e,n){n.Vt(e)}St(e,n){const r=e.fields||{};this.At(n,55);for(const i of Object.keys(r))this.ft(i,n),this.Tt(r[i],n)}bt(e,n){const r=e.values||[];this.At(n,50);for(const i of r)this.Tt(i,n)}wt(e,n){this.At(n,37),F.fromName(e).path.forEach(r=>{this.At(n,60),this.Dt(r,n)})}At(e,n){e.Rt(n)}gt(e){e.Rt(2)}}cu.Ct=new cu;class Owe{constructor(){this.an=new u1}addToCollectionParentIndex(e,n){return this.an.add(n),I.resolve()}getCollectionParents(e,n){return I.resolve(this.an.getEntries(n))}addFieldIndex(e,n){return I.resolve()}deleteFieldIndex(e,n){return I.resolve()}deleteAllFieldIndexes(e){return I.resolve()}createTargetIndexes(e,n){return I.resolve()}getDocumentsMatchingTarget(e,n){return I.resolve(null)}getIndexType(e,n){return I.resolve(0)}getFieldIndexes(e,n){return I.resolve([])}getNextCollectionGroupToUpdate(e){return I.resolve(null)}getMinOffset(e,n){return I.resolve(zr.min())}getMinOffsetFromCollectionGroup(e,n){return I.resolve(zr.min())}updateCollectionGroup(e,n,r){return I.resolve()}updateIndexEntries(e,n){return I.resolve()}}class u1{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ze(Ae.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ze(Ae.comparator)).toArray()}}new Uint8Array(0);class Gn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Gn(e,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Gn.DEFAULT_COLLECTION_PERCENTILE=10,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gn.DEFAULT=new Gn(41943040,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gn.DISABLED=new Gn(-1,0,0);class du{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Bn(){return new du(0)}static Ln(){return new du(-1)}}class jwe{constructor(){this.changes=new Gs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,it.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?I.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qwe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class m3{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Qf(r.mutation,i,Ar.empty(),mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const i=ns();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Hf();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ns();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=br();const o=Wf(),a=Wf();return n.forEach((u,c)=>{const l=r.get(c.key);i.has(c.key)&&(void 0===l||l.mutation instanceof qs)?s=s.insert(c.key,c):void 0!==l?(o.set(c.key,l.mutation.getFieldMask()),Qf(l.mutation,c,l.mutation.getFieldMask(),mt.now())):o.set(c.key,Ar.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new qwe(l,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Wf();let i=new Je((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(null===c)return;let l=r.get(u)||Ar.empty();l=a.applyToLocalView(c,l),r.set(u,l);const d=(i.get(a.batchId)||pe()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,l=u.value,d=u7();l.forEach(h=>{if(!s.has(h)){const f=_7(n.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return I.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return F.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):function $R(t){return null!==t.collectionGroup}(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):I.resolve(ns());let a=-1,u=s;return o.next(c=>I.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?I.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,pe())).next(l=>({batchId:a,changes:a7(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new F(n)).next(r=>{let i=Hf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Hf();return this.indexManager.getCollectionParents(e,s).next(a=>I.forEach(a,u=>{const c=(d=n,h=u.child(s),new $s(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt));var d,h;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const l=c.getKey();null===o.get(l)&&(o=o.insert(l,it.newInvalidDocument(l)))});let a=Hf();return o.forEach((u,c)=>{const l=s.get(u);void 0!==l&&Qf(l.mutation,c,Ar.empty(),mt.now()),zf(n,c)&&(a=a.insert(u,c))}),a})}}class zwe{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,n){return I.resolve(this.lr.get(n))}saveBundleMetadata(e,n){return this.lr.set(n.id,{id:(i=n).id,version:i.version,createTime:Mt(i.createTime)}),I.resolve();var i}getNamedQuery(e,n){return I.resolve(this.hr.get(n))}saveNamedQuery(e,n){return this.hr.set(n.name,{name:(i=n).name,query:n1(i.bundledQuery),readTime:Mt(i.readTime)}),I.resolve();var i}}class Hwe{constructor(){this.overlays=new Je(F.comparator),this.Pr=new Map}getOverlay(e,n){return I.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ns();return I.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.It(e,n,s)}),I.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Pr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(r)),I.resolve()}getOverlaysForCollection(e,n,r){const i=ns(),s=n.length+1,o=new F(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return I.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Je((c,l)=>c-l);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);null===l&&(l=ns(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const a=ns(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return I.resolve(a)}It(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new QR(n,r));let s=this.Pr.get(n);void 0===s&&(s=pe(),this.Pr.set(n,s)),this.Pr.set(n,s.add(r.key))}}class c1{constructor(){this.Ir=new Ze(un.dr),this.Tr=new Ze(un.Er)}isEmpty(){return this.Ir.isEmpty()}addReference(e,n){const r=new un(e,n);this.Ir=this.Ir.add(r),this.Tr=this.Tr.add(r)}Ar(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Rr(new un(e,n))}Vr(e,n){e.forEach(r=>this.removeReference(r,n))}mr(e){const n=new F(new Ae([])),r=new un(n,e),i=new un(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Rr(o),s.push(o.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}pr(e){const n=new F(new Ae([])),r=new un(n,e),i=new un(n,e+1);let s=pe();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new un(e,0),r=this.Ir.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class un{constructor(e,n){this.key=e,this.yr=n}static dr(e,n){return F.comparator(e.key,n.key)||se(e.yr,n.yr)}static Er(e,n){return se(e.yr,n.yr)||F.comparator(e.key,n.key)}}class Wwe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new Ze(un.dr)}checkEmpty(e){return I.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.wr;this.wr++;const o=new WR(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Sr=this.Sr.add(new un(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return I.resolve(o)}lookupMutationBatch(e,n){return I.resolve(this.br(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Dr(n+1),s=i<0?0:i;return I.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return I.resolve(0===this.mutationQueue.length?-1:this.wr-1)}getAllMutationBatches(e){return I.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new un(n,0),i=new un(n,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([r,i],o=>{const a=this.br(o.yr);s.push(a)}),I.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(se);return n.forEach(i=>{const s=new un(i,0),o=new un(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,o],a=>{r=r.add(a.yr)})}),I.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;F.isDocumentKey(s)||(s=s.child(""));const o=new un(new F(s),0);let a=new Ze(se);return this.Sr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.yr)),!0)},o),I.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.br(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){K(0===this.vr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.Sr;return I.forEach(n.mutations,i=>{const s=new un(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,n){const r=new un(n,0),i=this.Sr.firstAfterOrEqual(r);return I.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return I.resolve()}vr(e,n){return this.Dr(e)}Dr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}br(e){const n=this.Dr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Kwe{constructor(e){this.Fr=e,this.docs=new Je(F.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Fr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return I.resolve(r?r.document.mutableCopy():it.newInvalidDocument(n))}getEntries(e,n){let r=br();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():it.newInvalidDocument(i))}),I.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=br();const o=n.path,a=new F(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:l}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||PR(wH(l),r)<=0||(i.has(l.key)||zf(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return I.resolve(s)}getAllFromCollectionGroup(e,n,r,i){z()}Mr(e,n){return I.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Qwe(this)}getSize(e){return I.resolve(this.size)}}class Qwe extends jwe{constructor(e){super(),this.ur=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),I.waitFor(n)}getFromCache(e,n){return this.ur.getEntry(e,n)}getAllFromCache(e,n){return this.ur.getEntries(e,n)}}class Ywe{constructor(e){this.persistence=e,this.Or=new Gs(n=>ru(n),Gf),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Nr=0,this.Br=new c1,this.targetCount=0,this.Lr=du.Bn()}forEachTarget(e,n){return this.Or.forEach((r,i)=>n(i)),I.resolve()}getLastRemoteSnapshotVersion(e){return I.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return I.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),I.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Nr&&(this.Nr=n),I.resolve()}Qn(e){this.Or.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new du(n),this.highestTargetId=n),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,n){return this.Qn(n),this.targetCount+=1,I.resolve()}updateTargetData(e,n){return this.Qn(n),I.resolve()}removeTargetData(e,n){return this.Or.delete(n.target),this.Br.mr(n.targetId),this.targetCount-=1,I.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Or.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Or.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),I.waitFor(s).next(()=>i)}getTargetCount(e){return I.resolve(this.targetCount)}getTargetData(e,n){const r=this.Or.get(n)||null;return I.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Ar(n,r),I.resolve()}removeMatchingKeys(e,n,r){this.Br.Vr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),I.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.mr(n),I.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.pr(n);return I.resolve(r)}containsKey(e,n){return I.resolve(this.Br.containsKey(n))}}class l1{constructor(e,n){this.kr={},this.overlays={},this.qr=new Hr(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=e(this),this.Kr=new Ywe(this),this.indexManager=new Owe,this.remoteDocumentCache=new Kwe(r=>this.referenceDelegate.$r(r)),this.serializer=new G7(n),this.Ur=new zwe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Hwe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.kr[e.toKey()];return r||(r=new Wwe(n,this.referenceDelegate),this.kr[e.toKey()]=r),r}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ur}runTransaction(e,n,r){x("MemoryPersistence","Starting transaction:",e);const i=new Xwe(this.qr.next());return this.referenceDelegate.Wr(),r(i).next(s=>this.referenceDelegate.Gr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}zr(e,n){return I.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,n)))}}class Xwe extends vEe{constructor(e){super(),this.currentSequenceNumber=e}}class Rv{constructor(e){this.persistence=e,this.jr=new c1,this.Hr=null}static Jr(e){return new Rv(e)}get Yr(){if(this.Hr)return this.Hr;throw z()}addReference(e,n,r){return this.jr.addReference(r,n),this.Yr.delete(r.toString()),I.resolve()}removeReference(e,n,r){return this.jr.removeReference(r,n),this.Yr.add(r.toString()),I.resolve()}markPotentiallyOrphaned(e,n){return this.Yr.add(n.toString()),I.resolve()}removeTarget(e,n){this.jr.mr(n.targetId).forEach(i=>this.Yr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Yr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Wr(){this.Hr=new Set}Gr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return I.forEach(this.Yr,r=>{const i=F.fromPath(r);return this.Zr(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.Hr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Zr(e,n).next(r=>{r?this.Yr.delete(n.toString()):this.Yr.add(n.toString())})}$r(e){return 0}Zr(e,n){return I.or([()=>I.resolve(this.jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.zr(e,n)])}}class p1{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Qi=r,this.Ki=i}static $i(e,n){let r=pe(),i=pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new p1(e,n.fromCache,r,i)}}class Zwe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class y3{constructor(){this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}initialize(e,n){this.ji=e,this.indexManager=n,this.Ui=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Hi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Zwe;return this.Yi(e,n,o).next(a=>{if(s.result=a,this.Wi)return this.Zi(e,n,o,a.size)})}).next(()=>s.result)}Zi(e,n,r,i){return r.documentReadCount<this.Gi?(ul()<=_e.DEBUG&&x("QueryEngine","SDK will not create cache indexes for query:",yl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),I.resolve()):(ul()<=_e.DEBUG&&x("QueryEngine","Query:",yl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.zi*i?(ul()<=_e.DEBUG&&x("QueryEngine","The SDK decides to create cache indexes for query:",yl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ar(n))):I.resolve())}Hi(e,n){if(t7(n))return I.resolve(null);let r=ar(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=yv(n,null,"F"),r=ar(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=pe(...s);return this.ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Xi(n,a);return this.es(n,c,o,u.readTime)?this.Hi(e,yv(n,null,"F")):this.ts(e,c,n,u)}))})))}Ji(e,n,r,i){return t7(n)||i.isEqual(Y.min())?I.resolve(null):this.ji.getDocuments(e,r).next(s=>{const o=this.Xi(n,s);return this.es(n,o,r,i)?I.resolve(null):(ul()<=_e.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yl(n)),this.ts(e,o,n,function EH(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(1e9===r?new mt(n+1,0):new mt(n,r));return new zr(i,F.empty(),e)}(i,-1)).next(a=>a))})}Xi(e,n){let r=new Ze(s7(e));return n.forEach((i,s)=>{zf(e,s)&&(r=r.add(s))}),r}es(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Yi(e,n,r){return ul()<=_e.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",yl(n)),this.ji.getDocumentsMatchingQuery(e,n,zr.min(),r)}ts(e,n,r,i){return this.ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class eTe{constructor(e,n,r,i){this.persistence=e,this.ns=n,this.serializer=i,this.rs=new Je(se),this.ss=new Gs(s=>ru(s),Gf),this.os=new Map,this._s=e.getRemoteDocumentCache(),this.Kr=e.getTargetCache(),this.Ur=e.getBundleCache(),this.us(r)}us(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new m3(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.rs))}}function I3(t,e){return g1.apply(this,arguments)}function g1(){return g1=_(function*(t,e){const n=O(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.us(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=pe();for(const c of i){o.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of s){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({cs:c,removedBatchIds:o,addedBatchIds:a}))})})}),g1.apply(this,arguments)}function E3(t){const e=O(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Kr.getLastRemoteSnapshotVersion(n))}function Rl(t,e,n){return m1.apply(this,arguments)}function m1(){return m1=_(function*(t,e,n){const r=O(t),i=r.rs.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Mo(o))throw o;x("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.rs=r.rs.remove(e),r.ss.delete(i.target)}),m1.apply(this,arguments)}function Nv(t,e,n){const r=O(t);let i=Y.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,l){const d=O(u),h=d.ss.get(l);return void 0!==h?I.resolve(d.rs.get(h)):d.Kr.getTargetData(c,l)}(r,o,ar(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ns.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:pe())).next(a=>(function C3(t,e,n){let r=t.os.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.os.set(e,r)}(r,function i7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,Ps:s})))}class E1{constructor(){this.activeTargetIds=function qR(){return iwe}()}Rs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}As(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class S3{constructor(){this.ro=new E1,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.ro.Rs(e),this.io[e]||"not-current"}updateQueryState(e,n,r){this.io[e]=n}removeLocalQueryTarget(e){this.ro.Vs(e)}isLocalQueryTarget(e){return this.ro.activeTargetIds.has(e)}clearQueryState(e){delete this.io[e]}getAllActiveQueryTargets(){return this.ro.activeTargetIds}isActiveQueryTarget(e){return this.ro.activeTargetIds.has(e)}start(){return this.ro=new E1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class oTe{so(e){}shutdown(){}}class x3{constructor(){this.oo=()=>this._o(),this.ao=()=>this.uo(),this.co=[],this.lo()}so(e){this.co.push(e)}shutdown(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}lo(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}_o(){x("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.co)e(0)}uo(){x("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.co)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Fv=null;function T1(){return null===Fv?Fv=268435456+Math.round(2147483648*Math.random()):Fv++,"0x"+Fv.toString(16)}const aTe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uTe{constructor(e){this.ho=e.ho,this.Po=e.Po}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.Po()}send(e){this.ho(e)}Vo(){this.To()}mo(e){this.Ao(e)}fo(e){this.Ro(e)}}const qn="WebChannelConnection";class cTe extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+n.host,this.yo=`projects/${i}/databases/${s}`,this.wo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get So(){return!1}bo(n,r,i,s,o){const a=T1(),u=this.Do(n,r);x("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(c,s,o),this.vo(n,u,c,i).then(l=>(x("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw qr("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}Fo(n,r,i,s,o,a){return this.bo(n,r,i,s,o)}Co(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+al,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}Do(n,r){return`${this.po}/v1/${r}:${aTe[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,i){const s=T1();return new Promise((o,a)=>{const u=new aEe;u.setWithCredentials(!0),u.listenOnce(sEe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case SR.NO_ERROR:const l=u.getResponseJson();x(qn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case SR.TIMEOUT:x(qn,`RPC '${e}' ${s} timed out`),a(new b(T.DEADLINE_EXCEEDED,"Request time out"));break;case SR.HTTP_ERROR:const d=u.getStatus();if(x(qn,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h?.error;if(f&&f.status&&f.message){const p=function(m){const v=m.toLowerCase().replace(/_/g,"-");return Object.values(T).indexOf(v)>=0?v:T.UNKNOWN}(f.status);a(new b(p,f.message))}else a(new b(T.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new b(T.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{x(qn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);x(qn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Mo(e,n,r){const i=T1(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=rEe(),a=iEe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Co(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const l=s.join("");x(qn,`Creating RPC '${e}' stream ${i}: ${l}`,u);const d=o.createWebChannel(l,u);let h=!1,f=!1;const p=new uTe({ho:m=>{f?x(qn,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(x(qn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),x(qn,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},Po:()=>d.close()}),g=(m,v,y)=>{m.listen(v,w=>{try{y(w)}catch(A){setTimeout(()=>{throw A},0)}})};return g(d,ov.EventType.OPEN,()=>{f||x(qn,`RPC '${e}' stream ${i} transport opened.`)}),g(d,ov.EventType.CLOSE,()=>{f||(f=!0,x(qn,`RPC '${e}' stream ${i} transport closed`),p.mo())}),g(d,ov.EventType.ERROR,m=>{f||(f=!0,qr(qn,`RPC '${e}' stream ${i} transport errored:`,m),p.mo(new b(T.UNAVAILABLE,"The operation could not be completed")))}),g(d,ov.EventType.MESSAGE,m=>{var v;if(!f){const y=m.data[0];K(!!y);const A=y.error||(null===(v=y[0])||void 0===v?void 0:v.error);if(A){x(qn,`RPC '${e}' stream ${i} received error:`,A);const N=A.status;let j=function(hi){const Bd=Gt[hi];if(void 0!==Bd)return T7(Bd)}(N),ae=A.message;void 0===j&&(j=T.INTERNAL,ae="Unknown error status: "+N+" with message "+A.message),f=!0,p.mo(new b(j,ae)),d.close()}else x(qn,`RPC '${e}' stream ${i} received:`,y),p.fo(y)}}),g(a,oEe.STAT_EVENT,m=>{m.stat===gH.PROXY?x(qn,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===gH.NOPROXY&&x(qn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Vo()},0),p}}function Vv(){return typeof document<"u"?document:null}function cp(t){return new ywe(t,!0)}class D1{constructor(e,n,r=1e3,i=1.5,s=6e4){this._i=e,this.timerId=n,this.xo=r,this.Oo=i,this.No=s,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(e){this.cancel();const n=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,n-r);i>0&&x("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,()=>(this.ko=Date.now(),e())),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}class lTe{constructor(e,n,r,i,s,o,a,u){this._i=e,this.Uo=r,this.Wo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new D1(e,n)}Jo(){return 1===this.state||5===this.state||this.Yo()}Yo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Zo()}stop(){var e=this;return _(function*(){e.Jo()&&(yield e.close(0))})()}Xo(){this.state=0,this.Ho.reset()}e_(){this.Yo()&&null===this.zo&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,()=>this.t_()))}n_(e){this.r_(),this.stream.send(e)}t_(){var e=this;return _(function*(){if(e.Yo())return e.close(0)})()}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}close(e,n){var r=this;return _(function*(){r.r_(),r.i_(),r.Ho.cancel(),r.Go++,4!==e?r.Ho.reset():n&&n.code===T.RESOURCE_EXHAUSTED?(Pt(n.toString()),Pt("Using maximum backoff delay to prevent overloading the backend."),r.Ho.qo()):n&&n.code===T.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.s_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Eo(n)})()}s_(){}auth(){this.state=1;const e=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Go===n&&this.__(r,i)},r=>{e(()=>{const i=new b(T.UNKNOWN,"Fetching auth token failed: "+r.message);return this.a_(i)})})}__(e,n){const r=this.o_(this.Go);this.stream=this.u_(e,n),this.stream.Io(()=>{r(()=>(this.state=2,this.jo=this._i.enqueueAfterDelay(this.Wo,1e4,()=>(this.Yo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.a_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Zo(){var e=this;this.state=5,this.Ho.Qo(_(function*(){e.state=0,e.start()}))}a_(e){return x("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}o_(e){return n=>{this._i.enqueueAndForget(()=>this.Go===e?n():(x("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dTe extends lTe{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}u_(e,n){return this.connection.Mo("Listen",e,n)}onMessage(e){this.Ho.reset();const n=function Ewe(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:z(),i=e.targetChange.targetIds||[],s=function(c,l){return c.useProto3Json?(K(void 0===l||"string"==typeof l),Xt.fromBase64String(l||"")):(K(void 0===l||l instanceof Uint8Array),Xt.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const l=void 0===c.code?T.UNKNOWN:T7(c.code);return new b(l,c.message||"")}(o);n=new S7(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=rs(t,r.document.name),s=Mt(r.document.updateTime),o=r.document.createTime?Mt(r.document.createTime):Y.min(),a=new bn({mapValue:{fields:r.document.fields}}),u=it.newFoundDocument(i,s,o,a);n=new wv(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=rs(t,r.document),s=r.readTime?Mt(r.readTime):Y.min(),o=it.newNoDocument(i,s);n=new wv([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=rs(t,r.document);n=new wv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return z();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new hwe(i,s);n=new b7(r.targetId,o)}}var c;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?Mt(o.readTime):Y.min()}(e);return this.listener.c_(n,r)}l_(e){const n={};n.database=ep(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=gv(u)?{documents:L7(s,u)}:{query:t1(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=function M7(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}(s,o.resumeToken);const c=XR(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Y.min())>0){a.readTime=function Tl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}(s,o.snapshotVersion.toTimestamp());const c=XR(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function Twe(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.n_(n)}h_(e){const n={};n.database=ep(this.serializer),n.removeTarget=e,this.n_(n)}}class fTe extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.R_=!1}V_(){if(this.R_)throw new b(T.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,n,r){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.bo(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new b(T.UNKNOWN,i.toString())})}Fo(e,n,r,i){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Fo(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new b(T.UNKNOWN,s.toString())})}terminate(){this.R_=!0}}class gTe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}y_(){0===this.f_&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.g_=null,this.S_("Backend didn't respond within 10 seconds."),this.w_("Offline"),Promise.resolve())))}b_(e){"Online"===this.state?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.w_("Offline")))}set(e){this.D_(),this.f_=0,"Online"===e&&(this.p_=!1),this.w_(e)}w_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}S_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.p_?(Pt(n),this.p_=!1):x("OnlineStateTracker",n)}D_(){null!==this.g_&&(this.g_.cancel(),this.g_=null)}}class mTe{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=s,this.x_.so(a=>{r.enqueueAndForget(_(function*(){var u;Go(o)&&(x("RemoteStore","Restarting streams for network reachability change."),yield(u=_(function*(l){const d=O(l);d.F_.add(4),yield Pl(d),d.O_.set("Unknown"),d.F_.delete(4),yield lp(d)}),function c(l){return u.apply(this,arguments)})(o))}))}),this.O_=new gTe(r,i)}}function lp(t){return A1.apply(this,arguments)}function A1(){return A1=_(function*(t){if(Go(t))for(const e of t.M_)yield e(!0)}),A1.apply(this,arguments)}function Pl(t){return b1.apply(this,arguments)}function b1(){return b1=_(function*(t){for(const e of t.M_)yield e(!1)}),b1.apply(this,arguments)}function Lv(t,e){const n=O(t);n.v_.has(e.targetId)||(n.v_.set(e.targetId,e),R1(n)?x1(n):Nl(n).Yo()&&S1(n,e))}function dp(t,e){const n=O(t),r=Nl(n);n.v_.delete(e),r.Yo()&&P3(n,e),0===n.v_.size&&(r.Yo()?r.e_():Go(n)&&n.O_.set("Unknown"))}function S1(t,e){if(t.N_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Nl(t).l_(e)}function P3(t,e){t.N_.Le(e),Nl(t).h_(e)}function x1(t){t.N_=new pwe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.v_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),Nl(t).start(),t.O_.y_()}function R1(t){return Go(t)&&!Nl(t).Jo()&&t.v_.size>0}function Go(t){return 0===O(t).F_.size}function M3(t){t.N_=void 0}function _Te(t){return P1.apply(this,arguments)}function P1(){return P1=_(function*(t){t.v_.forEach((e,n)=>{S1(t,e)})}),P1.apply(this,arguments)}function yTe(t,e){return M1.apply(this,arguments)}function M1(){return M1=_(function*(t,e){M3(t),R1(t)?(t.O_.b_(e),x1(t)):t.O_.set("Unknown")}),M1.apply(this,arguments)}function vTe(t,e,n){return N1.apply(this,arguments)}function N1(){return N1=_(function*(t,e,n){if(t.O_.set("Online"),e instanceof S7&&2===e.state&&e.cause)try{yield(r=_(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.v_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.v_.delete(u),s.N_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){x("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Uv(t,r)}else if(e instanceof wv?t.N_.Ge(e):e instanceof b7?t.N_.Xe(e):t.N_.He(e),!n.isEqual(Y.min()))try{const r=yield E3(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.N_._t(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const l=s.v_.get(c);l&&s.v_.set(c,l.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const l=s.v_.get(u);if(!l)return;s.v_.set(u,l.withResumeToken(Xt.EMPTY_BYTE_STRING,l.snapshotVersion)),P3(s,u);const d=new zs(l.target,u,c,l.sequenceNumber);S1(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){x("RemoteStore","Failed to raise snapshot:",r),yield Uv(t,r)}var r}),N1.apply(this,arguments)}function Uv(t,e,n){return k1.apply(this,arguments)}function k1(){return k1=_(function*(t,e,n){if(!Mo(e))throw e;t.F_.add(1),yield Pl(t),t.O_.set("Offline"),n||(n=()=>E3(t.localStore)),t.asyncQueue.enqueueRetryable(_(function*(){x("RemoteStore","Retrying IndexedDB access"),yield n(),t.F_.delete(1),yield lp(t)}))}),k1.apply(this,arguments)}function F3(t,e){return B1.apply(this,arguments)}function B1(){return B1=_(function*(t,e){const n=O(t);n.asyncQueue.verifyOperationInProgress(),x("RemoteStore","RemoteStore received new credentials");const r=Go(n);n.F_.add(3),yield Pl(n),r&&n.O_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.F_.delete(3),yield lp(n)}),B1.apply(this,arguments)}function $1(){return $1=_(function*(t,e){const n=O(t);e?(n.F_.delete(2),yield lp(n)):e||(n.F_.add(2),yield Pl(n),n.O_.set("Unknown"))}),$1.apply(this,arguments)}function Nl(t){return t.B_||(t.B_=function(n,r,i){const s=O(n);return s.V_(),new dTe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Io:_Te.bind(null,t),Eo:yTe.bind(null,t),c_:vTe.bind(null,t)}),t.M_.push(function(){var e=_(function*(n){n?(t.B_.Xo(),R1(t)?x1(t):t.O_.set("Unknown")):(yield t.B_.stop(),M3(t))});return function(n){return e.apply(this,arguments)}}())),t.B_}class G1{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Yt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new G1(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new b(T.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kl(t,e){if(Pt("AsyncQueue",`${e}: ${t}`),Mo(t))return new b(T.UNAVAILABLE,`${e}: ${t}`);throw t}class Ol{constructor(e){this.comparator=e?(n,r)=>e(n,r)||F.comparator(n.key,r.key):(n,r)=>F.comparator(n.key,r.key),this.keyedMap=Hf(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new Ol(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ol)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Ol;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class V3{constructor(){this.k_=new Je(F.comparator)}track(e){const n=e.doc.key,r=this.k_.get(n);r?0!==e.type&&3===r.type?this.k_=this.k_.insert(n,e):3===e.type&&1!==r.type?this.k_=this.k_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.k_=this.k_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.k_=this.k_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.k_=this.k_.remove(n):1===e.type&&2===r.type?this.k_=this.k_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.k_=this.k_.insert(n,{type:2,doc:e.doc}):z():this.k_=this.k_.insert(n,e)}q_(){const e=[];return this.k_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fl{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Fl(e,n,Ol.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class ATe{constructor(){this.Q_=void 0,this.listeners=[]}}class bTe{constructor(){this.queries=new Gs(e=>r7(e),qf),this.onlineState="Unknown",this.K_=new Set}}function z1(){return z1=_(function*(t,e){const n=O(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new ATe),i)try{s.Q_=yield n.onListen(r)}catch(o){const a=kl(o,`Initialization of query '${yl(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.U_(n.onlineState),s.Q_&&e.W_(s.Q_)&&K1(n)}),z1.apply(this,arguments)}function W1(){return W1=_(function*(t,e){const n=O(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),W1.apply(this,arguments)}function STe(t,e){const n=O(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.W_(i)&&(r=!0);o.Q_=i}}r&&K1(n)}function xTe(t,e,n){const r=O(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function K1(t){t.K_.forEach(e=>{e.next()})}class Q1{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Fl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){return!e.fromCache||(!this.options.Z_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=Fl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class B3{constructor(e){this.key=e}}class j3{constructor(e){this.key=e}}class $3{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=pe(),this.mutatedKeys=pe(),this.ua=s7(e),this.ca=new Ol(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new V3,i=n?n.ca:this.ca;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const h=i.get(l),f=zf(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),m=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),m=!0,(u&&this.ua(f,u)>0||c&&this.ua(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(u||c)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{ca:o,Pa:r,es:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.q_();s.sort((c,l)=>function(h,f){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return p(h)-p(f)}(c.type,l.type)||this.ua(c.doc,l.doc)),this.da(r);const o=n?this.Ta():[],a=0===this.aa.size&&this.current?1:0,u=a!==this._a;return this._a=a,0!==s.length||u?{snapshot:new Fl(this.query,e.ca,i,s,e.mutatedKeys,0===a,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new V3,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}da(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ta(){if(!this.current)return[];const e=this.aa;this.aa=pe(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new j3(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new B3(r))}),n}Ra(e){this.oa=e.Ps,this.aa=pe();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Fl.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class MTe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class NTe{constructor(e){this.key=e,this.ma=!1}}class kTe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Gs(a=>r7(a),qf),this.pa=new Map,this.ya=new Set,this.wa=new Je(F.comparator),this.Sa=new Map,this.ba=new c1,this.Da={},this.Ca=new Map,this.va=du.Ln(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function OTe(t,e){return Y1.apply(this,arguments)}function Y1(){return Y1=_(function*(t,e){const n=function vP(t){const e=O(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=G3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qTe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LTe.bind(null,e),e.fa.c_=STe.bind(null,e.eventManager),e.fa.xa=xTe.bind(null,e.eventManager),e}(t);let r,i;const s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const o=yield function xl(t,e){const n=O(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Kr.getTargetData(r,e).next(s=>s?(i=s,I.resolve(i)):n.Kr.allocateTargetId(r).next(o=>(i=new zs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Kr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.rs.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.rs=n.rs.insert(r.targetId,r),n.ss.set(e,r.targetId)),r})}(n.localStore,ar(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield function X1(t,e,n,r,i){return J1.apply(this,arguments)}(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&Lv(n.remoteStore,o)}return i}),Y1.apply(this,arguments)}function J1(){return J1=_(function*(t,e,n,r,i){t.Ma=(d,h,f)=>{return(p=_(function*(m,v,y,w){let A=v.view.ha(y);A.es&&(A=yield Nv(m.localStore,v.query,!1).then(({documents:ae})=>v.view.ha(ae,A)));const N=w&&w.targetChanges.get(v.targetId),j=v.view.applyChanges(A,m.isPrimaryClient,N);return uP(m,v.targetId,j.Ea),j.snapshot}),function g(m,v,y,w){return p.apply(this,arguments)})(t,d,h,f);var p};const s=yield Nv(t.localStore,e,!0),o=new $3(e,s.Ps),a=o.ha(s.documents),u=Jf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=o.applyChanges(a,t.isPrimaryClient,u);uP(t,n,c.Ea);const l=new MTe(e,n,o);return t.ga.set(e,l),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),c.snapshot}),J1.apply(this,arguments)}function FTe(t,e){return Z1.apply(this,arguments)}function Z1(){return Z1=_(function*(t,e){const n=O(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!qf(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Rl(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),dp(n.remoteStore,r.targetId),Vl(n,r.targetId)}).catch(Po))):(Vl(n,r.targetId),yield Rl(n.localStore,r.targetId,!0))}),Z1.apply(this,arguments)}function G3(t,e){return tP.apply(this,arguments)}function tP(){return tP=_(function*(t,e){const n=O(t);try{const r=yield function nTe(t,e){const n=O(t),r=e.snapshotVersion;let i=n.rs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n._s.newChangeBuffer({trackRemovals:!0});i=n.rs;const a=[];e.targetChanges.forEach((l,d)=>{const h=i.get(d);if(!h)return;a.push(n.Kr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Kr.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var g,m,v;null!==e.targetMismatches.get(d)?f=f.withResumeToken(Xt.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),m=f,v=l,(0===(g=h).resumeToken.approximateByteSize()||m.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8||v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0)&&a.push(n.Kr.updateTargetData(s,f))});let u=br(),c=pe();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(function w3(t,e,n){let r=pe(),i=pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=br();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):x("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{ls:o,hs:i}})}(s,o,e.documentUpdates).next(l=>{u=l.ls,c=l.hs})),!r.isEqual(Y.min())){const l=n.Kr.getLastRemoteSnapshotVersion(s).next(d=>n.Kr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return I.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.rs=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Sa.get(s);o&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?K(o.ma):i.removedDocuments.size>0&&(K(o.ma),o.ma=!1))}),yield Hs(n,r,e)}catch(r){yield Po(r)}}),tP.apply(this,arguments)}function q3(t,e,n){const r=O(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ga.forEach((s,o)=>{const a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=O(o);u.onlineState=a;let c=!1;u.queries.forEach((l,d)=>{for(const h of d.listeners)h.U_(a)&&(c=!0)}),c&&K1(u)}(r.eventManager,e),i.length&&r.fa.c_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function LTe(t,e,n){return nP.apply(this,arguments)}function nP(){return nP=_(function*(t,e,n){const r=O(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Sa.get(e),s=i&&i.key;if(s){let o=new Je(F.comparator);o=o.insert(s,it.newNoDocument(s,Y.min()));const a=pe().add(s),u=new Xf(Y.min(),new Map,new Je(se),o,a);yield G3(r,u),r.wa=r.wa.remove(s),r.Sa.delete(e),cP(r)}else yield Rl(r.localStore,e,!1).then(()=>Vl(r,e,n)).catch(Po)}),nP.apply(this,arguments)}function Vl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.mr(e).forEach(r=>{t.ba.containsKey(r)||z3(t,r)})}function z3(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);null!==n&&(dp(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),cP(t))}function uP(t,e,n){for(const r of n)r instanceof B3?(t.ba.addReference(r.key,e),$Te(t,r)):r instanceof j3?(x("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||z3(t,r.key)):z()}function $Te(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(x("SyncEngine","New document in limbo: "+n),t.ya.add(r),cP(t))}function cP(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new F(Ae.fromString(e)),r=t.va.next();t.Sa.set(r,new NTe(n)),t.wa=t.wa.insert(n,r),Lv(t.remoteStore,new zs(ar(ml(n.path)),r,"TargetPurposeLimboResolution",Hr.ae))}}function Hs(t,e,n){return lP.apply(this,arguments)}function lP(){return lP=_(function*(t,e,n){const r=O(t),i=[],s=[],o=[];var a;r.ga.isEmpty()||(r.ga.forEach((a,u)=>{o.push(r.Ma(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const l=p1.$i(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.fa.c_(i),yield(a=_(function*(c,l){const d=O(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>I.forEach(l,f=>I.forEach(f.Qi,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>I.forEach(f.Ki,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Mo(h))throw h;x("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const f=h.targetId;if(!h.fromCache){const p=d.rs.get(f),m=p.withLastLimboFreeSnapshotVersion(p.snapshotVersion);d.rs=d.rs.insert(f,m)}}}),function u(c,l){return a.apply(this,arguments)})(r.localStore,s))}),lP.apply(this,arguments)}function GTe(t,e){return dP.apply(this,arguments)}function dP(){return dP=_(function*(t,e){const n=O(t);if(!n.currentUser.isEqual(e)){x("SyncEngine","User change. New user:",e.toKey());const r=yield I3(n.localStore,e);n.currentUser=e,(s=n).Ca.forEach(a=>{a.forEach(u=>{u.reject(new b(T.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ca.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Hs(n,r.cs)}var s}),dP.apply(this,arguments)}function qTe(t,e){const n=O(t),r=n.Sa.get(e);if(r&&r.ma)return pe().add(r.key);{let i=pe();const s=n.pa.get(e);if(!s)return i;for(const o of s){const a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}class Bv{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return _(function*(){n.serializer=cp(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return function v3(t,e,n,r){return new eTe(t,e,n,r)}(this.persistence,new y3,e.initialUser,this.serializer)}createPersistence(e){return new l1(Rv.Jr,this.serializer)}createSharedClientState(e){return new S3}terminate(){var e=this;return _(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ll{initialize(e,n){var r=this;return _(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>q3(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=GTe.bind(null,r.syncEngine),yield function j1(t,e){return $1.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new bTe}createDatastore(e){const n=cp(e.databaseInfo.databaseId),r=new cTe(e.databaseInfo);return new fTe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>q3(this.syncEngine,n,0),a=x3.C()?new x3:new oTe,new mTe(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,u,c,l){const d=new kTe(i,s,o,a,u,c);return l&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return function(){var e=_(function*(r){const i=O(r);x("RemoteStore","RemoteStore shutting down."),i.F_.add(5),yield Pl(i),i.x_.shutdown(),i.O_.set("Unknown")});return function n(r){return e.apply(this,arguments)}}()(this.remoteStore)}}class jv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Pt("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class r0e{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=on.UNAUTHENTICATED,this.clientId=vH.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=_(function*(a){x("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(x("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return _(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new b(T.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Yt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(_(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=kl(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function $v(t,e){return EP.apply(this,arguments)}function EP(){return EP=_(function*(t,e){t.asyncQueue.verifyOperationInProgress(),x("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=_(function*(s){r.isEqual(s)||(yield I3(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),EP.apply(this,arguments)}function wP(t,e){return TP.apply(this,arguments)}function TP(){return TP=_(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function DP(t){return CP.apply(this,arguments)}(t);x("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>F3(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>F3(e.remoteStore,s)),t._onlineComponents=e}),TP.apply(this,arguments)}function CP(){return CP=_(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){x("FirestoreClient","Using user provided OfflineComponentProvider");try{yield $v(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function X3(t){return"FirebaseError"===t.name?t.code===T.FAILED_PRECONDITION||t.code===T.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;qr("Error using user provided cache. Falling back to memory cache: "+n),yield $v(t,new Bv)}}else x("FirestoreClient","Using default OfflineComponentProvider"),yield $v(t,new Bv);return t._offlineComponents}),CP.apply(this,arguments)}function AP(){return AP=_(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(x("FirestoreClient","Using user provided OnlineComponentProvider"),yield wP(t,t._uninitializedComponentsProvider._online)):(x("FirestoreClient","Using default OnlineComponentProvider"),yield wP(t,new Ll))),t._onlineComponents}),AP.apply(this,arguments)}function Bl(t){return SP.apply(this,arguments)}function SP(){return SP=_(function*(t){const e=yield function Gv(t){return AP.apply(this,arguments)}(t),n=e.eventManager;return n.onListen=OTe.bind(null,e.syncEngine),n.onUnlisten=FTe.bind(null,e.syncEngine),n}),SP.apply(this,arguments)}function r6(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const i6=new Map;function Ee(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new b(T.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=function qv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":z()}(t);throw new b(T.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class u6{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new b(T.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new b(T.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function p0e(t,e,n,r){if(!0===e&&!0===r)throw new b(T.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=r6(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new b(T.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new b(T.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new b(T.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u6({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new b(T.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new b(T.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u6(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new cEe;switch(r.type){case"firstParty":return new fEe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new b(T.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=i6.get(n);r&&(x("ComponentProvider","Removing Datastore"),i6.delete(n),r.terminate())}(this),Promise.resolve()}}class Sn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Sn(this.firestore,e,this._query)}}class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}}class is extends Sn{constructor(e,n,r){super(e,n,ml(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new F(e))}withConverter(e){return new is(this.firestore,e,this._path)}}class _0e{constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new D1(this,"async_queue_retry"),this.ou=()=>{const n=Vv();n&&x("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Ho.$o()};const e=Vv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this._u(),this.au(e)}enterRestrictedMode(e){if(!this.eu){this.eu=!0,this.iu=e||!1;const n=Vv();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.ou)}}enqueue(e){if(this._u(),this.eu)return new Promise(()=>{});const n=new Yt;return this.au(()=>this.eu&&this.iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xa.push(e),this.uu()))}uu(){var e=this;return _(function*(){if(0!==e.Xa.length){try{yield e.Xa[0](),e.Xa.shift(),e.Ho.reset()}catch(n){if(!Mo(n))throw n;x("AsyncQueue","Operation failed with retryable error: "+n)}e.Xa.length>0&&e.Ho.Qo(()=>e.uu())}})()}au(e){const n=this.Za.then(()=>(this.ru=!0,e().catch(r=>{throw this.nu=r,this.ru=!1,Pt("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.ru=!1,r))));return this.Za=n,n}enqueueAfterDelay(e,n,r){this._u(),this.su.indexOf(e)>-1&&(n=0);const i=G1.createAndSchedule(this,e,n,r,s=>this.cu(s));return this.tu.push(i),i}_u(){this.nu&&z()}verifyOperationInProgress(){}lu(){var e=this;return _(function*(){let n;do{n=e.Za,yield n}while(n!==e.Za)})()}hu(e){for(const n of this.tu)if(n.timerId===e)return!0;return!1}Pu(e){return this.lu().then(()=>{this.tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tu)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.lu()})}Iu(e){this.su.push(e)}cu(e){const n=this.tu.indexOf(e);this.tu.splice(n,1)}}function RP(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class et extends hp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new _0e,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||l6(this),this._firestoreClient.terminate()}}function l6(t){var e,n,r;const i=t._freezeSettings(),s=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new GEe(t._databaseId,u,t._persistenceKey,(l=i).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,r6(l.experimentalLongPollingOptions),l.useFetchStreams));var u,l;t._firestoreClient=new r0e(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class fu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fu(Xt.fromBase64String(e))}catch(n){throw new b(T.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fu(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class jl{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new b(T.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class PP{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new b(T.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new b(T.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}}const A0e=new RegExp("[~\\*/\\[\\]]");function Wv(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new b(T.INVALID_ARGUMENT,a+t+u)}class OP{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new b0e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Kv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class b0e extends OP{data(){return super.data()}}function Kv(t,e){return"string"==typeof e?function Hv(t,e,n){if(e.search(A0e)>=0)throw Wv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new jl(...e.split("."))._internalPath}catch{throw Wv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}(t,e):e instanceof jl?e._internalPath:e._delegate._internalPath}class x0e{convertValue(e,n="none"){switch(Fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return No(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new PP(Ct(e.latitude),Ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=dv(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Uf(e));default:return null}}convertTimestamp(e){const n=ko(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);K($7(r));const i=new tu(r.get(1),r.get(3)),s=new F(r.popFirst(5));return i.isEqual(n)||Pt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}class gu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ql extends OP{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Kv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Jv extends ql{data(e={}){return super.data(e)}}class zl{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new gu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Jv(this._firestore,this._userDataWriter,r.key,r,new gu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new b(T.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Jv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new gu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new Jv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new gu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,l=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:P0e(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function P0e(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}class zo extends x0e{constructor(e){super(),this.firestore=e}convertBytes(e){return new fu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}!function(e,n=!0){al="10.4.0",$r(new jt("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new et(new dEe(r.getProvider("auth-internal")),new pEe(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new b(T.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tu(c.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Tr(mH,"4.2.0",e),Tr(mH,"4.2.0","esm2017")}();var tI=function(){return tI=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++)for(var s in n=arguments[r])Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);return e},tI.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var z0e={includeMetadataChanges:!1};function jP(t,e){return void 0===e&&(e=z0e),new ft(function(n){var r=function M0e(t,...e){var n,r,i;t=jr(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||RP(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(RP(e[o])){const d=e[o];e[o]=null===(n=d.next)||void 0===n?void 0:n.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let u,c,l;if(t instanceof Nt)c=Ee(t.firestore,et),l=ml(t._key.path),u={next:d=>{e[o]&&e[o](function LP(t,e,n){const r=n.docs.get(e._key),i=new zo(t);return new ql(t,i,e._key,r,new gu(n.hasPendingWrites,n.fromCache),e.converter)}(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Ee(t,Sn);c=Ee(d.firestore,et),l=d._query;const h=new zo(c);u={next:f=>{e[o]&&e[o](new zl(c,h,d,f))},error:e[o+1],complete:e[o+2]},function T6(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new b(T.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query)}return function(h,f,p,g){const m=new jv(g),v=new Q1(f,m,p);return h.asyncQueue.enqueueAndForget(_(function*(){return function q1(t,e){return z1.apply(this,arguments)}(yield Bl(h),v)})),()=>{m.La(),h.asyncQueue.enqueueAndForget(_(function*(){return function H1(t,e){return W1.apply(this,arguments)}(yield Bl(h),v)}))}}(function kt(t){return t._firestoreClient||l6(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}(c),l,a,u)}(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function J0e(t,e){return void 0===e&&(e={}),function X0e(t){return jP(t,{includeMetadataChanges:!0}).pipe(ke(function(e){return e.docs}))}(t).pipe(ke(function(n){return n.map(function(r){return function N6(t,e){var n;void 0===e&&(e={});var r=t.data(e);return t.exists()&&"object"==typeof r&&null!==r&&e.idField?tI(tI({},r),((n={})[e.idField]=t.id,n)):r}(r,e)})}))}var B,eDe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ci={},qP=qP||{},de=eDe||self;function nI(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function yp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var zP="closure_uid_"+(1e9*Math.random()>>>0),nDe=0;function rDe(t,e,n){return t.call.apply(t.bind,arguments)}function iDe(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function zn(t,e,n){return(zn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rDe:iDe).apply(null,arguments)}function rI(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function cn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Ho(){this.s=this.s,this.o=this.o}Ho.prototype.s=!1,Ho.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function tDe(t){Object.prototype.hasOwnProperty.call(t,zP)&&t[zP]||(t[zP]=++nDe)}(this)},Ho.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const V6=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function HP(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function L6(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(nI(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Hn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Hn.prototype.h=function(){this.defaultPrevented=!0};var oDe=function(){if(!de.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{de.addEventListener("test",()=>{},e),de.removeEventListener("test",()=>{},e)}catch{}return t}();function vp(t){return/^[\s\xa0]*$/.test(t)}function iI(){var t=de.navigator;return t&&(t=t.userAgent)?t:""}function ss(t){return-1!=iI().indexOf(t)}function WP(t){return WP[" "](t),t}WP[" "]=function(){};var QP,uDe=ss("Opera"),Hl=ss("Trident")||ss("MSIE"),U6=ss("Edge"),KP=U6||Hl,B6=ss("Gecko")&&!(-1!=iI().toLowerCase().indexOf("webkit")&&!ss("Edge"))&&!(ss("Trident")||ss("MSIE"))&&!ss("Edge"),cDe=-1!=iI().toLowerCase().indexOf("webkit")&&!ss("Edge");function j6(){var t=de.document;return t?t.documentMode:void 0}e:{var YP="",XP=function(){var t=iI();return B6?/rv:([^\);]+)(\)|;)/.exec(t):U6?/Edge\/([\d\.]+)/.exec(t):Hl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):cDe?/WebKit\/(\S+)/.exec(t):uDe?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(XP&&(YP=XP?XP[1]:""),Hl){var JP=j6();if(null!=JP&&JP>parseFloat(YP)){QP=String(JP);break e}}QP=YP}var lDe=de.document&&Hl&&(j6()||parseInt(QP,10))||void 0;function Ip(t,e){if(Hn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(B6){e:{try{WP(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:dDe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ip.$.h.call(this)}}cn(Ip,Hn);var dDe={2:"touch",3:"pen",4:"mouse"};Ip.prototype.h=function(){Ip.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ep="closure_listenable_"+(1e6*Math.random()|0),hDe=0;function fDe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++hDe,this.fa=this.ia=!1}function sI(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function eM(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function G6(t){const e={};for(const n in t)e[n]=t[n];return e}const q6="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z6(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<q6.length;s++)n=q6[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function oI(t){this.src=t,this.g={},this.h=0}function tM(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=V6(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(sI(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function nM(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}oI.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=nM(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new fDe(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var rM="closure_lm_"+(1e6*Math.random()|0),iM={};function H6(t,e,n,r,i){if(r&&r.once)return K6(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)H6(t,e[s],n,r,i);return null}return n=uM(n),t&&t[Ep]?t.O(e,n,yp(r)?!!r.capture:!!r,i):W6(t,e,n,!1,r,i)}function W6(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=yp(i)?!!i.capture:!!i,a=oM(t);if(a||(t[rM]=a=new oI(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function gDe(){const e=mDe;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)oDe||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Y6(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function K6(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)K6(t,e[s],n,r,i);return null}return n=uM(n),t&&t[Ep]?t.P(e,n,yp(r)?!!r.capture:!!r,i):W6(t,e,n,!0,r,i)}function Q6(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Q6(t,e[s],n,r,i);else r=yp(r)?!!r.capture:!!r,n=uM(n),t&&t[Ep]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=nM(s=t.g[e],n,r,i))&&(sI(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=oM(t))&&(e=t.g[e.toString()],t=-1,e&&(t=nM(e,n,r,i)),(n=-1<t?e[t]:null)&&sM(n))}function sM(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Ep])tM(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Y6(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=oM(e))?(tM(n,t),0==n.h&&(n.src=null,e[rM]=null)):sI(t)}}}function Y6(t){return t in iM?iM[t]:iM[t]="on"+t}function mDe(t,e){if(t.fa)t=!0;else{e=new Ip(e,this);var n=t.listener,r=t.la||t.src;t.ia&&sM(t),t=n.call(r,e)}return t}function oM(t){return(t=t[rM])instanceof oI?t:null}var aM="__closure_events_fn_"+(1e9*Math.random()>>>0);function uM(t){return"function"==typeof t?t:(t[aM]||(t[aM]=function(e){return t.handleEvent(e)}),t[aM])}function ln(){Ho.call(this),this.i=new oI(this),this.S=this,this.J=null}function xn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Hn(e,t);else if(e instanceof Hn)e.target=e.target||t;else{var i=e;z6(e=new Hn(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=aI(o,r,!0,e)&&i}if(i=aI(o=e.g=t,r,!0,e)&&i,i=aI(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=aI(o=e.g=n[s],r,!1,e)&&i}function aI(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&tM(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}cn(ln,Ho),ln.prototype[Ep]=!0,ln.prototype.removeEventListener=function(t,e,n,r){Q6(this,t,e,n,r)},ln.prototype.N=function(){if(ln.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)sI(n[r]);delete t.g[e],t.h--}}this.J=null},ln.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},ln.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var cM=de.JSON.stringify;function yDe(){var t=lM;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var X6=new class _De{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new IDe,t=>t.reset());class IDe{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function EDe(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function wDe(t){de.setTimeout(()=>{throw t},0)}let wp,Tp=!1,lM=new class vDe{constructor(){this.h=this.g=null}add(e,n){const r=X6.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},J6=()=>{const t=de.Promise.resolve(void 0);wp=()=>{t.then(TDe)}};var TDe=()=>{for(var t;t=yDe();){try{t.h.call(t.g)}catch(n){wDe(n)}var e=X6;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Tp=!1};function uI(t,e){ln.call(this),this.h=t||1,this.g=e||de,this.j=zn(this.qb,this),this.l=Date.now()}function dM(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function hM(t,e,n){if("function"==typeof t)n&&(t=zn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=zn(t.handleEvent,t)}return 2147483647<Number(e)?-1:de.setTimeout(t,e||0)}function Z6(t){t.g=hM(()=>{t.g=null,t.i&&(t.i=!1,Z6(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}cn(uI,ln),(B=uI.prototype).ga=!1,B.T=null,B.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),xn(this,"tick"),this.ga&&(dM(this),this.start()))}},B.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},B.N=function(){uI.$.N.call(this),dM(this),delete this.g};class DDe extends Ho{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Z6(this)}N(){super.N(),this.g&&(de.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dp(t){Ho.call(this),this.h=t,this.g={}}cn(Dp,Ho);var e5=[];function t5(t,e,n,r){Array.isArray(n)||(n&&(e5[0]=n.toString()),n=e5);for(var i=0;i<n.length;i++){var s=H6(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function n5(t){eM(t.g,function(e,n){this.g.hasOwnProperty(n)&&sM(e)},t),t.g={}}function cI(){this.g=!0}function Wl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function SDe(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return cM(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Dp.prototype.N=function(){Dp.$.N.call(this),n5(this)},Dp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cI.prototype.Ea=function(){this.g=!1},cI.prototype.info=function(){};var mu={},r5=null;function lI(){return r5=r5||new ln}function i5(t){Hn.call(this,mu.Ta,t)}function Cp(t){const e=lI();xn(e,new i5(e))}function s5(t,e){Hn.call(this,mu.STAT_EVENT,t),this.stat=e}function ur(t){const e=lI();xn(e,new s5(e,t))}function o5(t,e){Hn.call(this,mu.Ua,t),this.size=e}function Ap(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return de.setTimeout(function(){t()},e)}mu.Ta="serverreachability",cn(i5,Hn),mu.STAT_EVENT="statevent",cn(s5,Hn),mu.Ua="timingevent",cn(o5,Hn);var dI={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},a5={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function fM(){}function c5(){}fM.prototype.h=null;var mM,bp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function pM(){Hn.call(this,"d")}function gM(){Hn.call(this,"c")}function hI(){}function Sp(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Dp(this),this.P=xDe,this.V=new uI(t=KP?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new l5}function l5(){this.i=null,this.g="",this.h=!1}cn(pM,Hn),cn(gM,Hn),cn(hI,fM),hI.prototype.g=function(){return new XMLHttpRequest},hI.prototype.i=function(){return{}},mM=new hI;var xDe=45e3,_M={},fI={};function yM(t,e,n){t.L=1,t.v=_I(Ws(e)),t.s=n,t.S=!0,d5(t,null)}function d5(t,e){t.G=Date.now(),xp(t),t.A=Ws(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),E5(n.i,"t",r),t.C=0,n=t.l.J,t.h=new l5,t.g=z5(t.l,n?e:null,!t.s),0<t.O&&(t.M=new DDe(zn(t.Pa,t,t.g),t.O)),t5(t.U,t.g,"readystatechange",t.nb),e=t.I?G6(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Cp(),function CDe(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.W,t.s)}function h5(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function f5(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=RDe(t,n),i==fI){4==e&&(t.o=4,ur(14),r=!1),Wl(t.j,t.m,null,"[Incomplete Response]");break}if(i==_M){t.o=4,ur(15),Wl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Wl(t.j,t.m,i,null),vM(t,i)}h5(t)&&i!=fI&&i!=_M&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ur(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),AM(e),e.M=!0,ur(11))):(Wl(t.j,t.m,n,"[Invalid Chunked Response]"),_u(t),Rp(t))}function RDe(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?fI:(n=Number(e.substring(n,r)),isNaN(n)?_M:(r+=1)+n>e.length?fI:(e=e.slice(r,r+n),t.C=r+n,e))}function xp(t){t.Y=Date.now()+t.P,p5(t,t.P)}function p5(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Ap(zn(t.lb,t),e)}function pI(t){t.B&&(de.clearTimeout(t.B),t.B=null)}function Rp(t){0==t.l.H||t.J||j5(t.l,t)}function _u(t){pI(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,dM(t.V),n5(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function vM(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||IM(n.i,t)))if(!t.K&&IM(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;TI(n),EI(n)}CM(n),ur(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ap(zn(n.ib,n),6e3));if(1>=D5(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else vu(n,11)}else if((t.K||n.g==t)&&TI(n),!vp(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const l=c[3];null!=l&&(n.ra=l,n.l.info("VER="+n.ra));const d=c[4];null!=d&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(n.L=r=1.5*h,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(EM(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,st(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=q5(r,r.J?r.pa:null,r.Y),o.K){C5(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.B&&(pI(a),xp(a)),r.g=o}else U5(r);0<n.j.length&&wI(n)}else"stop"!=c[0]&&"close"!=c[0]||vu(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?vu(n,7):DM(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Cp()}catch{}}function g5(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(nI(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function MDe(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(nI(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function PDe(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(nI(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(B=Sp.prototype).setTimeout=function(t){this.P=t},B.nb=function(t){t=t.target;const e=this.M;e&&3==os(t)?e.l():this.Pa(t)},B.Pa=function(t){try{if(t==this.g)e:{const l=os(this.g);var e=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||KP||this.g&&(this.h.h||this.g.ja()||N5(this.g)))){this.J||4!=l||7==e||Cp(),pI(this);var n=this.g.da();this.ca=n;t:if(h5(this)){var r=N5(this.g);t="";var i=r.length,s=4==os(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){_u(this),Rp(this);var o="";break t}this.h.i=new de.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function ADe(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vp(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,ur(12),_u(this),Rp(this);break e}Wl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vM(this,n)}this.S?(f5(this,l,o),KP&&this.i&&3==l&&(t5(this.U,this.V,"tick",this.mb),this.V.start())):(Wl(this.j,this.m,o,null),vM(this,o)),4==l&&_u(this),this.i&&!this.J&&(4==l?j5(this.l,this):(this.i=!1,xp(this)))}else(function YDe(t){const e={};t=(t.g&&2<=os(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(vp(t[r]))continue;var n=EDe(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function pDe(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,ur(12)):(this.o=0,ur(13)),_u(this),Rp(this)}}}catch{}},B.mb=function(){if(this.g){var t=os(this.g),e=this.g.ja();this.C<e.length&&(pI(this),f5(this,t,e),this.i&&4!=t&&xp(this))}},B.cancel=function(){this.J=!0,_u(this)},B.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function bDe(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Cp(),ur(17)),_u(this),this.o=2,Rp(this)):p5(this,this.Y-t)};var m5=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yu(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof yu){this.h=t.h,gI(this,t.j),this.s=t.s,this.g=t.g,mI(this,t.m),this.l=t.l;var e=t.i,n=new Np;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),_5(this,n),this.o=t.o}else t&&(e=String(t).match(m5))?(this.h=!1,gI(this,e[1]||"",!0),this.s=Pp(e[2]||""),this.g=Pp(e[3]||"",!0),mI(this,e[4]),this.l=Pp(e[5]||"",!0),_5(this,e[6]||"",!0),this.o=Pp(e[7]||"")):(this.h=!1,this.i=new Np(null,this.h))}function Ws(t){return new yu(t)}function gI(t,e,n){t.j=n?Pp(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function mI(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function _5(t,e,n){e instanceof Np?(t.i=e,function UDe(t,e){e&&!t.j&&(Wo(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(v5(this,r),E5(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Mp(e,VDe)),t.i=new Np(e,t.h))}function st(t,e,n){t.i.set(e,n)}function _I(t){return st(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Pp(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Mp(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,kDe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function kDe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}yu.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Mp(e,y5,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Mp(e,y5,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Mp(n,"/"==n.charAt(0)?FDe:ODe,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Mp(n,LDe)),t.join("")};var y5=/[#\/\?@]/g,ODe=/[#\?:]/g,FDe=/[#\?]/g,VDe=/[#\?@]/g,LDe=/#/g;function Np(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Wo(t){t.g||(t.g=new Map,t.h=0,t.i&&function NDe(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function v5(t,e){Wo(t),e=Kl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function I5(t,e){return Wo(t),e=Kl(t,e),t.g.has(e)}function E5(t,e,n){v5(t,e),0<n.length&&(t.i=null,t.g.set(Kl(t,e),HP(n)),t.h+=n.length)}function Kl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function w5(t){this.l=t||jDe,t=de.PerformanceNavigationTiming?0<(t=de.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(de.g&&de.g.Ka&&de.g.Ka()&&de.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(B=Np.prototype).add=function(t,e){Wo(this),this.i=null,t=Kl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},B.forEach=function(t,e){Wo(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},B.ta=function(){Wo(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},B.Z=function(t){Wo(this);let e=[];if("string"==typeof t)I5(this,t)&&(e=e.concat(this.g.get(Kl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},B.set=function(t,e){return Wo(this),this.i=null,I5(this,t=Kl(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},B.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},B.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var jDe=10;function T5(t){return!!t.h||!!t.g&&t.g.size>=t.j}function D5(t){return t.h?1:t.g?t.g.size:0}function IM(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function EM(t,e){t.g?t.g.add(e):t.h=e}function C5(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function A5(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return HP(t.i)}w5.prototype.cancel=function(){if(this.i=A5(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var $De=class{stringify(t){return de.JSON.stringify(t,void 0)}parse(t){return de.JSON.parse(t,void 0)}};function GDe(){this.g=new $De}function qDe(t,e,n){const r=n||"";try{g5(t,function(i,s){let o=i;yp(i)&&(o=cM(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function yI(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function kp(t){this.l=t.fc||null,this.j=t.ob||!1}function vI(t,e){ln.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=wM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cn(kp,fM),kp.prototype.g=function(){return new vI(this.l,this.j)},kp.prototype.i=function(t){return function(){return t}}({}),cn(vI,ln);var wM=0;function b5(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Op(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Fp(t)}function Fp(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(B=vI.prototype).open=function(t,e){if(this.readyState!=wM)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Fp(this)},B.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||de).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},B.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Op(this)),this.readyState=wM},B.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Fp(this)),this.g&&(this.readyState=3,Fp(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof de.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;b5(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},B.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Op(this):Fp(this),3==this.readyState&&b5(this)}},B.Za=function(t){this.g&&(this.response=this.responseText=t,Op(this))},B.Ya=function(t){this.g&&(this.response=t,Op(this))},B.ka=function(){this.g&&Op(this)},B.setRequestHeader=function(t,e){this.v.append(t,e)},B.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},B.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(vI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var HDe=de.JSON.parse;function At(t){ln.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=S5,this.L=this.M=!1}cn(At,ln);var S5="",WDe=/^https?$/i,KDe=["POST","PUT"];function x5(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,R5(t),II(t)}function R5(t){t.F||(t.F=!0,xn(t,"complete"),xn(t,"error"))}function P5(t){if(t.h&&typeof qP<"u"&&(!t.C[1]||4!=os(t)||2!=t.da()))if(t.v&&4==os(t))hM(t.La,0,t);else if(xn(t,"readystatechange"),4==os(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(m5)[1]||null;!i&&de.self&&de.self.location&&(i=de.self.location.protocol.slice(0,-1)),r=!WDe.test(i?i.toLowerCase():"")}n=r}if(n)xn(t,"complete"),xn(t,"success");else{t.m=6;try{var s=2<os(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",R5(t)}}finally{II(t)}}}function II(t,e){if(t.g){M5(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||xn(t,"ready");try{n.onreadystatechange=r}catch{}}}function M5(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(de.clearTimeout(t.A),t.A=null)}function os(t){return t.g?t.g.readyState:0}function N5(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case S5:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function k5(t){let e="";return eM(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function TM(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=k5(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):st(t,e,n))}function Vp(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function O5(t){this.Ga=0,this.j=[],this.l=new cI,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Vp("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Vp("baseRetryDelayMs",5e3,t),this.hb=Vp("retryDelaySeedMs",1e4,t),this.eb=Vp("forwardChannelMaxRetries",2,t),this.xa=Vp("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new w5(t&&t.concurrentRequestLimit),this.Ja=new GDe,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function DM(t){if(F5(t),3==t.H){var e=t.W++,n=Ws(t.I);if(st(n,"SID",t.K),st(n,"RID",e),st(n,"TYPE","terminate"),Lp(t,n),(e=new Sp(t,t.l,e)).L=2,e.v=_I(Ws(n)),n=!1,de.navigator&&de.navigator.sendBeacon)try{n=de.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&de.Image&&((new Image).src=e.v,n=!0),n||(e.g=z5(e.l,null),e.g.ha(e.v)),e.G=Date.now(),xp(e)}G5(t)}function EI(t){t.g&&(AM(t),t.g.cancel(),t.g=null)}function F5(t){EI(t),t.u&&(de.clearTimeout(t.u),t.u=null),TI(t),t.i.cancel(),t.m&&("number"==typeof t.m&&de.clearTimeout(t.m),t.m=null)}function wI(t){if(!T5(t.i)&&!t.m){t.m=!0;var e=t.Na;wp||J6(),Tp||(wp(),Tp=!0),lM.add(e,t),t.C=0}}function V5(t,e){var n;n=e?e.m:t.W++;const r=Ws(t.I);st(r,"SID",t.K),st(r,"RID",n),st(r,"AID",t.V),Lp(t,r),t.o&&t.s&&TM(r,t.o,t.s),n=new Sp(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=L5(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),EM(t.i,n),yM(n,r,e)}function Lp(t,e){t.na&&eM(t.na,function(n,r){st(e,r,n)}),t.h&&g5({},function(n,r){st(e,r,n)})}function L5(t,e,n){n=Math.min(t.j.length,n);var r=t.h?zn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].g;const l=i[u].map;if(c-=s,0>c)s=Math.max(0,i[u].g-100),a=!1;else try{qDe(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function U5(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;wp||J6(),Tp||(wp(),Tp=!0),lM.add(e,t),t.A=0}}function CM(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Ap(zn(t.Ma,t),$5(t,t.A)),t.A++,0))}function AM(t){null!=t.B&&(de.clearTimeout(t.B),t.B=null)}function B5(t){t.g=new Sp(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Ws(t.wa);st(e,"RID","rpc"),st(e,"SID",t.K),st(e,"AID",t.V),st(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&st(e,"TO",t.qa),st(e,"TYPE","xmlhttp"),Lp(t,e),t.o&&t.s&&TM(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=_I(Ws(e)),n.s=null,n.S=!0,d5(n,t)}function TI(t){null!=t.v&&(de.clearTimeout(t.v),t.v=null)}function j5(t,e){var n=null;if(t.g==e){TI(t),AM(t),t.g=null;var r=2}else{if(!IM(t.i,e))return;n=e.F,C5(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;xn(r=lI(),new o5(r,n)),wI(t)}else U5(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function XDe(t,e){return!(D5(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Ap(zn(t.Na,t,e),$5(t,t.C)),t.C++,0)))}(t,e)||2==r&&CM(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:vu(t,5);break;case 4:vu(t,10);break;case 3:vu(t,6);break;default:vu(t,2)}}function $5(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function vu(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=zn(t.pb,t);n||(n=new yu("//www.google.com/images/cleardot.gif"),de.location&&"http"==de.location.protocol||gI(n,"https"),_I(n)),function zDe(t,e){const n=new cI;if(de.Image){const r=new Image;r.onload=rI(yI,n,r,"TestLoadImage: loaded",!0,e),r.onerror=rI(yI,n,r,"TestLoadImage: error",!1,e),r.onabort=rI(yI,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=rI(yI,n,r,"TestLoadImage: timeout",!1,e),de.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else ur(2);t.H=0,t.h&&t.h.za(e),G5(t),F5(t)}function G5(t){if(t.H=0,t.ma=[],t.h){const e=A5(t.i);(0!=e.length||0!=t.j.length)&&(L6(t.ma,e),L6(t.ma,t.j),t.i.i.length=0,HP(t.j),t.j.length=0),t.h.ya()}}function q5(t,e,n){var r=n instanceof yu?Ws(n):new yu(n);if(""!=r.g)e&&(r.g=e+"."+r.g),mI(r,r.m);else{var i=de.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new yu(null);r&&gI(s,r),e&&(s.g=e),i&&mI(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&st(r,n,e),st(r,"VER",t.ra),Lp(t,r),r}function z5(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new At(n&&t.Ha&&!t.va?new kp({ob:!0}):t.va)).Oa(t.J),e}function H5(){}function DI(){if(Hl&&!(10<=Number(lDe)))throw Error("Environmental error: no available transport.")}function Wr(t,e){ln.call(this),this.g=new O5(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!vp(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vp(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Ql(this)}function W5(t){pM.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function K5(){gM.call(this),this.status=1}function Ql(t){this.g=t}function Ai(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function bM(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function Be(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(B=At.prototype).Oa=function(t){this.M=t},B.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():mM.g(),this.C=function u5(t){return t.h||(t.h=t.i())}(this.u?this.u:mM),this.g.onreadystatechange=zn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void x5(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=de.FormData&&t instanceof de.FormData,!(0<=V6(KDe,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{M5(this),0<this.B&&((this.L=function QDe(t){return Hl&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zn(this.ua,this)):this.A=hM(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){x5(this,s)}},B.ua=function(){typeof qP<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xn(this,"timeout"),this.abort(8))},B.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,xn(this,"complete"),xn(this,"abort"),II(this))},B.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),II(this,!0)),At.$.N.call(this)},B.La=function(){this.s||(this.G||this.v||this.l?P5(this):this.kb())},B.kb=function(){P5(this)},B.isActive=function(){return!!this.g},B.da=function(){try{return 2<os(this)?this.g.status:-1}catch{return-1}},B.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},B.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),HDe(e)}},B.Ia=function(){return this.m},B.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(B=O5.prototype).ra=8,B.H=1,B.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Sp(this,this.l,t);let s=this.s;if(this.U&&(s?(s=G6(s),z6(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=L5(this,i,e),st(n=Ws(this.I),"RID",t),st(n,"CVER",22),this.F&&st(n,"X-HTTP-Session-Id",this.F),Lp(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(k5(s)))+"&"+e:this.o&&TM(n,this.o,s)),EM(this.i,i),this.bb&&st(n,"TYPE","init"),this.P?(st(n,"$req",e),st(n,"SID","null"),i.aa=!0,yM(i,n,null)):yM(i,n,e),this.H=2}}else 3==this.H&&(t?V5(this,t):0==this.j.length||T5(this.i)||V5(this))},B.Ma=function(){if(this.u=null,B5(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ap(zn(this.jb,this),t)}},B.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ur(10),EI(this),B5(this))},B.ib=function(){null!=this.v&&(this.v=null,EI(this),CM(this),ur(19))},B.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ur(2)):(this.l.info("Failed to ping google.com"),ur(1))},B.isActive=function(){return!!this.h&&this.h.isActive(this)},(B=H5.prototype).Ba=function(){},B.Aa=function(){},B.za=function(){},B.ya=function(){},B.isActive=function(){return!0},B.Va=function(){},DI.prototype.g=function(t,e){return new Wr(t,e)},cn(Wr,ln),Wr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ur(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=q5(t,null,t.Y),wI(t)},Wr.prototype.close=function(){DM(this.g)},Wr.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=cM(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&wI(e)},Wr.prototype.N=function(){this.g.h=null,delete this.j,DM(this.g),delete this.g,Wr.$.N.call(this)},cn(W5,pM),cn(K5,gM),cn(Ql,H5),Ql.prototype.Ba=function(){xn(this.g,"a")},Ql.prototype.Aa=function(t){xn(this.g,new W5(t))},Ql.prototype.za=function(t){xn(this.g,new K5)},Ql.prototype.ya=function(){xn(this.g,"b")},cn(Ai,function JDe(){this.blockSize=-1}),Ai.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ai.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)bM(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){bM(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){bM(this,r),i=0;break}}this.h=i,this.i+=e},Ai.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var ZDe={};function SM(t){return-128<=t&&128>t?function aDe(t,e){var n=ZDe;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Be([0|e],0>e?-1:0)}):new Be([0|t],0>t?-1:0)}function as(t){if(isNaN(t)||!isFinite(t))return Yl;if(0>t)return Rn(as(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=xM;return new Be(e,0)}var xM=4294967296,Yl=SM(0),RM=SM(1),Y5=SM(16777216);function Ks(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function li(t){return-1==t.h}function Rn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Be(n,~t.h).add(RM)}function CI(t,e){return t.add(Rn(e))}function AI(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Up(t,e){this.g=t,this.h=e}function bI(t,e){if(Ks(e))throw Error("division by zero");if(Ks(t))return new Up(Yl,Yl);if(li(t))return e=bI(Rn(t),e),new Up(Rn(e.g),Rn(e.h));if(li(e))return e=bI(t,Rn(e)),new Up(Rn(e.g),e.h);if(30<t.g.length){if(li(t)||li(e))throw Error("slowDivide_ only works with positive integers.");for(var n=RM,r=e;0>=r.X(t);)n=X5(n),r=X5(r);var i=Xl(n,1),s=Xl(r,1);for(r=Xl(r,2),n=Xl(n,2);!Ks(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Xl(r,1),n=Xl(n,1)}return e=CI(t,i.R(e)),new Up(i,e)}for(i=Yl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=as(n)).R(e);li(o)||0<o.X(t);)o=(s=as(n-=r)).R(e);Ks(s)&&(s=RM),i=i.add(s),t=CI(t,o)}return new Up(i,t)}function X5(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Be(n,t.h)}function Xl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Be(i,t.h)}(B=Be.prototype).ea=function(){if(li(this))return-Rn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:xM+r)*e,e*=xM}return t},B.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Ks(this))return"0";if(li(this))return"-"+Rn(this).toString(t);for(var e=as(Math.pow(t,6)),n=this,r="";;){var i=bI(n,e).g,s=((0<(n=CI(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Ks(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},B.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},B.X=function(t){return li(t=CI(this,t))?-1:Ks(t)?0:1},B.abs=function(){return li(this)?Rn(this):this},B.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new Be(n,-2147483648&n[n.length-1]?-1:0)},B.R=function(t){if(Ks(this)||Ks(t))return Yl;if(li(this))return li(t)?Rn(this).R(Rn(t)):Rn(Rn(this).R(t));if(li(t))return Rn(this.R(Rn(t)));if(0>this.X(Y5)&&0>t.X(Y5))return as(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,AI(n,2*r+2*i),n[2*r+2*i+1]+=s*u,AI(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,AI(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,AI(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Be(n,0)},B.gb=function(t){return bI(this,t).h},B.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Be(n,this.h&t.h)},B.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Be(n,this.h|t.h)},B.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Be(n,this.h^t.h)},DI.prototype.createWebChannel=DI.prototype.g,Wr.prototype.send=Wr.prototype.u,Wr.prototype.open=Wr.prototype.m,Wr.prototype.close=Wr.prototype.close,dI.NO_ERROR=0,dI.TIMEOUT=8,dI.HTTP_ERROR=6,a5.COMPLETE="complete",c5.EventType=bp,bp.OPEN="a",bp.CLOSE="b",bp.ERROR="c",bp.MESSAGE="d",ln.prototype.listen=ln.prototype.O,At.prototype.listenOnce=At.prototype.P,At.prototype.getLastError=At.prototype.Sa,At.prototype.getLastErrorCode=At.prototype.Ia,At.prototype.getStatus=At.prototype.da,At.prototype.getResponseJson=At.prototype.Wa,At.prototype.getResponseText=At.prototype.ja,At.prototype.send=At.prototype.ha,At.prototype.setWithCredentials=At.prototype.Oa,Ai.prototype.digest=Ai.prototype.l,Ai.prototype.reset=Ai.prototype.reset,Ai.prototype.update=Ai.prototype.j,Be.prototype.add=Be.prototype.add,Be.prototype.multiply=Be.prototype.R,Be.prototype.modulo=Be.prototype.gb,Be.prototype.compare=Be.prototype.X,Be.prototype.toNumber=Be.prototype.ea,Be.prototype.toString=Be.prototype.toString,Be.prototype.getBits=Be.prototype.D,Be.fromNumber=as,Be.fromString=function Q5(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Rn(Q5(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=as(Math.pow(e,8)),r=Yl,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=as(Math.pow(e,s)),r=r.R(s).add(as(o))):r=(r=r.R(n)).add(as(o))}return r};var eCe=Ci.createWebChannelTransport=function(){return new DI},tCe=Ci.getStatEventTarget=function(){return lI()},PM=Ci.ErrorCode=dI,nCe=Ci.EventType=a5,rCe=Ci.Event=mu,J5=Ci.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},iCe=Ci.FetchXmlHttpFactory=kp,SI=Ci.WebChannel=c5,sCe=Ci.XhrIo=At,oCe=Ci.Md5=Ai,Jl=Ci.Integer=Be;const Z5="@firebase/firestore";class dn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");let Zl="9.23.0";const Ko=new wo("@firebase/firestore");function MM(){return Ko.logLevel}function M(t,...e){if(Ko.logLevel<=_e.DEBUG){const n=e.map(NM);Ko.debug(`Firestore (${Zl}): ${t}`,...n)}}function Ot(t,...e){if(Ko.logLevel<=_e.ERROR){const n=e.map(NM);Ko.error(`Firestore (${Zl}): ${t}`,...n)}}function bi(t,...e){if(Ko.logLevel<=_e.WARN){const n=e.map(NM);Ko.warn(`Firestore (${Zl}): ${t}`,...n)}}function NM(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function H(t="Unexpected state"){const e=`FIRESTORE (${Zl}) INTERNAL ASSERTION FAILED: `+t;throw Ot(e),new Error(e)}function Q(t,e){t||H()}function L(t,e){return t}const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class S extends wr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class eW{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aCe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dn.UNAUTHENTICATED))}shutdown(){}}class uCe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cCe{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new Jt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Jt,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(_(function*(){yield c.promise,yield s(r.currentUser)}))},u=c=>{M("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(M("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Jt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(M("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Q("string"==typeof r.accessToken),new eW(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Q(null===e||"string"==typeof e),new dn(e)}}class lCe{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class dCe{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new lCe(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tW{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hCe{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=s=>{null!=s.error&&M("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,M("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{M("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):M("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Q("string"==typeof n.token),this.T=n.token,new tW(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function fCe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class nW{static A(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=fCe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function ed(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class _t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new S(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new S(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new S(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new S(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new _t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new _t(0,0))}static max(){return new X(new _t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Bp{constructor(e,n,r){void 0===n?n=0:n>e.length&&H(),void 0===r?r=e.length-n:r>e.length-n&&H(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Bp.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bp?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends Bp{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new S(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const pCe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Bp{construct(e,n,r){return new Ft(e,n,r)}static isValidIdentifier(e){return pCe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ft(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new S(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new S(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new S(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new S(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}class V{constructor(e){this.path=e}static fromPath(e){return new V(Se.fromString(e))}static fromName(e){return new V(Se.fromString(e).popFirst(5))}static empty(){return new V(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Se.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new V(new Se(e.slice()))}}function sW(t){return new Kr(t.readTime,t.key,-1)}class Kr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Kr(X.min(),V.empty(),-1)}static max(){return new Kr(X.max(),V.empty(),-1)}}function OM(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=V.comparator(t.documentKey,e.documentKey),0!==n?n:oe(t.largestBatchId,e.largestBatchId))}const oW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _Ce{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Qo(t){return FM.apply(this,arguments)}function FM(){return FM=_(function*(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==oW)throw t;M("LocalStore","Unexpectedly lost primary lease")}),FM.apply(this,arguments)}class E{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new E((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof E?n:E.resolve(n)}catch(n){return E.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):E.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):E.reject(n)}static resolve(e){return new E((n,r)=>{n(e)})}static reject(e){return new E((n,r)=>{r(e)})}static waitFor(e){return new E((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=E.resolve(!1);for(const r of e)n=n.next(i=>i?E.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new E((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new E((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}function Yo(t){return"IndexedDbTransactionError"===t.name}let Qr=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ut&&this.ut(n),n}}return t.ct=-1,t})();function Gp(t){return null==t}function qp(t){return 0===t&&1/t==-1/0}function gW(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mW(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class tt{constructor(e,n){this.comparator=e,this.root=n||Pn.EMPTY}insert(e,n){return new tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new NI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new NI(this.root,e,this.comparator,!1)}getReverseIterator(){return new NI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new NI(this.root,e,this.comparator,!0)}}class NI{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Pn.RED,this.left=i??Pn.EMPTY,this.right=s??Pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Pn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Pn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();const e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}}Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1,Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Pn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ot{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _W(this.data.getIterator())}getIteratorFrom(e){return new _W(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ot(this.comparator);return n.data=e,n}}class _W{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Sr{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new Sr([])}unionWith(e){let n=new ot(Ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Sr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ed(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class yW extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new yW("Invalid base64 string: "+i):i}}(e);return new Zt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const BCe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jo(t){if(Q(!!t),"string"==typeof t){let e=0;const n=BCe.exec(t);if(Q(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(t.seconds),nanos:bt(t.nanos)}}function bt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Qs(t){return"string"==typeof t?Zt.fromBase64String(t):Zt.fromUint8Array(t)}function kI(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function OI(t){const e=t.mapValue.fields.__previous_value__;return kI(e)?OI(e):e}function zp(t){const e=Jo(t.mapValue.fields.__local_write_time__.timestampValue);return new _t(e.seconds,e.nanos)}class jCe{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class wu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new wu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wu&&e.projectId===this.projectId&&e.database===this.database}}const Zo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ea(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kI(t)?4:wW(t)?9007199254740991:10:H()}function cs(t,e){if(t===e)return!0;const n=ea(t);if(n!==ea(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zp(t).isEqual(zp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Jo(r.timestampValue),o=Jo(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,Qs(t.bytesValue).isEqual(Qs(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return bt(r.geoPointValue.latitude)===bt(i.geoPointValue.latitude)&&bt(r.geoPointValue.longitude)===bt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return bt(r.integerValue)===bt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=bt(r.doubleValue),o=bt(i.doubleValue);return s===o?qp(s)===qp(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return ed(t.arrayValue.values||[],e.arrayValue.values||[],cs);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(gW(s)!==gW(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!cs(s[a],o[a])))return!1;return!0}(t,e);default:return H()}var i}function Hp(t,e){return void 0!==(t.values||[]).find(n=>cs(n,e))}function ta(t,e){if(t===e)return 0;const n=ea(t),r=ea(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=bt(i.integerValue||i.doubleValue),a=bt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return vW(t.timestampValue,e.timestampValue);case 4:return vW(zp(t),zp(e));case 5:return oe(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Qs(i),a=Qs(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=oe(o[u],a[u]);if(0!==c)return c}return oe(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=oe(bt(i.latitude),bt(s.latitude));return 0!==o?o:oe(bt(i.longitude),bt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const c=ta(o[u],a[u]);if(c)return c}return oe(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Zo.mapValue&&s===Zo.mapValue)return 0;if(i===Zo.mapValue)return 1;if(s===Zo.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let l=0;l<a.length&&l<c.length;++l){const d=oe(a[l],c[l]);if(0!==d)return d;const h=ta(o[a[l]],u[c[l]]);if(0!==h)return h}return oe(a.length,c.length)}(t.mapValue,e.mapValue);default:throw H()}}function vW(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return oe(t,e);const n=Jo(t),r=Jo(e),i=oe(n.seconds,r.seconds);return 0!==i?i:oe(n.nanos,r.nanos)}function nd(t){return UM(t)}function UM(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Jo(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Qs(t.bytesValue).toBase64():"referenceValue"in t?V.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=UM(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${UM(r.fields[a])}`;return s+"}"}(t.mapValue):H();var e}function Tu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function BM(t){return!!t&&"integerValue"in t}function Wp(t){return!!t&&"arrayValue"in t}function IW(t){return!!t&&"nullValue"in t}function EW(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function LI(t){return!!t&&"mapValue"in t}function Kp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Xo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Kp(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kp(t.arrayValue.values[n]);return e}return Object.assign({},t)}function wW(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!LI(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kp(n)}setAll(e){let n=Ft.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Kp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());LI(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];LI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Xo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Mn(Kp(this.value))}}function CW(t){const e=[];return Xo(t.fields,(n,r)=>{const i=new Ft([n]);if(LI(r)){const s=CW(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Sr(e)}class at{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new at(e,0,X.min(),X.min(),X.min(),Mn.empty(),0)}static newFoundDocument(e,n,r,i){return new at(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new at(e,2,n,X.min(),X.min(),Mn.empty(),0)}static newUnknownDocument(e,n){return new at(e,3,n,X.min(),X.min(),Mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class na{constructor(e,n){this.position=e,this.inclusive=n}}function AW(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?V.comparator(V.fromName(o.referenceValue),n.key):ta(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function bW(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cs(t.position[n],e.position[n]))return!1;return!0}class rd{constructor(e,n="asc"){this.field=e,this.dir=n}}function qCe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class SW{}class we extends SW{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new zCe(e,n,r):"array-contains"===n?new KCe(e,r):"in"===n?new kW(e,r):"not-in"===n?new QCe(e,r):"array-contains-any"===n?new YCe(e,r):new we(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new HCe(e,r):new WCe(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(ta(n,this.value)):null!==n&&ea(this.value)===ea(n)&&this.matchesComparison(ta(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class je extends SW{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new je(e,n)}matches(e){return id(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return null!==e?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function id(t){return"and"===t.op}function $M(t){return function xW(t){for(const e of t.filters)if(e instanceof je)return!1;return!0}(t)&&id(t)}function GM(t){if(t instanceof we)return t.field.canonicalString()+t.op.toString()+nd(t.value);if($M(t))return t.filters.map(e=>GM(e)).join(",");{const e=t.filters.map(n=>GM(n)).join(",");return`${t.op}(${e})`}}function RW(t,e){return t instanceof we?(n=t,(r=e)instanceof we&&n.op===r.op&&n.field.isEqual(r.field)&&cs(n.value,r.value)):t instanceof je?function(n,r){return r instanceof je&&n.op===r.op&&n.filters.length===r.filters.length&&n.filters.reduce((i,s,o)=>i&&RW(s,r.filters[o]),!0)}(t,e):void H();var n,r}function MW(t){return t instanceof we?function(e){return`${e.field.canonicalString()} ${e.op} ${nd(e.value)}`}(t):t instanceof je?function(e){return e.op.toString()+" {"+e.getFilters().map(MW).join(" ,")+"}"}(t):"Filter"}class zCe extends we{constructor(e,n,r){super(e,n,r),this.key=V.fromName(r.referenceValue)}matches(e){const n=V.comparator(e.key,this.key);return this.matchesComparison(n)}}class HCe extends we{constructor(e,n){super(e,"in",n),this.keys=NW(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class WCe extends we{constructor(e,n){super(e,"not-in",n),this.keys=NW(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function NW(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>V.fromName(r.referenceValue))}class KCe extends we{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wp(n)&&Hp(n.arrayValue,this.value)}}class kW extends we{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Hp(this.value.arrayValue,n)}}class QCe extends we{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Hp(this.value.arrayValue,n)}}class YCe extends we{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Hp(this.value.arrayValue,r))}}class XCe{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function qM(t,e=null,n=[],r=[],i=null,s=null,o=null){return new XCe(t,e,n,r,i,s,o)}function Du(t){const e=L(t);if(null===e.dt){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>GM(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Gp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nd(r)).join(",")),e.dt=n}return e.dt}function Qp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!qCe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RW(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bW(t.startAt,e.startAt)&&bW(t.endAt,e.endAt)}function UI(t){return V.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Ys{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.wt=null,this._t=null}}function sd(t){return new Ys(t)}function LW(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function zM(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function jI(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}function HM(t){return null!==t.collectionGroup}function Cu(t){const e=L(t);if(null===e.wt){e.wt=[];const n=jI(e),r=zM(e);if(null!==n&&null===r)n.isKeyField()||e.wt.push(new rd(n)),e.wt.push(new rd(Ft.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new rd(Ft.keyField(),s))}}}return e.wt}function cr(t){const e=L(t);if(!e._t)if("F"===e.limitType)e._t=qM(e.path,e.collectionGroup,Cu(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Cu(e))n.push(new rd(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new na(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new na(e.startAt.position,e.startAt.inclusive):null;e._t=qM(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function WM(t,e){e.getFirstInequalityField(),jI(t);const n=t.filters.concat([e]);return new Ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $I(t,e,n){return new Ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yp(t,e){return Qp(cr(t),cr(e))&&t.limitType===e.limitType}function UW(t){return`${Du(cr(t))}|lt:${t.limitType}`}function KM(t){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>MW(r)).join(", ")}]`),Gp(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nd(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nd(r)).join(",")),`Target(${n})`}(cr(t))}; limitType=${t.limitType})`}function Xp(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):V.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Cu(n))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(i,s,o){const a=AW(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Cu(n),r)||n.endAt&&!function(i,s,o){const a=AW(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Cu(n),r)));var n,r}function jW(t){return(e,n)=>{let r=!1;for(const i of Cu(t)){const s=JCe(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function JCe(t,e,n){const r=t.field.isKeyField()?V.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return null!==a&&null!==u?ta(a,u):H()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}class Xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return mW(this.inner)}size(){return this.innerSize}}const ZCe=new tt(V.comparator);function xr(){return ZCe}const $W=new tt(V.comparator);function Jp(...t){let e=$W;for(const n of t)e=e.insert(n.key,n);return e}function GW(t){let e=$W;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ls(){return Zp()}function qW(){return Zp()}function Zp(){return new Xs(t=>t.toString(),(t,e)=>t.isEqual(e))}const eAe=new tt(V.comparator),tAe=new ot(V.comparator);function ge(...t){let e=tAe;for(const n of t)e=e.add(n);return e}const nAe=new ot(oe);function zW(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qp(e)?"-0":e}}function HW(t){return{integerValue:""+t}}function WW(t,e){return function uW(t){return"number"==typeof t&&Number.isInteger(t)&&!qp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?HW(e):zW(t,e)}class GI{constructor(){this._=void 0}}function rAe(t,e,n){return t instanceof od?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&kI(i)&&(i=OI(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof Au?QW(t,e):t instanceof bu?YW(t,e):function(r,i){const s=KW(r,i),o=XW(s)+XW(r.gt);return BM(s)&&BM(r.gt)?HW(o):zW(r.serializer,o)}(t,e)}function iAe(t,e,n){return t instanceof Au?QW(t,e):t instanceof bu?YW(t,e):n}function KW(t,e){return t instanceof ad?BM(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null;var r,n}class od extends GI{}class Au extends GI{constructor(e){super(),this.elements=e}}function QW(t,e){const n=JW(e);for(const r of t.elements)n.some(i=>cs(i,r))||n.push(r);return{arrayValue:{values:n}}}class bu extends GI{constructor(e){super(),this.elements=e}}function YW(t,e){let n=JW(e);for(const r of t.elements)n=n.filter(i=>!cs(i,r));return{arrayValue:{values:n}}}class ad extends GI{constructor(e,n){super(),this.serializer=e,this.gt=n}}function XW(t){return bt(t.integerValue||t.doubleValue)}function JW(t){return Wp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class oAe{constructor(e,n){this.version=e,this.transformResults=n}}class ht{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ht}static exists(e){return new ht(void 0,e)}static updateTime(e){return new ht(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qI(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class zI{}function ZW(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new cd(t.key,ht.none()):new ud(t.key,t.data,ht.none());{const n=t.data,r=Mn.empty();let i=new ot(Ft.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Js(t.key,r,new Sr(i.toArray()),ht.none())}}function aAe(t,e,n){t instanceof ud?function(r,i,s){const o=r.value.clone(),a=nK(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Js?function(r,i,s){if(!qI(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=nK(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(tK(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function tg(t,e,n,r){return t instanceof ud?function(i,s,o,a){if(!qI(i.precondition,s))return o;const u=i.value.clone(),c=rK(i.fieldTransforms,a,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Js?function(i,s,o,a){if(!qI(i.precondition,s))return o;const u=rK(i.fieldTransforms,a,s),c=s.data;return c.setAll(tK(i)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(l=>l.field))}(t,e,n,r):(o=n,qI(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function uAe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=KW(r.transform,i||null);null!=s&&(null===n&&(n=Mn.empty()),n.set(r.field,s))}return n||null}function eK(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===r||n&&r&&ed(n,r,(i,s)=>function sAe(t,e){return t.field.isEqual(e.field)&&(r=e.transform,(n=t.transform)instanceof Au&&r instanceof Au||n instanceof bu&&r instanceof bu?ed(n.elements,r.elements,cs):n instanceof ad&&r instanceof ad?cs(n.gt,r.gt):n instanceof od&&r instanceof od);var n,r}(i,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}class ud extends zI{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Js extends zI{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function tK(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function nK(t,e,n){const r=new Map;Q(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,iAe(o,a,n[i]))}return r}function rK(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,rAe(s,o,e))}return r}class cd extends zI{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YM extends zI{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class XM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&aAe(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=tg(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=tg(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=qW();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=ZW(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&ed(this.mutations,e.mutations,(n,r)=>eK(n,r))&&ed(this.baseMutations,e.baseMutations,(n,r)=>eK(n,r))}}class JM{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Q(e.mutations.length===r.length);let i=eAe;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new JM(e,n,r,i)}}class ZM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class lAe{constructor(e,n){this.count=e,this.unchangedNames=n}}var qt,xe;function sK(t){if(void 0===t)return Ot("GRPC error has no .code"),D.UNKNOWN;switch(t){case qt.OK:return D.OK;case qt.CANCELLED:return D.CANCELLED;case qt.UNKNOWN:return D.UNKNOWN;case qt.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case qt.INTERNAL:return D.INTERNAL;case qt.UNAVAILABLE:return D.UNAVAILABLE;case qt.UNAUTHENTICATED:return D.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case qt.NOT_FOUND:return D.NOT_FOUND;case qt.ALREADY_EXISTS:return D.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return D.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case qt.ABORTED:return D.ABORTED;case qt.OUT_OF_RANGE:return D.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return D.UNIMPLEMENTED;case qt.DATA_LOSS:return D.DATA_LOSS;default:return H()}}(xe=qt||(qt={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";class eN{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return HI}static getOrCreateInstance(){return null===HI&&(HI=new eN),HI}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let HI=null;const dAe=new Jl([4294967295,4294967295],0);function aK(t){const e=function oK(){return new TextEncoder}().encode(t),n=new oCe;return n.update(e),new Uint8Array(n.digest())}function uK(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Jl([n,r],0),new Jl([i,s],0)]}class tN{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ng(`Invalid padding: ${n}`);if(r<0)throw new ng(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new ng(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new ng(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Jl.fromNumber(this.It)}Et(e,n,r){let i=e.add(n.multiply(Jl.fromNumber(r)));return 1===i.compare(dAe)&&(i=new Jl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const n=aK(e),[r,i]=uK(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new tN(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.It)return;const n=aK(e),[r,i]=uK(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class ng extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rg{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ig.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rg(X.min(),i,new tt(oe),xr(),ge())}}class ig{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ig(r,n,ge(),ge(),ge())}}class WI{constructor(e,n,r,i){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=i}}class cK{constructor(e,n){this.targetId=e,this.Vt=n}}class lK{constructor(e,n,r=Zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class dK{constructor(){this.St=0,this.Dt=fK(),this.Ct=Zt.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ge(),n=ge(),r=ge();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:H()}}),new ig(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=fK()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class hAe{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=xr(),this.zt=hK(),this.Wt=new tt(oe)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:H()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,i)=>{this.te(i)&&n(i)})}ne(e){var n;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if(UI(o))if(0===i){const a=new V(o.path);this.Yt(r,a,at.newNoDocument(a,X.min()))}else Q(1===i);else{const a=this.ie(r);if(a!==i){const u=this.re(e,a);0!==u&&(this.ee(r),this.Wt=this.Wt.insert(r,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(n=eN.instance)||void 0===n||n.notifyOnExistenceFilterMismatch(function(c,l,d){var h,f,p,g,m,v;const y={localCacheCount:l,existenceFilterCount:d.count},w=d.unchangedNames;return w&&(y.bloomFilter={applied:0===c,hashCount:null!==(h=w?.hashCount)&&void 0!==h?h:0,bitmapLength:null!==(g=null===(p=null===(f=w?.bits)||void 0===f?void 0:f.bitmap)||void 0===p?void 0:p.length)&&void 0!==g?g:0,padding:null!==(v=null===(m=w?.bits)||void 0===m?void 0:m.padding)&&void 0!==v?v:0}),y}(u,a,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=r;let u,c;try{u=Qs(s).toUint8Array()}catch(l){if(l instanceof yW)return bi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw l}try{c=new tN(u,o,a)}catch(l){return bi(l instanceof ng?"BloomFilter error: ":"Applying bloom filter failed: ",l),1}return 0===c.It?1:i!==n-this.oe(e.targetId,c)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;n.vt(a)||(this.Yt(e,s,null),i++)}),i}ce(e){const n=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&UI(a.target)){const u=new V(a.target.path);null!==this.jt.get(u)||this.ae(o,u)||this.Yt(o,u,at.newNoDocument(u,e))}s.Mt&&(n.set(o,s.Ot()),s.Ft())}});let r=ge();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.se(u);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new rg(e,n,this.Wt,this.jt,r);return this.jt=xr(),this.zt=hK(),this.Wt=new tt(oe),i}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,n)?i.Bt(n,1):i.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new dK,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new ot(oe),this.zt=this.zt.insert(e,n)),n}te(e){const n=null!==this.se(e);return n||M("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new dK),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function hK(){return new tt(V.comparator)}function fK(){return new tt(V.comparator)}const fAe={asc:"ASCENDING",desc:"DESCENDING"},pAe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gAe={and:"AND",or:"OR"};class mAe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nN(t,e){return t.useProto3Json||Gp(e)?e:{value:e}}function ld(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pK(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _Ae(t,e){return ld(t,e.toTimestamp())}function Vt(t){return Q(!!t),X.fromTimestamp(function(e){const n=Jo(e);return new _t(n.seconds,n.nanos)}(t))}function rN(t,e){return(n=t,new Se(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function gK(t){const e=Se.fromString(t);return Q(DK(e)),e}function sg(t,e){return rN(t.databaseId,e.path)}function ds(t,e){const n=gK(e);if(n.get(1)!==t.databaseId.projectId)throw new S(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new S(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new V(_K(n))}function iN(t,e){return rN(t.databaseId,e)}function og(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _K(t){return Q(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function yK(t,e,n){return{name:sg(t,e),fields:n.value.mapValue.fields}}function IK(t,e){return{documents:[iN(t,e.path)]}}function oN(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=iN(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=iN(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return TK(je.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(c=>{return{field:ra((l=c).field),direction:wAe(l.dir)};var l})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=nN(t,e.limit);var a,u;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt={before:!(u=e.endAt).inclusive,values:u.position}),n}function EK(t){let e=function mK(t){const e=gK(t);return 4===e.length?Se.emptyPath():_K(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Q(1===r);const l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(l){const d=wK(l);return d instanceof je&&$M(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(l=>{return new rd(dd((d=l).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;n.limit&&(a=function(l){let d;return d="object"==typeof l?l.value:l,Gp(d)?null:d}(n.limit));let u=null;var l;n.startAt&&(u=new na((l=n.startAt).values||[],!!l.before));let c=null;return n.endAt&&(c=function(l){return new na(l.values||[],!l.before)}(n.endAt)),function VW(t,e,n,r,i,s,o,a){return new Ys(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",u,c)}function wK(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=dd(e.unaryFilter.field);return we.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=dd(e.unaryFilter.field);return we.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=dd(e.unaryFilter.field);return we.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=dd(e.unaryFilter.field);return we.create(s,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(t):void 0!==t.fieldFilter?function(e){return we.create(dd(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(e){return je.create(e.compositeFilter.filters.map(n=>wK(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return H()}}(e.compositeFilter.op))}(t):H()}function wAe(t){return fAe[t]}function TAe(t){return pAe[t]}function DAe(t){return gAe[t]}function ra(t){return{fieldPath:t.canonicalString()}}function dd(t){return Ft.fromServerFormat(t.fieldPath)}function TK(t){return t instanceof we?function(e){if("=="===e.op){if(EW(e.value))return{unaryFilter:{field:ra(e.field),op:"IS_NAN"}};if(IW(e.value))return{unaryFilter:{field:ra(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(EW(e.value))return{unaryFilter:{field:ra(e.field),op:"IS_NOT_NAN"}};if(IW(e.value))return{unaryFilter:{field:ra(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ra(e.field),op:TAe(e.op),value:e.value}}}(t):t instanceof je?function(e){const n=e.getFilters().map(r=>TK(r));return 1===n.length?n[0]:{compositeFilter:{op:DAe(e.op),filters:n}}}(t):H()}function CAe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function DK(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Zs{constructor(e,n,r,i,s=X.min(),o=X.min(),a=Zt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Zs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class CK{constructor(e){this.fe=e}}function aN(t){const e=EK({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?$I(e,e.limit,"L"):e}class Pu{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(bt(e.integerValue));else if("doubleValue"in e){const r=bt(e.doubleValue);isNaN(r)?this.ye(n,13):(this.ye(n,15),qp(r)?n.pe(0):n.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(n,20),"string"==typeof r?n.Ie(r):(n.Ie(`${r.seconds||""}`),n.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(Qs(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(n,45),n.pe(r.latitude||0),n.pe(r.longitude||0)}else"mapValue"in e?wW(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):H()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const r=e.fields||{};this.ye(n,55);for(const i of Object.keys(r))this.Te(i,n),this.me(r[i],n)}Pe(e,n){const r=e.values||[];this.ye(n,50);for(const i of r)this.me(i,n)}ve(e,n){this.ye(n,37),V.fromName(e).path.forEach(r=>{this.ye(n,60),this.be(r,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}Pu.Ve=new Pu;class kAe{constructor(){this.rn=new fN}addToCollectionParentIndex(e,n){return this.rn.add(n),E.resolve()}getCollectionParents(e,n){return E.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return E.resolve()}deleteFieldIndex(e,n){return E.resolve()}getDocumentsMatchingTarget(e,n){return E.resolve(null)}getIndexType(e,n){return E.resolve(0)}getFieldIndexes(e,n){return E.resolve([])}getNextCollectionGroupToUpdate(e){return E.resolve(null)}getMinOffset(e,n){return E.resolve(Kr.min())}getMinOffsetFromCollectionGroup(e,n){return E.resolve(Kr.min())}updateCollectionGroup(e,n,r){return E.resolve()}updateIndexEntries(e,n){return E.resolve()}}class fN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ot(Se.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ot(Se.comparator)).toArray()}}new Uint8Array(0);class Kn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Kn(e,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Kn.DEFAULT_COLLECTION_PERCENTILE=10,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kn.DEFAULT=new Kn(41943040,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kn.DISABLED=new Kn(-1,0,0);class Nu{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Nu(0)}static Mn(){return new Nu(-1)}}class BAe{constructor(){this.changes=new Xs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?E.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class GAe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class XK{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&tg(r.mutation,i,Sr.empty(),_t.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const i=ls();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Jp();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ls();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=xr();const o=Zp(),a=Zp();return n.forEach((u,c)=>{const l=r.get(c.key);i.has(c.key)&&(void 0===l||l.mutation instanceof Js)?s=s.insert(c.key,c):void 0!==l?(o.set(c.key,l.mutation.getFieldMask()),tg(l.mutation,c,l.mutation.getFieldMask(),_t.now())):o.set(c.key,Sr.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new GAe(l,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Zp();let i=new tt((o,a)=>o-a),s=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(null===c)return;let l=r.get(u)||Sr.empty();l=a.applyToLocalView(c,l),r.set(u,l);const d=(i.get(a.batchId)||ge()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,l=u.value,d=qW();l.forEach(h=>{if(!s.has(h)){const f=ZW(n.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return E.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return V.isDocumentKey((i=n).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):HM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r);var i}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):E.resolve(ls());let a=-1,u=s;return o.next(c=>E.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?E.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,ge())).next(l=>({batchId:a,changes:GW(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new V(n)).next(r=>{let i=Jp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Jp();return this.indexManager.getCollectionParents(e,i).next(o=>E.forEach(o,a=>{const u=(c=n,l=a.child(i),new Ys(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,l;return this.getDocumentsMatchingCollectionQuery(e,u,r).next(c=>{c.forEach((l,d)=>{s=s.insert(l,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,u)=>{const c=u.getKey();null===s.get(c)&&(s=s.insert(c,at.newInvalidDocument(c)))});let o=Jp();return s.forEach((a,u)=>{const c=i.get(a);void 0!==c&&tg(c.mutation,u,Sr.empty(),_t.now()),Xp(n,u)&&(o=o.insert(a,u))}),o})}}class qAe{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return E.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:Vt(r.createTime)}),E.resolve()}getNamedQuery(e,n){return E.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,{name:(r=n).name,query:aN(r.bundledQuery),readTime:Vt(r.readTime)}),E.resolve();var r}}class zAe{constructor(){this.overlays=new tt(V.comparator),this.ls=new Map}getOverlay(e,n){return E.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ls();return E.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.we(e,n,s)}),E.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),E.resolve()}getOverlaysForCollection(e,n,r){const i=ls(),s=n.length+1,o=new V(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return E.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new tt((c,l)=>c-l);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);null===l&&(l=ls(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const a=ls(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return E.resolve(a)}we(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ZM(n,r));let s=this.ls.get(n);void 0===s&&(s=ge(),this.ls.set(n,s)),this.ls.set(n,s.add(r.key))}}class pN{constructor(){this.fs=new ot(fn.ds),this.ws=new ot(fn._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new fn(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new fn(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new V(new Se([])),r=new fn(n,e),i=new fn(n,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new V(new Se([])),r=new fn(n,e),i=new fn(n,e+1);let s=ge();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new fn(e,0),r=this.fs.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class fn{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return V.comparator(e.key,n.key)||oe(e.As,n.As)}static _s(e,n){return oe(e.As,n.As)||V.comparator(e.key,n.key)}}class HAe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new ot(fn.ds)}checkEmpty(e){return E.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.vs;this.vs++;const o=new XM(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new fn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return E.resolve(o)}lookupMutationBatch(e,n){return E.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.bs(n+1),s=i<0?0:i;return E.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return E.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return E.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new fn(n,0),i=new fn(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const a=this.Ps(o.As);s.push(a)}),E.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ot(oe);return n.forEach(i=>{const s=new fn(i,0),o=new fn(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{r=r.add(a.As)})}),E.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;V.isDocumentKey(s)||(s=s.child(""));const o=new fn(new V(s),0);let a=new ot(oe);return this.Rs.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.As)),!0)},o),E.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Q(0===this.Ss(n.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return E.forEach(n.mutations,i=>{const s=new fn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new fn(n,0),i=this.Rs.firstAfterOrEqual(r);return E.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return E.resolve()}Ss(e,n){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class WAe{constructor(e){this.Ds=e,this.docs=new tt(V.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return E.resolve(r?r.document.mutableCopy():at.newInvalidDocument(n))}getEntries(e,n){let r=xr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():at.newInvalidDocument(i))}),E.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=xr();const o=n.path,a=new V(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:l}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||OM(sW(l),r)<=0||(i.has(l.key)||Xp(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return E.resolve(s)}getAllFromCollectionGroup(e,n,r,i){H()}Cs(e,n){return E.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new KAe(this)}getSize(e){return E.resolve(this.size)}}class KAe extends BAe{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),E.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}class QAe{constructor(e){this.persistence=e,this.xs=new Xs(n=>Du(n),Qp),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Ns=0,this.ks=new pN,this.targetCount=0,this.Ms=Nu.kn()}forEachTarget(e,n){return this.xs.forEach((r,i)=>n(i)),E.resolve()}getLastRemoteSnapshotVersion(e){return E.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return E.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),E.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),E.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Nu(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,E.resolve()}updateTargetData(e,n){return this.Fn(n),E.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,E.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),E.waitFor(s).next(()=>i)}getTargetCount(e){return E.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return E.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),E.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),E.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),E.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return E.resolve(r)}containsKey(e,n){return E.resolve(this.ks.containsKey(n))}}class gN{constructor(e,n){this.$s={},this.overlays={},this.Os=new Qr(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new QAe(this),this.indexManager=new kAe,this.remoteDocumentCache=new WAe(r=>this.referenceDelegate.Ls(r)),this.serializer=new CK(n),this.qs=new qAe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zAe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new HAe(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){M("MemoryPersistence","Starting transaction:",e);const i=new YAe(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,n){return E.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class YAe extends _Ce{constructor(e){super(),this.currentSequenceNumber=e}}class nE{constructor(e){this.persistence=e,this.Qs=new pN,this.js=null}static zs(e){return new nE(e)}get Ws(){if(this.js)return this.js;throw H()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),E.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),E.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),E.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return E.forEach(this.Ws,r=>{const i=V.fromPath(r);return this.Hs(e,i).next(s=>{s||n.removeEntry(i,X.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return E.or([()=>E.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}class vN{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=i}static Li(e,n){let r=ge(),i=ge();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new vN(e,n.fromCache,r,i)}}class ZK{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ki(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(LW(n))return E.resolve(null);let r=cr(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=$I(n,null,"F"),r=cr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ge(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ji(n,a);return this.zi(n,c,o,u.readTime)?this.Ki(e,$I(n,null,"F")):this.Wi(e,c,n,u)}))})))}Gi(e,n,r,i){return LW(n)||i.isEqual(X.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.zi(n,o,r,i)?this.Qi(e,n):(MM()<=_e.DEBUG&&M("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),KM(n)),this.Wi(e,o,n,function iW(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(1e9===r?new _t(n+1,0):new _t(n,r));return new Kr(i,V.empty(),e)}(i,-1)))})}ji(e,n){let r=new ot(jW(e));return n.forEach((i,s)=>{Xp(e,s)&&(r=r.add(s))}),r}zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,n){return MM()<=_e.DEBUG&&M("QueryEngine","Using full collection scan to execute query:",KM(n)),this.Ui.getDocumentsMatchingQuery(e,n,Kr.min())}Wi(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class JAe{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new tt(oe),this.Yi=new Xs(s=>Du(s),Qp),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XK(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function t8(t,e){return IN.apply(this,arguments)}function IN(){return IN=_(function*(t,e){const n=L(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ge();for(const c of i){o.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of s){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({er:c,removedBatchIds:o,addedBatchIds:a}))})})}),IN.apply(this,arguments)}function n8(t){const e=L(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function tbe(t,e){const n=L(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gd(t,e,n){return EN.apply(this,arguments)}function EN(){return EN=_(function*(t,e,n){const r=L(t),i=r.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Yo(o))throw o;M("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),EN.apply(this,arguments)}function sE(t,e,n){const r=L(t);let i=X.min(),s=ge();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,c){const l=L(a),d=l.Yi.get(c);return void 0!==d?E.resolve(l.Ji.get(d)):l.Bs.getTargetData(u,c)}(r,o,cr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?i:X.min(),n?s:ge())).next(a=>(function o8(t,e,n){let r=t.Xi.get(e)||X.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Xi.set(e,r)}(r,function BW(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,ir:s})))}class AN{constructor(){this.activeTargetIds=function QM(){return nAe}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class c8{constructor(){this.Hr=new AN,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new AN,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ibe{Yr(e){}shutdown(){}}class l8{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){M("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){M("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let uE=null;function SN(){return null===uE?uE=268435456+Math.round(2147483648*Math.random()):uE++,"0x"+uE.toString(16)}const sbe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class obe{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Qn="WebChannelConnection";class abe extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,i,s){const o=SN(),a=this.To(e,n);M("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const u={};return this.Eo(u,i,s),this.Ao(e,a,u,r).then(c=>(M("RestConnection",`Received RPC '${e}' ${o}: `,c),c),c=>{throw bi("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}vo(e,n,r,i,s,o){return this.Io(e,n,r,i,s)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Zl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,n){return`${this.mo}/v1/${n}:${sbe[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,i){const s=SN();return new Promise((o,a)=>{const u=new sCe;u.setWithCredentials(!0),u.listenOnce(nCe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case PM.NO_ERROR:const l=u.getResponseJson();M(Qn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case PM.TIMEOUT:M(Qn,`RPC '${e}' ${s} timed out`),a(new S(D.DEADLINE_EXCEEDED,"Request time out"));break;case PM.HTTP_ERROR:const d=u.getStatus();if(M(Qn,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h?.error;if(f&&f.status&&f.message){const p=function(g){const m=g.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(m)>=0?m:D.UNKNOWN}(f.status);a(new S(p,f.message))}else a(new S(D.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new S(D.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{M(Qn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);M(Qn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Ro(e,n,r){const i=SN(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=eCe(),a=tCe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new iCe({})),this.Eo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const l=s.join("");M(Qn,`Creating RPC '${e}' stream ${i}: ${l}`,u);const d=o.createWebChannel(l,u);let h=!1,f=!1;const p=new obe({ro:m=>{f?M(Qn,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(M(Qn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),M(Qn,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},oo:()=>d.close()}),g=(m,v,y)=>{m.listen(v,w=>{try{y(w)}catch(A){setTimeout(()=>{throw A},0)}})};return g(d,SI.EventType.OPEN,()=>{f||M(Qn,`RPC '${e}' stream ${i} transport opened.`)}),g(d,SI.EventType.CLOSE,()=>{f||(f=!0,M(Qn,`RPC '${e}' stream ${i} transport closed`),p.wo())}),g(d,SI.EventType.ERROR,m=>{f||(f=!0,bi(Qn,`RPC '${e}' stream ${i} transport errored:`,m),p.wo(new S(D.UNAVAILABLE,"The operation could not be completed")))}),g(d,SI.EventType.MESSAGE,m=>{var v;if(!f){const y=m.data[0];Q(!!y);const A=y.error||(null===(v=y[0])||void 0===v?void 0:v.error);if(A){M(Qn,`RPC '${e}' stream ${i} received error:`,A);const N=A.status;let j=function(ze){const hi=qt[ze];if(void 0!==hi)return sK(hi)}(N),ae=A.message;void 0===j&&(j=D.INTERNAL,ae="Unknown error status: "+N+" with message "+A.message),f=!0,p.wo(new S(j,ae)),d.close()}else M(Qn,`RPC '${e}' stream ${i} received:`,y),p._o(y)}}),g(a,rCe.STAT_EVENT,m=>{m.stat===J5.PROXY?M(Qn,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===J5.NOPROXY&&M(Qn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function cE(){return typeof document<"u"?document:null}function mg(t){return new mAe(t,!0)}class xN{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&M("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class h8{constructor(e,n,r,i,s,o,a,u){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new xN(e,n)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return _(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return _(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,n){var r=this;return _(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(Ot(n.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):n&&n.code===D.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(n)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===n&&this.Zo(r,i)},r=>{e(()=>{const i=new S(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No(_(function*(){e.state=0,e.start()}))}tu(e){return M("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(M("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ube extends h8{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=function vAe(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:H(),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(Q(void 0===c||"string"==typeof c),Zt.fromBase64String(c||"")):(Q(void 0===c||c instanceof Uint8Array),Zt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=void 0===u.code?D.UNKNOWN:sK(u.code);return new S(c,u.message||"")}(o);n=new lK(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ds(t,r.document.name),s=Vt(r.document.updateTime),o=r.document.createTime?Vt(r.document.createTime):X.min(),a=new Mn({mapValue:{fields:r.document.fields}}),u=at.newFoundDocument(i,s,o,a);n=new WI(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=ds(t,r.document),s=r.readTime?Vt(r.readTime):X.min(),o=at.newNoDocument(i,s);n=new WI([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ds(t,r.document);n=new WI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return H();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new lAe(i,s);n=new cK(r.targetId,o)}}var u;return n}(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?Vt(s.readTime):X.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=og(this.serializer),n.addTarget=function(i,s){let o;const a=s.target;if(o=UI(a)?{documents:IK(i,a)}:{query:oN(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=pK(i,s.resumeToken);const u=nN(i,s.expectedCount);null!==u&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(X.min())>0){o.readTime=ld(i,s.snapshotVersion.toTimestamp());const u=nN(i,s.expectedCount);null!==u&&(o.expectedCount=u)}return o}(this.serializer,e);const r=function EAe(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=og(this.serializer),n.removeTarget=e,this.Wo(n)}}class cbe extends h8{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(Q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=function IAe(t,e){return t&&t.length>0?(Q(void 0!==e),t.map(n=>function(r,i){let s=Vt(r.updateTime?r.updateTime:i);return s.isEqual(X.min())&&(s=Vt(i)),new oAe(s,r.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Vt(e.commitTime);return this.listener.cu(r,n)}return Q(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=og(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function ag(t,e){let n;if(e instanceof ud)n={update:yK(t,e.key,e.value)};else if(e instanceof cd)n={delete:sg(t,e.key)};else if(e instanceof Js)n={update:yK(t,e.key,e.data),updateMask:CAe(e.fieldMask)};else{if(!(e instanceof YM))return H();n={verify:sg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof od)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Au)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof bu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ad)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw H()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:_Ae(t,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:H()),n;var i}(this.serializer,r))};this.Wo(n)}}class lbe extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new S(D.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new S(D.UNKNOWN,i.toString())})}vo(e,n,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new S(D.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class hbe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ot(n),this.mu=!1):M("OnlineStateTracker",n)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class fbe{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(a=>{r.enqueueAndForget(_(function*(){var u;aa(o)&&(M("RemoteStore","Restarting streams for network reachability change."),yield(u=_(function*(c){const l=L(c);l.vu.add(4),yield md(l),l.bu.set("Unknown"),l.vu.delete(4),yield _g(l)}),function(c){return u.apply(this,arguments)})(o))}))}),this.bu=new hbe(r,i)}}function _g(t){return PN.apply(this,arguments)}function PN(){return PN=_(function*(t){if(aa(t))for(const e of t.Ru)yield e(!0)}),PN.apply(this,arguments)}function md(t){return MN.apply(this,arguments)}function MN(){return MN=_(function*(t){for(const e of t.Ru)yield e(!1)}),MN.apply(this,arguments)}function lE(t,e){const n=L(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),ON(n)?kN(n):yd(n).Ko()&&NN(n,e))}function yg(t,e){const n=L(t),r=yd(n);n.Au.delete(e),r.Ko()&&f8(n,e),0===n.Au.size&&(r.Ko()?r.jo():aa(n)&&n.bu.set("Unknown"))}function NN(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yd(t).su(e)}function f8(t,e){t.Vu.qt(e),yd(t).iu(e)}function kN(t){t.Vu=new hAe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),yd(t).start(),t.bu.gu()}function ON(t){return aa(t)&&!yd(t).Uo()&&t.Au.size>0}function aa(t){return 0===L(t).vu.size}function p8(t){t.Vu=void 0}function pbe(t){return FN.apply(this,arguments)}function FN(){return FN=_(function*(t){t.Au.forEach((e,n)=>{NN(t,e)})}),FN.apply(this,arguments)}function gbe(t,e){return VN.apply(this,arguments)}function VN(){return VN=_(function*(t,e){p8(t),ON(t)?(t.bu.Iu(e),kN(t)):t.bu.set("Unknown")}),VN.apply(this,arguments)}function mbe(t,e,n){return LN.apply(this,arguments)}function LN(){return LN=_(function*(t,e,n){if(t.bu.set("Online"),e instanceof lK&&2===e.state&&e.cause)try{yield(r=_(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.Au.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Au.delete(a),i.Vu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(t,e)}catch(r){M("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield dE(t,r)}else if(e instanceof WI?t.Vu.Ht(e):e instanceof cK?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(X.min()))try{const r=yield n8(t.localStore);n.compareTo(r)>=0&&(yield function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.Au.get(u);c&&i.Au.set(u,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,u)=>{const c=i.Au.get(a);if(!c)return;i.Au.set(a,c.withResumeToken(Zt.EMPTY_BYTE_STRING,c.snapshotVersion)),f8(i,a);const l=new Zs(c.target,a,u,c.sequenceNumber);NN(i,l)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n))}catch(r){M("RemoteStore","Failed to raise snapshot:",r),yield dE(t,r)}var r}),LN.apply(this,arguments)}function dE(t,e,n){return UN.apply(this,arguments)}function UN(){return UN=_(function*(t,e,n){if(!Yo(e))throw e;t.vu.add(1),yield md(t),t.bu.set("Offline"),n||(n=()=>n8(t.localStore)),t.asyncQueue.enqueueRetryable(_(function*(){M("RemoteStore","Retrying IndexedDB access"),yield n(),t.vu.delete(1),yield _g(t)}))}),UN.apply(this,arguments)}function g8(t,e){return e().catch(n=>dE(t,n,e))}function _d(t){return BN.apply(this,arguments)}function BN(){return BN=_(function*(t){const e=L(t),n=ua(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;_be(e);)try{const i=yield tbe(e.localStore,r);if(null===i){0===e.Eu.length&&n.jo();break}r=i.batchId,ybe(e,i)}catch(i){yield dE(e,i)}m8(e)&&_8(e)}),BN.apply(this,arguments)}function _be(t){return aa(t)&&t.Eu.length<10}function ybe(t,e){t.Eu.push(e);const n=ua(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function m8(t){return aa(t)&&!ua(t).Uo()&&t.Eu.length>0}function _8(t){ua(t).start()}function vbe(t){return jN.apply(this,arguments)}function jN(){return jN=_(function*(t){ua(t).hu()}),jN.apply(this,arguments)}function Ibe(t){return $N.apply(this,arguments)}function $N(){return $N=_(function*(t){const e=ua(t);for(const n of t.Eu)e.uu(n.mutations)}),$N.apply(this,arguments)}function Ebe(t,e,n){return GN.apply(this,arguments)}function GN(){return GN=_(function*(t,e,n){const r=t.Eu.shift(),i=JM.from(r,e,n);yield g8(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield _d(t)}),GN.apply(this,arguments)}function wbe(t,e){return qN.apply(this,arguments)}function qN(){return qN=_(function*(t,e){var n;e&&ua(t).ou&&(yield(n=_(function*(r,i){if(function iK(t){switch(t){default:return H();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}(s=i.code)&&s!==D.ABORTED){const o=r.Eu.shift();ua(r).Qo(),yield g8(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield _d(r)}var s}),function(r,i){return n.apply(this,arguments)})(t,e)),m8(t)&&_8(t)}),qN.apply(this,arguments)}function y8(t,e){return zN.apply(this,arguments)}function zN(){return zN=_(function*(t,e){const n=L(t);n.asyncQueue.verifyOperationInProgress(),M("RemoteStore","RemoteStore received new credentials");const r=aa(n);n.vu.add(3),yield md(n),r&&n.bu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),yield _g(n)}),zN.apply(this,arguments)}function WN(){return WN=_(function*(t,e){const n=L(t);e?(n.vu.delete(2),yield _g(n)):e||(n.vu.add(2),yield md(n),n.bu.set("Unknown"))}),WN.apply(this,arguments)}function yd(t){return t.Su||(t.Su=function(e,n,r){const i=L(e);return i.fu(),new ube(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:pbe.bind(null,t),ao:gbe.bind(null,t),nu:mbe.bind(null,t)}),t.Ru.push(function(){var e=_(function*(n){n?(t.Su.Qo(),ON(t)?kN(t):t.bu.set("Unknown")):(yield t.Su.stop(),p8(t))});return function(n){return e.apply(this,arguments)}}())),t.Su}function ua(t){return t.Du||(t.Du=function(e,n,r){const i=L(e);return i.fu(),new cbe(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:vbe.bind(null,t),ao:wbe.bind(null,t),au:Ibe.bind(null,t),cu:Ebe.bind(null,t)}),t.Ru.push(function(){var e=_(function*(n){n?(t.Du.Qo(),yield _d(t)):(yield t.Du.stop(),t.Eu.length>0&&(M("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))});return function(n){return e.apply(this,arguments)}}())),t.Du}class KN{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Jt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new KN(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new S(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vd(t,e){if(Ot("AsyncQueue",`${e}: ${t}`),Yo(t))return new S(D.UNAVAILABLE,`${e}: ${t}`);throw t}class Id{constructor(e){this.comparator=e?(n,r)=>e(n,r)||V.comparator(n.key,r.key):(n,r)=>V.comparator(n.key,r.key),this.keyedMap=Jp(),this.sortedSet=new tt(this.comparator)}static emptySet(e){return new Id(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Id)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Id;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class v8{constructor(){this.Cu=new tt(V.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(n,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(n):1===e.type&&2===r.type?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):H():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ed{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ed(e,n,Id.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class Tbe{constructor(){this.Nu=void 0,this.listeners=[]}}class Dbe{constructor(){this.queries=new Xs(e=>UW(e),Yp),this.onlineState="Unknown",this.ku=new Set}}function YN(){return YN=_(function*(t,e){const n=L(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Tbe),i)try{s.Nu=yield n.onListen(r)}catch(o){const a=vd(o,`Initialization of query '${KM(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Mu(n.onlineState),s.Nu&&e.$u(s.Nu)&&ZN(n)}),YN.apply(this,arguments)}function JN(){return JN=_(function*(t,e){const n=L(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),JN.apply(this,arguments)}function Cbe(t,e){const n=L(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.$u(i)&&(r=!0);o.Nu=i}}r&&ZN(n)}function Abe(t,e,n){const r=L(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function ZN(t){t.ku.forEach(e=>{e.next()})}class ek{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ed(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){return!e.fromCache||(!this.options.Ku||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ed.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class w8{constructor(e){this.key=e}}class T8{constructor(e){this.key=e}}class D8{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ge(),this.mutatedKeys=ge(),this.tc=jW(e),this.ec=new Id(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new v8,i=n?n.ec:this.ec;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const h=i.get(l),f=Xp(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),m=!0):this.rc(h,f)||(r.track({type:2,doc:f}),m=!0,(u&&this.tc(f,u)>0||c&&this.tc(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(u||c)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:a,mutatedKeys:s}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((c,l)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return f(d)-f(h)}(c.type,l.type)||this.tc(c.doc,l.doc)),this.oc(r);const o=n?this.uc():[],a=0===this.Zu.size&&this.current?1:0,u=a!==this.Xu;return this.Xu=a,0!==s.length||u?{snapshot:new Ed(this.query,e.ec,i,s,e.mutatedKeys,0===a,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new v8,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ge(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new T8(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new w8(r))}),n}hc(e){this.Yu=e.ir,this.Zu=ge();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return Ed.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class xbe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Rbe{constructor(e){this.key=e,this.fc=!1}}class Pbe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Xs(a=>UW(a),Yp),this._c=new Map,this.mc=new Set,this.gc=new tt(V.comparator),this.yc=new Map,this.Ic=new pN,this.Tc={},this.Ec=new Map,this.Ac=Nu.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function Mbe(t,e){return tk.apply(this,arguments)}function tk(){return tk=_(function*(t,e){const n=function Dk(t){const e=L(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=C8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jbe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Obe.bind(null,e),e.dc.nu=Cbe.bind(null,e.eventManager),e.dc.Pc=Abe.bind(null,e.eventManager),e}(t);let r,i;const s=n.wc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=yield function pd(t,e){const n=L(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Bs.getTargetData(r,e).next(s=>s?(i=s,E.resolve(i)):n.Bs.allocateTargetId(r).next(o=>(i=new Zs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}(n.localStore,cr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield function nk(t,e,n,r,i){return rk.apply(this,arguments)}(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&lE(n.remoteStore,o)}return i}),tk.apply(this,arguments)}function rk(){return rk=_(function*(t,e,n,r,i){t.Rc=(d,h,f)=>{return(p=_(function*(g,m,v,y){let w=m.view.sc(v);w.zi&&(w=yield sE(g.localStore,m.query,!1).then(({documents:j})=>m.view.sc(j,w)));const A=y&&y.targetChanges.get(m.targetId),N=m.view.applyChanges(w,g.isPrimaryClient,A);return fk(g,m.targetId,N.cc),N.snapshot}),function(g,m,v,y){return p.apply(this,arguments)})(t,d,h,f);var p};const s=yield sE(t.localStore,e,!0),o=new D8(e,s.ir),a=o.sc(s.documents),u=ig.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=o.applyChanges(a,t.isPrimaryClient,u);fk(t,n,c.cc);const l=new xbe(e,n,o);return t.wc.set(e,l),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),c.snapshot}),rk.apply(this,arguments)}function Nbe(t,e){return ik.apply(this,arguments)}function ik(){return ik=_(function*(t,e){const n=L(t),r=n.wc.get(e),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(s=>!Yp(s,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield gd(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),yg(n.remoteStore,r.targetId),wd(n,r.targetId)}).catch(Qo))):(wd(n,r.targetId),yield gd(n.localStore,r.targetId,!0))}),ik.apply(this,arguments)}function sk(){return sk=_(function*(t,e,n){const r=function Ck(t){const e=L(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fbe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vbe.bind(null,e),e}(t);try{const i=yield function(s,o){const a=L(s),u=_t.now(),c=o.reduce((h,f)=>h.add(f.key),ge());let l,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=xr(),p=ge();return a.Zi.getEntries(h,c).next(g=>{f=g,f.forEach((m,v)=>{v.isValidDocument()||(p=p.add(m))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{l=g;const m=[];for(const v of o){const y=uAe(v,l.get(v.key).overlayedDocument);null!=y&&m.push(new Js(v.key,y,CW(y.value.mapValue),ht.exists(!0)))}return a.mutationQueue.addMutationBatch(h,u,m,o)}).next(g=>{d=g;const m=g.applyToLocalDocumentSet(l,p);return a.documentOverlayCache.saveOverlays(h,g.batchId,m)})}).then(()=>({batchId:d.batchId,changes:GW(l)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.Tc[s.currentUser.toKey()];u||(u=new tt(oe)),u=u.insert(o,a),s.Tc[s.currentUser.toKey()]=u}(r,i.batchId,n),yield eo(r,i.changes),yield _d(r.remoteStore)}catch(i){const s=vd(i,"Failed to persist write");n.reject(s)}}),sk.apply(this,arguments)}function C8(t,e){return ok.apply(this,arguments)}function ok(){return ok=_(function*(t,e){const n=L(t);try{const r=yield function ebe(t,e){const n=L(t),r=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];e.targetChanges.forEach((l,d)=>{const h=i.get(d);if(!h)return;a.push(n.Bs.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Bs.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,g,m;null!==e.targetMismatches.get(d)?f=f.withResumeToken(Zt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),g=f,m=l,(0===(p=h).resumeToken.approximateByteSize()||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0)&&a.push(n.Bs.updateTargetData(s,f))});let u=xr(),c=ge();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(function r8(t,e,n){let r=ge(),i=ge();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=xr();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):M("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{nr:o,sr:i}})}(s,o,e.documentUpdates).next(l=>{u=l.nr,c=l.sr})),!r.isEqual(X.min())){const l=n.Bs.getLastRemoteSnapshotVersion(s).next(d=>n.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return E.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Ji=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.yc.get(s);o&&(Q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?Q(o.fc):i.removedDocuments.size>0&&(Q(o.fc),o.fc=!1))}),yield eo(n,r,e)}catch(r){yield Qo(r)}}),ok.apply(this,arguments)}function A8(t,e,n){const r=L(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=L(s);a.onlineState=o;let u=!1;a.queries.forEach((c,l)=>{for(const d of l.listeners)d.Mu(o)&&(u=!0)}),u&&ZN(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Obe(t,e,n){return ak.apply(this,arguments)}function ak(){return ak=_(function*(t,e,n){const r=L(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new tt(V.comparator);o=o.insert(s,at.newNoDocument(s,X.min()));const a=ge().add(s),u=new rg(X.min(),new Map,new tt(oe),o,a);yield C8(r,u),r.gc=r.gc.remove(s),r.yc.delete(e),pk(r)}else yield gd(r.localStore,e,!1).then(()=>wd(r,e,n)).catch(Qo)}),ak.apply(this,arguments)}function Fbe(t,e){return uk.apply(this,arguments)}function uk(){return uk=_(function*(t,e){const n=L(t),r=e.batch.batchId;try{const i=yield function ZAe(t,e){const n=L(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,u,c){const l=u.batch,d=l.keys();let h=E.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const g=u.docVersions.get(f);Q(null!==g),p.version.compareTo(g)<0&&(l.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),c.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,l))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=ge();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);hk(n,r,null),dk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield eo(n,i)}catch(i){yield Qo(i)}}),uk.apply(this,arguments)}function Vbe(t,e,n){return ck.apply(this,arguments)}function ck(){return ck=_(function*(t,e,n){const r=L(t);try{const i=yield function(s,o){const a=L(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return a.mutationQueue.lookupMutationBatch(u,o).next(l=>(Q(null!==l),c=l.keys(),a.mutationQueue.removeMutationBatch(u,l))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>a.localDocuments.getDocuments(u,c))})}(r.localStore,e);hk(r,e,n),dk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield eo(r,i)}catch(i){yield Qo(i)}}),ck.apply(this,arguments)}function dk(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function hk(t,e,n){const r=L(t);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function wd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||b8(t,r)})}function b8(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);null!==n&&(yg(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),pk(t))}function fk(t,e,n){for(const r of n)r instanceof w8?(t.Ic.addReference(r.key,e),Ube(t,r)):r instanceof T8?(M("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||b8(t,r.key)):H()}function Ube(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(M("SyncEngine","New document in limbo: "+n),t.mc.add(r),pk(t))}function pk(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new V(Se.fromString(e)),r=t.Ac.next();t.yc.set(r,new Rbe(n)),t.gc=t.gc.insert(n,r),lE(t.remoteStore,new Zs(cr(sd(n.path)),r,"TargetPurposeLimboResolution",Qr.ct))}}function eo(t,e,n){return gk.apply(this,arguments)}function gk(){return gk=_(function*(t,e,n){const r=L(t),i=[],s=[],o=[];var a;r.wc.isEmpty()||(r.wc.forEach((a,u)=>{o.push(r.Rc(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const l=vN.Li(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.dc.nu(i),yield(a=_(function*(u,c){const l=L(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>E.forEach(c,h=>E.forEach(h.Fi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>E.forEach(h.Bi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Yo(d))throw d;M("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=l.Ji.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);l.Ji=l.Ji.insert(h,g)}}}),function(u,c){return a.apply(this,arguments)})(r.localStore,s))}),gk.apply(this,arguments)}function Bbe(t,e){return mk.apply(this,arguments)}function mk(){return mk=_(function*(t,e){const n=L(t);if(!n.currentUser.isEqual(e)){M("SyncEngine","User change. New user:",e.toKey());const r=yield t8(n.localStore,e);n.currentUser=e,(i=n).Ec.forEach(o=>{o.forEach(a=>{a.reject(new S(D.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield eo(n,r.er)}var i}),mk.apply(this,arguments)}function jbe(t,e){const n=L(t),r=n.yc.get(e);if(r&&r.fc)return ge().add(r.key);{let i=ge();const s=n._c.get(e);if(!s)return i;for(const o of s){const a=n.wc.get(o);i=i.unionWith(a.view.nc)}return i}}class hE{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return _(function*(){n.serializer=mg(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return function e8(t,e,n,r){return new JAe(t,e,n,r)}(this.persistence,new ZK,e.initialUser,this.serializer)}createPersistence(e){return new gN(nE.zs,this.serializer)}createSharedClientState(e){return new c8}terminate(){var e=this;return _(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Td{initialize(e,n){var r=this;return _(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>A8(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Bbe.bind(null,r.syncEngine),yield function HN(t,e){return WN.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Dbe}createDatastore(e){const n=mg(e.databaseInfo.databaseId),r=new abe(e.databaseInfo);return new lbe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>A8(this.syncEngine,a,0),o=l8.D()?new l8:new ibe,new fbe(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,u,c){const l=new Pbe(r,i,s,o,a,u);return c&&(l.vc=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return function(){var e=_(function*(n){const r=L(n);M("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield md(r),r.Pu.shutdown(),r.bu.set("Unknown")});return function(n){return e.apply(this,arguments)}}()(this.remoteStore)}}class fE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ot("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class eSe{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dn.UNAUTHENTICATED,this.clientId=nW.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=_(function*(a){M("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(M("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return _(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new S(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Jt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(_(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=vd(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function pE(t,e){return Ak.apply(this,arguments)}function Ak(){return Ak=_(function*(t,e){t.asyncQueue.verifyOperationInProgress(),M("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=_(function*(s){r.isEqual(s)||(yield t8(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),Ak.apply(this,arguments)}function bk(t,e){return Sk.apply(this,arguments)}function Sk(){return Sk=_(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function xk(t){return Rk.apply(this,arguments)}(t);M("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>y8(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>y8(e.remoteStore,s)),t._onlineComponents=e}),Sk.apply(this,arguments)}function Rk(){return Rk=_(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){M("FirestoreClient","Using user provided OfflineComponentProvider");try{yield pE(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function N8(t){return"FirebaseError"===t.name?t.code===D.FAILED_PRECONDITION||t.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;bi("Error using user provided cache. Falling back to memory cache: "+n),yield pE(t,new hE)}}else M("FirestoreClient","Using default OfflineComponentProvider"),yield pE(t,new hE);return t._offlineComponents}),Rk.apply(this,arguments)}function gE(t){return Pk.apply(this,arguments)}function Pk(){return Pk=_(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(M("FirestoreClient","Using user provided OnlineComponentProvider"),yield bk(t,t._uninitializedComponentsProvider._online)):(M("FirestoreClient","Using default OnlineComponentProvider"),yield bk(t,new Td))),t._onlineComponents}),Pk.apply(this,arguments)}function Nk(){return Nk=_(function*(t){const e=yield gE(t),n=e.eventManager;return n.onListen=Mbe.bind(null,e.syncEngine),n.onUnlisten=Nbe.bind(null,e.syncEngine),n}),Nk.apply(this,arguments)}function L8(t,e,n={}){const r=new Jt;return t.asyncQueue.enqueueAndForget(_(function*(){return function(i,s,o,a,u){const c=new fE({next:d=>{s.enqueueAndForget(()=>function XN(t,e){return JN.apply(this,arguments)}(i,l)),d.fromCache&&"server"===a.source?u.reject(new S(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),l=new ek(o,c,{includeMetadataChanges:!0,Ku:!0});return function QN(t,e){return YN.apply(this,arguments)}(i,l)}(yield function Dd(t){return Nk.apply(this,arguments)}(t),t.asyncQueue,e,n,r)})),r.promise}function U8(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const B8=new Map;function kk(t,e,n){if(!n)throw new S(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function j8(t){if(!V.isDocumentKey(t))throw new S(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $8(t){if(V.isDocumentKey(t))throw new S(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _E(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(n=t).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof t?"a function":H()}function Te(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new S(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_E(t);throw new S(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class q8{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new S(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new S(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function cSe(t,e,n,r){if(!0===e&&!0===r)throw new S(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=U8(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new S(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new S(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new S(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q8({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new S(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new S(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q8(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new aCe;switch(n.type){case"firstParty":return new dCe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new S(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=B8.get(e);n&&(M("ComponentProvider","Removing Datastore"),B8.delete(e),n.terminate())}(this),Promise.resolve()}}class Lt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}}class Nn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Nn(this.firestore,e,this._query)}}class hs extends Nn{constructor(e,n,r){super(e,n,sd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new V(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function dSe(t,e,...n){if(t=jr(t),kk("collection","path",e),t instanceof vg){const r=Se.fromString(e,...n);return $8(r),new hs(t,null,r)}{if(!(t instanceof Lt||t instanceof hs))throw new S(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return $8(r),new hs(t.firestore,null,r)}}class fSe{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new xN(this,"async_queue_retry"),this.Xc=()=>{const n=cE();n&&M("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=cE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=cE();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new Jt;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return _(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(n){if(!Yo(n))throw n;M("AsyncQueue","Operation failed with retryable error: "+n)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Ot("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const i=KN.createAndSchedule(this,e,n,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&H()}verifyOperationInProgress(){}sa(){var e=this;return _(function*(){let n;do{n=e.Gc,yield n}while(n!==e.Gc)})()}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}class ut extends vg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new fSe,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||H8(this),this._firestoreClient.terminate()}}function gSe(t,e){const r="string"==typeof t?t:e||"(default)",i=function nG(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}("object"==typeof t?t:iG(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(t=>{const e=(t=>{var e,n;return null===(n=null===(e=Y_())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})("firestore");s&&function lSe(t,e,n,r={}){var i;const s=(t=Te(t,vg))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=dn.MOCK_USER;else{a=function _de(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Gc(JSON.stringify({alg:"none",type:"JWT"})),Gc(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new S(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new dn(c)}t._authCredentials=new uCe(new eW(a,u))}}(i,...s)}return i}function zt(t){return t._firestoreClient||H8(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function H8(t){var e,n,r;const i=t._freezeSettings(),s=(a=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new jCe(t._databaseId,a,t._persistenceKey,(c=i).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,U8(c.experimentalLongPollingOptions),c.useFetchStreams));var a,c;t._firestoreClient=new eSe(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.cache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Ou{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ou(Zt.fromBase64String(e))}catch(n){throw new S(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ou(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Cd{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new S(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Q8{constructor(e){this._methodName=e}}class Fk{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new S(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new S(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}const _Se=/^__.*__$/;class ySe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Js(e,this.data,this.fieldMask,n,this.fieldTransforms):new ud(e,this.data,n,this.fieldTransforms)}}function X8(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}class yE{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new yE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return IE(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(X8(this.ca)&&_Se.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class vSe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mg(e)}ya(e,n,r,i=!1){return new yE({ca:e,methodName:n,ga:r,path:Ft.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ad(t){const e=t._freezeSettings(),n=mg(t._databaseId);return new vSe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Vk(t,e,n,r,i,s={}){const o=t.ya(s.merge||s.mergeFields?2:0,e,n,i);Uk("Data must be an object, but it was:",o,r);const a=nQ(r,o);let u,c;if(s.merge)u=new Sr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const l=[];for(const d of s.mergeFields){const h=wg(e,d,n);if(!o.contains(h))throw new S(D.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);iQ(l,h)||l.push(h)}u=new Sr(l),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new ySe(new Mn(a),u,c)}function Fu(t,e){if(rQ(t=jr(t)))return Uk("Unsupported field value:",e,t),nQ(t,e);if(t instanceof Q8)return function(n,r){if(!X8(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=Fu(o,r.wa(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if(null===(n=jr(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return WW(r.serializer,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const i=_t.fromDate(n);return{timestampValue:ld(r.serializer,i)}}if(n instanceof _t){const i=new _t(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ld(r.serializer,i)}}if(n instanceof Fk)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ou)return{bytesValue:pK(r.serializer,n._byteString)};if(n instanceof Lt){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rN(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${_E(n)}`)}(t,e)}function nQ(t,e){const n={};return mW(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xo(t,(r,i)=>{const s=Fu(i,e.ha(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function rQ(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof Fk||t instanceof Ou||t instanceof Lt||t instanceof Q8)}function Uk(t,e,n){if(!rQ(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=_E(n);throw e._a("an object"===r?t+" a custom object":t+" "+r)}var r}function wg(t,e,n){if((e=jr(e))instanceof Cd)return e._internalPath;if("string"==typeof e)return vE(t,e);throw IE("Field path arguments must be of type string or ",t,!1,void 0,n)}const TSe=new RegExp("[~\\*/\\[\\]]");function vE(t,e,n){if(e.search(TSe)>=0)throw IE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cd(...e.split("."))._internalPath}catch{throw IE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function IE(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new S(D.INVALID_ARGUMENT,a+t+u)}function iQ(t,e){return t.some(n=>n.isEqual(e))}class Bk{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new DSe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(EE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class DSe extends Bk{data(){return super.data()}}function EE(t,e){return"string"==typeof e?vE(t,e):e instanceof Cd?e._internalPath:e._delegate._internalPath}class jk{}class CSe extends jk{}function ASe(t,e,...n){let r=[];e instanceof jk&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof bd).length,o=i.filter(a=>a instanceof Tg).length;if(s>1||s>0&&o>0)throw new S(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Tg extends CSe{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Tg(e,n,r)}_apply(e){const n=this._parse(e);return cQ(e._query,n),new Nn(e.firestore,e.converter,WM(e._query,n))}_parse(e){const n=Ad(e.firestore);return function(i,s,o,a,u,c,l){let d;if(u.isKeyField()){if("array-contains"===c||"array-contains-any"===c)throw new S(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if("in"===c||"not-in"===c){uQ(l,c);const h=[];for(const f of l)h.push(aQ(a,i,f));d={arrayValue:{values:h}}}else d=aQ(a,i,l)}else"in"!==c&&"not-in"!==c&&"array-contains-any"!==c||uQ(l,c),d=function tQ(t,e,n,r=!1){return Fu(n,t.ya(r?4:3,e))}(o,"where",l,"in"===c||"not-in"===c);return we.create(u,c,d)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class bd extends jk{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:je.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)cQ(s,a),s=WM(s,a)}(e._query,n),new Nn(e.firestore,e.converter,WM(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function aQ(t,e,n){if("string"==typeof(n=jr(n))){if(""===n)throw new S(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HM(e)&&-1!==n.indexOf("/"))throw new S(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!V.isDocumentKey(r))throw new S(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tu(t,new V(r))}if(n instanceof Lt)return Tu(t,n._key);throw new S(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_E(n)}.`)}function uQ(t,e){if(!Array.isArray(t)||0===t.length)throw new S(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cQ(t,e){if(e.isInequality()){const r=jI(t),i=e.field;if(null!==r&&!r.isEqual(i))throw new S(D.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=zM(t);null!==s&&function lQ(t,e,n){if(!n.isEqual(e))throw new S(D.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}(0,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new S(D.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class bSe{convertValue(e,n="none"){switch(ea(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw H()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Xo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Fk(bt(e.latitude),bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=OI(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(zp(e));default:return null}}convertTimestamp(e){const n=Jo(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);Q(DK(r));const i=new wu(r.get(1),r.get(3)),s=new V(r.popFirst(5));return i.isEqual(n)||Ot(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}class Vu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sd extends Bk{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new CE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(EE("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class CE extends Sd{data(e={}){return super.data(e)}}class xd{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new CE(this._firestore,this._userDataWriter,r.key,r,new Vu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new S(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new CE(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Vu(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new CE(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Vu(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,c=-1;return 0!==o.type&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:xSe(o.type),doc:a,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xSe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}class ca extends bSe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ou(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,n)}}function RSe(t){t=Te(t,Nn);const e=Te(t.firestore,ut),n=zt(e),r=new ca(e);return function sQ(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new S(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),L8(n,t._query).then(i=>new xd(e,r,t,i))}function PSe(t,e){const n=Te(t.firestore,ut),r=function hSe(t,e,...n){if(t=jr(t),1===arguments.length&&(e=nW.A()),kk("doc","path",e),t instanceof vg){const r=Se.fromString(e,...n);return j8(r),new Lt(t,null,new V(r))}{if(!(t instanceof Lt||t instanceof hs))throw new S(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return j8(r),new Lt(t.firestore,t instanceof hs?t.converter:null,new V(r))}}(t),i=function Gk(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e);return function Dg(t,e){return function(n,r){const i=new Jt;return n.asyncQueue.enqueueAndForget(_(function*(){return function kbe(t,e,n){return sk.apply(this,arguments)}(yield function Mk(t){return gE(t).then(e=>e.syncEngine)}(n),r,i)})),i.promise}(zt(t),e)}(n,[Vk(Ad(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,ht.exists(!1))]).then(()=>r)}!function(t,e=!0){Zl=ty,zc(new jt("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new ut(new cCe(n.getProvider("auth-internal")),new hCe(n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new S(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wu(a.options.projectId,u)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),ai(Z5,"3.13.0",t),ai(Z5,"3.13.0","esm2017")}();class bE{constructor(e){return e}}const fQ="firestore",zk=new W("angularfire2.firestore-instances");function zSe(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new bE(r)}}const HSe={provide:class GSe{constructor(){return hb(fQ)}},deps:[[new mr,zk]]},WSe={provide:bE,useFactory:function qSe(t,e){const n=function db(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}(fQ,t,e);return n&&new bE(n)},deps:[[new mr,zk],Qc]};let KSe=(()=>{class t{constructor(){ai("angularfire",rb.full,"fst")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Nr({type:t}),t.\u0275inj=dr({providers:[WSe,HSe]}),t})();function QSe(t,...e){return{ngModule:KSe,providers:[{provide:zk,useFactory:zSe(t),multi:!0,deps:[Fe,Fn,Aq,bq,[new mr,Pz],[new mr,Zz],...e]}]}}const YSe=Ga(J0e,!0),XSe=Ga(PSe,!0),Hk=Ga(dSe,!0),JSe=Ga(RSe,!0),ZSe=Ga(gSe,!0),exe=Ga(ASe,!0);let pQ=(()=>{class t{constructor(){this.firestore=q(bE)}guardarDatosEnFirebase(n){var r=this;return _(function*(){return yield XSe(Hk(r.firestore,"entradas"),{title:n.title,citas:n.citas,content:n.content})})()}getData(){var n=this;return _(function*(){const r=Hk(n.firestore,"entradas");return yield JSe(r)})()}getDatos(){const n=Hk(this.firestore,"entradas");let r=exe(n);return YSe(r)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var nxe=function(){function t(e,n,r){this.el=e,this.vcr=n,this.renderer=r,this.dtOptions={}}return t.prototype.ngOnInit=function(){var e=this;this.dtTrigger?this.dtTrigger.subscribe(function(n){e.displayTable(n)}):this.displayTable(null)},t.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},t.prototype.displayTable=function(e){var n=this;e&&(this.dtOptions=e),this.dtInstance=new Promise(function(r,i){Promise.resolve(n.dtOptions).then(function(s){0===Object.keys(s).length&&0===$("tbody tr",n.el.nativeElement).length?i("Both the table and dtOptions cannot be empty"):setTimeout(function(){var a={rowCallback:function(u,c,l){if(s.columns){var d=s.columns;n.applyNgPipeTransform(u,d),n.applyNgRefTemplate(u,d,c)}s.rowCallback&&s.rowCallback(u,c,l)}};a=Object.assign({},s,a),n.dt=$(n.el.nativeElement).DataTable(a),r(n.dt)})})})},t.prototype.applyNgPipeTransform=function(e,n){n.filter(function(i){return i.ngPipeInstance&&!i.ngTemplateRef}).forEach(function(i){var s=i.ngPipeInstance,o=i.ngPipeArgs||[],a=n.filter(function(d){return!1!==d.visible}).findIndex(function(d){return d.data===i.data}),u=e.childNodes.item(a),c=$(u).text(),l=s.transform.apply(s,function(t,e,n){if(n||2===arguments.length)for(var s,r=0,i=e.length;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}([c],o,!1));$(u).text(l)})},t.prototype.applyNgRefTemplate=function(e,n,r){var i=this;n.filter(function(o){return o.ngTemplateRef&&!o.ngPipeInstance}).forEach(function(o){var a,u=(a=o.ngTemplateRef).ref,c=a.context,l=n.filter(function(p){return!1!==p.visible}).findIndex(function(p){return p.data===o.data}),d=e.childNodes.item(l);$(d).html("");var h=Object.assign({},c,c?.userData,{adtData:r}),f=i.vcr.createEmbeddedView(u,h);i.renderer.appendChild(d,f.rootNodes[0])})},t.\u0275fac=function(n){return new(n||t)(P(yr),P(ii),P(Ui))},t.\u0275dir=te({type:t,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),t}(),rxe=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Nr({type:t}),t.\u0275inj=dr({imports:[o$]}),t}();function ixe(t,e){if(1&t&&(Qe(0,"tr")(1,"td"),In(2),nt(),Qe(3,"td"),In(4),nt(),Qe(5,"td"),In(6),nt()()),2&t){const n=e.$implicit;Bi(2),Nc(n.title),Bi(2),Nc(n.citas),Bi(2),Nc(n.content)}}let gQ=(()=>{class t{constructor(n){this.sanitizer=n,this.nuevoValor={title:"",content:""},this.datGuada="",this.dtOptions={},this.dtTrigger=new Rr,this.globalValues=[],this.firebaseService=q(pQ)}ngOnInit(){var n=this;return _(function*(){n.dtOptions={pagingType:"full_numbers",language:{processing:"Procesando...",search:"Buscar:",lengthMenu:"Mostrar _MENU_ elementos",info:"Mostrando desde _START_ al _END_ de _TOTAL_ elementos",infoEmpty:"Mostrando ning\xfan elemento.",infoFiltered:"(filtrado _MAX_ elementos total)",infoPostFix:"",loadingRecords:"Cargando registros...",zeroRecords:"No se encontraron registros",emptyTable:"No hay datos disponibles en la tabla",paginate:{first:"Primero",previous:"Anterior",next:"Siguiente",last:"\xdaltimo"},aria:{sortAscending:": Activar para ordenar la tabla en orden ascendente",sortDescending:": Activar para ordenar la tabla en orden descendente"}}},(yield n.firebaseService.getData()).forEach(i=>{n.globalValues.push({title:i.data().title,citas:i.data().citas,content:i.data().content})}),n.dtTrigger.next(null)})()}guardarValorGlobal(){this.datGuada="",this.firebaseService.guardarDatosEnFirebase(this.nuevoValor).then(n=>{console.log("Datos guardados con \xe9xito en Firebase:",n),this.datGuada="Datos guardados con \xe9xito en Firebase",this.nuevoValor={title:"",citas:"",content:""},window.location.reload()}).catch(n=>{console.error("Error al guardar los datos en Firebase:",n),this.datGuada=""})}static#e=this.\u0275fac=function(r){return new(r||t)(P(x$))};static#t=this.\u0275cmp=Kd({type:t,selectors:[["app-new-tema"]],decls:47,vars:7,consts:[[1,"card","card-pink"],[1,"card-header"],[1,"card-title"],[3,"submit"],[1,"card-body"],[1,"row"],[1,"col-3"],[1,"form-group"],["for","title"],["type","text","id","title","name","title","placeholder","Ingresa el T\xedtulo",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","citas","name","title","placeholder","Citas y/o Palabras Claves",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-4"],["for","content"],["id","content","name","content","placeholder","Ingresa el/los link(s)",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-2"],["for","content",1,"d-block"],["type","submit",1,"btn","btn-primary"],[1,"ml-5"],[1,""],["datatable","",1,"table","table-bordered","table-sm","table-striped","table-hover",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(Qe(0,"div",0)(1,"div",1)(2,"h5",2),In(3,"Formulario"),nt()(),Qe(4,"form",3),Ln("submit",function(){return i.guardarValorGlobal()}),Qe(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"label",8),In(10,"T\xedtulo"),nt(),Qe(11,"input",9),Ln("ngModelChange",function(o){return i.nuevoValor.title=o}),nt()()(),Qe(12,"div",6)(13,"div",7)(14,"label",8),In(15,"Citas/Palabras Claves"),nt(),Qe(16,"input",10),Ln("ngModelChange",function(o){return i.nuevoValor.citas=o}),nt()()(),Qe(17,"div",11)(18,"div",7)(19,"label",12),In(20,"Links"),nt(),Qe(21,"textarea",13),Ln("ngModelChange",function(o){return i.nuevoValor.content=o}),nt()()(),Qe(22,"div",14)(23,"div",7)(24,"label",15),In(25,"\xa0"),nt(),Qe(26,"button",16),In(27,"Guardar"),nt()()(),Qe(28,"label",17),In(29),nt()()()()(),Qe(30,"div",0)(31,"div",1)(32,"h5",2),In(33,"Resultados"),nt()(),Qe(34,"div",4)(35,"div",18)(36,"table",19)(37,"thead")(38,"tr")(39,"th"),In(40,"T\xedtulo"),nt(),Qe(41,"th"),In(42,"Citas/Palabras Claves"),nt(),Qe(43,"th"),In(44,"Links"),nt()()(),Qe(45,"tbody"),function VL(t,e,n,r,i,s,o,a){const u=C(),c=Ce(),l=t+ve,d=c.firstCreatePass?function Jne(t,e,n,r,i,s,o,a,u){const c=e.consts,l=Ec(e,t,4,o||null,co(c,a));qT(e,n,l,co(c,u)),lm(e,l);const d=l.tView=GT(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];Fi(d,!1);const h=LL(c,u,d,t);cm()&&Pm(c,u,h,d),On(h,u),Xm(u,u[l]=oL(h,u,h,d)),sm(d)&&jT(c,u,d),null!=o&&$T(u,d,a)}(46,ixe,7,3,"tr",20),nt()()()()()),2&r&&(Bi(11),Da("ngModel",i.nuevoValor.title),Bi(5),Da("ngModel",i.nuevoValor.citas),Bi(5),Da("ngModel",i.nuevoValor.content),Bi(8),Nc(i.datGuada),Bi(7),Da("dtOptions",i.dtOptions)("dtTrigger",i.dtTrigger),Bi(10),Da("ngForOf",i.globalValues))},dependencies:[t$,E4,V_,o4,a4,OD,K_,nxe]})}return t})(),sxe=(()=>{class t{constructor(){this.title="finderluzy"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Kd({type:t,selectors:[["app-root"]],decls:20,vars:0,consts:[["lang","en"],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1"],[1,"hold-transition","sidebar-mini"],[1,"wrapper"],[1,""],[1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-12","text-center"],[1,"h4"],[1,"content"],[1,"col-12"],[1,"control-sidebar","control-sidebar-dark"]],template:function(r,i){1&r&&(Qe(0,"html",0)(1,"head"),Pc(2,"meta",1)(3,"meta",2),Qe(4,"title"),In(5,"Buscador Luzy"),nt()(),Qe(6,"body",3)(7,"div",4)(8,"div",5)(9,"section",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"span",10),In(14,"Buscador B\xedblico"),nt()()()()(),Qe(15,"section",11)(16,"div",7)(17,"div",8),Pc(18,"app-new-tema",12),nt()()()(),Pc(19,"aside",13),nt()()())},dependencies:[gQ]})}return t})();function Wk(...t){const e=Gd(t),n=jO(t),{args:r,keys:i}=M$(t);if(0===r.length)return en([],e);const s=new ft(function axe(t,e,n=ro){return r=>{mQ(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)mQ(e,()=>{const c=en(t[u],e);let l=!1;c.subscribe(Ut(r,d=>{s[u]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>k$(i,o):ro));return n?s.pipe(N$(n)):s}function mQ(t,e,n){t?gs(n,t,e):e()}const SE=jd(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Kk(...t){return function uxe(){return Gu(1)}()(en(t,Gd(t)))}function _Q(t){return new ft(e=>{Pr(t()).subscribe(e)})}function Cg(t,e){const n=Ge(t)?t:()=>t,r=i=>i.error(n());return new ft(e?i=>e.schedule(r,0,i):r)}function Qk(){return Ht((t,e)=>{let n=null;t._refCount++;const r=Ut(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class yQ extends ft{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,AO(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new lr;const n=this.getSubject();e.add(this.source.subscribe(Ut(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=lr.EMPTY)}return e}refCount(){return Qk()(this)}}function Rd(t){return t<=0?()=>Ri:Ht((e,n)=>{let r=0;e.subscribe(Ut(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function la(t,e){return Ht((n,r)=>{let i=0;n.subscribe(Ut(r,s=>t.call(e,s,i++)&&r.next(s)))})}function xE(t){return Ht((e,n)=>{let r=!1;e.subscribe(Ut(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function vQ(t=lxe){return Ht((e,n)=>{let r=!1;e.subscribe(Ut(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function lxe(){return new SE}function Lu(t,e){const n=arguments.length>=2;return r=>r.pipe(t?la((i,s)=>t(i,s,r)):ro,Rd(1),n?xE(e):vQ(()=>new SE))}function Ag(t,e){return Ge(e)?pn(t,e,1):pn(t,1)}function Uu(t){return Ht((e,n)=>{let s,r=null,i=!1;r=e.subscribe(Ut(n,void 0,void 0,o=>{s=Pr(t(o,Uu(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Yk(t){return t<=0?()=>Ri:Ht((e,n)=>{let r=[];e.subscribe(Ut(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Xk(t){return Ht((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const me="primary",bg=Symbol("RouteTitle");class mxe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Pd(t){return new mxe(t)}function _xe(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function fs(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!IQ(t[i],e[i]))return!1;return!0}function IQ(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function EQ(t){return t.length>0?t[t.length-1]:null}function da(t){return function oxe(t){return!!t&&(t instanceof ft||Ge(t.lift)&&Ge(t.subscribe))}(t)?t:xh(t)?en(Promise.resolve(t)):ie(t)}const vxe={exact:function DQ(t,e,n){if(!Bu(t.segments,e.segments)||!RE(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!DQ(t.children[r],e.children[r],n))return!1;return!0},subset:CQ},wQ={exact:function Ixe(t,e){return fs(t,e)},subset:function Exe(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>IQ(t[n],e[n]))},ignored:()=>!0};function TQ(t,e,n){return vxe[n.paths](t.root,e.root,n.matrixParams)&&wQ[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function CQ(t,e,n){return AQ(t,e,e.segments,n)}function AQ(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Bu(i,n)||e.hasChildren()||!RE(i,n,r))}if(t.segments.length===n.length){if(!Bu(t.segments,n)||!RE(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!CQ(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(Bu(t.segments,i)&&RE(t.segments,i,r)&&t.children[me])&&AQ(t.children[me],e,s,r)}}function RE(t,e,n){return e.every((r,i)=>wQ[n](t[i].parameters,r.parameters))}class Md{constructor(e=new $e([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pd(this.queryParams)),this._queryParamMap}toString(){return Dxe.serialize(this)}}class $e{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return PE(this)}}class Sg{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Pd(this.parameters)),this._parameterMap}toString(){return xQ(this)}}function Bu(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let xg=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:function(){return new Jk},providedIn:"root"})}return t})();class Jk{parse(e){const n=new Oxe(e);return new Md(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Rg(e.root,!0)}`,r=function bxe(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${ME(n)}=${ME(i)}`).join("&"):`${ME(n)}=${ME(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function Cxe(t){return encodeURI(t)}(e.fragment)}`:"";return`${n}${r}${i}`}}const Dxe=new Jk;function PE(t){return t.segments.map(e=>xQ(e)).join("/")}function Rg(t,e){if(!t.hasChildren())return PE(t);if(e){const n=t.children[me]?Rg(t.children[me],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==me&&r.push(`${i}:${Rg(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function Txe(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===me&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==me&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===me?[Rg(t.children[me],!1)]:[`${i}:${Rg(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[me]?`${PE(t)}/${n[0]}`:`${PE(t)}/(${n.join("//")})`}}function bQ(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ME(t){return bQ(t).replace(/%3B/gi,";")}function Zk(t){return bQ(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function NE(t){return decodeURIComponent(t)}function SQ(t){return NE(t.replace(/\+/g,"%20"))}function xQ(t){return`${Zk(t.path)}${function Axe(t){return Object.keys(t).map(e=>`;${Zk(e)}=${Zk(t[e])}`).join("")}(t.parameters)}`}const Sxe=/^[^\/()?;#]+/;function eO(t){const e=t.match(Sxe);return e?e[0]:""}const xxe=/^[^\/()?;=#]+/,Pxe=/^[^=?&#]+/,Nxe=/^[^&#]+/;class Oxe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $e([],{}):new $e([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[me]=new $e(e,n)),r}parseSegment(){const e=eO(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new R(4009,!1);return this.capture(e),new Sg(NE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function Rxe(t){const e=t.match(xxe);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=eO(this.remaining);i&&(r=i,this.capture(r))}e[NE(n)]=NE(r)}parseQueryParam(e){const n=function Mxe(t){const e=t.match(Pxe);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function kxe(t){const e=t.match(Nxe);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=SQ(n),s=SQ(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=eO(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new R(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=me);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[me]:new $e([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new R(4011,!1)}}function RQ(t){return t.segments.length>0?new $e([],{[me]:t}):t}function PQ(t){const e={};for(const r of Object.keys(t.children)){const s=PQ(t.children[r]);if(r===me&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Fxe(t){if(1===t.numberOfChildren&&t.children[me]){const e=t.children[me];return new $e(t.segments.concat(e.segments),e.children)}return t}(new $e(t.segments,e))}function ju(t){return t instanceof Md}function MQ(t){let e;const i=RQ(function n(s){const o={};for(const u of s.children){const c=n(u);o[u.outlet]=c}const a=new $e(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function NQ(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return tO(i,i,i,n,r);const s=function Lxe(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new OQ(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,c])=>{a[u]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new OQ(n,e,r)}(e);if(s.toRoot())return tO(i,i,new $e([],{}),n,r);const o=function Uxe(t,e,n){if(t.isAbsolute)return new OE(e,!0,0);if(!n)return new OE(e,!1,NaN);if(null===n.parent)return new OE(n,!0,0);const r=kE(t.commands[0])?0:1;return function Bxe(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new R(4005,!1);i=r.segments.length}return new OE(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?Mg(o.segmentGroup,o.index,s.commands):FQ(o.segmentGroup,o.index,s.commands);return tO(i,o.segmentGroup,a,n,r)}function kE(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Pg(t){return"object"==typeof t&&null!=t&&t.outlets}function tO(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`}),o=t===e?n:kQ(t,e,n);const a=RQ(PQ(o));return new Md(a,s,i)}function kQ(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:kQ(s,e,n)}),new $e(t.segments,r)}class OQ{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&kE(r[0]))throw new R(4003,!1);const i=r.find(Pg);if(i&&i!==EQ(r))throw new R(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class OE{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function FQ(t,e,n){if(t||(t=new $e([],{})),0===t.segments.length&&t.hasChildren())return Mg(t,e,n);const r=function $xe(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(Pg(a))break;const u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!LQ(u,c,o))return s;r+=2}else{if(!LQ(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new $e(t.segments.slice(0,r.pathIndex),{});return s.children[me]=new $e(t.segments.slice(r.pathIndex),t.children),Mg(s,0,i)}return r.match&&0===i.length?new $e(t.segments,{}):r.match&&!t.hasChildren()?nO(t,e,n):r.match?Mg(t,0,i):nO(t,e,n)}function Mg(t,e,n){if(0===n.length)return new $e(t.segments,{});{const r=function jxe(t){return Pg(t[0])?t[0].outlets:{[me]:t}}(n),i={};if(Object.keys(r).some(s=>s!==me)&&t.children[me]&&1===t.numberOfChildren&&0===t.children[me].segments.length){const s=Mg(t.children[me],e,n);return new $e(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=FQ(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new $e(t.segments,i)}}function nO(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Pg(s)){const u=Gxe(s.outlets);return new $e(r,u)}if(0===i&&kE(n[0])){r.push(new Sg(t.segments[e].path,VQ(n[0]))),i++;continue}const o=Pg(s)?s.outlets[me]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&kE(a)?(r.push(new Sg(o,VQ(a))),i+=2):(r.push(new Sg(o,{})),i++)}return new $e(r,{})}function Gxe(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=nO(new $e([],{}),0,r))}),e}function VQ(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function LQ(t,e,n){return t==n.path&&fs(e,n.parameters)}const Ng="imperative";class ps{constructor(e,n){this.id=e,this.url=n}}class FE extends ps{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ha extends ps{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class kg extends ps{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Nd extends ps{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class VE extends ps{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class UQ extends ps{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qxe extends ps{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zxe extends ps{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Hxe extends ps{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wxe extends ps{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kxe{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Qxe{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Yxe{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xxe{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jxe{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zxe{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BQ{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class rO{}class iO{constructor(e){this.url=e}}class eRe{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Og,this.attachRef=null}}let Og=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new eRe,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class jQ{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=sO(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=sO(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=oO(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return oO(e,this._root).map(n=>n.value)}}function sO(t,e){if(t===e.value)return e;for(const n of e.children){const r=sO(t,n);if(r)return r}return null}function oO(t,e){if(t===e.value)return[e];for(const n of e.children){const r=oO(t,n);if(r.length)return r.unshift(e),r}return[]}class to{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function kd(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class $Q extends jQ{constructor(e,n){super(e),this.snapshot=n,aO(this,e)}toString(){return this.snapshot.toString()}}function GQ(t,e){const n=function tRe(t,e){const o=new LE([],{},{},"",{},me,e,null,{});return new zQ("",new to(o,[]))}(0,e),r=new Yr([new Sg("",{})]),i=new Yr({}),s=new Yr({}),o=new Yr({}),a=new Yr(""),u=new Od(r,i,o,a,s,me,e,n.root);return u.snapshot=n.root,new $Q(new to(u,[]),n)}class Od{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ke(c=>c[bg]))??ie(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ke(e=>Pd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ke(e=>Pd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qQ(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function nRe(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class LE{get title(){return this.data?.[bg]}constructor(e,n,r,i,s,o,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Pd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zQ extends jQ{constructor(e,n){super(n),this.url=e,aO(this,n)}toString(){return HQ(this._root)}}function aO(t,e){e.value._routerState=t,e.children.forEach(n=>aO(t,n))}function HQ(t){const e=t.children.length>0?` { ${t.children.map(HQ).join(", ")} } `:"";return`${t.value}${e}`}function uO(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,fs(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),fs(e.params,n.params)||t.paramsSubject.next(n.params),function yxe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!fs(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),fs(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function cO(t,e){const n=fs(t.params,e.params)&&function wxe(t,e){return Bu(t,e)&&t.every((n,r)=>fs(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||cO(t.parent,e.parent))}let WQ=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=me,this.activateEvents=new vt,this.deactivateEvents=new vt,this.attachEvents=new vt,this.detachEvents=new vt,this.parentContexts=q(Og),this.location=q(ii),this.changeDetector=q(v_),this.environmentInjector=q(ni),this.inputBinder=q(UE,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new R(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new R(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new R(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new R(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new rRe(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=te({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Zr]})}return t})();class rRe{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Od?this.route:e===Og?this.childContexts:this.parent.get(e,n)}}const UE=new W("");let KQ=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=Wk([r.queryParams,r.params,r.data]).pipe(Pi(([s,o,a],u)=>(a={...s,...o,...a},0===u?ie(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function Sae(t){const e=De(t);if(!e)return null;const n=new Dh(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac})}return t})();function Fg(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function sRe(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Fg(t,r,i);return Fg(t,r)})}(t,e,n);return new to(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Fg(t,a)),o}}const r=function oRe(t){return new Od(new Yr(t.url),new Yr(t.params),new Yr(t.queryParams),new Yr(t.fragment),new Yr(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>Fg(t,s));return new to(r,i)}}const lO="ngNavigationCancelingError";function QQ(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=ju(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=YQ(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function YQ(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[lO]=!0,r.cancellationCode=e,n&&(r.url=n),r}function XQ(t){return t&&t[lO]}let JQ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Kd({type:t,selectors:[["ng-component"]],standalone:!0,features:[fB],decls:1,vars:0,template:function(r,i){1&r&&Pc(0,"router-outlet")},dependencies:[WQ],encapsulation:2})}return t})();function dO(t){const e=t.children&&t.children.map(dO),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==me&&(n.component=JQ),n}function xi(t){return t.outlet||me}function Vg(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class pRe{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),uO(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=kd(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=kd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=kd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=kd(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Zxe(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Xxe(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(uO(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),uO(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Vg(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class ZQ{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class BE{constructor(e,n){this.component=e,this.route=n}}function gRe(t,e,n){const r=t._root;return Lg(r,e?e._root:null,n,[r.value])}function Fd(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function SX(t){return null!==Yg(t)}(t)?e.get(t):t:r}function Lg(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=kd(e);return t.children.forEach(o=>{(function _Re(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function yRe(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Bu(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Bu(t.url,e.url)||!fs(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cO(t,e)||!fs(t.queryParams,e.queryParams);default:return!cO(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ZQ(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Lg(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new BE(a.outlet.component,o))}else o&&Ug(e,a,i),i.canActivateChecks.push(new ZQ(r)),Lg(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ug(a,n.getContext(o),i)),i}function Ug(t,e,n){const r=kd(t),i=t.value;Object.entries(r).forEach(([s,o])=>{Ug(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new BE(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Bg(t){return"function"==typeof t}function eY(t){return t instanceof SE||"EmptyError"===t?.name}const jE=Symbol("INITIAL_VALUE");function Vd(){return Pi(t=>Wk(t.map(e=>e.pipe(Rd(1),function cxe(...t){const e=Gd(t);return Ht((n,r)=>{(e?Kk(t,n,e):Kk(t,n)).subscribe(r)})}(jE)))).pipe(ke(e=>{for(const n of e)if(!0!==n){if(n===jE)return jE;if(!1===n||n instanceof Md)return n}return!0}),la(e=>e!==jE),Rd(1)))}function tY(t){return function PY(...t){return TO(t)}(wn(e=>{if(ju(e))throw QQ(0,e)}),ke(e=>!0===e))}class $E{constructor(e){this.segmentGroup=e||null}}class nY{constructor(e){this.urlTree=e}}function Ld(t){return Cg(new $E(t))}function rY(t){return Cg(new nY(t))}class LRe{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new R(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ie(r);if(i.numberOfChildren>1||!i.children[me])return Cg(new R(4e3,!1));i=i.children[me]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new Md(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new $e(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new R(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const hO={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function URe(t,e,n,r,i){const s=fO(t,e,n);return s.matched?(r=function uRe(t,e){return t.providers&&!t._injector&&(t._injector=I0(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function ORe(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?ie(i.map(o=>{const a=Fd(o,t);return da(function DRe(t){return t&&Bg(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Vd(),tY()):ie(!0)}(r,e,n).pipe(ke(o=>!0===o?s:{...hO}))):ie(s)}function fO(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...hO}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||_xe)(n,t,e);if(!i)return{...hO};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function iY(t,e,n,r){return n.length>0&&function $Re(t,e,n){return n.some(r=>GE(t,e,r)&&xi(r)!==me)}(t,n,r)?{segmentGroup:new $e(e,jRe(r,new $e(n,t.children))),slicedSegments:[]}:0===n.length&&function GRe(t,e,n){return n.some(r=>GE(t,e,r))}(t,n,r)?{segmentGroup:new $e(t.segments,BRe(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new $e(t.segments,t.children),slicedSegments:n}}function BRe(t,e,n,r,i){const s={};for(const o of r)if(GE(t,n,o)&&!i[xi(o)]){const a=new $e([],{});s[xi(o)]=a}return{...i,...s}}function jRe(t,e){const n={};n[me]=e;for(const r of t)if(""===r.path&&xi(r)!==me){const i=new $e([],{});n[xi(r)]=i}return n}function GE(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class WRe{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new LRe(this.urlSerializer,this.urlTree)}noMatchError(e){return new R(4002,!1)}recognize(){const e=iY(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,me).pipe(Uu(n=>{if(n instanceof nY)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof $E?this.noMatchError(n):n}),ke(n=>{const r=new LE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},me,this.rootComponentType,null,{}),i=new to(r,n),s=new zQ("",i),o=function Vxe(t,e,n=null,r=null){return NQ(MQ(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,me).pipe(Uu(r=>{throw r instanceof $E?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=qQ(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return en(i).pipe(Ag(s=>{const o=r.children[s],a=function hRe(t,e){const n=t.filter(r=>xi(r)===e);return n.push(...t.filter(r=>xi(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),function hxe(t,e){return Ht(function dxe(t,e,n,r,i){return(s,o)=>{let a=n,u=e,c=0;s.subscribe(Ut(o,l=>{const d=c++;u=a?t(u,l,d):(a=!0,l),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),xE(null),function fxe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?la((i,s)=>t(i,s,r)):ro,Yk(1),n?xE(e):vQ(()=>new SE))}(),pn(s=>{if(null===s)return Ld(r);const o=sY(s);return function KRe(t){t.sort((e,n)=>e.value.outlet===me?-1:n.value.outlet===me?1:e.value.outlet.localeCompare(n.value.outlet))}(o),ie(o)}))}processSegment(e,n,r,i,s,o){return en(n).pipe(Ag(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Uu(u=>{if(u instanceof $E)return ie(null);throw u}))),Lu(a=>!!a),Uu(a=>{if(eY(a))return function zRe(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?ie([]):Ld(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function qRe(t,e,n,r){return!!(xi(t)===r||r!==me&&GE(e,n,t))&&("**"===t.path||fO(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Ld(i):Ld(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?rY(s):this.applyRedirects.lineralizeSegments(r,s).pipe(pn(o=>{const a=new $e(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:c,positionalParamSegments:l}=fO(n,i,s);if(!a)return Ld(n);const d=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return i.redirectTo.startsWith("/")?rY(d):this.applyRedirects.lineralizeSegments(i,d).pipe(pn(h=>this.processSegment(e,r,n,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?EQ(i).parameters:{};a=ie({snapshot:new LE(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,oY(r),xi(r),r.component??r._loadedComponent??null,r,aY(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=URe(n,r,i,e).pipe(ke(({matched:u,consumedSegments:c,remainingSegments:l,parameters:d})=>u?{snapshot:new LE(c,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,oY(r),xi(r),r.component??r._loadedComponent??null,r,aY(r)),consumedSegments:c,remainingSegments:l}:null));return a.pipe(Pi(u=>null===u?Ld(n):this.getChildConfig(e=r._injector??e,r,i).pipe(Pi(({routes:c})=>{const l=r._loadedInjector??e,{snapshot:d,consumedSegments:h,remainingSegments:f}=u,{segmentGroup:p,slicedSegments:g}=iY(n,h,f,c);if(0===g.length&&p.hasChildren())return this.processChildren(l,c,p).pipe(ke(v=>null===v?null:[new to(d,v)]));if(0===c.length&&0===g.length)return ie([new to(d,[])]);const m=xi(r)===s;return this.processSegment(l,c,p,g,m?me:s,!0).pipe(ke(v=>[new to(d,v)]))}))))}getChildConfig(e,n,r){return n.children?ie({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?ie({routes:n._loadedRoutes,injector:n._loadedInjector}):function kRe(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?ie(!0):ie(i.map(o=>{const a=Fd(o,t);return da(function IRe(t){return t&&Bg(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Vd(),tY())}(e,n,r).pipe(pn(i=>i?this.configLoader.loadChildren(e,n).pipe(wn(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function VRe(t){return Cg(YQ(!1,3))}())):ie({routes:[],injector:e})}}function QRe(t){const e=t.value.routeConfig;return e&&""===e.path}function sY(t){const e=[],n=new Set;for(const r of t){if(!QRe(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=sY(r.children);e.push(new to(r.value,i))}return e.filter(r=>!n.has(r))}function oY(t){return t.data||{}}function aY(t){return t.resolve||{}}function uY(t){return"string"==typeof t.title||null===t.title}function pO(t){return Pi(e=>{const n=t(e);return n?en(n).pipe(ke(()=>e)):ie(e)})}const Ud=new W("ROUTES");let gO=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=q(oj)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return ie(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=da(n.loadComponent()).pipe(ke(cY),wn(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Xk(()=>{this.componentLoaders.delete(n)})),i=new yQ(r,()=>new Rr).pipe(Qk());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ie({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function n1e(t,e,n,r){return da(t.loadChildren()).pipe(ke(cY),pn(i=>i instanceof dB||Array.isArray(i)?ie(i):en(e.compileModuleAsync(i))),ke(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(n).injector,o=s.get(Ud,[],{optional:!0,self:!0}).flat()),{routes:o.map(dO),injector:s}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(Xk(()=>{this.childrenLoaders.delete(r)})),o=new yQ(s,()=>new Rr).pipe(Qk());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function cY(t){return function r1e(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let qE=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Rr,this.transitionAbortSubject=new Rr,this.configLoader=q(gO),this.environmentInjector=q(ni),this.urlSerializer=q(xg),this.rootContexts=q(Og),this.inputBindingEnabled=null!==q(UE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ie(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Qxe(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Kxe(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new Yr({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ng,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(la(s=>0!==s.id),ke(s=>({...s,extractedUrl:n.urlHandlingStrategy.extract(s.rawUrl)})),Pi(s=>{this.currentTransition=s;let o=!1,a=!1;return ie(s).pipe(wn(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Pi(u=>{const c=u.currentBrowserUrl.toString(),l=!n.navigated||u.extractedUrl.toString()!==c||c!==u.currentUrlTree.toString();if(!l&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const h="";return this.events.next(new Nd(u.id,this.urlSerializer.serialize(u.rawUrl),h,0)),u.resolve(null),Ri}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ie(u).pipe(Pi(h=>{const f=this.transitions?.getValue();return this.events.next(new FE(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Ri:Promise.resolve(h)}),function YRe(t,e,n,r,i,s){return pn(o=>function HRe(t,e,n,r,i,s,o="emptyOnly"){return new WRe(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(ke(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),wn(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const f=new UQ(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:h,extractedUrl:f,source:p,restoredState:g,extras:m}=u,v=new FE(h,this.urlSerializer.serialize(f),p,g);this.events.next(v);const y=GQ(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:y,urlAfterRedirects:f,extras:{...m,skipLocationChange:!1,replaceUrl:!1}},ie(s)}{const h="";return this.events.next(new Nd(u.id,this.urlSerializer.serialize(u.extractedUrl),h,1)),u.resolve(null),Ri}}),wn(u=>{const c=new qxe(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}),ke(u=>(this.currentTransition=s={...u,guards:gRe(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function ARe(t,e){return pn(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?ie({...n,guardsResult:!0}):function bRe(t,e,n,r){return en(t).pipe(pn(i=>function NRe(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ie(s.map(a=>{const u=Vg(e)??i,c=Fd(a,u);return da(function TRe(t){return t&&Bg(t.canDeactivate)}(c)?c.canDeactivate(t,e,n,r):u.runInContext(()=>c(t,e,n,r))).pipe(Lu())})).pipe(Vd()):ie(!0)}(i.component,i.route,n,e,r)),Lu(i=>!0!==i,!0))}(o,r,i,t).pipe(pn(a=>a&&function vRe(t){return"boolean"==typeof t}(a)?function SRe(t,e,n,r){return en(e).pipe(Ag(i=>Kk(function RRe(t,e){return null!==t&&e&&e(new Yxe(t)),ie(!0)}(i.route.parent,r),function xRe(t,e){return null!==t&&e&&e(new Jxe(t)),ie(!0)}(i.route,r),function MRe(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function mRe(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>_Q(()=>ie(o.guards.map(u=>{const c=Vg(o.node)??n,l=Fd(u,c);return da(function wRe(t){return t&&Bg(t.canActivateChild)}(l)?l.canActivateChild(r,t):c.runInContext(()=>l(r,t))).pipe(Lu())})).pipe(Vd())));return ie(s).pipe(Vd())}(t,i.path,n),function PRe(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ie(!0);const i=r.map(s=>_Q(()=>{const o=Vg(e)??n,a=Fd(s,o);return da(function ERe(t){return t&&Bg(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(Lu())}));return ie(i).pipe(Vd())}(t,i.route,n))),Lu(i=>!0!==i,!0))}(r,s,t,e):ie(a)),ke(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),wn(u=>{if(s.guardsResult=u.guardsResult,ju(u.guardsResult))throw QQ(0,u.guardsResult);const c=new zxe(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(c)}),la(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),pO(u=>{if(u.guards.canActivateChecks.length)return ie(u).pipe(wn(c=>{const l=new Hxe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Pi(c=>{let l=!1;return ie(c).pipe(function XRe(t,e){return pn(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ie(n);let s=0;return en(i).pipe(Ag(o=>function JRe(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!uY(i)&&(s[bg]=i.title),function ZRe(t,e,n,r){const i=function e1e(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return ie({});const s={};return en(i).pipe(pn(o=>function t1e(t,e,n,r){const i=Vg(e)??r,s=Fd(t,i);return da(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(Lu(),wn(a=>{s[o]=a}))),Yk(1),function pxe(t){return ke(()=>t)}(s),Uu(o=>eY(o)?Ri:Cg(o)))}(s,t,e,r).pipe(ke(o=>(t._resolvedData=o,t.data=qQ(t,n).resolve,i&&uY(i)&&(t.data[bg]=i.title),null)))}(o.route,r,t,e)),wn(()=>s++),Yk(1),pn(o=>s===i.length?ie(n):Ri))})}(n.paramsInheritanceStrategy,this.environmentInjector),wn({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(c,"",2)}}))}),wn(c=>{const l=new Wxe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}))}),pO(u=>{const c=l=>{const d=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(l.routeConfig).pipe(wn(h=>{l.component=h}),ke(()=>{})));for(const h of l.children)d.push(...c(h));return d};return Wk(c(u.targetSnapshot.root)).pipe(xE(),Rd(1))}),pO(()=>this.afterPreactivation()),ke(u=>{const c=function iRe(t,e,n){const r=Fg(t,e._root,n?n._root:void 0);return new $Q(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:c},s}),wn(()=>{this.events.next(new rO)}),((t,e,n,r)=>ke(i=>(new pRe(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Rd(1),wn({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ha(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function gxe(t){return Ht((e,n)=>{Pr(t).subscribe(Ut(n,()=>n.complete(),HE)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(wn(u=>{throw u}))),Xk(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Uu(u=>{if(a=!0,XQ(u))this.events.next(new kg(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function aRe(t){return XQ(t)&&ju(t.url)}(u)?this.events.next(new iO(u.url)):s.resolve(!1);else{this.events.next(new VE(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(c){s.reject(c)}}return Ri}))}))}cancelNavigationTransition(n,r,i){const s=new kg(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lY(t){return t!==Ng}let dY=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===me);return r}getResolvedTitleForRoute(n){return n.data[bg]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:function(){return q(i1e)},providedIn:"root"})}return t})(),i1e=(()=>{class t extends dY{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(J(A$))};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),s1e=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:function(){return q(a1e)},providedIn:"root"})}return t})();class o1e{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let a1e=(()=>{class t extends o1e{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=vn(t)))(i||t)}}();static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const zE=new W("",{providedIn:"root",factory:()=>({})});let u1e=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:function(){return q(c1e)},providedIn:"root"})}return t})(),c1e=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var jg=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(jg||{});function hY(t,e){t.events.pipe(la(n=>n instanceof ha||n instanceof kg||n instanceof VE||n instanceof Nd),ke(n=>n instanceof ha||n instanceof Nd?jg.COMPLETE:n instanceof kg&&(0===n.code||1===n.code)?jg.REDIRECTING:jg.FAILED),la(n=>n!==jg.REDIRECTING),Rd(1)).subscribe(()=>{e()})}function l1e(t){throw t}function d1e(t,e,n){return e.parse("/")}const h1e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},f1e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let di=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=q(ij),this.isNgZoneEnabled=!1,this._events=new Rr,this.options=q(zE,{optional:!0})||{},this.pendingTasks=q(sj),this.errorHandler=this.options.errorHandler||l1e,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||d1e,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=q(u1e),this.routeReuseStrategy=q(s1e),this.titleStrategy=q(dY),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=q(Ud,{optional:!0})?.flat()??[],this.navigationTransitions=q(qE),this.urlSerializer=q(xg),this.location=q(J0),this.componentInputBindingEnabled=!!q(UE,{optional:!0}),this.eventsSubscription=new lr,this.isNgZoneEnabled=q(Fe)instanceof Fe&&Fe.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Md,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=GQ(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(fY(r)&&this._events.next(r));if(r instanceof FE)lY(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Nd)this.rawUrlTree=i.rawUrl;else if(r instanceof UQ){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof rO)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof kg)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof iO){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||lY(i.source)};this.scheduleNavigation(s,Ng,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof VE&&this.restoreHistory(i,!0),r instanceof ha&&(this.navigated=!0),fY(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ng,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(dO),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:o;let d,l=null;switch(a){case"merge":l={...this.currentUrlTree.queryParams,...s};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=s||null}null!==l&&(l=this.removeEmptyProps(l));try{d=MQ(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),d=this.currentUrlTree.root}return NQ(d,n,l,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=ju(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Ng,null,r)}navigate(n,r={skipLocationChange:!1}){return function p1e(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new R(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...h1e}:!1===r?{...f1e}:r,ju(n))return TQ(this.currentUrlTree,n,i);const s=this.parseUrl(n);return TQ(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,c;o?(a=o.resolve,u=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,u=h});const l=this.pendingTasks.add();return hY(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fY(t){return!(t instanceof rO||t instanceof iO)}class pY{}let _1e=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(la(n=>n instanceof ha),Ag(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=I0(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return en(i).pipe(Gu())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):ie(null);const s=i.pipe(pn(o=>null===o?ie(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?en([s,this.loader.loadComponent(r)]).pipe(Gu()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(J(di),J(oj),J(ni),J(pY),J(gO))};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const _O=new W("");let gY=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof FE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ha?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Nd&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof BQ&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new BQ(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function X2(){throw new Error("invalid")}()};static#t=this.\u0275prov=Z({token:t,factory:t.\u0275fac})}return t})();function no(t,e){return{\u0275kind:t,\u0275providers:e}}function _Y(){const t=q(Fn);return e=>{const n=t.get(Lc);if(e!==n.components[0])return;const r=t.get(di),i=t.get(yY);1===t.get(yO)&&r.initialNavigation(),t.get(vY,null,ye.Optional)?.setUpPreloading(),t.get(_O,null,ye.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const yY=new W("",{factory:()=>new Rr}),yO=new W("",{providedIn:"root",factory:()=>1}),vY=new W("");function E1e(t){return no(0,[{provide:vY,useExisting:_1e},{provide:pY,useExisting:t}])}const IY=new W("ROUTER_FORROOT_GUARD"),T1e=[J0,{provide:xg,useClass:Jk},di,Og,{provide:Od,useFactory:function mY(t){return t.routerState.root},deps:[di]},gO,[]];function D1e(){return new fj("Router",di)}let EY=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[T1e,[],{provide:Ud,multi:!0,useValue:n},{provide:IY,useFactory:S1e,deps:[[di,new mr,new Im]]},{provide:zE,useValue:r||{}},r?.useHash?{provide:xa,useClass:Nae}:{provide:xa,useClass:Gj},{provide:_O,useFactory:()=>{const t=q(Zue),e=q(Fe),n=q(zE),r=q(qE),i=q(xg);return n.scrollOffset&&t.setOffset(n.scrollOffset),new gY(i,r,t,e,n)}},r?.preloadingStrategy?E1e(r.preloadingStrategy).\u0275providers:[],{provide:fj,multi:!0,useFactory:D1e},r?.initialNavigation?x1e(r):[],r?.bindToComponentInputs?no(8,[KQ,{provide:UE,useExisting:KQ}]).\u0275providers:[],[{provide:wY,useFactory:_Y},{provide:$0,multi:!0,useExisting:wY}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Ud,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(J(IY,8))};static#t=this.\u0275mod=Nr({type:t});static#n=this.\u0275inj=dr({})}return t})();function S1e(t){return"guarded"}function x1e(t){return["disabled"===t.initialNavigation?no(3,[{provide:k0,multi:!0,useFactory:()=>{const e=q(di);return()=>{e.setUpLocationChangeListener()}}},{provide:yO,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?no(2,[{provide:yO,useValue:0},{provide:k0,multi:!0,deps:[Fn],useFactory:e=>{const n=e.get(Pae,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(di),s=e.get(yY);hY(i,()=>{r(!0)}),e.get(qE).afterPreactivation=()=>(r(!0),s.closed?ie(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const wY=new W(""),P1e=[{path:"new-tema",component:gQ},{path:"resultados-tema",component:(()=>{class t{constructor(){this.dtOptions={},this.dtTrigger=new Rr,this.firebaseService=q(pQ)}ngOnInit(){this.globalValues$=this.firebaseService.getDatos(),this.dtOptions={pagingType:"full_numbers"},this.dtTrigger.next(null)}ngOnDestroy(){this.dtTrigger.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=Kd({type:t,selectors:[["app-resultados-tema"]],decls:0,vars:0,template:function(r,i){}})}return t})()}];let M1e=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Nr({type:t});static#n=this.\u0275inj=dr({imports:[EY.forRoot(P1e),EY]})}return t})();const N1e_firebase={projectId:"finderluzy",appId:"1:554925423172:web:95849be8b724a981eb1a11",databaseURL:"https://finderluzy-default-rtdb.firebaseio.com",storageBucket:"finderluzy.appspot.com",apiKey:"AIzaSyCFe3f49FtHC5uNtqV8JDZRs05JEjwOm_Y",authDomain:"finderluzy.firebaseapp.com",messagingSenderId:"554925423172"};let k1e=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Nr({type:t,bootstrap:[sxe]});static#n=this.\u0275inj=dr({imports:[Wce,M1e,rde,rxe,Bme(()=>jme(N1e_firebase)),QSe(()=>ZSe())]})}return t})();zce().bootstrapModule(k1e).catch(t=>console.error(t))}},Ge=>{Ge(Ge.s=289)}]);