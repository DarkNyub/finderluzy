"use strict";(self.webpackChunkfinderluzy=self.webpackChunkfinderluzy||[]).push([[179],{289:()=>{function Ge(t){return"function"==typeof t}function Ld(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const jg=Ld(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Lu(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class lr{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Ge(r))try{r()}catch(s){e=s instanceof jg?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{IO(s)}catch(o){e=e??[],o instanceof jg?e=[...e,...o.errors]:e.push(o)}}if(e)throw new jg(e)}}add(e){var n;if(e&&e!==this)if(this.closed)IO(e);else{if(e instanceof lr){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Lu(n,e)}remove(e){const{_finalizers:n}=this;n&&Lu(n,e),e instanceof lr&&e._removeParent(this)}}lr.EMPTY=(()=>{const t=new lr;return t.closed=!0,t})();const yO=lr.EMPTY;function vO(t){return t instanceof lr||t&&"closed"in t&&Ge(t.remove)&&Ge(t.add)&&Ge(t.unsubscribe)}function IO(t){Ge(t)?t():t.unsubscribe()}const da={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},$g={setTimeout(t,e,...n){const{delegate:r}=$g;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=$g;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function EO(t){$g.setTimeout(()=>{const{onUnhandledError:e}=da;if(!e)throw t;e(t)})}function qE(){}const IY=zE("C",void 0,void 0);function zE(t,e,n){return{kind:t,value:e,error:n}}let ha=null;function Gg(t){if(da.useDeprecatedSynchronousErrorHandling){const e=!ha;if(e&&(ha={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=ha;if(ha=null,n)throw r}}else t()}class HE extends lr{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,vO(e)&&e.add(this)):this.destination=bY}static create(e,n,r){return new Ud(e,n,r)}next(e){this.isStopped?KE(function wY(t){return zE("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?KE(function EY(t){return zE("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?KE(IY,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const DY=Function.prototype.bind;function WE(t,e){return DY.call(t,e)}class CY{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){qg(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){qg(r)}else qg(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){qg(n)}}}class Ud extends HE{constructor(e,n,r){let i;if(super(),Ge(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&da.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&WE(e.next,s),error:e.error&&WE(e.error,s),complete:e.complete&&WE(e.complete,s)}):i=e}this.destination=new CY(i)}}function qg(t){da.useDeprecatedSynchronousErrorHandling?function TY(t){da.useDeprecatedSynchronousErrorHandling&&ha&&(ha.errorThrown=!0,ha.error=t)}(t):EO(t)}function KE(t,e){const{onStoppedNotification:n}=da;n&&$g.setTimeout(()=>n(t,e))}const bY={closed:!0,next:qE,error:function AY(t){throw t},complete:qE},QE="function"==typeof Symbol&&Symbol.observable||"@@observable";function Zs(t){return t}function wO(t){return 0===t.length?Zs:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let dt=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function RY(t){return t&&t instanceof HE||function xY(t){return t&&Ge(t.next)&&Ge(t.error)&&Ge(t.complete)}(t)&&vO(t)}(n)?n:new Ud(n,r,i);return Gg(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=TO(r))((i,s)=>{const o=new Ud({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[QE](){return this}pipe(...n){return wO(n)(this)}toPromise(n){return new(n=TO(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function TO(t){var e;return null!==(e=t??da.Promise)&&void 0!==e?e:Promise}const PY=Ld(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let xr=(()=>{class t extends dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new DO(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new PY}next(n){Gg(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Gg(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Gg(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?yO:(this.currentObservers=null,s.push(n),new lr(()=>{this.currentObservers=null,Lu(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new dt;return n.source=this,n}}return t.create=(e,n)=>new DO(e,n),t})();class DO extends xr{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:yO}}function CO(t){return Ge(t?.lift)}function Ht(t){return e=>{if(CO(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ut(t,e,n,r,i){return new MY(t,e,n,r,i)}class MY extends HE{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ke(t,e){return Ht((n,r)=>{let i=0;n.subscribe(Ut(r,s=>{r.next(t.call(e,s,i++))}))})}function JE(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function eo(t){return this instanceof eo?(this.v=t,this):new eo(t)}function xO(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function ew(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){!function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}(a,u,(o=t[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const RO=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function PO(t){return Ge(t?.then)}function MO(t){return Ge(t[QE])}function NO(t){return Symbol.asyncIterator&&Ge(t?.[Symbol.asyncIterator])}function kO(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const OO=function ZY(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function FO(t){return Ge(t?.[OO])}function VO(t){return function SO(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function u(h){h.value instanceof eo?Promise.resolve(h.value.v).then(c,l):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield eo(n.read());if(i)return yield eo(void 0);yield yield eo(r)}}finally{n.releaseLock()}})}function LO(t){return Ge(t?.getReader)}function Rr(t){if(t instanceof dt)return t;if(null!=t){if(MO(t))return function eX(t){return new dt(e=>{const n=t[QE]();if(Ge(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(RO(t))return function tX(t){return new dt(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(PO(t))return function nX(t){return new dt(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,EO)})}(t);if(NO(t))return UO(t);if(FO(t))return function rX(t){return new dt(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(LO(t))return function iX(t){return UO(VO(t))}(t)}throw kO(t)}function UO(t){return new dt(e=>{(function sX(t,e){var n,r,i,s;return function AO(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(l.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=xO(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function ds(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function pn(t,e,n=1/0){return Ge(e)?pn((r,i)=>ke((s,o)=>e(r,s,i,o))(Rr(t(r,i))),n):("number"==typeof e&&(n=e),Ht((r,i)=>function oX(t,e,n,r,i,s,o,a){const u=[];let c=0,l=0,d=!1;const h=()=>{d&&!u.length&&!c&&e.complete()},f=g=>c<r?p(g):u.push(g),p=g=>{s&&e.next(g),c++;let m=!1;Rr(n(g,l++)).subscribe(Ut(e,v=>{i?.(v),s?f(v):e.next(v)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;u.length&&c<r;){const v=u.shift();o?ds(e,o,()=>p(v)):p(v)}h()}catch(v){e.error(v)}}))};return t.subscribe(Ut(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,t,n)))}function Uu(t=1/0){return pn(Zs,t)}const Si=new dt(t=>t.complete());function tw(t){return t[t.length-1]}function BO(t){return Ge(tw(t))?t.pop():void 0}function Bd(t){return function uX(t){return t&&Ge(t.schedule)}(tw(t))?t.pop():void 0}function zg(t,e=0){return Ht((n,r)=>{n.subscribe(Ut(r,i=>ds(r,t,()=>r.next(i),e),()=>ds(r,t,()=>r.complete(),e),i=>ds(r,t,()=>r.error(i),e)))})}function Hg(t,e=0){return Ht((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function jO(t,e){if(!t)throw new Error("Iterable cannot be null");return new dt(n=>{ds(n,e,()=>{const r=t[Symbol.asyncIterator]();ds(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function en(t,e){return e?function gX(t,e){if(null!=t){if(MO(t))return function lX(t,e){return Rr(t).pipe(Hg(e),zg(e))}(t,e);if(RO(t))return function hX(t,e){return new dt(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(PO(t))return function dX(t,e){return Rr(t).pipe(Hg(e),zg(e))}(t,e);if(NO(t))return jO(t,e);if(FO(t))return function fX(t,e){return new dt(n=>{let r;return ds(n,e,()=>{r=t[OO](),ds(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>Ge(r?.return)&&r.return()})}(t,e);if(LO(t))return function pX(t,e){return jO(VO(t),e)}(t,e)}throw kO(t)}(t,e):Rr(t)}class Kr extends xr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function ie(...t){return en(t,Bd(t))}function $O(t={}){const{connector:e=(()=>new xr),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,c=0,l=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=u=void 0,l=d=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return Ht((g,m)=>{c++,!d&&!l&&h();const v=u=u??e();m.add(()=>{c--,0===c&&!d&&!l&&(a=nw(p,i))}),v.subscribe(m),!o&&c>0&&(o=new Ud({next:y=>v.next(y),error:y=>{d=!0,h(),a=nw(f,n,y),v.error(y)},complete:()=>{l=!0,h(),a=nw(f,r),v.complete()}}),Rr(g).subscribe(o))})(s)}}function nw(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Ud({next:()=>{r.unsubscribe(),t()}});return Rr(e(...n)).subscribe(r)}function xi(t,e){return Ht((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(Ut(r,u=>{i?.unsubscribe();let c=0;const l=s++;Rr(t(u,l)).subscribe(i=Ut(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function yX(t,e){return t===e}function Oe(t){for(let e in t)if(t[e]===Oe)return e;throw Error("Could not find renamed property on target object.")}function Wg(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Wt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Wt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function rw(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const vX=Oe({__forward_ref__:Oe});function He(t){return t.__forward_ref__=He,t.toString=function(){return Wt(this())},t}function re(t){return iw(t)?t():t}function iw(t){return"function"==typeof t&&t.hasOwnProperty(vX)&&t.__forward_ref__===He}function sw(t){return t&&!!t.\u0275providers}class R extends Error{constructor(e,n){super(function Kg(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function ue(t){return"string"==typeof t?t:null==t?"":String(t)}function ow(t,e){throw new R(-201,!1)}function Qr(t,e){null==t&&function ee(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function J(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function dr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Qg(t){return qO(t,Xg)||qO(t,zO)}function qO(t,e){return t.hasOwnProperty(e)?t[e]:null}function Yg(t){return t&&(t.hasOwnProperty(aw)||t.hasOwnProperty(bX))?t[aw]:null}const Xg=Oe({\u0275prov:Oe}),aw=Oe({\u0275inj:Oe}),zO=Oe({ngInjectableDef:Oe}),bX=Oe({ngInjectorDef:Oe});var ye=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ye||{});let uw;function hr(t){const e=uw;return uw=t,e}function WO(t,e,n){const r=Qg(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ye.Optional?null:void 0!==e?e:void ow(Wt(t))}const We=globalThis,jd={},fw="__NG_DI_FLAG__",Jg="ngTempTokenPath",RX=/\n/gm,QO="__source";let Bu;function to(t){const e=Bu;return Bu=t,e}function NX(t,e=ye.Default){if(void 0===Bu)throw new R(-203,!1);return null===Bu?WO(t,void 0,e):Bu.get(t,e&ye.Optional?null:void 0,e)}function Z(t,e=ye.Default){return(function HO(){return uw}()||NX)(re(t),e)}function q(t,e=ye.Default){return Z(t,Zg(e))}function Zg(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function pw(t){const e=[];for(let n=0;n<t.length;n++){const r=re(t[n]);if(Array.isArray(r)){if(0===r.length)throw new R(900,!1);let i,s=ye.Default;for(let o=0;o<r.length;o++){const a=r[o],u=kX(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(Z(i,s))}else e.push(Z(r))}return e}function $d(t,e){return t[fw]=e,t.prototype[fw]=e,t}function kX(t){return t[fw]}function hs(t){return{toString:t}.toString()}var em=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(em||{}),di=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(di||{});const Ri={},Re=[],tm=Oe({\u0275cmp:Oe}),gw=Oe({\u0275dir:Oe}),mw=Oe({\u0275pipe:Oe}),XO=Oe({\u0275mod:Oe}),fs=Oe({\u0275fac:Oe}),Gd=Oe({__NG_ELEMENT_ID__:Oe}),JO=Oe({__NG_ENV_ID__:Oe});function ZO(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function _w(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];tF(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function eF(t){return 3===t||4===t||6===t}function tF(t){return 64===t.charCodeAt(0)}function qd(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||nF(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function nF(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const rF="ng-template";function VX(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==ZO(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function iF(t){return 4===t.type&&t.value!==rF}function LX(t,e,n){return e===(4!==t.type||n?t.value:rF)}function UX(t,e,n){let r=4;const i=t.attrs||[],s=function $X(t){for(let e=0;e<t.length;e++)if(eF(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!LX(t,u,n)||""===u&&1===e.length){if(hi(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!VX(t.attrs,c,n)){if(hi(r))return!1;o=!0}continue}const d=BX(8&r?"class":u,i,iF(t),n);if(-1===d){if(hi(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==ZO(f,c,0)||2&r&&c!==h){if(hi(r))return!1;o=!0}}}}else{if(!o&&!hi(r)&&!hi(u))return!1;if(o&&hi(u))continue;o=!1,r=u|1&r}}return hi(r)||o}function hi(t){return 0==(1&t)}function BX(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function GX(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function sF(t,e,n=!1){for(let r=0;r<e.length;r++)if(UX(t,e[r],n))return!0;return!1}function oF(t,e){return t?":not("+e.trim()+")":e}function zX(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!hi(o)&&(e+=oF(s,i),i=""),r=o,s=s||!hi(r);n++}return""!==i&&(e+=oF(s,i)),e}function zd(t){return hs(()=>{const e=uF(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===em.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||di.Emulated,styles:t.styles||Re,_:null,schemas:t.schemas||null,tView:null,id:""};cF(n);const r=t.dependencies;return n.directiveDefs=nm(r,!1),n.pipeDefs=nm(r,!0),n.id=function ZX(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function QX(t){return De(t)||gn(t)}function YX(t){return null!==t}function Mr(t){return hs(()=>({type:t.type,bootstrap:t.bootstrap||Re,declarations:t.declarations||Re,imports:t.imports||Re,exports:t.exports||Re,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function aF(t,e){if(null==t)return Ri;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function te(t){return hs(()=>{const e=uF(t);return cF(e),e})}function De(t){return t[tm]||null}function gn(t){return t[gw]||null}function Wn(t){return t[mw]||null}function Nr(t,e){const n=t[XO]||null;if(!n&&!0===e)throw new Error(`Type ${Wt(t)} does not have '\u0275mod' property.`);return n}function uF(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ri,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Re,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:aF(t.inputs,e),outputs:aF(t.outputs)}}function cF(t){t.features?.forEach(e=>e(t))}function nm(t,e){if(!t)return null;const n=e?Wn:QX;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(YX)}const mt=0,G=1,fe=2,at=3,fi=4,Hd=5,Nn=6,$u=7,bt=8,no=9,Gu=10,ce=11,Wd=12,lF=13,qu=14,St=15,Kd=16,zu=17,Pi=18,Qd=19,dF=20,ro=21,ps=22,Yd=23,Xd=24,ve=25,yw=1,hF=2,Mi=7,Hu=9,mn=11;function pr(t){return Array.isArray(t)&&"object"==typeof t[yw]}function Kn(t){return Array.isArray(t)&&!0===t[yw]}function vw(t){return 0!=(4&t.flags)}function pa(t){return t.componentOffset>-1}function im(t){return 1==(1&t.flags)}function pi(t){return!!t.template}function Iw(t){return 0!=(512&t[fe])}function ga(t,e){return t.hasOwnProperty(fs)?t[fs]:null}let _n=null,sm=!1;function Yr(t){const e=_n;return _n=t,e}const gF={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function _F(t){if(!Zd(t)||t.dirty){if(!t.producerMustRecompute(t)&&!IF(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function vF(t){t.dirty=!0,function yF(t){if(void 0===t.liveConsumerNode)return;const e=sm;sm=!0;try{for(const n of t.liveConsumerNode)n.dirty||vF(n)}finally{sm=e}}(t),t.consumerMarkedDirty?.(t)}function ww(t){return t&&(t.nextProducerIndex=0),Yr(t)}function Tw(t,e){if(Yr(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Zd(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)om(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function IF(t){Wu(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(_F(n),r!==n.version))return!0}return!1}function EF(t){if(Wu(t),Zd(t))for(let e=0;e<t.producerNode.length;e++)om(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function om(t,e){if(function TF(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Wu(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)om(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Wu(i),i.producerIndexOfThis[r]=e}}function Zd(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Wu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let DF=null;const SF=()=>{},hJ=(()=>({...gF,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:SF}))();class fJ{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Xr(){return xF}function xF(t){return t.type.prototype.ngOnChanges&&(t.setInput=gJ),pJ}function pJ(){const t=PF(this),e=t?.current;if(e){const n=t.previous;if(n===Ri)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function gJ(t,e,n,r){const i=this.declaredInputs[n],s=PF(t)||function mJ(t,e){return t[RF]=e}(t,{previous:Ri,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new fJ(u&&u.currentValue,e,a===Ri),t[r]=e}Xr.ngInherit=!0;const RF="__ngSimpleChanges__";function PF(t){return t[RF]||null}const Ni=function(t,e,n){};function Ke(t){for(;Array.isArray(t);)t=t[mt];return t}function am(t,e){return Ke(e[t])}function gr(t,e){return Ke(e[t.index])}function kF(t,e){return t.data[e]}function kr(t,e){const n=e[t];return pr(n)?n:n[mt]}function so(t,e){return null==e?null:t[e]}function OF(t){t[zu]=0}function wJ(t){1024&t[fe]||(t[fe]|=1024,VF(t,1))}function FF(t){1024&t[fe]&&(t[fe]&=-1025,VF(t,-1))}function VF(t,e){let n=t[at];if(null===n)return;n[Hd]+=e;let r=n;for(n=n[at];null!==n&&(1===e&&1===r[Hd]||-1===e&&0===r[Hd]);)n[Hd]+=e,r=n,n=n[at]}const ne={lFrame:KF(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function BF(){return ne.bindingsEnabled}function C(){return ne.lFrame.lView}function Ce(){return ne.lFrame.tView}function yn(){let t=jF();for(;null!==t&&64===t.type;)t=t.parent;return t}function jF(){return ne.lFrame.currentTNode}function ki(t,e){const n=ne.lFrame;n.currentTNode=t,n.isParent=e}function Sw(){return ne.lFrame.isParent}function Yu(){return ne.lFrame.bindingIndex++}function FJ(t,e){const n=ne.lFrame;n.bindingIndex=n.bindingRootIndex=t,Rw(e)}function Rw(t){ne.lFrame.currentDirectiveIndex=t}function Mw(t){ne.lFrame.currentQueryIndex=t}function LJ(t){const e=t[G];return 2===e.type?e.declTNode:1===e.type?t[Nn]:null}function HF(t,e,n){if(n&ye.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&ye.Host||(i=LJ(s),null===i||(s=s[qu],10&i.type))););if(null===i)return!1;e=i,t=s}const r=ne.lFrame=WF();return r.currentTNode=e,r.lView=t,!0}function Nw(t){const e=WF(),n=t[G];ne.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function WF(){const t=ne.lFrame,e=null===t?null:t.child;return null===e?KF(t):e}function KF(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function QF(){const t=ne.lFrame;return ne.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const YF=QF;function kw(){const t=QF();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Yn(){return ne.lFrame.selectedIndex}function ma(t){ne.lFrame.selectedIndex=t}let JF=!0;function um(){return JF}function oo(t){JF=t}function cm(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),null!=l&&(t.destroyHooks??=[]).push(n,l)}}function lm(t,e,n){ZF(t,e,3,n)}function dm(t,e,n,r){(3&t[fe])===n&&ZF(t,e,n,r)}function Ow(t,e){let n=t[fe];(3&n)===e&&(n&=8191,n+=1,t[fe]=n)}function ZF(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[zu]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[zu]+=65536),(a<s||-1==s)&&(HJ(t,n,e,u),t[zu]=(4294901760&t[zu])+u+2),u++}function eV(t,e){Ni(4,t,e);const n=Yr(null);try{e.call(t)}finally{Yr(n),Ni(5,t,e)}}function HJ(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[fe]>>13<t[zu]>>16&&(3&t[fe])===e&&(t[fe]+=8192,eV(a,s)):eV(a,s)}const Xu=-1;class th{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Vw(t){return t!==Xu}function nh(t){return 32767&t}function rh(t,e){let n=function YJ(t){return t>>16}(t),r=e;for(;n>0;)r=r[qu],n--;return r}let Lw=!0;function hm(t){const e=Lw;return Lw=t,e}const tV=255,nV=5;let XJ=0;const Oi={};function fm(t,e){const n=rV(t,e);if(-1!==n)return n;const r=e[G];r.firstCreatePass&&(t.injectorIndex=e.length,Uw(r.data,t),Uw(e,null),Uw(r.blueprint,null));const i=pm(t,e),s=t.injectorIndex;if(Vw(i)){const o=nh(i),a=rh(i,e),u=a[G].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|u[o+c]}return e[s+8]=i,s}function Uw(t,e){t.push(0,0,0,0,0,0,0,0,e)}function rV(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function pm(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=lV(i),null===r)return Xu;if(n++,i=i[qu],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Xu}function Bw(t,e,n){!function JJ(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Gd)&&(r=n[Gd]),null==r&&(r=n[Gd]=XJ++);const i=r&tV;e.data[t+(i>>nV)]|=1<<i}(t,e,n)}function iV(t,e,n){if(n&ye.Optional||void 0!==t)return t;ow()}function sV(t,e,n,r){if(n&ye.Optional&&void 0===r&&(r=null),!(n&(ye.Self|ye.Host))){const i=t[no],s=hr(void 0);try{return i?i.get(e,r,n&ye.Optional):WO(e,r,n&ye.Optional)}finally{hr(s)}}return iV(r,0,n)}function oV(t,e,n,r=ye.Default,i){if(null!==t){if(2048&e[fe]&&!(r&ye.Self)){const o=function iZ(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[fe]&&!(512&o[fe]);){const a=aV(s,o,n,r|ye.Self,Oi);if(a!==Oi)return a;let u=s.parent;if(!u){const c=o[dF];if(c){const l=c.get(n,Oi,r);if(l!==Oi)return l}u=lV(o),o=o[qu]}s=u}return i}(t,e,n,r,Oi);if(o!==Oi)return o}const s=aV(t,e,n,r,Oi);if(s!==Oi)return s}return sV(e,n,r,i)}function aV(t,e,n,r,i){const s=function tZ(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Gd)?t[Gd]:void 0;return"number"==typeof e?e>=0?e&tV:rZ:e}(n);if("function"==typeof s){if(!HF(e,t,r))return r&ye.Host?iV(i,0,r):sV(e,n,r,i);try{let o;if(o=s(r),null!=o||r&ye.Optional)return o;ow()}finally{YF()}}else if("number"==typeof s){let o=null,a=rV(t,e),u=Xu,c=r&ye.Host?e[St][Nn]:null;for((-1===a||r&ye.SkipSelf)&&(u=-1===a?pm(t,e):e[a+8],u!==Xu&&cV(r,!1)?(o=e[G],a=nh(u),e=rh(u,e)):a=-1);-1!==a;){const l=e[G];if(uV(s,a,l.data)){const d=eZ(a,e,n,o,r,c);if(d!==Oi)return d}u=e[a+8],u!==Xu&&cV(r,e[G].data[a+8]===c)&&uV(s,a,e)?(o=l,a=nh(u),e=rh(u,e)):a=-1}}return i}function eZ(t,e,n,r,i,s){const o=e[G],a=o.data[t+8],l=function gm(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,l=s>>20,h=i?a+l:t.directiveEnd;for(let f=r?a:a+l;f<h;f++){const p=o[f];if(f<u&&n===p||f>=u&&p.type===n)return f}if(i){const f=o[u];if(f&&pi(f)&&f.type===n)return u}return null}(a,o,n,null==r?pa(a)&&Lw:r!=o&&0!=(3&a.type),i&ye.Host&&s===a);return null!==l?_a(e,o,l,a):Oi}function _a(t,e,n,r){let i=t[n];const s=e.data;if(function WJ(t){return t instanceof th}(i)){const o=i;o.resolving&&function IX(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new R(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Ne(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ue(t)}(s[n]));const a=hm(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?hr(o.injectImpl):null;HF(t,r,ye.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function zJ(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=xF(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==c&&hr(c),hm(a),o.resolving=!1,YF()}}return i}function uV(t,e,n){return!!(n[e+(t>>nV)]&1<<t)}function cV(t,e){return!(t&ye.Self||t&ye.Host&&e)}class Xn{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return oV(this._tNode,this._lView,e,Zg(r),n)}}function rZ(){return new Xn(yn(),C())}function vn(t){return hs(()=>{const e=t.prototype.constructor,n=e[fs]||jw(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[fs]||jw(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function jw(t){return iw(t)?()=>{const e=jw(re(t));return e&&e()}:ga(t)}function lV(t){const e=t[G],n=e.type;return 2===n?e.declTNode:1===n?t[Nn]:null}const Zu="__parameters__";function tc(t,e,n){return hs(()=>{const r=function $w(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,c,l){const d=u.hasOwnProperty(Zu)?u[Zu]:Object.defineProperty(u,Zu,{value:[]})[Zu];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function rc(t,e){t.forEach(n=>Array.isArray(n)?rc(n,e):e(n))}function hV(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function _m(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Or(t,e,n){let r=ic(t,e);return r>=0?t[1|r]=n:(r=~r,function dZ(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Gw(t,e){const n=ic(t,e);if(n>=0)return t[1|n]}function ic(t,e){return function fV(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const mr=$d(tc("Optional"),8),vm=$d(tc("SkipSelf"),4);function Dm(t){return 128==(128&t.flags)}var ao=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ao||{});const Kw=new Map;let OZ=0;const Yw="__ngContext__";function kn(t,e){pr(e)?(t[Yw]=e[Qd],function VZ(t){Kw.set(t[Qd],t)}(e)):t[Yw]=e}let Xw;function Jw(t,e){return Xw(t,e)}function ch(t){const e=t[at];return Kn(e)?e[at]:e}function NV(t){return OV(t[Wd])}function kV(t){return OV(t[fi])}function OV(t){for(;null!==t&&!Kn(t);)t=t[fi];return t}function ac(t,e,n,r,i){if(null!=r){let s,o=!1;Kn(r)?s=r:pr(r)&&(o=!0,r=r[mt]);const a=Ke(r);0===t&&null!==n?null==i?UV(e,n,a):ya(e,n,a,i||null,!0):1===t&&null!==n?ya(e,n,a,i||null,!0):2===t?function Pm(t,e,n){const r=xm(t,e);r&&function nee(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function see(t,e,n,r,i){const s=n[Mi];s!==Ke(n)&&ac(e,t,r,s,i);for(let a=mn;a<n.length;a++){const u=n[a];dh(u[G],u,t,e,r,s)}}(e,t,s,n,i)}}function bm(t,e,n){return t.createElement(e,n)}function VV(t,e){const n=t[Hu],r=n.indexOf(e);FF(e),n.splice(r,1)}function Sm(t,e){if(t.length<=mn)return;const n=mn+e,r=t[n];if(r){const i=r[Kd];null!==i&&i!==t&&VV(i,r),e>0&&(t[n-1][fi]=r[fi]);const s=_m(t,mn+e);!function KZ(t,e){dh(t,e,e[ce],2,null,null),e[mt]=null,e[Nn]=null}(r[G],r);const o=s[Pi];null!==o&&o.detachView(s[G]),r[at]=null,r[fi]=null,r[fe]&=-129}return r}function eT(t,e){if(!(256&e[fe])){const n=e[ce];e[Yd]&&EF(e[Yd]),e[Xd]&&EF(e[Xd]),n.destroyNode&&dh(t,e,n,3,null,null),function XZ(t){let e=t[Wd];if(!e)return tT(t[G],t);for(;e;){let n=null;if(pr(e))n=e[Wd];else{const r=e[mn];r&&(n=r)}if(!n){for(;e&&!e[fi]&&e!==t;)pr(e)&&tT(e[G],e),e=e[at];null===e&&(e=t),pr(e)&&tT(e[G],e),n=e&&e[fi]}e=n}}(e)}}function tT(t,e){if(!(256&e[fe])){e[fe]&=-129,e[fe]|=256,function tee(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof th)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];Ni(4,a,u);try{u.call(a)}finally{Ni(5,a,u)}}else{Ni(4,i,s);try{s.call(i)}finally{Ni(5,i,s)}}}}}(t,e),function eee(t,e){const n=t.cleanup,r=e[$u];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[$u]=null);const i=e[ro];if(null!==i){e[ro]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[G].type&&e[ce].destroy();const n=e[Kd];if(null!==n&&Kn(e[at])){n!==e[at]&&VV(n,e);const r=e[Pi];null!==r&&r.detachView(t)}!function LZ(t){Kw.delete(t[Qd])}(e)}}function nT(t,e,n){return function LV(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[mt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===di.None||s===di.Emulated)return null}return gr(r,n)}}(t,e.parent,n)}function ya(t,e,n,r,i){t.insertBefore(e,n,r,i)}function UV(t,e,n){t.appendChild(e,n)}function BV(t,e,n,r,i){null!==r?ya(t,e,n,r,i):UV(t,e,n)}function xm(t,e){return t.parentNode(e)}let rT,aT,GV=function $V(t,e,n){return 40&t.type?gr(t,n):null};function Rm(t,e,n,r){const i=nT(t,r,e),s=e[ce],a=function jV(t,e,n){return GV(t,e,n)}(r.parent||e[Nn],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)BV(s,i,n[u],a,!1);else BV(s,i,n,a,!1);void 0!==rT&&rT(s,r,e,n,i)}function lh(t,e){if(null!==e){const n=e.type;if(3&n)return gr(e,t);if(4&n)return iT(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return lh(t,r);{const i=t[e.index];return Kn(i)?iT(-1,i):Ke(i)}}if(32&n)return Jw(e,t)()||Ke(t[e.index]);{const r=zV(t,e);return null!==r?Array.isArray(r)?r[0]:lh(ch(t[St]),r):lh(t,e.next)}}return null}function zV(t,e){return null!==e?t[St][Nn].projection[e.projection]:null}function iT(t,e){const n=mn+t+1;if(n<e.length){const r=e[n],i=r[G].firstChild;if(null!==i)return lh(r,i)}return e[Mi]}function sT(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&kn(Ke(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)sT(t,e,n.child,r,i,s,!1),ac(e,t,i,a,s);else if(32&u){const c=Jw(n,r);let l;for(;l=c();)ac(e,t,i,l,s);ac(e,t,i,a,s)}else 16&u?WV(t,e,r,n,i,s):ac(e,t,i,a,s);n=o?n.projectionNext:n.next}}function dh(t,e,n,r,i,s){sT(n,r,t.firstChild,e,i,s,!1)}function WV(t,e,n,r,i,s){const o=n[St],u=o[Nn].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)ac(e,t,i,u[c],s);else{let c=u;const l=o[at];Dm(r)&&(c.flags|=128),sT(t,e,c,l,i,s,!0)}}function KV(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function QV(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&_w(t,e,r),null!==i&&KV(t,e,i),null!==s&&function aee(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}class ZV{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class W{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=J({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const gh=new W("ENVIRONMENT_INITIALIZER"),c2=new W("INJECTOR",-1),l2=new W("INJECTOR_DEF_TYPES");class fT{get(e,n=jd){if(n===jd){const r=new Error(`NullInjectorError: No provider for ${Wt(e)}!`);throw r.name="NullInjectorError",r}return n}}function kee(...t){return{\u0275providers:h2(0,t),\u0275fromNgModule:!0}}function h2(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return rc(e,o=>{const a=o;Om(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&f2(i,s),n}function f2(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];pT(i,s=>{e(s,r)})}}function Om(t,e,n,r){if(!(t=re(t)))return!1;let i=null,s=Yg(t);const o=!s&&De(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=Yg(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of u)Om(c,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{rc(s.imports,l=>{Om(l,e,n,r)&&(c||=[],c.push(l))})}finally{}void 0!==c&&f2(c,e)}if(!a){const c=ga(i)||(()=>new i);e({provide:i,useFactory:c,deps:Re},i),e({provide:l2,useValue:i,multi:!0},i),e({provide:gh,useValue:()=>Z(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const c=t;pT(u,l=>{e(l,c)})}}}return i!==t&&void 0!==t.providers}function pT(t,e){for(let n of t)sw(n)&&(n=n.\u0275providers),Array.isArray(n)?pT(n,e):e(n)}const Oee=Oe({provide:String,useValue:Oe});function gT(t){return null!==t&&"object"==typeof t&&Oee in t}function va(t){return"function"==typeof t}const mT=new W("Set Injector scope."),Fm={},Vee={};let _T;function Vm(){return void 0===_T&&(_T=new fT),_T}class Zr{}class Lm extends Zr{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vT(e,o=>this.processProvider(o)),this.records.set(c2,dc(void 0,this)),i.has("environment")&&this.records.set(Zr,dc(void 0,this));const s=this.records.get(mT);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(l2.multi,Re,ye.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=to(this),r=hr(void 0);try{return e()}finally{to(n),hr(r)}}get(e,n=jd,r=ye.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(JO))return e[JO](this);r=Zg(r);const s=to(this),o=hr(void 0);try{if(!(r&ye.SkipSelf)){let u=this.records.get(e);if(void 0===u){const c=function $ee(t){return"function"==typeof t||"object"==typeof t&&t instanceof W}(e)&&Qg(e);u=c&&this.injectableDefInScope(c)?dc(yT(e),Fm):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&ye.Self?Vm():this.parent).get(e,n=r&ye.Optional&&n===jd?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Jg]=a[Jg]||[]).unshift(Wt(e)),s)throw a;return function OX(t,e,n,r){const i=t[Jg];throw e[QO]&&i.unshift(e[QO]),t.message=function FX(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Wt(e);if(Array.isArray(e))i=e.map(Wt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Wt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(RX,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Jg]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{hr(o),to(s)}}resolveInjectorInitializers(){const e=to(this),n=hr(void 0);try{const i=this.get(gh.multi,Re,ye.Self);for(const s of i)s()}finally{to(e),hr(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Wt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new R(205,!1)}processProvider(e){let n=va(e=re(e))?e:re(e&&e.provide);const r=function Uee(t){return gT(t)?dc(void 0,t.useValue):dc(m2(t),Fm)}(e);if(va(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=dc(void 0,Fm,!0),i.factory=()=>pw(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Fm&&(n.value=Vee,n.value=n.factory()),"object"==typeof n.value&&n.value&&function jee(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=re(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function yT(t){const e=Qg(t),n=null!==e?e.factory:ga(t);if(null!==n)return n;if(t instanceof W)throw new R(204,!1);if(t instanceof Function)return function Lee(t){const e=t.length;if(e>0)throw function oh(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new R(204,!1);const n=function AX(t){return t&&(t[Xg]||t[zO])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new R(204,!1)}function m2(t,e,n){let r;if(va(t)){const i=re(t);return ga(i)||yT(i)}if(gT(t))r=()=>re(t.useValue);else if(function g2(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...pw(t.deps||[]));else if(function p2(t){return!(!t||!t.useExisting)}(t))r=()=>Z(re(t.useExisting));else{const i=re(t&&(t.useClass||t.provide));if(!function Bee(t){return!!t.deps}(t))return ga(i)||yT(i);r=()=>new i(...pw(t.deps))}return r}function dc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function vT(t,e){for(const n of t)Array.isArray(n)?vT(n,e):n&&sw(n)?vT(n.\u0275providers,e):e(n)}const Um=new W("AppId",{providedIn:"root",factory:()=>Gee}),Gee="ng",_2=new W("Platform Initializer"),co=new W("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),y2=new W("CSP nonce",{providedIn:"root",factory:()=>function cc(){if(void 0!==aT)return aT;if(typeof document<"u")return document;throw new R(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let v2=(t,e,n)=>null;function bT(t,e,n=!1){return v2(t,e,n)}class Zee{}class w2{}class tte{resolveComponentFactory(e){throw function ete(t){const e=Error(`No component factory found for ${Wt(t)}.`);return e.ngComponent=t,e}(e)}}let zm=(()=>{class t{static#e=this.NULL=new tte}return t})();function nte(){return pc(yn(),C())}function pc(t,e){return new yr(gr(t,e))}let yr=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=nte}return t})();class D2{}let Fi=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function ite(){const t=C(),n=kr(yn().index,t);return(pr(n)?n:t)[ce]}()}return t})(),ste=(()=>{class t{static#e=this.\u0275prov=J({token:t,providedIn:"root",factory:()=>null})}return t})();class gc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const C2=new gc("16.2.7"),RT={};function x2(t,e=null,n=null,r){const i=R2(t,e,n,r);return i.resolveInjectorInitializers(),i}function R2(t,e=null,n=null,r,i=new Set){const s=[n||Re,kee(t)];return r=r||("object"==typeof t?void 0:Wt(t)),new Lm(s,e||Vm(),r||null,i)}let Jn=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=jd;static#t=this.NULL=new fT;static create(n,r){if(Array.isArray(n))return x2({name:""},r,n,"");{const i=n.name??"";return x2({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=J({token:t,providedIn:"any",factory:()=>Z(c2)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function MT(t){return t.ngOriginalError}class ys{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&MT(e);for(;n&&MT(n);)n=MT(n);return n||null}}function kT(t){return e=>{setTimeout(t,void 0,e)}}const _t=class hte extends xr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=kT(s),i&&(i=kT(i)),o&&(o=kT(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof lr&&e.add(a),a}};function M2(...t){}class Fe{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _t(!1),this.onMicrotaskEmpty=new _t(!1),this.onStable=new _t(!1),this.onError=new _t(!1),typeof Zone>"u")throw new R(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function fte(){const t="function"==typeof We.requestAnimationFrame;let e=We[t?"requestAnimationFrame":"setTimeout"],n=We[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function mte(t){const e=()=>{!function gte(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(We,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,FT(t),t.isCheckStableRunning=!0,OT(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),FT(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function yte(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return N2(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),k2(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return N2(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),k2(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,FT(t),OT(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fe.isInAngularZone())throw new R(909,!1)}static assertNotInAngularZone(){if(Fe.isInAngularZone())throw new R(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,pte,M2,M2);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const pte={};function OT(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function FT(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function N2(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function k2(t){t._nesting--,OT(t)}class _te{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _t,this.onMicrotaskEmpty=new _t,this.onStable=new _t,this.onError=new _t}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const O2=new W("",{providedIn:"root",factory:F2});function F2(){const t=q(Fe);let e=!0;return function mX(...t){const e=Bd(t),n=function cX(t,e){return"number"==typeof tw(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Rr(r[0]):Uu(n)(en(r,e)):Si}(new dt(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new dt(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{Fe.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe($O()))}function vs(t){return t instanceof Function?t():t}let VT=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=J({token:t,providedIn:"root",factory:()=>new t})}return t})();function yh(t){for(;t;){t[fe]|=64;const e=ch(t);if(Iw(t)&&!e)return t;t=e}return null}const j2=new W("",{providedIn:"root",factory:()=>!1});let Wm=null;function z2(t,e){return t[e]??K2()}function H2(t,e){const n=K2();n.producerNode?.length&&(t[e]=Wm,n.lView=t,Wm=W2())}const Ste={...gF,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{yh(t.lView)},lView:null};function W2(){return Object.create(Ste)}function K2(){return Wm??=W2(),Wm}const he={};function lo(t){Q2(Ce(),C(),Yn()+t,!1)}function Q2(t,e,n,r){if(!r)if(3==(3&e[fe])){const s=t.preOrderCheckHooks;null!==s&&lm(e,s,n)}else{const s=t.preOrderHooks;null!==s&&dm(e,s,0,n)}ma(n)}function P(t,e=ye.Default){const n=C();return null===n?Z(t,e):oV(yn(),n,re(t),e)}function Km(t,e,n,r,i,s,o,a,u,c,l){const d=e.blueprint.slice();return d[mt]=i,d[fe]=140|r,(null!==c||t&&2048&t[fe])&&(d[fe]|=2048),OF(d),d[at]=d[qu]=t,d[bt]=n,d[Gu]=o||t&&t[Gu],d[ce]=a||t&&t[ce],d[no]=u||t&&t[no]||null,d[Nn]=s,d[Qd]=function FZ(){return OZ++}(),d[ps]=l,d[dF]=c,d[St]=2==e.type?t[St]:d,d}function yc(t,e,n,r,i){let s=t.data[e];if(null===s)s=function LT(t,e,n,r,i){const s=jF(),o=Sw(),u=t.data[e]=function Fte(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Qu(){return null!==ne.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function OJ(){return ne.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function eh(){const t=ne.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ki(s,!0),s}function vh(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function X2(t,e,n,r,i){const s=z2(e,Yd),o=Yn(),a=2&r;try{ma(-1),a&&e.length>ve&&Q2(t,e,ve,!1),Ni(a?2:0,i);const c=a?s:null,l=ww(c);try{null!==c&&(c.dirty=!1),n(r,i)}finally{Tw(c,l)}}finally{a&&null===e[Yd]&&H2(e,Yd),ma(o),Ni(a?3:1,i)}}function UT(t,e,n){if(vw(e)){const r=Yr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{Yr(r)}}}function BT(t,e,n){BF()&&(function Gte(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;pa(n)&&function Yte(t,e,n){const r=gr(e,t),i=J2(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Qm(t,Km(t,i,null,o,r,e,null,t[Gu].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||fm(n,e),kn(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],c=_a(e,t,a,n);kn(c,e),null!==o&&Xte(0,a-i,c,u,0,o),pi(u)&&(kr(n.index,e)[bt]=_a(e,t,a,n))}}(t,e,n,gr(n,e)),64==(64&n.flags)&&rL(t,e,n))}function jT(t,e,n=gr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function J2(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=$T(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function $T(t,e,n,r,i,s,o,a,u,c,l){const d=ve+r,h=d+i,f=function Rte(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:he);return n}(d,h),p="function"==typeof c?c():c;return f[G]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:p,incompleteFirstPass:!1,ssrId:l}}let Z2=t=>null;function eL(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?tL(n,e,i,s):r.hasOwnProperty(i)&&tL(n,e,r[i],s)}return n}function tL(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function GT(t,e,n,r){if(BF()){const i=null===r?null:{"":-1},s=function zte(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(sF(e,o.selectors,!1))if(r||(r=[]),pi(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),qT(t,e,a.length)}else r.unshift(o),qT(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&nL(t,e,n,o,i,a),i&&function Hte(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new R(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=qd(n.mergedAttrs,n.attrs)}function nL(t,e,n,r,i,s){for(let c=0;c<r.length;c++)Bw(fm(n,e),t,r[c].type);!function Kte(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let c=0;c<r.length;c++){const l=r[c];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,u=vh(t,e,r.length,null);for(let c=0;c<r.length;c++){const l=r[c];n.mergedAttrs=qd(n.mergedAttrs,l.hostAttrs),Qte(t,n,e,u,l),Wte(u,l,i),null!==l.contentQueries&&(n.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=64);const d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function Vte(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,c=null;for(let l=e.directiveStart;l<i;l++){const d=s[l],h=n?n.get(d):null,p=h?h.outputs:null;u=eL(d.inputs,l,u,h?h.inputs:null),c=eL(d.outputs,l,c,p);const g=null===u||null===o||iF(e)?null:Jte(u,l,o);a.push(g)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}(t,n,s)}function rL(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function VJ(){return ne.lFrame.currentDirectiveIndex}();try{ma(s);for(let a=r;a<i;a++){const u=t.data[a],c=e[a];Rw(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&qte(u,c)}}finally{ma(-1),Rw(o)}}function qte(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function qT(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Wte(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;pi(e)&&(n[""]=t)}}function Qte(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=ga(i.type)),o=new th(s,pi(i),P);t.blueprint[r]=o,n[r]=o,function jte(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function $te(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,vh(t,n,i.hostVars,he),i)}function Xte(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)iL(r,n,o[a++],o[a++],o[a++])}function iL(t,e,n,r,i){const s=Yr(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{Yr(s)}}function Jte(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function sL(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null,null]}function oL(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];Mw(n[r]),o.contentQueries(2,e[s],s)}}}function Qm(t,e){return t[Wd]?t[lF][fi]=e:t[Wd]=e,t[lF]=e,e}function HT(t,e,n){Mw(0);const r=Yr(null);try{e(t,n)}finally{Yr(r)}}function lL(t,e){const n=t[no],r=n?n.get(ys,null):null;r&&r.handleError(e)}function WT(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];iL(t.data[o],e[o],r,a,i)}}function Zte(t,e){const n=kr(e,t),r=n[G];!function ene(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[mt];null!==i&&null===n[ps]&&(n[ps]=bT(i,n[no])),KT(r,n,n[bt])}function KT(t,e,n){Nw(e);try{const r=t.viewQuery;null!==r&&HT(1,r,n);const i=t.template;null!==i&&X2(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&oL(t,e),t.staticViewQueries&&HT(2,t.viewQuery,n);const s=t.components;null!==s&&function tne(t,e){for(let n=0;n<e.length;n++)Zte(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[fe]&=-5,kw()}}let dL=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function dJ(t,e,n){const r=Object.create(hJ);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>vF(r),run:()=>{if(r.dirty=!1,r.hasRun&&!IF(r))return;r.hasRun=!0;const o=ww(r);try{r.cleanupFn(),r.cleanupFn=SF,r.fn(i)}finally{Tw(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,c=>{this.all.has(c)&&this.queue.set(c,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=J({token:t,providedIn:"root",factory:()=>new t})}return t})();function Ym(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=rw(i,a):2==s&&(r=rw(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Ih(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(Ke(s)),Kn(s)&&hL(s,r);const o=n.type;if(8&o)Ih(t,e,n.child,r);else if(32&o){const a=Jw(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=zV(e,n);if(Array.isArray(a))r.push(...a);else{const u=ch(e[St]);Ih(u[G],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function hL(t,e){for(let n=mn;n<t.length;n++){const r=t[n],i=r[G].firstChild;null!==i&&Ih(r[G],r,i,e)}t[Mi]!==t[mt]&&e.push(t[Mi])}function Xm(t,e,n,r=!0){const i=e[Gu],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{fL(t,e,t.template,n)}catch(u){throw r&&lL(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function fL(t,e,n,r){const i=e[fe];if(256!=(256&i)){e[Gu].effectManager?.flush(),Nw(e);try{OF(e),function GF(t){return ne.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&X2(t,e,n,2,r);const o=3==(3&i);if(o){const c=t.preOrderCheckHooks;null!==c&&lm(e,c,null)}else{const c=t.preOrderHooks;null!==c&&dm(e,c,0,null),Ow(e,0)}if(function ine(t){for(let e=NV(t);null!==e;e=kV(e)){if(!e[hF])continue;const n=e[Hu];for(let r=0;r<n.length;r++){wJ(n[r])}}}(e),pL(e,2),null!==t.contentQueries&&oL(t,e),o){const c=t.contentCheckHooks;null!==c&&lm(e,c)}else{const c=t.contentHooks;null!==c&&dm(e,c,1),Ow(e,1)}!function xte(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=z2(e,Xd);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)ma(~s);else{const o=s,a=n[++i],u=n[++i];FJ(a,o),r.dirty=!1;const c=ww(r);try{u(2,e[o])}finally{Tw(r,c)}}}}finally{null===e[Xd]&&H2(e,Xd),ma(-1)}}(t,e);const a=t.components;null!==a&&mL(e,a,0);const u=t.viewQuery;if(null!==u&&HT(2,u,r),o){const c=t.viewCheckHooks;null!==c&&lm(e,c)}else{const c=t.viewHooks;null!==c&&dm(e,c,2),Ow(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[fe]&=-73,FF(e)}finally{kw()}}}function pL(t,e){for(let n=NV(t);null!==n;n=kV(n))for(let r=mn;r<n.length;r++)gL(n[r],e)}function sne(t,e,n){gL(kr(e,t),n)}function gL(t,e){if(!function IJ(t){return 128==(128&t[fe])}(t))return;const n=t[G],r=t[fe];if(80&r&&0===e||1024&r||2===e)fL(n,t,n.template,t[bt]);else if(t[Hd]>0){pL(t,1);const i=n.components;null!==i&&mL(t,i,1)}}function mL(t,e,n){for(let r=0;r<e.length;r++)sne(t,e[r],n)}class Eh{get rootNodes(){const e=this._lView,n=e[G];return Ih(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[bt]}set context(e){this._lView[bt]=e}get destroyed(){return 256==(256&this._lView[fe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[at];if(Kn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Sm(e,r),_m(n,r))}this._attachedToViewContainer=!1}eT(this._lView[G],this._lView)}onDestroy(e){!function LF(t,e){if(256==(256&t[fe]))throw new R(911,!1);null===t[ro]&&(t[ro]=[]),t[ro].push(e)}(this._lView,e)}markForCheck(){yh(this._cdRefInjectingView||this._lView)}detach(){this._lView[fe]&=-129}reattach(){this._lView[fe]|=128}detectChanges(){Xm(this._lView[G],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new R(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function YZ(t,e){dh(t,e,e[ce],2,null,null)}(this._lView[G],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new R(902,!1);this._appRef=e}}class one extends Eh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Xm(e[G],e,e[bt],!1)}checkNoChanges(){}get context(){return null}}class _L extends zm{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=De(e);return new wh(n,this.ngModule)}}function yL(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class une{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Zg(r);const i=this.injector.get(e,RT,r);return i!==RT||n===RT?i:this.parentInjector.get(e,n,r)}}class wh extends w2{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=yL(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return yL(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function HX(t){return t.map(zX).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof Zr?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new une(e,s):e,a=o.get(D2,null);if(null===a)throw new R(407,!1);const d={rendererFactory:a,sanitizer:o.get(ste,null),effectManager:o.get(dL,null),afterRenderEventManager:o.get(VT,null)},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?function Pte(t,e,n,r){const s=r.get(j2,!1)||n===di.ShadowDom,o=t.selectRootElement(e,s);return function Mte(t){Z2(t)}(o),o}(h,r,this.componentDef.encapsulation,o):bm(h,f,function ane(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),v=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let y=null;null!==p&&(y=bT(p,o,!0));const w=$T(0,null,null,1,0,null,null,null,null,null,null),A=Km(null,w,null,v,null,null,d,h,o,null,y);let N,j;Nw(A);try{const ae=this.componentDef;let ze,li=null;ae.findHostDirectiveDefs?(ze=[],li=new Map,ae.findHostDirectiveDefs(ae,ze,li),ze.push(ae)):ze=[ae];const Vd=function lne(t,e){const n=t[G],r=ve;return t[r]=e,yc(n,r,2,"#host",null)}(A,p),S1e=function dne(t,e,n,r,i,s,o){const a=i[G];!function hne(t,e,n,r){for(const i of t)e.mergedAttrs=qd(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Ym(e,e.mergedAttrs,!0),null!==n&&QV(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=bT(e,i[no]));const c=s.rendererFactory.createRenderer(e,n);let l=16;n.signals?l=4096:n.onPush&&(l=64);const d=Km(i,J2(n),null,l,i[t.index],t,s,c,null,null,u);return a.firstCreatePass&&qT(a,t,r.length-1),Qm(i,d),i[t.index]=d}(Vd,p,ae,ze,A,d,h);j=kF(w,ve),p&&function pne(t,e,n,r){if(r)_w(t,n,["ng-version",C2.full]);else{const{attrs:i,classes:s}=function WX(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!hi(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&_w(t,n,i),s&&s.length>0&&KV(t,n,s.join(" "))}}(h,ae,p,r),void 0!==n&&function gne(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(j,this.ngContentSelectors,n),N=function fne(t,e,n,r,i,s){const o=yn(),a=i[G],u=gr(o,i);nL(a,i,o,n,null,r);for(let l=0;l<n.length;l++)kn(_a(i,a,o.directiveStart+l,o),i);rL(a,i,o),u&&kn(u,i);const c=_a(i,a,o.directiveStart+o.componentOffset,o);if(t[bt]=i[bt]=c,null!==s)for(const l of s)l(c,e);return UT(a,o,t),c}(S1e,ae,ze,li,A,[mne]),KT(w,A,null)}finally{kw()}return new cne(this.componentType,N,pc(j,A),A,j)}}class cne extends Zee{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new one(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;WT(s[G],s,i,e,n),this.previousInputValues.set(e,n),yh(kr(this._tNode.index,s))}}get injector(){return new Xn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function mne(){const t=yn();cm(C()[G],t)}function Ve(t){let e=function vL(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(pi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new R(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=Jm(t.inputs),o.inputTransforms=Jm(t.inputTransforms),o.declaredInputs=Jm(t.declaredInputs),o.outputs=Jm(t.outputs);const a=i.hostBindings;a&&Ine(t,a);const u=i.viewQuery,c=i.contentQueries;if(u&&yne(t,u),c&&vne(t,c),Wg(t.inputs,i.inputs),Wg(t.declaredInputs,i.declaredInputs),Wg(t.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Wg(o.inputTransforms,i.inputTransforms)),pi(i)&&i.data.animation){const l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===Ve&&(n=!1)}}e=Object.getPrototypeOf(e)}!function _ne(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=qd(i.hostAttrs,n=qd(n,i.hostAttrs))}}(r)}function Jm(t){return t===Ri?{}:t===Re?[]:t}function yne(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function vne(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function Ine(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function Zm(t){return!!function QT(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function On(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}let VL=function LL(t,e,n,r){return oo(!0),e[ce].createComment("")};function Sc(t,e,n){const r=C();return On(r,Yu(),e)&&function Fr(t,e,n,r,i,s,o,a){const u=gr(e,n);let l,c=e.inputs;!a&&null!=c&&(l=c[r])?(WT(t,n,l,r,i),pa(e)&&function Ute(t,e){const n=kr(e,t);16&n[fe]||(n[fe]|=64)}(n,e.index)):3&e.type&&(r=function Lte(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(Ce(),function ht(){const t=ne.lFrame;return kF(t.tView,t.selectedIndex)}(),r,t,e,r[ce],n,!1),Sc}function t0(t,e,n,r,i){const o=i?"class":"style";WT(t,n,e.inputs[o],o,r)}function yt(t,e,n,r){const i=C(),s=Ce(),o=ve+t,a=i[ce],u=s.firstCreatePass?function Yne(t,e,n,r,i,s){const o=e.consts,u=yc(e,t,2,r,so(o,i));return GT(e,n,u,so(o,s)),null!==u.attrs&&Ym(u,u.attrs,!1),null!==u.mergedAttrs&&Ym(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],c=UL(s,i,u,a,e,t);i[o]=c;const l=im(u);return ki(u,!0),QV(a,c,u),32!=(32&u.flags)&&um()&&Rm(s,i,c,u),0===function DJ(){return ne.lFrame.elementDepthCount}()&&kn(c,i),function CJ(){ne.lFrame.elementDepthCount++}(),l&&(BT(s,i,u),UT(s,u,i)),null!==r&&jT(i,u),yt}function xt(){let t=yn();Sw()?function xw(){ne.lFrame.isParent=!1}():(t=t.parent,ki(t,!1));const e=t;(function bJ(t){return ne.skipHydrationRootTNode===t})(e)&&function PJ(){ne.skipHydrationRootTNode=null}(),function AJ(){ne.lFrame.elementDepthCount--}();const n=Ce();return n.firstCreatePass&&(cm(n,t),vw(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function KJ(t){return 0!=(8&t.flags)}(e)&&t0(n,e,C(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function QJ(t){return 0!=(16&t.flags)}(e)&&t0(n,e,C(),e.stylesWithoutHost,!1),xt}function xc(t,e,n,r){return yt(t,e,n,r),xt(),xc}let UL=(t,e,n,r,i,s)=>(oo(!0),bm(r,i,function XF(){return ne.lFrame.currentNamespace}()));function bh(t){return!!t&&"function"==typeof t.then}function $L(t){return!!t&&"function"==typeof t.subscribe}function Zn(t,e,n,r){const i=C(),s=Ce(),o=yn();return function qL(t,e,n,r,i,s,o){const a=im(r),c=t.firstCreatePass&&function uL(t){return t.cleanup||(t.cleanup=[])}(t),l=e[bt],d=function aL(t){return t[$u]||(t[$u]=[])}(e);let h=!0;if(3&r.type||o){const g=gr(r,e),m=o?o(g):g,v=d.length,y=o?A=>o(Ke(A[r.index])):r.index;let w=null;if(!o&&a&&(w=function rre(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[$u],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==w)(w.__ngLastListenerFn__||w).__ngNextListenerFn__=s,w.__ngLastListenerFn__=s,h=!1;else{s=HL(r,e,l,s,!1);const A=n.listen(m,i,s);d.push(s,A),c&&c.push(i,y,v,v+1)}}else s=HL(r,e,l,s,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const N=e[p[m]][p[m+1]].subscribe(s),j=d.length;d.push(s,N),c&&c.push(i,r.index,j,-(j+1))}}}(s,i,i[ce],o,t,e,r),Zn}function zL(t,e,n,r){try{return Ni(6,e,n),!1!==n(r)}catch(i){return lL(t,i),!1}finally{Ni(7,e,n)}}function HL(t,e,n,r,i){return function s(o){if(o===Function)return r;yh(t.componentOffset>-1?kr(t.index,e):e);let u=zL(e,n,r,o),c=s.__ngNextListenerFn__;for(;c;)u=zL(e,n,c,o)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function i_(t,e){return t<<17|e<<2}function ho(t){return t>>17&32767}function o0(t){return 2|t}function Ea(t){return(131068&t)>>2}function a0(t,e){return-131069&t|e<<2}function u0(t){return 1|t}function nU(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?ho(s):Ea(s),u=!1;for(;0!==a&&(!1===u||o);){const l=t[a+1];fre(t[a],e)&&(u=!0,t[a+1]=r?u0(l):o0(l)),a=r?ho(l):Ea(l)}u&&(t[n+1]=r?o0(s):u0(s))}function fre(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ic(t,e)>=0}function s_(t,e){return function gi(t,e,n,r){const i=C(),s=Ce(),o=function ms(t){const e=ne.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function dU(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[Yn()],o=function lU(t,e){return e>=t.expandoStartIndex}(t,n);(function gU(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function wre(t,e,n,r){const i=function Pw(t){const e=ne.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Sh(n=c0(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=c0(i,t,e,n,r),null===s){let u=function Tre(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Ea(r))return t[ho(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=c0(null,t,e,u[1],r),u=Sh(u,e.attrs,r),function Dre(t,e,n,r){t[ho(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function Cre(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Sh(r,t[s].hostAttrs,n);return Sh(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function dre(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ho(o),u=Ea(o);t[r]=n;let l,c=!1;if(Array.isArray(n)?(l=n[1],(null===l||ic(n,l)>0)&&(c=!0)):l=n,i)if(0!==u){const h=ho(t[a+1]);t[r+1]=i_(h,a),0!==h&&(t[h+1]=a0(t[h+1],r)),t[a+1]=function cre(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=i_(a,0),0!==a&&(t[a+1]=a0(t[a+1],r)),a=r;else t[r+1]=i_(u,0),0===a?a=r:t[u+1]=a0(t[u+1],r),u=r;c&&(t[r+1]=o0(t[r+1])),nU(t,l,r,!0),nU(t,l,r,!1),function hre(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&ic(s,e)>=0&&(n[r+1]=u0(n[r+1]))}(e,l,t,r,s),o=i_(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==he&&On(i,o,e)&&function fU(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1],l=function lre(t){return 1==(1&t)}(c)?pU(u,e,n,i,Ea(c),o):void 0;o_(l)||(o_(s)||function ure(t){return 2==(2&t)}(c)&&(s=pU(u,null,n,i,a,o)),function oee(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:ao.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ao.Important),t.setStyle(n,r,i,s))}}(r,o,am(Yn(),n),i,s))}(s,s.data[Yn()],i,i[ce],t,i[o+1]=function xre(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Wt(function uo(t){return t instanceof ZV?t.changingThisBreaksApplicationSecurity:t}(t)))),t}(e,n),r,o)}(t,e,null,!0),s_}function c0(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=Sh(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Sh(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Or(t,o,!!n||e[++s]))}return void 0===t?null:t}function pU(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],c=Array.isArray(u),l=c?u[1]:u,d=null===l;let h=n[i+1];h===he&&(h=d?Re:void 0);let f=d?Gw(h,r):l===r?h:void 0;if(c&&!o_(f)&&(f=Gw(u,r)),o_(f)&&(a=f,o))return a;const p=t[i+1];i=o?ho(p):Ea(p)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=Gw(u,r))}return a}function o_(t){return void 0!==t}function er(t,e=""){const n=C(),r=Ce(),i=t+ve,s=r.firstCreatePass?yc(r,i,1,e,null):r.data[i],o=mU(r,n,s,e,t);n[i]=o,um()&&Rm(r,n,o,s),ki(s,!1)}let mU=(t,e,n,r,i)=>(oo(!0),function Am(t,e){return t.createText(e)}(e[ce],r));function xh(t){return l0("",t,""),xh}function l0(t,e,n){const r=C(),i=function Ic(t,e,n,r){return On(t,Yu(),n)?e+ue(n)+r:he}(r,t,e,n);return i!==he&&function Is(t,e,n){const r=am(e,t);!function FV(t,e,n){t.setValue(e,n)}(t[ce],r,n)}(r,Yn(),i),l0}const Mc="en-US";let LU=Mc;function f0(t,e,n,r,i){if(t=re(t),Array.isArray(t))for(let s=0;s<t.length;s++)f0(t[s],e,n,r,i);else{const s=Ce(),o=C(),a=yn();let u=va(t)?t:re(t.provide);const c=m2(t),l=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(va(t)||!t.multi){const f=new th(c,i,P),p=g0(u,e,i?l:l+h,d);-1===p?(Bw(fm(a,o),s,u),p0(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{const f=g0(u,e,l+h,d),p=g0(u,e,l,l+h),m=p>=0&&n[p];if(i&&!m||!i&&!(f>=0&&n[f])){Bw(fm(a,o),s,u);const v=function Yie(t,e,n,r,i){const s=new th(t,n,P);return s.multi=[],s.index=e,s.componentProviders=0,cB(s,i,r&&!n),s}(i?Qie:Kie,n.length,i,r,c);!i&&m&&(n[p].providerFactory=v),p0(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),o.push(v)}else p0(s,t,f>-1?f:p,cB(n[i?p:f],c,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function p0(t,e,n,r){const i=va(e),s=function Fee(t){return!!t.useClass}(e);if(i||s){const u=(s?re(e.useClass):e).prototype.ngOnDestroy;if(u){const c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const l=c.indexOf(n);-1===l?c.push(n,[r,u]):c[l+1].push(r,u)}else c.push(n,u)}}}function cB(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function g0(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Kie(t,e,n,r){return m0(this.multi,[])}function Qie(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=_a(n,n[G],this.providerFactory.index,r);s=a.slice(0,o),m0(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],m0(i,s);return s}function m0(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ut(t,e=[]){return n=>{n.providersResolver=(r,i)=>function Wie(t,e,n){const r=Ce();if(r.firstCreatePass){const i=pi(t);f0(n,r.data,r.blueprint,i,!0),f0(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class Ta{}class lB{}class _0 extends Ta{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _L(this);const i=Nr(e);this._bootstrapComponents=vs(i.bootstrap),this._r3Injector=R2(e,n,[{provide:Ta,useValue:this},{provide:zm,useValue:this.componentFactoryResolver},...r],Wt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class y0 extends lB{constructor(e){super(),this.moduleType=e}create(e){return new _0(this.moduleType,e,[])}}class dB extends Ta{constructor(e){super(),this.componentFactoryResolver=new _L(this),this.instance=null;const n=new Lm([...e.providers,{provide:Ta,useValue:this},{provide:zm,useValue:this.componentFactoryResolver}],e.parent||Vm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function v0(t,e,n=null){return new dB({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let Zie=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=h2(0,n.type),i=r.length>0?v0([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=J({token:t,providedIn:"environment",factory:()=>new t(Z(Zr))})}return t})();function hB(t){t.getStandaloneInjector=e=>e.get(Zie).getOrCreateStandaloneInjector(t)}function bse(t,e,n,r=!0){const i=e[G];if(function JZ(t,e,n,r){const i=mn+r,s=n.length;r>0&&(n[i-1][fi]=e),r<s-mn?(e[fi]=n[i],hV(n,mn+r,e)):(n.push(e),e[fi]=null),e[at]=n;const o=e[Kd];null!==o&&n!==o&&function ZZ(t,e){const n=t[Hu];e[St]!==e[at][at][St]&&(t[hF]=!0),null===n?t[Hu]=[e]:n.push(e)}(o,e);const a=e[Pi];null!==a&&a.insertView(t),e[fe]|=128}(i,e,t,n),r){const s=iT(n,t),o=e[ce],a=xm(o,t[Mi]);null!==a&&function QZ(t,e,n,r,i,s){r[mt]=i,r[Nn]=e,dh(t,r,n,1,i,s)}(i,t[Nn],o,e,a,s)}}Symbol;let Es=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Rse}return t})();const Sse=Es,xse=class extends Sse{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function Ase(t,e,n,r){const i=e.tView,a=Km(t,i,n,4096&t[fe]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Kd]=t[e.index];const c=t[Pi];return null!==c&&(a[Pi]=c.createEmbeddedView(i)),KT(i,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:r});return new Eh(i)}};function Rse(){return function d_(t,e){return 4&t.type?new xse(e,t,pc(t,e)):null}(yn(),C())}let ti=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Fse}return t})();function Fse(){return function RB(t,e){let n;const r=e[t.index];return Kn(r)?n=r:(n=sL(r,e,null,t),e[t.index]=n,Qm(e,n)),PB(n,e,t,r),new SB(n,t,e)}(yn(),C())}const Vse=ti,SB=class extends Vse{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return pc(this._hostTNode,this._hostLView)}get injector(){return new Xn(this._hostTNode,this._hostLView)}get parentInjector(){const e=pm(this._hostTNode,this._hostLView);if(Vw(e)){const n=rh(e,this._hostLView),r=nh(e);return new Xn(n[G].data[r+8],n)}return new Xn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=xB(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-mn}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,n,r,i,s){const o=e&&!function sh(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}const u=o?e:new wh(De(e)),c=r||this.parentInjector;if(!s&&null==u.ngModule){const m=(o?c:this.parentInjector).get(Zr,null);m&&(s=m)}De(u.componentType??{});const f=u.create(c,i,null,s);return this.insertImpl(f.hostView,a,false),f}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,r){const i=e._lView;if(function EJ(t){return Kn(t[at])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const c=i[at],l=new SB(c,c[Nn],c[at]);l.detach(l.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return bse(a,i,o,!r),e.attachToViewContainerRef(),hV(w0(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=xB(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Sm(this._lContainer,n);r&&(_m(w0(this._lContainer),n),eT(r[G],r))}detach(e){const n=this._adjustIndex(e,-1),r=Sm(this._lContainer,n);return r&&null!=_m(w0(this._lContainer),n)?new Eh(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function xB(t){return t[8]}function w0(t){return t[8]||(t[8]=[])}let PB=function MB(t,e,n,r){if(t[Mi])return;let i;i=8&n.type?Ke(r):function Lse(t,e){const n=t[ce],r=n.createComment(""),i=gr(e,t);return ya(n,xm(n,i),r,function ree(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Mi]=i};const N0=new W("Application Initializer");let k0=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=q(N0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(bh(s))n.push(s);else if($L(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rj=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const ws=new W("LocaleId",{providedIn:"root",factory:()=>q(ws,ye.Optional|ye.SkipSelf)||function goe(){return typeof $localize<"u"&&$localize.locale||Mc}()});let ij=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Kr(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class yoe{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let sj=(()=>{class t{compileModuleSync(n){return new y0(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=vs(Nr(n).declarations).reduce((o,a)=>{const u=De(a);return u&&o.push(new wh(u)),o},[]);return new yoe(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const cj=new W(""),g_=new W("");let U0,V0=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,U0||(function Loe(t){U0=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(Z(Fe),Z(L0),Z(g_))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})(),L0=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return U0?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),fo=null;const lj=new W("AllowMultipleToken"),B0=new W("PlatformDestroyListeners"),j0=new W("appBootstrapListener");class hj{constructor(e,n){this.name=e,this.token=n}}function pj(t,e,n=[]){const r=`Platform: ${e}`,i=new W(r);return(s=[])=>{let o=$0();if(!o||o.injector.get(lj,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function joe(t){if(fo&&!fo.get(lj,!1))throw new R(400,!1);(function dj(){!function oJ(t){DF=t}(()=>{throw new R(600,!1)})})(),fo=t;const e=t.get(mj);(function fj(t){t.get(_2,null)?.forEach(n=>n())})(t)}(function gj(t=[],e){return Jn.create({name:e,providers:[{provide:mT,useValue:"platform"},{provide:B0,useValue:new Set([()=>fo=null])},...t]})}(a,r))}return function Goe(t){const e=$0();if(!e)throw new R(401,!1);return e}()}}function $0(){return fo?.get(mj)??null}let mj=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function qoe(t="zone.js",e){return"noop"===t?new _te:"zone.js"===t?new Fe(e):t}(r?.ngZone,function _j(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function Jie(t,e,n){return new _0(t,e,n)}(n.moduleType,this.injector,function wj(t){return[{provide:Fe,useFactory:t},{provide:gh,multi:!0,useFactory:()=>{const e=q(Hoe,{optional:!0});return()=>e.initialize()}},{provide:Ej,useFactory:zoe},{provide:O2,useFactory:F2}]}(()=>i)),o=s.injector.get(ys,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{m_(this._modules,s),a.unsubscribe()})}),function yj(t,e,n){try{const r=n();return bh(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(k0);return a.runInitializers(),a.donePromise.then(()=>(function UU(t){Qr(t,"Expected localeId to be defined"),"string"==typeof t&&(LU=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(ws,Mc)||Mc),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=vj({},r);return function Uoe(t,e,n){const r=new y0(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(Oc);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new R(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new R(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(B0,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(Z(Jn))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function vj(t,e){return Array.isArray(e)?e.reduce(vj,t):{...t,...e}}let Oc=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=q(Ej),this.zoneIsStable=q(O2),this.componentTypes=[],this.components=[],this.isStable=q(ij).hasPendingTasks.pipe(xi(n=>n?ie(!1):this.zoneIsStable),function _X(t,e=Zs){return t=t??yX,Ht((n,r)=>{let i,s=!0;n.subscribe(Ut(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}(),$O()),this._injector=q(Zr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof w2;if(!this._injector.get(k0).done)throw!i&&function ju(t){const e=De(t)||gn(t)||Wn(t);return null!==e&&e.standalone}(n),new R(405,!1);let o;o=i?n:this._injector.get(zm).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function Boe(t){return t.isBoundToModule}(o)?void 0:this._injector.get(Ta),c=o.create(Jn.NULL,[],r||o.selector,a),l=c.location.nativeElement,d=c.injector.get(cj,null);return d?.registerApplication(l),c.onDestroy(()=>{this.detachView(c.hostView),m_(this.components,c),d?.unregisterApplication(l)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new R(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;m_(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(j0,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>m_(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new R(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function m_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ej=new W("",{providedIn:"root",factory:()=>q(ys).handleError.bind(void 0)});function zoe(){const t=q(Fe),e=q(ys);return n=>t.runOutsideAngular(()=>e.handleError(n))}let Hoe=(()=>{class t{constructor(){this.zone=q(Fe),this.applicationRef=q(Oc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let __=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Koe}return t})();function Koe(t){return function Qoe(t,e,n){if(pa(t)&&!n){const r=kr(t.index,e);return new Eh(r,r)}return 47&t.type?new Eh(e[St],e):null}(yn(),C(),16==(16&t))}class Aj{constructor(){}supports(e){return Zm(e)}create(e){return new tae(e)}}const eae=(t,e)=>e;class tae{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||eae}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<Sj(r,i,s)?n:r,a=Sj(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,l=u-i;if(c!=l){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;l<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=l-c}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Zm(e))throw new R(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function bne(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new nae(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new bj),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bj),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class nae{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rae{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class bj{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new rae,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Sj(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Rj(){return new I_([new Aj])}let I_=(()=>{class t{static#e=this.\u0275prov=J({token:t,providedIn:"root",factory:Rj});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Rj()),deps:[[t,new vm,new mr]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new R(901,!1)}}return t})();const uae=pj(null,"core",[]);let cae=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(Z(Oc))};static#t=this.\u0275mod=Mr({type:t});static#n=this.\u0275inj=dr({})}return t})();let K0=null;function po(){return K0}class Tae{}const ni=new W("DocumentToken");let Q0=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:function(){return q(Cae)},providedIn:"platform"})}return t})();const Dae=new W("Location Initialized");let Cae=(()=>{class t extends Q0{constructor(){super(),this._doc=q(ni),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return po().getBaseHref(this._doc)}onPopState(n){const r=po().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=po().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function Y0(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Bj(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Ts(t){return t&&"?"!==t[0]?"?"+t:t}let Ca=(()=>{class t{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:function(){return q($j)},providedIn:"root"})}return t})();const jj=new W("appBaseHref");let $j=(()=>{class t extends Ca{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??q(ni).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Y0(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Ts(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+Ts(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+Ts(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(Z(Q0),Z(jj,8))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Aae=(()=>{class t extends Ca{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Y0(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Ts(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Ts(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(Z(Q0),Z(jj,8))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})(),X0=(()=>{class t{constructor(n){this._subject=new _t,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function xae(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(Bj(Gj(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ts(r))}normalize(n){return t.stripTrailingSlash(function Sae(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,Gj(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ts(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ts(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=Ts;static#t=this.joinWithSlash=Y0;static#n=this.stripTrailingSlash=Bj;static#r=this.\u0275fac=function(r){return new(r||t)(Z(Ca))};static#i=this.\u0275prov=J({token:t,factory:function(){return function bae(){return new X0(Z(Ca))}()},providedIn:"root"})}return t})();function Gj(t){return t.replace(/\/index.html$/,"")}class mue{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let e$=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new mue(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),t$(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{t$(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(P(ti),P(Es),P(I_))};static#t=this.\u0275dir=te({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function t$(t,e){t.context.$implicit=e.item}let s$=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Mr({type:t});static#n=this.\u0275inj=dr({})}return t})();function a$(t){return"server"===t}let Hue=(()=>{class t{static#e=this.\u0275prov=J({token:t,providedIn:"root",factory:()=>new Wue(Z(ni),window)})}return t})();class Wue{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function Kue(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class yce extends Tae{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class pD extends yce{static makeCurrent(){!function wae(t){K0||(K0=t)}(new pD)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function vce(){return Gh=Gh||document.querySelector("base"),Gh?Gh.getAttribute("href"):null}();return null==n?null:function Ice(t){k_=k_||document.createElement("a"),k_.setAttribute("href",t);const e=k_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Gh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function fue(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let k_,Gh=null,wce=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})();const gD=new W("EventManagerPlugins");let h$=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new R(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(Z(gD),Z(Fe))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})();class f${constructor(e){this._doc=e}}const mD="ng-app-id";let p$=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=a$(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${mD}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(mD),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(mD,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(Z(ni),Z(Um),Z(y2,8),Z(co))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})();const _D={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yD=/%COMP%/g,Ace=new W("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function m$(t,e){return e.map(n=>n.replace(yD,t))}let _$=(()=>{class t{constructor(n,r,i,s,o,a,u,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=a$(a),this.defaultRenderer=new vD(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===di.ShadowDom&&(r={...r,encapsulation:di.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof v$?i.applyToHost(n):i instanceof ID&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case di.Emulated:s=new v$(u,c,r,this.appId,l,o,a,d);break;case di.ShadowDom:return new Rce(u,c,n,r,o,a,this.nonce,d);default:s=new ID(u,c,r,l,o,a,d)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(Z(h$),Z(p$),Z(Um),Z(Ace),Z(ni),Z(co),Z(Fe),Z(y2))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})();class vD{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(_D[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(y$(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(y$(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new R(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=_D[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=_D[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(ao.DashCase|ao.Important)?e.style.setProperty(n,r,i&ao.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&ao.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=po().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function y$(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Rce extends vD{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=m$(i.id,i.styles);for(const l of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ID extends vD{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?m$(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class v$ extends ID{constructor(e,n,r,i,s,o,a,u){const c=i+"-"+r.id;super(e,n,r,s,o,a,u,c),this.contentAttr=function bce(t){return"_ngcontent-%COMP%".replace(yD,t)}(c),this.hostAttr=function Sce(t){return"_nghost-%COMP%".replace(yD,t)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let Pce=(()=>{class t extends f${constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(Z(ni))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})();const I$=["alt","control","meta","shift"],Mce={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Nce={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let kce=(()=>{class t extends f${constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>po().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),I$.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=Mce[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),I$.forEach(o=>{o!==i&&(0,Nce[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(Z(ni))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})();const w$=[{provide:co,useValue:"browser"},{provide:_2,useValue:function Oce(){pD.makeCurrent()},multi:!0},{provide:ni,useFactory:function Vce(){return function dee(t){aT=t}(document),document},deps:[]}],Lce=pj(uae,"browser",w$),Uce=new W(""),T$=[{provide:g_,useClass:class Ece{addToWindow(e){We.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new R(5103,!1);return s},We.getAllAngularTestabilities=()=>e.getAllTestabilities(),We.getAllAngularRootElements=()=>e.getAllRootElements(),We.frameworkStabilizers||(We.frameworkStabilizers=[]),We.frameworkStabilizers.push(r=>{const i=We.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?po().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:cj,useClass:V0,deps:[Fe,L0,g_]},{provide:V0,useClass:V0,deps:[Fe,L0,g_]}],D$=[{provide:mT,useValue:"root"},{provide:ys,useFactory:function Fce(){return new ys},deps:[]},{provide:gD,useClass:Pce,multi:!0,deps:[ni,Fe,co]},{provide:gD,useClass:kce,multi:!0,deps:[ni]},_$,p$,h$,{provide:D2,useExisting:_$},{provide:class Que{},useClass:wce,deps:[]},[]];let Bce=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Um,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(Z(Uce,12))};static#t=this.\u0275mod=Mr({type:t});static#n=this.\u0275inj=dr({providers:[...D$,...T$],imports:[s$,cae]})}return t})(),C$=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(Z(ni))};static#t=this.\u0275prov=J({token:t,factory:function(r){let i=null;return i=r?new r:function $ce(){return new C$(Z(ni))}(),i},providedIn:"root"})}return t})();typeof window<"u"&&window;const{isArray:Wce}=Array,{getPrototypeOf:Kce,prototype:Qce,keys:Yce}=Object;function x$(t){if(1===t.length){const e=t[0];if(Wce(e))return{args:e,keys:null};if(function Xce(t){return t&&"object"==typeof t&&Kce(t)===Qce}(e)){const n=Yce(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:Jce}=Array;function R$(t){return ke(e=>function Zce(t,e){return Jce(e)?t(...e):t(e)}(t,e))}function P$(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}let M$=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(P(Fi),P(yr))};static#t=this.\u0275dir=te({type:t})}return t})(),Aa=(()=>{class t extends M${static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=vn(t)))(i||t)}}();static#t=this.\u0275dir=te({type:t,features:[Ve]})}return t})();const $i=new W("NgValueAccessor"),nle={provide:$i,useExisting:He(()=>O_),multi:!0},ile=new W("CompositionEventMode");let O_=(()=>{class t extends M${constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function rle(){const t=po()?po().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(r){return new(r||t)(P(Fi),P(yr),P(ile,8))};static#t=this.\u0275dir=te({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Zn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[ut([nle]),Ve]})}return t})();const Fn=new W("NgValidators"),_o=new W("NgAsyncValidators");function G$(t){return null!=t}function q$(t){return bh(t)?en(t):t}function z$(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function H$(t,e){return e.map(n=>n(t))}function W$(t){return t.map(e=>function ole(t){return!t.validate}(e)?e:n=>e.validate(n))}function wD(t){return null!=t?function K$(t){if(!t)return null;const e=t.filter(G$);return 0==e.length?null:function(n){return z$(H$(n,e))}}(W$(t)):null}function TD(t){return null!=t?function Q$(t){if(!t)return null;const e=t.filter(G$);return 0==e.length?null:function(n){return function ele(...t){const e=BO(t),{args:n,keys:r}=x$(t),i=new dt(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,c=o;for(let l=0;l<o;l++){let d=!1;Rr(n[l]).subscribe(Ut(s,h=>{d||(d=!0,c--),a[l]=h},()=>u--,void 0,()=>{(!u||!d)&&(c||s.next(r?P$(r,a):a),s.complete())}))}});return e?i.pipe(R$(e)):i}(H$(n,e).map(q$)).pipe(ke(z$))}}(W$(t)):null}function Y$(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function DD(t){return t?Array.isArray(t)?t:[t]:[]}function V_(t,e){return Array.isArray(t)?t.includes(e):t===e}function Z$(t,e){const n=DD(e);return DD(t).forEach(i=>{V_(n,i)||n.push(i)}),n}function eG(t,e){return DD(e).filter(n=>!V_(t,n))}class tG{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=wD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=TD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class ir extends tG{get formDirective(){return null}get path(){return null}}class yo extends tG{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class nG{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let rG=(()=>{class t extends nG{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(P(yo,2))};static#t=this.\u0275dir=te({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&s_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ve]})}return t})(),iG=(()=>{class t extends nG{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(P(ir,10))};static#t=this.\u0275dir=te({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&s_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Ve]})}return t})();const qh="VALID",U_="INVALID",Lc="PENDING",zh="DISABLED";function bD(t){return(B_(t)?t.validators:t)||null}function SD(t,e){return(B_(e)?e.asyncValidators:t)||null}function B_(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class uG{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===qh}get invalid(){return this.status===U_}get pending(){return this.status==Lc}get disabled(){return this.status===zh}get enabled(){return this.status!==zh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Z$(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Z$(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(eG(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(eG(e,this._rawAsyncValidators))}hasValidator(e){return V_(this._rawValidators,e)}hasAsyncValidator(e){return V_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Lc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=zh,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=qh,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qh||this.status===Lc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zh:qh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Lc,this._hasOwnPendingAsyncValidator=!0;const n=q$(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new _t,this.statusChanges=new _t}_calculateStatus(){return this._allControlsDisabled()?zh:this.errors?U_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Lc)?Lc:this._anyControlsHaveStatus(U_)?U_:qh}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){B_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function lle(t){return Array.isArray(t)?wD(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function dle(t){return Array.isArray(t)?TD(t):t||null}(this._rawAsyncValidators)}}class xD extends uG{constructor(e,n,r){super(bD(n),SD(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function aG(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new R(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function oG(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new R(1e3,"");if(!r[n])throw new R(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Uc=new W("CallSetDisabledState",{providedIn:"root",factory:()=>j_}),j_="always";function Hh(t,e,n=j_){RD(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function ple(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&cG(t,e)})}(t,e),function mle(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function gle(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&cG(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function fle(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function q_(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function RD(t,e){const n=function X$(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Y$(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function J$(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(Y$(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();q_(e._rawValidators,i),q_(e._rawAsyncValidators,i)}function cG(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const Ele={provide:ir,useExisting:He(()=>H_)},Wh=(()=>Promise.resolve())();let H_=(()=>{class t extends ir{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new _t,this.form=new xD({},wD(n),TD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Wh.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Hh(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Wh.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Wh.then(()=>{const r=this._findContainer(n.path),i=new xD({});(function lG(t,e){RD(t,e)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Wh.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Wh.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function dG(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(r){return new(r||t)(P(Fn,10),P(_o,10),P(Uc,8))};static#t=this.\u0275dir=te({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Zn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ut([Ele]),Ve]})}return t})();function hG(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function fG(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const pG=class extends uG{constructor(e=null,n,r){super(bD(n),SD(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),B_(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=fG(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hG(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hG(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){fG(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Dle={provide:yo,useExisting:He(()=>kD)},_G=(()=>Promise.resolve())();let kD=(()=>{class t extends yo{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new pG,this._registered=!1,this.name="",this.update=new _t,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function ND(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===O_?n=s:function vle(t){return Object.getPrototypeOf(t.constructor)===Aa}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function MD(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Hh(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){_G.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&function Fc(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}(r);_G.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function $_(t,e){return[...e.path,t]}(n,this._parent):[n]}static#e=this.\u0275fac=function(r){return new(r||t)(P(ir,9),P(Fn,10),P(_o,10),P($i,10),P(__,8),P(Uc,8))};static#t=this.\u0275dir=te({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ut([Dle]),Ve,Xr]})}return t})(),yG=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=te({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})(),IG=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Mr({type:t});static#n=this.\u0275inj=dr({})}return t})(),Kle=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Mr({type:t});static#n=this.\u0275inj=dr({imports:[IG]})}return t})(),Yle=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Uc,useValue:n.callSetDisabledState??j_}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Mr({type:t});static#n=this.\u0275inj=dr({imports:[Kle]})}return t})();function LG(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function _(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(u){LG(s,r,i,o,a,"next",u)}function a(u){LG(s,r,i,o,a,"throw",u)}o(void 0)})}}const UG=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},$D={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;u||(f=64,o||(h=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(UG(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==d)throw new ede;r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ede extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Bc=function(t){return function(t){const e=UG(t);return $D.encodeByteArray(e,!0)}(t).replace(/\./g,"")},W_=function(t){try{return $D.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},K_=()=>{try{return function rde(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&W_(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},jG=()=>{var t;return null===(t=K_())||void 0===t?void 0:t.config};class Q_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function Lr(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function GD(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function vo(){try{return"object"==typeof indexedDB}catch{return!1}}function jc(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}})}function qD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Er extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vi.prototype.create)}}class vi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function gde(t,e){return t.replace(mde,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new Er(i,`${this.serviceName}: ${o} (${i}).`,r)}}const mde=/\{\$([^}]+)}/g;function zD(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(GG(s)&&GG(o)){if(!zD(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function GG(t){return null!==t&&"object"==typeof t}function qG(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class yde{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function vde(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=HD),void 0===i.error&&(i.error=HD),void 0===i.complete&&(i.complete=HD);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HD(){}const Ide=1e3,Ede=2,wde=144e5,Tde=.5;function KD(t,e=Ide,n=Ede){const r=e*Math.pow(n,t),i=Math.round(Tde*r*(Math.random()-.5)*2);return Math.min(wde,r+i)}function Ur(t){return t&&t._delegate?t._delegate:t}class jt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Sa="[DEFAULT]";class Cde{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Q_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function bde(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return _(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Sa){return this.instances.has(e)}getOptions(e=Sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===Sa?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=Sa){return this.component?this.component.multipleInstances?e:Sa:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Sde{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Cde(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const QD=[];var _e=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(_e||{});const zG={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},xde=_e.INFO,Rde={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},Pde=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=Rde[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class Io{constructor(e){this.name=e,this._logLevel=xde,this._logHandler=Pde,this._userLogHandler=null,QD.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?zG[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const Mde=(t,e)=>e.some(n=>t instanceof n);let HG,WG;const KG=new WeakMap,YD=new WeakMap,QG=new WeakMap,XD=new WeakMap,JD=new WeakMap;let ZD={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return YD.get(t);if("objectStoreNames"===e)return t.objectStoreNames||QG.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Eo(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Ude(t){return"function"==typeof t?function Lde(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function kde(){return WG||(WG=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(eC(this),e),Eo(KG.get(this))}:function(...e){return Eo(t.apply(eC(this),e))}:function(e,...n){const r=t.call(eC(this),e,...n);return QG.set(r,e.sort?e.sort():[e]),Eo(r)}}(t):(t instanceof IDBTransaction&&function Fde(t){if(YD.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});YD.set(t,e)}(t),Mde(t,function Nde(){return HG||(HG=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,ZD):t)}function Eo(t){if(t instanceof IDBRequest)return function Ode(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Eo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&KG.set(n,t)}).catch(()=>{}),JD.set(e,t),e}(t);if(XD.has(t))return XD.get(t);const e=Ude(t);return e!==t&&(XD.set(t,e),JD.set(e,t)),e}const eC=t=>JD.get(t);function YG(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Eo(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Eo(o.result),u.oldVersion,u.newVersion,Eo(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Bde=["get","getKey","getAll","getAllKeys","count"],jde=["put","add","delete","clear"],tC=new Map;function XG(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(tC.get(e))return tC.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=jde.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Bde.includes(n))return;const s=function(){var o=_(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return tC.set(e,s),s}!function Vde(t){ZD=t(ZD)}(t=>({...t,get:(e,n,r)=>XG(e,n)||t.get(e,n,r),has:(e,n)=>!!XG(e,n)||t.has(e,n)}));class $de{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function Gde(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const nC="@firebase/app",xa=new Io("@firebase/app"),X_="[DEFAULT]",ghe={[nC]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ra=new Map,J_=new Map;function mhe(t,e){try{t.container.addComponent(e)}catch(n){xa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $c(t){const e=t.name;if(J_.has(e))return xa.debug(`There were multiple attempts to register component ${e}.`),!1;J_.set(e,t);for(const n of Ra.values())mhe(n,t);return!0}const As=new vi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class yhe{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw As.create("app-deleted",{appName:this._name})}}const Z_="9.23.0";function e4(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:X_,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw As.create("bad-app-name",{appName:String(i)});if(n||(n=jG()),!n)throw As.create("no-options");const s=Ra.get(i);if(s){if(zD(n,s.options)&&zD(r,s.config))return s;throw As.create("duplicate-app",{appName:i})}const o=new Sde(i);for(const u of J_.values())o.addComponent(u);const a=new yhe(n,r,o);return Ra.set(i,a),a}function t4(t=X_){const e=Ra.get(t);if(!e&&t===X_&&jG())return e4();if(!e)throw As.create("no-app",{appName:t});return e}function n4(){return Array.from(Ra.values())}function si(t,e,n){var r;let i=null!==(r=ghe[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void xa.warn(a.join(" "))}$c(new jt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const vhe="firebase-heartbeat-database",Ihe=1,Kh="firebase-heartbeat-store";let iC=null;function r4(){return iC||(iC=YG(vhe,Ihe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Kh)}}).catch(t=>{throw As.create("idb-open",{originalErrorMessage:t.message})})),iC}function sC(){return(sC=_(function*(t){try{return yield(yield r4()).transaction(Kh).objectStore(Kh).get(s4(t))}catch(e){if(e instanceof Er)xa.warn(e.message);else{const n=As.create("idb-get",{originalErrorMessage:e?.message});xa.warn(n.message)}}})).apply(this,arguments)}function i4(t,e){return oC.apply(this,arguments)}function oC(){return(oC=_(function*(t,e){try{const r=(yield r4()).transaction(Kh,"readwrite");yield r.objectStore(Kh).put(e,s4(t)),yield r.done}catch(n){if(n instanceof Er)xa.warn(n.message);else{const r=As.create("idb-set",{originalErrorMessage:n?.message});xa.warn(r.message)}}})).apply(this,arguments)}function s4(t){return`${t.name}!${t.options.appId}`}class Dhe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ahe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return _(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=o4();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return _(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=o4(),{heartbeatsToSend:r,unsentEntries:i}=function Che(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),a4(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),a4(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Bc(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function o4(){return(new Date).toISOString().substring(0,10)}class Ahe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(function*(){return!!vo()&&jc().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return _(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function Ehe(t){return sC.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return _(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return i4(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return _(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return i4(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function a4(t){return Bc(JSON.stringify({version:2,heartbeats:t})).length}!function bhe(t){$c(new jt("platform-logger",e=>new $de(e),"PRIVATE")),$c(new jt("heartbeat",e=>new Dhe(e),"PRIVATE")),si(nC,"0.9.13",t),si(nC,"0.9.13","esm2017"),si("fire-js","")}(""),si("firebase","9.23.0","app");class Rhe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function Phe(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const aC="@firebase/app",Pa=new Io("@firebase/app"),rfe={[aC]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ma=new Map,ty=new Map;function ife(t,e){try{t.container.addComponent(e)}catch(n){Pa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Br(t){const e=t.name;if(ty.has(e))return Pa.debug(`There were multiple attempts to register component ${e}.`),!1;ty.set(e,t);for(const n of Ma.values())ife(n,t);return!0}function uC(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const bs=new vi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});function wr(t,e,n){var r;let i=null!==(r=rfe[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Pa.warn(a.join(" "))}Br(new jt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const ufe="firebase-heartbeat-database",cfe=1,Qh="firebase-heartbeat-store";let lC=null;function l4(){return lC||(lC=YG(ufe,cfe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Qh)}}).catch(t=>{throw bs.create("idb-open",{originalErrorMessage:t.message})})),lC}function dC(){return(dC=_(function*(t){try{return yield(yield l4()).transaction(Qh).objectStore(Qh).get(h4(t))}catch(e){if(e instanceof Er)Pa.warn(e.message);else{const n=bs.create("idb-get",{originalErrorMessage:e?.message});Pa.warn(n.message)}}})).apply(this,arguments)}function d4(t,e){return hC.apply(this,arguments)}function hC(){return(hC=_(function*(t,e){try{const r=(yield l4()).transaction(Qh,"readwrite");yield r.objectStore(Qh).put(e,h4(t)),yield r.done}catch(n){if(n instanceof Er)Pa.warn(n.message);else{const r=bs.create("idb-set",{originalErrorMessage:n?.message});Pa.warn(r.message)}}})).apply(this,arguments)}function h4(t){return`${t.name}!${t.options.appId}`}class ffe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gfe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return _(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=f4();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return _(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=f4(),{heartbeatsToSend:r,unsentEntries:i}=function pfe(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),p4(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),p4(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Bc(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function f4(){return(new Date).toISOString().substring(0,10)}class gfe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(function*(){return!!vo()&&jc().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return _(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function lfe(t){return dC.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return _(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return d4(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return _(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return d4(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function p4(t){return Bc(JSON.stringify({version:2,heartbeats:t})).length}!function mfe(t){Br(new jt("platform-logger",e=>new Rhe(e),"PRIVATE")),Br(new jt("heartbeat",e=>new ffe(e),"PRIVATE")),wr(aC,"0.9.19",t),wr(aC,"0.9.19","esm2017"),wr("fire-js","")}("");const _fe=(t,e)=>e.some(n=>t instanceof n);let g4,m4;const _4=new WeakMap,fC=new WeakMap,y4=new WeakMap,pC=new WeakMap,gC=new WeakMap;let mC={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return fC.get(t);if("objectStoreNames"===e)return t.objectStoreNames||y4.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wo(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Dfe(t){return"function"==typeof t?function Tfe(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function vfe(){return m4||(m4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(_C(this),e),wo(_4.get(this))}:function(...e){return wo(t.apply(_C(this),e))}:function(e,...n){const r=t.call(_C(this),e,...n);return y4.set(r,e.sort?e.sort():[e]),wo(r)}}(t):(t instanceof IDBTransaction&&function Efe(t){if(fC.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});fC.set(t,e)}(t),_fe(t,function yfe(){return g4||(g4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,mC):t)}function wo(t){if(t instanceof IDBRequest)return function Ife(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(wo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_4.set(n,t)}).catch(()=>{}),gC.set(e,t),e}(t);if(pC.has(t))return pC.get(t);const e=Dfe(t);return e!==t&&(pC.set(t,e),gC.set(e,t)),e}const _C=t=>gC.get(t),Afe=["get","getKey","getAll","getAllKeys","count"],bfe=["put","add","delete","clear"],yC=new Map;function v4(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(yC.get(e))return yC.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=bfe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Afe.includes(n))return;const s=function(){var o=_(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return yC.set(e,s),s}!function wfe(t){mC=t(mC)}(t=>({...t,get:(e,n,r)=>v4(e,n)||t.get(e,n,r),has:(e,n)=>!!v4(e,n)||t.has(e,n)}));const I4="@firebase/installations",vC="0.6.4",E4=1e4,w4=`w:${vC}`,T4="FIS_v2",Sfe="https://firebaseinstallations.googleapis.com/v1",xfe=36e5,Ss=new vi("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function D4(t){return t instanceof Er&&t.code.includes("request-failed")}function IC({projectId:t}){return`${Sfe}/projects/${t}/installations`}function C4(t){return{token:t.token,requestStatus:2,expiresIn:Nfe(t.expiresIn),creationTime:Date.now()}}function EC(t,e){return wC.apply(this,arguments)}function wC(){return(wC=_(function*(t,e){const r=(yield e.json()).error;return Ss.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function A4({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function TC(t){return DC.apply(this,arguments)}function DC(){return(DC=_(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function Nfe(t){return Number(t.replace("s","000"))}function CC(){return(CC=_(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=IC(t),i=A4(t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:T4,appId:t.appId,sdkVersion:w4})},u=yield TC(()=>fetch(r,a));if(u.ok){const c=yield u.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:C4(c.authToken)}}throw yield EC("Create Installation",u)})).apply(this,arguments)}function S4(t){return new Promise(e=>{setTimeout(e,t)})}const Vfe=/^[cdef][\w-]{21}$/,AC="";function Lfe(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function Ufe(t){return function Ffe(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return Vfe.test(n)?n:AC}catch{return AC}}function Gc(t){return`${t.appName}!${t.appId}`}const qc=new Map;function x4(t,e){const n=Gc(t);R4(n,e),function $fe(t,e){const n=function P4(){return!Na&&"BroadcastChannel"in self&&(Na=new BroadcastChannel("[Firebase] FID Change"),Na.onmessage=t=>{R4(t.data.key,t.data.fid)}),Na}();n&&n.postMessage({key:t,fid:e}),function M4(){0===qc.size&&Na&&(Na.close(),Na=null)}()}(n,e)}function R4(t,e){const n=qc.get(t);if(n)for(const r of n)r(e)}let Na=null;const Gfe="firebase-installations-database",qfe=1,ka="firebase-installations-store";let bC=null;function SC(){return bC||(bC=function Cfe(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=wo(o);return r&&o.addEventListener("upgradeneeded",u=>{r(wo(o.result),u.oldVersion,u.newVersion,wo(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}(Gfe,qfe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(ka)}})),bC}function ny(t,e){return xC.apply(this,arguments)}function xC(){return(xC=_(function*(t,e){const n=Gc(t),i=(yield SC()).transaction(ka,"readwrite"),s=i.objectStore(ka),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&x4(t,e.fid),e})).apply(this,arguments)}function RC(t){return PC.apply(this,arguments)}function PC(){return(PC=_(function*(t){const e=Gc(t),r=(yield SC()).transaction(ka,"readwrite");yield r.objectStore(ka).delete(e),yield r.done})).apply(this,arguments)}function Yh(t,e){return MC.apply(this,arguments)}function MC(){return(MC=_(function*(t,e){const n=Gc(t),i=(yield SC()).transaction(ka,"readwrite"),s=i.objectStore(ka),o=yield s.get(n),a=e(o);return void 0===a?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&x4(t,a.fid),a})).apply(this,arguments)}function NC(t){return kC.apply(this,arguments)}function kC(){return kC=_(function*(t){let e;const n=yield Yh(t.appConfig,r=>{const i=function zfe(t){return k4(t||{fid:Lfe(),registrationStatus:0})}(r),s=function Hfe(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Ss.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function Wfe(t,e){return OC.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Kfe(t)}:{installationEntry:e}}(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===AC?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}}),kC.apply(this,arguments)}function OC(){return OC=_(function*(t,e){try{const n=yield function Ofe(t,e){return CC.apply(this,arguments)}(t,e);return ny(t.appConfig,n)}catch(n){throw D4(n)&&409===n.customData.serverCode?yield RC(t.appConfig):yield ny(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}),OC.apply(this,arguments)}function Kfe(t){return FC.apply(this,arguments)}function FC(){return(FC=_(function*(t){let e=yield N4(t.appConfig);for(;1===e.registrationStatus;)yield S4(100),e=yield N4(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield NC(t);return r||n}return e})).apply(this,arguments)}function N4(t){return Yh(t,e=>{if(!e)throw Ss.create("installation-not-found");return k4(e)})}function k4(t){return function Qfe(t){return 1===t.registrationStatus&&t.registrationTime+E4<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function VC(){return(VC=_(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=function Xfe(t,{fid:e}){return`${IC(t)}/${e}/authTokens:generate`}(t,n),i=function b4(t,{refreshToken:e}){const n=A4(t);return n.append("Authorization",function kfe(t){return`${T4} ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:w4,appId:t.appId}})},u=yield TC(()=>fetch(r,a));if(u.ok)return C4(yield u.json());throw yield EC("Generate Auth Token",u)})).apply(this,arguments)}function LC(t){return UC.apply(this,arguments)}function UC(){return UC=_(function*(t,e=!1){let n;const r=yield Yh(t.appConfig,s=>{if(!F4(s))throw Ss.create("not-registered");const o=s.authToken;if(!e&&function epe(t){return 2===t.requestStatus&&!function tpe(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+xfe}(t)}(o))return s;if(1===o.requestStatus)return n=function Jfe(t,e){return BC.apply(this,arguments)}(t,e),s;{if(!navigator.onLine)throw Ss.create("app-offline");const a=function npe(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(s);return n=function Zfe(t,e){return jC.apply(this,arguments)}(t,a),a}});return n?yield n:r.authToken}),UC.apply(this,arguments)}function BC(){return(BC=_(function*(t,e){let n=yield O4(t.appConfig);for(;1===n.authToken.requestStatus;)yield S4(100),n=yield O4(t.appConfig);const r=n.authToken;return 0===r.requestStatus?LC(t,e):r})).apply(this,arguments)}function O4(t){return Yh(t,e=>{if(!F4(e))throw Ss.create("not-registered");return function rpe(t){return 1===t.requestStatus&&t.requestTime+E4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function jC(){return jC=_(function*(t,e){try{const n=yield function Yfe(t,e){return VC.apply(this,arguments)}(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield ny(t.appConfig,r),n}catch(n){if(!D4(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield ny(t.appConfig,r)}else yield RC(t.appConfig);throw n}}),jC.apply(this,arguments)}function F4(t){return void 0!==t&&2===t.registrationStatus}function $C(){return($C=_(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield NC(e);return r?r.catch(console.error):LC(e).catch(console.error),n.fid})).apply(this,arguments)}function GC(){return GC=_(function*(t,e=!1){const n=t;return yield function ope(t){return qC.apply(this,arguments)}(n),(yield LC(n,e)).token}),GC.apply(this,arguments)}function qC(){return(qC=_(function*(t){const{registrationPromise:e}=yield NC(t);e&&(yield e)})).apply(this,arguments)}function WC(t){return Ss.create("missing-app-config-values",{valueName:t})}const V4="installations",dpe=t=>{const e=t.getProvider("app").getImmediate(),n=function cpe(t){if(!t||!t.options)throw WC("App Configuration");if(!t.name)throw WC("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw WC(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:uC(e,"heartbeat"),_delete:()=>Promise.resolve()}},hpe=t=>{const n=uC(t.getProvider("app").getImmediate(),V4).getImmediate();return{getId:()=>function ipe(t){return $C.apply(this,arguments)}(n),getToken:i=>function spe(t){return GC.apply(this,arguments)}(n,i)}};(function fpe(){Br(new jt(V4,dpe,"PUBLIC")),Br(new jt("installations-internal",hpe,"PRIVATE"))})(),wr(I4,vC),wr(I4,vC,"esm2017");const KC="@firebase/remote-config",Tr=new vi("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Dpe{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var n=this;return _(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield n.client.fetch(e),o=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(n.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function Cpe(t=navigator){return t.languages&&t.languages[0]||t.language}class Ape{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var n=this;return _(function*(){const[r,i]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:n.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:n.appId,language_code:Cpe()},c={method:"POST",headers:a,body:JSON.stringify(u)},l=fetch(o,c),d=new Promise((v,y)=>{e.signal.addEventListener(()=>{const w=new Error("The operation was aborted.");w.name="AbortError",y(w)})});let h;try{yield Promise.race([l,d]),h=yield l}catch(v){let y="fetch-client-network";throw"AbortError"===v?.name&&(y="fetch-timeout"),Tr.create(y,{originalErrorMessage:v?.message})}let f=h.status;const p=h.headers.get("ETag")||void 0;let g,m;if(200===h.status){let v;try{v=yield h.json()}catch(y){throw Tr.create("fetch-client-parse",{originalErrorMessage:y?.message})}g=v.entries,m=v.state}if("INSTANCE_STATE_UNSPECIFIED"===m?f=500:"NO_CHANGE"===m?f=304:("NO_TEMPLATE"===m||"EMPTY_CONFIG"===m)&&(g={}),304!==f&&200!==f)throw Tr.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:g}})()}}class xpe{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return _(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){var i=this;return _(function*(){yield function bpe(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Tr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function Spe(t){if(!(t instanceof Er&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+KD(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class Mpe{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function iy(t,e){const n=t.target.error||void 0;return Tr.create(e,{originalErrorMessage:n&&n?.message})}const Oa="app_namespace_store";class Fpe{constructor(e,n,r,i=function Ope(){return new Promise((t,e)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=r=>{e(iy(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Oa,{keyPath:"compositeKey"})}}catch(n){e(Tr.create("storage-open",{originalErrorMessage:n?.message}))}})}()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return _(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Oa],"readonly").objectStore(Oa),u=n.createCompositeKey(e);try{const c=a.get(u);c.onerror=l=>{s(iy(l,"storage-get"))},c.onsuccess=l=>{const d=l.target.result;i(d?d.value:void 0)}}catch(c){s(Tr.create("storage-get",{originalErrorMessage:c?.message}))}})})()}set(e,n){var r=this;return _(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const u=i.transaction([Oa],"readwrite").objectStore(Oa),c=r.createCompositeKey(e);try{const l=u.put({compositeKey:c,value:n});l.onerror=d=>{o(iy(d,"storage-set"))},l.onsuccess=()=>{s()}}catch(l){o(Tr.create("storage-set",{originalErrorMessage:l?.message}))}})})()}delete(e){var n=this;return _(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Oa],"readwrite").objectStore(Oa),u=n.createCompositeKey(e);try{const c=a.delete(u);c.onerror=l=>{s(iy(l,"storage-delete"))},c.onsuccess=()=>{i()}}catch(c){s(Tr.create("storage-delete",{originalErrorMessage:c?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Vpe{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return _(function*(){const n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield n;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Upe(){return ZC.apply(this,arguments)}function ZC(){return(ZC=_(function*(){if(!vo())return!1;try{return yield jc()}catch{return!1}})).apply(this,arguments)}!function Lpe(){Br(new jt("remote-config",function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Tr.create("registration-window");if(!vo())throw Tr.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Tr.create("registration-project-id");if(!o)throw Tr.create("registration-api-key");if(!a)throw Tr.create("registration-app-id");const u=new Fpe(a,r.name,n=n||"firebase"),c=new Vpe(u),l=new Io(KC);l.logLevel=_e.ERROR;const d=new Ape(i,"10.4.0",n,s,o,a),h=new xpe(d,u),f=new Dpe(h,u,c,l),p=new Mpe(r,f,c,u,l);return function Epe(t){const e=Ur(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),wr(KC,"0.4.4"),wr(KC,"0.4.4","esm2017")}();const Bpe=(t,e)=>e.some(n=>t instanceof n);let j4,$4;const G4=new WeakMap,eA=new WeakMap,q4=new WeakMap,tA=new WeakMap,nA=new WeakMap;let rA={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return eA.get(t);if("objectStoreNames"===e)return t.objectStoreNames||q4.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xs(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Wpe(t){return"function"==typeof t?function Hpe(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function $pe(){return $4||($4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(iA(this),e),xs(G4.get(this))}:function(...e){return xs(t.apply(iA(this),e))}:function(e,...n){const r=t.call(iA(this),e,...n);return q4.set(r,e.sort?e.sort():[e]),xs(r)}}(t):(t instanceof IDBTransaction&&function qpe(t){if(eA.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});eA.set(t,e)}(t),Bpe(t,function jpe(){return j4||(j4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,rA):t)}function xs(t){if(t instanceof IDBRequest)return function Gpe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(xs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&G4.set(n,t)}).catch(()=>{}),nA.set(e,t),e}(t);if(tA.has(t))return tA.get(t);const e=Wpe(t);return e!==t&&(tA.set(t,e),nA.set(e,t)),e}const iA=t=>nA.get(t);function z4(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=xs(o);return r&&o.addEventListener("upgradeneeded",u=>{r(xs(o.result),u.oldVersion,u.newVersion,xs(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function sA(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),xs(n).then(()=>{})}const Kpe=["get","getKey","getAll","getAllKeys","count"],Qpe=["put","add","delete","clear"],oA=new Map;function H4(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(oA.get(e))return oA.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Qpe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Kpe.includes(n))return;const s=function(){var o=_(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return oA.set(e,s),s}!function zpe(t){rA=t(rA)}(t=>({...t,get:(e,n,r)=>H4(e,n)||t.get(e,n,r),has:(e,n)=>!!H4(e,n)||t.has(e,n)}));const Ype="/firebase-messaging-sw.js",Xpe="/firebase-cloud-messaging-push-scope",W4="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Jpe="https://fcmregistrations.googleapis.com/v1",K4="google.c.a.c_id",Zpe="google.c.a.c_l",ege="google.c.a.ts";var sy=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(sy||{});function Rs(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function rge(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const aA="fcm_token_details_db",ige=5,Q4="fcm_token_object_Store";function uA(){return uA=_(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(aA))return null;let e=null;return(yield z4(aA,ige,{upgrade:(r=_(function*(i,s,o,a){var u;if(s<2||!i.objectStoreNames.contains(Q4))return;const c=a.objectStore(Q4),l=yield c.index("fcmSenderId").get(t);if(yield c.clear(),l)if(2===s){const d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(u=d.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:Rs(d.vapidKey)}}}else if(3===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Rs(d.auth),p256dh:Rs(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Rs(d.vapidKey)}}}else if(4===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Rs(d.auth),p256dh:Rs(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Rs(d.vapidKey)}}}}),function(s,o,a,u){return r.apply(this,arguments)})})).close(),yield sA(aA),yield sA("fcm_vapid_details_db"),yield sA("undefined"),function oge(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),uA.apply(this,arguments)}const age="firebase-messaging-database",uge=1,Fa="firebase-messaging-store";let cA=null;function lA(){return cA||(cA=z4(age,uge,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Fa)}})),cA}function Y4(t){return dA.apply(this,arguments)}function dA(){return dA=_(function*(t){const e=gA(t),r=yield(yield lA()).transaction(Fa).objectStore(Fa).get(e);if(r)return r;{const i=yield function sge(t){return uA.apply(this,arguments)}(t.appConfig.senderId);if(i)return yield hA(t,i),i}}),dA.apply(this,arguments)}function hA(t,e){return fA.apply(this,arguments)}function fA(){return(fA=_(function*(t,e){const n=gA(t),i=(yield lA()).transaction(Fa,"readwrite");return yield i.objectStore(Fa).put(e,n),yield i.done,e})).apply(this,arguments)}function pA(){return(pA=_(function*(t){const e=gA(t),r=(yield lA()).transaction(Fa,"readwrite");yield r.objectStore(Fa).delete(e),yield r.done})).apply(this,arguments)}function gA({appConfig:t}){return t.appId}const In=new vi("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function dge(t,e){return mA.apply(this,arguments)}function mA(){return(mA=_(function*(t,e){const n=yield IA(t),r=J4(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(vA(t.appConfig),i)).json()}catch(o){throw In.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw In.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw In.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function _A(){return(_A=_(function*(t,e){const n=yield IA(t),r=J4(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${vA(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw In.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw In.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw In.create("token-update-no-token");return s.token})).apply(this,arguments)}function X4(t,e){return yA.apply(this,arguments)}function yA(){return(yA=_(function*(t,e){const r={method:"DELETE",headers:yield IA(t)};try{const s=yield(yield fetch(`${vA(t.appConfig)}/${e}`,r)).json();if(s.error)throw In.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw In.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function vA({projectId:t}){return`${Jpe}/projects/${t}/registrations`}function IA(t){return EA.apply(this,arguments)}function EA(){return(EA=_(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function J4({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==W4&&(i.web.applicationPubKey=r),i}const fge=6048e5;function wA(){return wA=_(function*(t){const e=yield function mge(t,e){return AA.apply(this,arguments)}(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Rs(e.getKey("auth")),p256dh:Rs(e.getKey("p256dh"))},r=yield Y4(t.firebaseDependencies);if(r){if(function _ge(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}(r.subscriptionOptions,n))return Date.now()>=r.createTime+fge?function gge(t,e){return DA.apply(this,arguments)}(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield X4(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return eq(t.firebaseDependencies,n)}return eq(t.firebaseDependencies,n)}),wA.apply(this,arguments)}function TA(){return TA=_(function*(t){const e=yield Y4(t.firebaseDependencies);e&&(yield X4(t.firebaseDependencies,e.token),yield function cge(t){return pA.apply(this,arguments)}(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}),TA.apply(this,arguments)}function DA(){return DA=_(function*(t,e){try{const n=yield function hge(t,e){return _A.apply(this,arguments)}(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield hA(t.firebaseDependencies,r),n}catch(n){throw yield function Z4(t){return TA.apply(this,arguments)}(t),n}}),DA.apply(this,arguments)}function eq(t,e){return CA.apply(this,arguments)}function CA(){return(CA=_(function*(t,e){const r={token:yield dge(t,e),createTime:Date.now(),subscriptionOptions:e};return yield hA(t,r),r.token})).apply(this,arguments)}function AA(){return(AA=_(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:rge(e)})})).apply(this,arguments)}function tq(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function yge(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}(e,t),function vge(t,e){e.data&&(t.data=e.data)}(e,t),function Ige(t,e){var n,r,i,s,o;if(!(e.fcmOptions||null!==(n=e.notification)&&void 0!==n&&n.click_action))return;t.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(t.fcmOptions.link=a);const u=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}(e,t),e}function nq(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function bA(t){return In.create("missing-app-config-values",{valueName:t})}nq("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),nq("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Tge{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function wge(t){if(!t||!t.options)throw bA("App Configuration Object");if(!t.name)throw bA("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw bA(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function SA(){return(SA=_(function*(t){try{t.swRegistration=yield navigator.serviceWorker.register(Ype,{scope:Xpe}),t.swRegistration.update().catch(()=>{})}catch(e){throw In.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function xA(){return(xA=_(function*(t,e){if(!e&&!t.swRegistration&&(yield function rq(t){return SA.apply(this,arguments)}(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw In.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function RA(){return(RA=_(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=W4)})).apply(this,arguments)}function PA(){return PA=_(function*(t,e){if(!navigator)throw In.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw In.create("permission-blocked");return yield function Cge(t,e){return RA.apply(this,arguments)}(t,e?.vapidKey),yield function Dge(t,e){return xA.apply(this,arguments)}(t,e?.serviceWorkerRegistration),function pge(t){return wA.apply(this,arguments)}(t)}),PA.apply(this,arguments)}function MA(){return(MA=_(function*(t,e,n){const r=function bge(t){switch(t){case sy.NOTIFICATION_CLICKED:return"notification_open";case sy.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[K4],message_name:n[Zpe],message_time:n[ege],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function NA(){return NA=_(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===sy.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(tq(n)):t.onMessageHandler.next(tq(n)));const r=n.data;(function Ege(t){return"object"==typeof t&&!!t&&K4 in t})(r)&&"1"===r["google.c.a.e"]&&(yield function Age(t,e,n){return MA.apply(this,arguments)}(t,n.messageType,r))}),NA.apply(this,arguments)}const sq="@firebase/messaging",xge=t=>{const e=new Tge(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function Sge(t,e){return NA.apply(this,arguments)}(e,n)),e},Rge=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>function iq(t,e){return PA.apply(this,arguments)}(e,r)}};function aq(){return kA.apply(this,arguments)}function kA(){return(kA=_(function*(){try{yield jc()}catch{return!1}return typeof window<"u"&&vo()&&qD()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pge(){Br(new jt("messaging",xge,"PUBLIC")),Br(new jt("messaging-internal",Rge,"PRIVATE")),wr(sq,"0.12.4"),wr(sq,"0.12.4","esm2017")}();const oy="analytics",kge="firebase_id",Oge="origin",Fge=6e4,Vge="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",VA="https://www.googletagmanager.com/gtag/js",tn=new Io("@firebase/analytics"),sr=new vi("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Uge(t){if(!t.startsWith(VA)){const e=sr.create("invalid-gtag-resource",{gtagURL:t});return tn.warn(e.message),""}return t}function uq(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function LA(){return(LA=_(function*(t,e,n,r,i,s){const o=r[i];try{if(o)yield e[o];else{const u=(yield uq(n)).find(c=>c.measurementId===i);u&&(yield e[u.appId])}}catch(a){tn.error(a)}t("config",i,s)})).apply(this,arguments)}function UA(){return(UA=_(function*(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield uq(n);for(const u of o){const c=a.find(d=>d.measurementId===u),l=c&&e[c.appId];if(!l){s=[];break}s.push(l)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){tn.error(s)}})).apply(this,arguments)}const Kge=30,cq=new class Yge{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Xge(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function BA(){return(BA=_(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:Xge(r)},s=Vge.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const u=yield o.json();null!==(e=u.error)&&void 0!==e&&e.message&&(a=u.error.message)}catch{}throw sr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function jA(){return(jA=_(function*(t,e=cq,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw sr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw sr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new nme;return setTimeout(_(function*(){a.abort()}),void 0!==n?n:Fge),lq({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function lq(t,e,n){return $A.apply(this,arguments)}function $A(){return $A=_(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=cq){var s;const{appId:o,measurementId:a}=t;try{yield function eme(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(sr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(u){if(a)return tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:o,measurementId:a};throw u}try{const u=yield function Jge(t){return BA.apply(this,arguments)}(t);return i.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!function tme(t){if(!(t instanceof Er&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(i.deleteThrottleMetadata(o),a)return tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw u}const l=503===Number(null===(s=c?.customData)||void 0===s?void 0:s.httpStatus)?KD(n,i.intervalMillis,Kge):KD(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(o,d),tn.debug(`Calling attemptFetch again in ${l} millis`),lq(t,d,r,i)}}),$A.apply(this,arguments)}class nme{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let GA,YA;function qA(){return(qA=_(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const s=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function XA(){return(XA=_(function*(){if(!vo())return tn.warn(sr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield jc()}catch(t){return tn.warn(sr.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}return!0})).apply(this,arguments)}function JA(){return JA=_(function*(t,e,n,r,i,s,o){var a;const u=function Zge(t){return jA.apply(this,arguments)}(t);u.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&tn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>tn.error(f)),e.push(u);const c=function cme(){return XA.apply(this,arguments)}().then(f=>{if(f)return r.getId()}),[l,d]=yield Promise.all([u,c]);(function Wge(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(VA)&&n.src.includes(t))return n;return null})(s)||function jge(t,e){const n=function Bge(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}("firebase-js-sdk-policy",{createScriptURL:Uge}),r=document.createElement("script"),i=`${VA}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,l.measurementId),YA&&(i("consent","default",YA),function dq(t){YA=t}(void 0)),i("js",new Date);const h=null!==(a=o?.config)&&void 0!==a?a:{};return h[Oge]="firebase",h.update=!0,null!=d&&(h[kge]=d),i("config",l.measurementId,h),GA&&(i("set",GA),function hq(t){GA=t}(void 0)),l.measurementId}),JA.apply(this,arguments)}class dme{constructor(e){this.app=e}_delete(){return delete Gi[this.app.options.appId],Promise.resolve()}}let Gi={},fq=[];const pq={};let mq,qi,ay="dataLayer",ZA=!1;function fme(t,e,n){!function hme(){const t=[];if(GD()&&t.push("This is a browser extension environment."),qD()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=sr.create("invalid-analytics-context",{errorInfo:e});tn.warn(n.message)}}();const r=t.options.appId;if(!r)throw sr.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw sr.create("no-api-key");tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Gi[r])throw sr.create("already-exists",{id:r});if(!ZA){!function $ge(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(ay);const{wrappedGtag:s,gtagCore:o}=function Hge(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function zge(t,e,n,r){function s(){return s=_(function*(o,...a){try{if("event"===o){const[u,c]=a;yield function qge(t,e,n,r,i){return UA.apply(this,arguments)}(t,e,n,u,c)}else if("config"===o){const[u,c]=a;yield function Gge(t,e,n,r,i,s){return LA.apply(this,arguments)}(t,e,n,r,u,c)}else if("consent"===o){const[u]=a;t("consent","update",u)}else if("get"===o){const[u,c,l]=a;t("get",u,c,l)}else if("set"===o){const[u]=a;t("set",u)}else t(o,...a)}catch(u){tn.error(u)}}),s.apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}(Gi,fq,pq,ay,"gtag");qi=s,mq=o,ZA=!0}return Gi[r]=function lme(t,e,n,r,i,s,o){return JA.apply(this,arguments)}(t,fq,pq,e,mq,ay,n),new dme(t)}function gme(){return eb.apply(this,arguments)}function eb(){return(eb=_(function*(){if(GD()||!qD()||!vo())return!1;try{return yield jc()}catch{return!1}})).apply(this,arguments)}const _q="@firebase/analytics";!function _me(){Br(new jt(oy,(e,{options:n})=>fme(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),Br(new jt("analytics-internal",function t(e){try{const n=e.getProvider(oy).getImmediate();return{logEvent:(r,i,s)=>function mme(t,e,n,r){t=Ur(t),function rme(t,e,n,r,i){return qA.apply(this,arguments)}(qi,Gi[t.app.options.appId],e,n,r).catch(i=>tn.error(i))}(n,r,i,s)}}catch(n){throw sr.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),wr(_q,"0.10.0"),wr(_q,"0.10.0","esm2017")}();class yme extends lr{constructor(e,n){super()}schedule(e,n=0){return this}}const uy={setInterval(t,e,...n){const{delegate:r}=uy;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=uy;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class vq extends yme{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return uy.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&uy.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Lu(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const Iq={now:()=>(Iq.delegate||Date).now(),delegate:void 0};class Xh{constructor(e,n=Xh.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Xh.now=Iq.now;class Eq extends Xh{constructor(e,n=Xh.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const Eme=new class Ime extends Eq{}(class vme extends vq{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),wme=new Eq(vq);function En(t,e,n){const r=Ge(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ht((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Ut(s,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),s.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Zs}const nb=new gc("7.6.1"),rb="__angularfire_symbol__analyticsIsSupportedValue",ib="__angularfire_symbol__analyticsIsSupported",sb="__angularfire_symbol__remoteConfigIsSupportedValue",ob="__angularfire_symbol__remoteConfigIsSupported",ab="__angularfire_symbol__messagingIsSupportedValue",ub="__angularfire_symbol__messagingIsSupported";globalThis[ib]||(globalThis[ib]=gme().then(t=>globalThis[rb]=t).catch(()=>globalThis[rb]=!1)),globalThis[ub]||(globalThis[ub]=aq().then(t=>globalThis[ab]=t).catch(()=>globalThis[ab]=!1)),globalThis[ob]||(globalThis[ob]=Upe().then(t=>globalThis[sb]=t).catch(()=>globalThis[sb]=!1));const db=(t,e)=>{const n=e?[e]:n4(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function zc(){}class wq{constructor(e,n=Eme){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class Tme{constructor(e){this.zone=e,this.task=null}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zc,{},zc,zc)),n.pipe(En({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Tq=(()=>{class t{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new wq(Zone.current)),this.insideAngular=n.run(()=>new wq(Zone.current,wme)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(n){return new(n||t)(Z(Fe))},t.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Va(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function La(t){return Va().ngZone.run(()=>t())}function Cme(t){return Va(),function Ame(t){return function(n){return(n=n.lift(new Tme(t.ngZone))).pipe(Hg(t.outsideAngular),zg(t.insideAngular))}}(Va())(t)}const bme=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),La(()=>t.apply(void 0,r))},Ua=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||(n=La(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zc,{},zc,zc)))),r[s]=bme(r[s],n));const i=function Dme(t){return Va().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof dt){const s=Va();return i.pipe(Hg(s.outsideAngular),zg(s.insideAngular))}return La(()=>i)}return i instanceof dt?i.pipe(Cme):i instanceof Promise?La(()=>new Promise((s,o)=>i.then(a=>La(()=>s(a)),a=>La(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:La(()=>i)};class Hc{constructor(e){return e}}class Dq{constructor(){return n4()}}const hb=new W("angularfire2._apps"),xme={provide:Hc,useFactory:function Sme(t){return t&&1===t.length?t[0]:new Hc(t4())},deps:[[new mr,hb]]},Rme={provide:Dq,deps:[[new mr,hb]]};function Pme(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Hc(r)}}let Mme=(()=>{class t{constructor(n){si("angularfire",nb.full,"core"),si("angularfire",nb.full,"app"),si("angular",C2.full,n.toString())}}return t.\u0275fac=function(n){return new(n||t)(Z(co))},t.\u0275mod=Mr({type:t}),t.\u0275inj=dr({providers:[xme,Rme]}),t})();function Nme(t,...e){return{ngModule:Mme,providers:[{provide:hb,useFactory:Pme(t),multi:!0,deps:[Fe,Jn,Tq,...e]}]}}const kme=Ua(e4,!0);const Ome=function Cq(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Aq=new vi("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),cy=new Io("@firebase/auth");function ly(t,...e){cy.logLevel<=_e.ERROR&&cy.error(`Auth (${Z_}): ${t}`,...e)}function Dr(t,...e){throw fb(t,...e)}function zi(t,...e){return fb(t,...e)}function fb(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Aq.create(t,...e)}function k(t,e,...n){if(!t)throw fb(e,...n)}function Hi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ly(e),new Error(e)}function To(t,e){t||Hi(e)}function Sq(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class Zh{constructor(e,n){this.shortDelay=e,this.longDelay=n,To(n>e,"Short delay should be less than long delay!"),this.isMobile=function dde(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lr())}()||function fde(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return function Vme(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function pb(){return"http:"===Sq()||"https:"===Sq()}()||GD()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class xq{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ume={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Bme=new Zh(3e4,6e4);function It(t,e,n,r){return mb.apply(this,arguments)}function mb(){return(mb=_(function*(t,e,n,r,i={}){return Rq(t,i,_(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=qG(Object.assign({key:t.config.apiKey},o)).slice(1),u=yield t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),xq.fetch()(Pq(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function Rq(t,e,n){return _b.apply(this,arguments)}function _b(){return(_b=_(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ume),e);try{const i=new jme(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw ef(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw ef(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===u)throw ef(t,"email-already-in-use",o);if("USER_DISABLED"===u)throw ef(t,"user-disabled",o);const l=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw function bq(t,e,n){const r=Object.assign(Object.assign({},Ome()),{[e]:n});return new vi("auth","Firebase",r).create(e,{appName:t.name})}(t,l,c);Dr(t,l)}}catch(i){if(i instanceof Er)throw i;Dr(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function Pq(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?function gb(t,e){To(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}(t.config,i):`${t.config.apiScheme}://${i}`}class jme{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zi(this.auth,"network-request-failed")),Bme.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ef(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=zi(t,e,r);return i.customData._tokenResponse=n,i}function vb(){return(vb=_(function*(t,e){return It(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function Eb(){return(Eb=_(function*(t,e){return It(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function tf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function wb(){return(wb=_(function*(t,e=!1){const n=Ur(t),r=yield n.getIdToken(e),i=dy(r);k(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:tf(Tb(i.auth_time)),issuedAtTime:tf(Tb(i.iat)),expirationTime:tf(Tb(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function Tb(t){return 1e3*Number(t)}function dy(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return ly("JWT malformed, contained fewer than 3 sections"),null;try{const i=W_(n);return i?JSON.parse(i):(ly("Failed to decode base64 JWT payload"),null)}catch(i){return ly("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Ms(t,e){return Db.apply(this,arguments)}function Db(){return(Db=_(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof Er&&function Wme({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class Kme{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(_(function*(){yield n.iteration()}),r)}iteration(){var e=this;return _(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class Mq{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tf(this.lastLoginAt),this.creationTime=tf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function nf(t){return Cb.apply(this,arguments)}function Cb(){return Cb=_(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield Ms(t,function qme(t,e){return Eb.apply(this,arguments)}(n,{idToken:r}));k(i?.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function Xme(t){return t.map(e=>{var{providerId:n}=e,r=JE(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],a=function Yme(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,o),l=!!t.isAnonymous&&!(t.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Mq(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)}),Cb.apply(this,arguments)}function Ab(){return(Ab=_(function*(t){const e=Ur(t);yield nf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function bb(){return(bb=_(function*(t,e){const n=yield Rq(t,{},_(function*(){const r=qG({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Pq(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",xq.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class rf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){k(e.idToken,"internal-error"),k(typeof e.idToken<"u","internal-error"),k(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function Hme(t){const e=dy(t);return k(e,"internal-error"),k(typeof e.exp<"u","internal-error"),k(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return _(function*(){return k(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return _(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function Jme(t,e){return bb.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new rf;return r&&(k("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(k("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(k("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rf,this.toJSON())}_performRefresh(){return Hi("not implemented")}}function Do(t,e){k("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class Ba{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=JE(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kme(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Mq(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return _(function*(){const r=yield Ms(n,n.stsTokenManager.getToken(n.auth,e));return k(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function zme(t){return wb.apply(this,arguments)}(this,e)}reload(){return function Qme(t){return Ab.apply(this,arguments)}(this)}_assign(e){this!==e&&(k(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ba(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){k(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return _(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield nf(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return _(function*(){const n=yield e.getIdToken();return yield Ms(e,function $me(t,e){return vb.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,l;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,f=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,g=null!==(a=n.tenantId)&&void 0!==a?a:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,v=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,{uid:w,emailVerified:A,isAnonymous:N,providerData:j,stsTokenManager:ae}=n;k(w&&ae,e,"internal-error");const ze=rf.fromJSON(this.name,ae);k("string"==typeof w,e,"internal-error"),Do(d,e.name),Do(h,e.name),k("boolean"==typeof A,e,"internal-error"),k("boolean"==typeof N,e,"internal-error"),Do(f,e.name),Do(p,e.name),Do(g,e.name),Do(m,e.name),Do(v,e.name),Do(y,e.name);const li=new Ba({uid:w,auth:e,email:h,emailVerified:A,displayName:d,isAnonymous:N,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:ze,createdAt:v,lastLoginAt:y});return j&&Array.isArray(j)&&(li.providerData=j.map(Vd=>Object.assign({},Vd))),m&&(li._redirectEventId=m),li}static _fromIdTokenResponse(e,n,r=!1){return _(function*(){const i=new rf;i.updateFromServerResponse(n);const s=new Ba({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield nf(s),s})()}}const Nq=new Map;function Ns(t){To(t instanceof Function,"Expected a class definition");let e=Nq.get(t);return e?(To(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Nq.set(t,e),e)}const kq=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(function*(){return!0})()}_set(n,r){var i=this;return _(function*(){i.storage[n]=r})()}_get(n){var r=this;return _(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return _(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function hy(t,e,n){return`firebase:${t}:${e}:${n}`}class Kc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=hy(this.userKey,i.apiKey,s),this.fullPersistenceKey=hy("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return _(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?Ba._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return _(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(function*(){if(!n.length)return new Kc(Ns(kq),e,r);const i=(yield Promise.all(n.map(function(){var c=_(function*(l){if(yield l._isAvailable())return l});return function(l){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||Ns(kq);const o=hy(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const l=yield c._get(o);if(l){const d=Ba._fromJSON(e,l);c!==s&&(a=d),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(function(){var c=_(function*(l){if(l!==s)try{yield l._remove(o)}catch{}});return function(l){return c.apply(this,arguments)}}())),new Kc(s,e,r)):new Kc(s,e,r)})()}}function Oq(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function Lq(t=Lr()){return/iemobile/i.test(t)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function Fq(t=Lr()){return/firefox\//i.test(t)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function Bq(t=Lr()){return/blackberry/i.test(t)}(e))return"Blackberry";if(function jq(t=Lr()){return/webos/i.test(t)}(e))return"Webos";if(function Sb(t=Lr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function Vq(t=Lr()){return/crios\//i.test(t)}(e))&&!e.includes("edge/"))return"Chrome";if(function Uq(t=Lr()){return/android/i.test(t)}(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function $q(t,e=[]){let n;switch(t){case"Browser":n=Oq(Lr());break;case"Worker":n=`${Oq(Lr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Z_}/${r}`}function Gq(t,e){return Rb.apply(this,arguments)}function Rb(){return(Rb=_(function*(t,e){return It(t,"GET","/v2/recaptchaConfig",function ft(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}(t,e))})).apply(this,arguments)}function zq(t){return void 0!==t&&void 0!==t.enterprise}class Hq{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>"EMAIL_PASSWORD_PROVIDER"===n.provider&&"OFF"!==n.enforcementState)}}class Kq{constructor(e){this.type="recaptcha-enterprise",this.auth=nn(e)}verify(e="verify",n=!1){var r=this;return _(function*(){function s(){return s=_(function*(a){if(!n){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var u=_(function*(c,l){Gq(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(void 0!==d.recaptchaKey){const h=new Hq(d);return null==a.tenantId?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,c(h.siteKey)}l(new Error("recaptcha Enterprise site key undefined"))}).catch(d=>{l(d)})});return function(c,l){return u.apply(this,arguments)}}())}),s.apply(this,arguments)}function o(a,u,c){const l=window.grecaptcha;zq(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(d=>{u(d)}).catch(()=>{u("NO_RECAPTCHA")})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,u)=>{(function i(a){return s.apply(this,arguments)})(r.auth).then(c=>{if(!n&&zq(window.grecaptcha))o(c,a,u);else{if(typeof window>"u")return void u(new Error("RecaptchaVerifier is only supported in browser"));(function Pb(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=zi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",function n_e(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)})})("https://www.google.com/recaptcha/enterprise.js?render="+c).then(()=>{o(c,a,u)}).catch(l=>{u(l)})}}).catch(c=>{u(c)})})})()}}class o_e{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return _(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class a_e{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qq(this),this.idTokenSubscription=new Qq(this),this.beforeStateQueue=new o_e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Aq,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=Ns(n)),this._initializationPromise=this.queue(_(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield Kc.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return _(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return _(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,u=s?._redirectEventId,c=yield n.tryRedirectSignIn(e);(!a||a===u)&&c?.user&&(s=c.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(a){s=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return k(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return _(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return _(function*(){try{yield nf(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Lme(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return _(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return _(function*(){const r=e?Ur(e):null;return r&&k(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return _(function*(){if(!r._deleted)return e&&k(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(_(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return _(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(_(function*(){yield n.assertedPersistence.setPersistence(Ns(e))}))}initializeRecaptchaConfig(){var e=this;return _(function*(){const n=yield Gq(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Hq(n);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new Kq(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return _(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return _(function*(){if(!n.redirectPersistenceManager){const r=e&&Ns(e)||n._popupRedirectResolver;k(r,n,"argument-error"),n.redirectPersistenceManager=yield Kc.create(n,[Ns(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return _(function*(){var r,i;return n._isInitialized&&(yield n.queue(_(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return _(function*(){if(e===n.currentUser)return n.queue(_(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return k(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof n?e.addObserver(n,r,i):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return _(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return k(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$q(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return _(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return _(function*(){var n;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function Fme(t,...e){cy.logLevel<=_e.WARN&&cy.warn(`Auth (${Z_}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function nn(t){return Ur(t)}class Qq{constructor(e){this.auth=e,this.observer=null,this.addObserver=function _de(t,e){const n=new yde(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return k(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}(function Wq(t){return`__${t}${Math.floor(1e6*Math.random())}`})("rcb"),new Zh(3e4,6e4),new Zh(2e3,1e4),new Zh(3e4,6e4),new Zh(5e3,15e3),encodeURIComponent("fac");var Dz="@firebase/auth";class Zye{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return _(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){k(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}K_(),function tve(t){$c(new jt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;k(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$q(t)},c=new a_e(r,i,s,u);return function c_e(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ns);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),$c(new jt("auth-internal",e=>{const n=nn(e.getProvider("auth").getImmediate());return new Zye(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),si(Dz,"0.23.2",function eve(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),si(Dz,"0.23.2","esm2017")}("Browser");class Sz{constructor(){return db("auth")}}const vx=new Map,xz={activated:!1,tokenObservers:[]},uve={initialized:!1,enabled:!1};function Et(t){return vx.get(t)||Object.assign({},xz)}function Cy(){return uve}const Ix="https://content-firebaseappcheck.googleapis.com/v1",hve="exchangeDebugToken",Rz={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class pve{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return _(function*(){n.stop();try{n.pending=new Q_,yield function gve(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new Q_,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const wn=new vi("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ex(t){if(!Et(t).activated)throw wn.create("use-before-activation",{appName:t.name})}function Sy(t,e){return Tx.apply(this,arguments)}function Tx(){return Tx=_(function*({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(t,s)}catch(d){throw wn.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==o.status)throw wn.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw wn.create("fetch-parse-error",{originalErrorMessage:d?.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw wn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(u[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+c,issuedAtTimeMillis:l}}),Tx.apply(this,arguments)}function Pz(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${Ix}/projects/${n}/apps/${r}:${hve}?key=${i}`,body:{debug_token:e}}}const vve="firebase-app-check-database",Ive=1,lf="firebase-app-check-store";let xy=null;function Dx(){return Dx=_(function*(t,e){const r=(yield function Nz(){return xy||(xy=new Promise((t,e)=>{try{const n=indexedDB.open(vve,Ive);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(wn.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(lf,{keyPath:"compositeKey"})}}catch(n){e(wn.create("storage-open",{originalErrorMessage:n?.message}))}}),xy)}()).transaction(lf,"readwrite"),s=r.objectStore(lf).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var c;a(wn.create("storage-set",{originalErrorMessage:null===(c=u.target.error)||void 0===c?void 0:c.message}))}})}),Dx.apply(this,arguments)}const df=new Io("@firebase/app-check");function bx(t,e){return vo()?function wve(t,e){return function kz(t,e){return Dx.apply(this,arguments)}(function Fz(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{df.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function xx(){return Cy().enabled}function Rx(){return Px.apply(this,arguments)}function Px(){return Px=_(function*(){const t=Cy();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Px.apply(this,arguments)}const Sve={error:"UNKNOWN_ERROR"};function xve(t){return $D.encodeString(JSON.stringify(t),!1)}function Ry(t){return Mx.apply(this,arguments)}function Mx(){return Mx=_(function*(t,e=!1){const n=t.app;Ex(n);const r=Et(n);let s,i=r.token;if(i&&!Yc(i)&&(r.token=void 0,i=void 0),!i){const u=yield r.cachedTokenPromise;u&&(Yc(u)?i=u:yield bx(n,void 0))}if(!e&&i&&Yc(i))return{token:i.token};let a,o=!1;if(xx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Sy(Pz(n,yield Rx()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=yield r.exchangeTokenPromise;return yield bx(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Et(n).exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?df.warn(u.message):df.error(u),s=u}return i?s?a=Yc(i)?{token:i.token,internalError:s}:Bz(s):(a={token:i.token},r.token=i,yield bx(n,i)):a=Bz(s),o&&function Uz(t,e){const n=Et(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(n,a),a}),Mx.apply(this,arguments)}function Nx(){return Nx=_(function*(t){const e=t.app;Ex(e);const{provider:n}=Et(e);if(xx()){const r=yield Rx(),{token:i}=yield Sy(Pz(e,r),t.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield n.getToken();return{token:r}}}),Nx.apply(this,arguments)}function Ox(t,e){const n=Et(t),r=n.tokenObservers.filter(i=>i.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Lz(t){const{app:e}=t,n=Et(e);let r=n.tokenRefresher;r||(r=function Rve(t){const{app:e}=t;return new pve(_(function*(){let r;if(r=Et(e).token?yield Ry(t,!0):yield Ry(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const n=Et(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Rz.RETRIAL_MIN_WAIT,Rz.RETRIAL_MAX_WAIT)}(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Yc(t){return t.expireTimeMillis-Date.now()>0}function Bz(t){return{token:xve(Sve),error:t}}class Pve{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Et(this.app);for(const n of e)Ox(this.app,n.next);return Promise.resolve()}}const Kz="app-check-internal";!function zve(){Br(new jt("app-check",t=>function Mve(t,e){return new Pve(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(Kz).initialize()})),Br(new jt(Kz,t=>function Nve(t){return{getToken:e=>Ry(t,e),getLimitedUseToken:()=>function Vz(t){return Nx.apply(this,arguments)}(t),addTokenListener:e=>function kx(t,e,n,r){const{app:i}=t,s=Et(i);if(s.tokenObservers=[...s.tokenObservers,{next:n,error:r,type:e}],s.token&&Yc(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Lz(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Lz(t))}(t,"INTERNAL",e),removeTokenListener:e=>Ox(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),wr("@firebase/app-check","0.8.0")}();class Yz{constructor(){return db("app-check")}}typeof window<"u"&&window;var U,Yve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ii={},Bx=Bx||{},le=Yve||self;function My(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function hf(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var jx="closure_uid_"+(1e9*Math.random()>>>0),Jve=0;function Zve(t,e,n){return t.call.apply(t.bind,arguments)}function eIe(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Vn(t,e,n){return(Vn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zve:eIe).apply(null,arguments)}function Ny(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function rn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Ao(){this.s=this.s,this.o=this.o}Ao.prototype.s=!1,Ao.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Xve(t){Object.prototype.hasOwnProperty.call(t,jx)&&t[jx]||(t[jx]=++Jve)}(this)},Ao.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Xz=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function $x(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Jz(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(My(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Ln(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ln.prototype.h=function(){this.defaultPrevented=!0};var nIe=function(){if(!le.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{le.addEventListener("test",()=>{},e),le.removeEventListener("test",()=>{},e)}catch{}return t}();function ff(t){return/^[\s\xa0]*$/.test(t)}function ky(){var t=le.navigator;return t&&(t=t.userAgent)?t:""}function Wi(t){return-1!=ky().indexOf(t)}function Gx(t){return Gx[" "](t),t}Gx[" "]=function(){};var zx,iIe=Wi("Opera"),Xc=Wi("Trident")||Wi("MSIE"),Zz=Wi("Edge"),qx=Zz||Xc,e9=Wi("Gecko")&&!(-1!=ky().toLowerCase().indexOf("webkit")&&!Wi("Edge"))&&!(Wi("Trident")||Wi("MSIE"))&&!Wi("Edge"),sIe=-1!=ky().toLowerCase().indexOf("webkit")&&!Wi("Edge");function t9(){var t=le.document;return t?t.documentMode:void 0}e:{var Hx="",Wx=function(){var t=ky();return e9?/rv:([^\);]+)(\)|;)/.exec(t):Zz?/Edge\/([\d\.]+)/.exec(t):Xc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):sIe?/WebKit\/(\S+)/.exec(t):iIe?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Wx&&(Hx=Wx?Wx[1]:""),Xc){var Kx=t9();if(null!=Kx&&Kx>parseFloat(Hx)){zx=String(Kx);break e}}zx=Hx}var oIe=le.document&&Xc&&(t9()||parseInt(zx,10))||void 0;function pf(t,e){if(Ln.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(e9){e:{try{Gx(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:aIe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&pf.$.h.call(this)}}rn(pf,Ln);var aIe={2:"touch",3:"pen",4:"mouse"};pf.prototype.h=function(){pf.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var gf="closure_listenable_"+(1e6*Math.random()|0),uIe=0;function cIe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++uIe,this.fa=this.ia=!1}function Oy(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Yx(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function r9(t){const e={};for(const n in t)e[n]=t[n];return e}const i9="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function s9(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<i9.length;s++)n=i9[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Fy(t){this.src=t,this.g={},this.h=0}function Xx(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=Xz(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Oy(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Jx(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}Fy.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Jx(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new cIe(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var Zx="closure_lm_"+(1e6*Math.random()|0),eR={};function o9(t,e,n,r,i){if(r&&r.once)return u9(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)o9(t,e[s],n,r,i);return null}return n=iR(n),t&&t[gf]?t.O(e,n,hf(r)?!!r.capture:!!r,i):a9(t,e,n,!1,r,i)}function a9(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=hf(i)?!!i.capture:!!i,a=nR(t);if(a||(t[Zx]=a=new Fy(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function dIe(){const e=hIe;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)nIe||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(l9(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function u9(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)u9(t,e[s],n,r,i);return null}return n=iR(n),t&&t[gf]?t.P(e,n,hf(r)?!!r.capture:!!r,i):a9(t,e,n,!0,r,i)}function c9(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)c9(t,e[s],n,r,i);else r=hf(r)?!!r.capture:!!r,n=iR(n),t&&t[gf]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Jx(s=t.g[e],n,r,i))&&(Oy(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=nR(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Jx(e,n,r,i)),(n=-1<t?e[t]:null)&&tR(n))}function tR(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[gf])Xx(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(l9(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=nR(e))?(Xx(n,t),0==n.h&&(n.src=null,e[Zx]=null)):Oy(t)}}}function l9(t){return t in eR?eR[t]:eR[t]="on"+t}function hIe(t,e){if(t.fa)t=!0;else{e=new pf(e,this);var n=t.listener,r=t.la||t.src;t.ia&&tR(t),t=n.call(r,e)}return t}function nR(t){return(t=t[Zx])instanceof Fy?t:null}var rR="__closure_events_fn_"+(1e9*Math.random()>>>0);function iR(t){return"function"==typeof t?t:(t[rR]||(t[rR]=function(e){return t.handleEvent(e)}),t[rR])}function sn(){Ao.call(this),this.i=new Fy(this),this.S=this,this.J=null}function Tn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Ln(e,t);else if(e instanceof Ln)e.target=e.target||t;else{var i=e;s9(e=new Ln(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Vy(o,r,!0,e)&&i}if(i=Vy(o=e.g=t,r,!0,e)&&i,i=Vy(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Vy(o=e.g=n[s],r,!1,e)&&i}function Vy(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&Xx(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}rn(sn,Ao),sn.prototype[gf]=!0,sn.prototype.removeEventListener=function(t,e,n,r){c9(this,t,e,n,r)},sn.prototype.N=function(){if(sn.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Oy(n[r]);delete t.g[e],t.h--}}this.J=null},sn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},sn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var sR=le.JSON.stringify;function pIe(){var t=oR;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var d9=new class fIe{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new mIe,t=>t.reset());class mIe{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function _Ie(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function yIe(t){le.setTimeout(()=>{throw t},0)}let mf,_f=!1,oR=new class gIe{constructor(){this.h=this.g=null}add(e,n){const r=d9.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},h9=()=>{const t=le.Promise.resolve(void 0);mf=()=>{t.then(vIe)}};var vIe=()=>{for(var t;t=pIe();){try{t.h.call(t.g)}catch(n){yIe(n)}var e=d9;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}_f=!1};function Ly(t,e){sn.call(this),this.h=t||1,this.g=e||le,this.j=Vn(this.qb,this),this.l=Date.now()}function aR(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function uR(t,e,n){if("function"==typeof t)n&&(t=Vn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Vn(t.handleEvent,t)}return 2147483647<Number(e)?-1:le.setTimeout(t,e||0)}function f9(t){t.g=uR(()=>{t.g=null,t.i&&(t.i=!1,f9(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}rn(Ly,sn),(U=Ly.prototype).ga=!1,U.T=null,U.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Tn(this,"tick"),this.ga&&(aR(this),this.start()))}},U.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},U.N=function(){Ly.$.N.call(this),aR(this),delete this.g};class IIe extends Ao{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:f9(this)}N(){super.N(),this.g&&(le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yf(t){Ao.call(this),this.h=t,this.g={}}rn(yf,Ao);var p9=[];function g9(t,e,n,r){Array.isArray(n)||(n&&(p9[0]=n.toString()),n=p9);for(var i=0;i<n.length;i++){var s=o9(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function m9(t){Yx(t.g,function(e,n){this.g.hasOwnProperty(n)&&tR(e)},t),t.g={}}function Uy(){this.g=!0}function Jc(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function DIe(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return sR(n)}catch{return e}}(t,n)+(r?" "+r:"")})}yf.prototype.N=function(){yf.$.N.call(this),m9(this)},yf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Uy.prototype.Ea=function(){this.g=!1},Uy.prototype.info=function(){};var qa={},_9=null;function By(){return _9=_9||new sn}function y9(t){Ln.call(this,qa.Ta,t)}function vf(t){const e=By();Tn(e,new y9(e))}function v9(t,e){Ln.call(this,qa.STAT_EVENT,t),this.stat=e}function or(t){const e=By();Tn(e,new v9(e,t))}function I9(t,e){Ln.call(this,qa.Ua,t),this.size=e}function If(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return le.setTimeout(function(){t()},e)}qa.Ta="serverreachability",rn(y9,Ln),qa.STAT_EVENT="statevent",rn(v9,Ln),qa.Ua="timingevent",rn(I9,Ln);var jy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},E9={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function cR(){}function T9(){}cR.prototype.h=null;var hR,Ef={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function lR(){Ln.call(this,"d")}function dR(){Ln.call(this,"c")}function $y(){}function wf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new yf(this),this.P=CIe,this.V=new Ly(t=qx?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new D9}function D9(){this.i=null,this.g="",this.h=!1}rn(lR,Ln),rn(dR,Ln),rn($y,cR),$y.prototype.g=function(){return new XMLHttpRequest},$y.prototype.i=function(){return{}},hR=new $y;var CIe=45e3,fR={},Gy={};function pR(t,e,n){t.L=1,t.v=Wy(Os(e)),t.s=n,t.S=!0,C9(t,null)}function C9(t,e){t.G=Date.now(),Tf(t),t.A=Os(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),O9(n.i,"t",r),t.C=0,n=t.l.J,t.h=new D9,t.g=sH(t.l,n?e:null,!t.s),0<t.O&&(t.M=new IIe(Vn(t.Pa,t,t.g),t.O)),g9(t.U,t.g,"readystatechange",t.nb),e=t.I?r9(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),vf(),function EIe(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.W,t.s)}function A9(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function b9(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=AIe(t,n),i==Gy){4==e&&(t.o=4,or(14),r=!1),Jc(t.j,t.m,null,"[Incomplete Response]");break}if(i==fR){t.o=4,or(15),Jc(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Jc(t.j,t.m,i,null),gR(t,i)}A9(t)&&i!=Gy&&i!=fR&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,or(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),wR(e),e.M=!0,or(11))):(Jc(t.j,t.m,n,"[Invalid Chunked Response]"),za(t),Df(t))}function AIe(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Gy:(n=Number(e.substring(n,r)),isNaN(n)?fR:(r+=1)+n>e.length?Gy:(e=e.slice(r,r+n),t.C=r+n,e))}function Tf(t){t.Y=Date.now()+t.P,S9(t,t.P)}function S9(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=If(Vn(t.lb,t),e)}function qy(t){t.B&&(le.clearTimeout(t.B),t.B=null)}function Df(t){0==t.l.H||t.J||tH(t.l,t)}function za(t){qy(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,aR(t.V),m9(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function gR(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||mR(n.i,t)))if(!t.K&&mR(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;Zy(n),Xy(n)}ER(n),or(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=If(Vn(n.ib,n),6e3));if(1>=L9(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Wa(n,11)}else if((t.K||n.g==t)&&Zy(n),!ff(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const l=c[3];null!=l&&(n.ra=l,n.l.info("VER="+n.ra));const d=c[4];null!=d&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(n.L=r=1.5*h,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(_R(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,tt(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=iH(r,r.J?r.pa:null,r.Y),o.K){U9(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.B&&(qy(a),Tf(a)),r.g=o}else Z9(r);0<n.j.length&&Jy(n)}else"stop"!=c[0]&&"close"!=c[0]||Wa(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Wa(n,7):IR(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}vf()}catch{}}function x9(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(My(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function SIe(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(My(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function bIe(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(My(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(U=wf.prototype).setTimeout=function(t){this.P=t},U.nb=function(t){t=t.target;const e=this.M;e&&3==Ki(t)?e.l():this.Pa(t)},U.Pa=function(t){try{if(t==this.g)e:{const l=Ki(this.g);var e=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||qx||this.g&&(this.h.h||this.g.ja()||W9(this.g)))){this.J||4!=l||7==e||vf(),qy(this);var n=this.g.da();this.ca=n;t:if(A9(this)){var r=W9(this.g);t="";var i=r.length,s=4==Ki(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){za(this),Df(this);var o="";break t}this.h.i=new le.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function wIe(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ff(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,or(12),za(this),Df(this);break e}Jc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gR(this,n)}this.S?(b9(this,l,o),qx&&this.i&&3==l&&(g9(this.U,this.V,"tick",this.mb),this.V.start())):(Jc(this.j,this.m,o,null),gR(this,o)),4==l&&za(this),this.i&&!this.J&&(4==l?tH(this.l,this):(this.i=!1,Tf(this)))}else(function HIe(t){const e={};t=(t.g&&2<=Ki(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(ff(t[r]))continue;var n=_Ie(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function lIe(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,or(12)):(this.o=0,or(13)),za(this),Df(this)}}}catch{}},U.mb=function(){if(this.g){var t=Ki(this.g),e=this.g.ja();this.C<e.length&&(qy(this),b9(this,t,e),this.i&&4!=t&&Tf(this))}},U.cancel=function(){this.J=!0,za(this)},U.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function TIe(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(vf(),or(17)),za(this),this.o=2,Df(this)):S9(this,this.Y-t)};var R9=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ha(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ha){this.h=t.h,zy(this,t.j),this.s=t.s,this.g=t.g,Hy(this,t.m),this.l=t.l;var e=t.i,n=new bf;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),P9(this,n),this.o=t.o}else t&&(e=String(t).match(R9))?(this.h=!1,zy(this,e[1]||"",!0),this.s=Cf(e[2]||""),this.g=Cf(e[3]||"",!0),Hy(this,e[4]),this.l=Cf(e[5]||"",!0),P9(this,e[6]||"",!0),this.o=Cf(e[7]||"")):(this.h=!1,this.i=new bf(null,this.h))}function Os(t){return new Ha(t)}function zy(t,e,n){t.j=n?Cf(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Hy(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function P9(t,e,n){e instanceof bf?(t.i=e,function OIe(t,e){e&&!t.j&&(bo(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(N9(this,r),O9(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Af(e,NIe)),t.i=new bf(e,t.h))}function tt(t,e,n){t.i.set(e,n)}function Wy(t){return tt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Cf(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Af(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,RIe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function RIe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ha.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Af(e,M9,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Af(e,M9,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Af(n,"/"==n.charAt(0)?MIe:PIe,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Af(n,kIe)),t.join("")};var M9=/[#\/\?@]/g,PIe=/[#\?:]/g,MIe=/[#\?]/g,NIe=/[#\?@]/g,kIe=/#/g;function bf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function bo(t){t.g||(t.g=new Map,t.h=0,t.i&&function xIe(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function N9(t,e){bo(t),e=Zc(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function k9(t,e){return bo(t),e=Zc(t,e),t.g.has(e)}function O9(t,e,n){N9(t,e),0<n.length&&(t.i=null,t.g.set(Zc(t,e),$x(n)),t.h+=n.length)}function Zc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function F9(t){this.l=t||VIe,t=le.PerformanceNavigationTiming?0<(t=le.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(le.g&&le.g.Ka&&le.g.Ka()&&le.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(U=bf.prototype).add=function(t,e){bo(this),this.i=null,t=Zc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},U.forEach=function(t,e){bo(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},U.ta=function(){bo(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},U.Z=function(t){bo(this);let e=[];if("string"==typeof t)k9(this,t)&&(e=e.concat(this.g.get(Zc(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},U.set=function(t,e){return bo(this),this.i=null,k9(this,t=Zc(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},U.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},U.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var VIe=10;function V9(t){return!!t.h||!!t.g&&t.g.size>=t.j}function L9(t){return t.h?1:t.g?t.g.size:0}function mR(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function _R(t,e){t.g?t.g.add(e):t.h=e}function U9(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function B9(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return $x(t.i)}F9.prototype.cancel=function(){if(this.i=B9(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var LIe=class{stringify(t){return le.JSON.stringify(t,void 0)}parse(t){return le.JSON.parse(t,void 0)}};function UIe(){this.g=new LIe}function BIe(t,e,n){const r=n||"";try{x9(t,function(i,s){let o=i;hf(i)&&(o=sR(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ky(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Sf(t){this.l=t.ec||null,this.j=t.ob||!1}function Qy(t,e){sn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=yR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rn(Sf,cR),Sf.prototype.g=function(){return new Qy(this.l,this.j)},Sf.prototype.i=function(t){return function(){return t}}({}),rn(Qy,sn);var yR=0;function j9(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function xf(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Rf(t)}function Rf(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(U=Qy.prototype).open=function(t,e){if(this.readyState!=yR)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Rf(this)},U.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||le).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},U.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xf(this)),this.readyState=yR},U.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Rf(this)),this.g&&(this.readyState=3,Rf(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof le.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;j9(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},U.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?xf(this):Rf(this),3==this.readyState&&j9(this)}},U.Za=function(t){this.g&&(this.response=this.responseText=t,xf(this))},U.Ya=function(t){this.g&&(this.response=t,xf(this))},U.ka=function(){this.g&&xf(this)},U.setRequestHeader=function(t,e){this.v.append(t,e)},U.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},U.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Qy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var $Ie=le.JSON.parse;function wt(t){sn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=$9,this.L=this.M=!1}rn(wt,sn);var $9="",GIe=/^https?$/i,qIe=["POST","PUT"];function G9(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,q9(t),Yy(t)}function q9(t){t.F||(t.F=!0,Tn(t,"complete"),Tn(t,"error"))}function z9(t){if(t.h&&typeof Bx<"u"&&(!t.C[1]||4!=Ki(t)||2!=t.da()))if(t.v&&4==Ki(t))uR(t.La,0,t);else if(Tn(t,"readystatechange"),4==Ki(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(R9)[1]||null;!i&&le.self&&le.self.location&&(i=le.self.location.protocol.slice(0,-1)),r=!GIe.test(i?i.toLowerCase():"")}n=r}if(n)Tn(t,"complete"),Tn(t,"success");else{t.m=6;try{var s=2<Ki(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",q9(t)}}finally{Yy(t)}}}function Yy(t,e){if(t.g){H9(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Tn(t,"ready");try{n.onreadystatechange=r}catch{}}}function H9(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(le.clearTimeout(t.A),t.A=null)}function Ki(t){return t.g?t.g.readyState:0}function W9(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case $9:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function K9(t){let e="";return Yx(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function vR(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=K9(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):tt(t,e,n))}function Pf(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Q9(t){this.Ga=0,this.j=[],this.l=new Uy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Pf("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Pf("baseRetryDelayMs",5e3,t),this.hb=Pf("retryDelaySeedMs",1e4,t),this.eb=Pf("forwardChannelMaxRetries",2,t),this.xa=Pf("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new F9(t&&t.concurrentRequestLimit),this.Ja=new UIe,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function IR(t){if(Y9(t),3==t.H){var e=t.W++,n=Os(t.I);if(tt(n,"SID",t.K),tt(n,"RID",e),tt(n,"TYPE","terminate"),Mf(t,n),(e=new wf(t,t.l,e)).L=2,e.v=Wy(Os(n)),n=!1,le.navigator&&le.navigator.sendBeacon)try{n=le.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&le.Image&&((new Image).src=e.v,n=!0),n||(e.g=sH(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Tf(e)}rH(t)}function Xy(t){t.g&&(wR(t),t.g.cancel(),t.g=null)}function Y9(t){Xy(t),t.u&&(le.clearTimeout(t.u),t.u=null),Zy(t),t.i.cancel(),t.m&&("number"==typeof t.m&&le.clearTimeout(t.m),t.m=null)}function Jy(t){if(!V9(t.i)&&!t.m){t.m=!0;var e=t.Na;mf||h9(),_f||(mf(),_f=!0),oR.add(e,t),t.C=0}}function X9(t,e){var n;n=e?e.m:t.W++;const r=Os(t.I);tt(r,"SID",t.K),tt(r,"RID",n),tt(r,"AID",t.V),Mf(t,r),t.o&&t.s&&vR(r,t.o,t.s),n=new wf(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=J9(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),_R(t.i,n),pR(n,r,e)}function Mf(t,e){t.na&&Yx(t.na,function(n,r){tt(e,r,n)}),t.h&&x9({},function(n,r){tt(e,r,n)})}function J9(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Vn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].g;const l=i[u].map;if(c-=s,0>c)s=Math.max(0,i[u].g-100),a=!1;else try{BIe(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Z9(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;mf||h9(),_f||(mf(),_f=!0),oR.add(e,t),t.A=0}}function ER(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=If(Vn(t.Ma,t),nH(t,t.A)),t.A++,0))}function wR(t){null!=t.B&&(le.clearTimeout(t.B),t.B=null)}function eH(t){t.g=new wf(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Os(t.wa);tt(e,"RID","rpc"),tt(e,"SID",t.K),tt(e,"AID",t.V),tt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&tt(e,"TO",t.qa),tt(e,"TYPE","xmlhttp"),Mf(t,e),t.o&&t.s&&vR(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Wy(Os(e)),n.s=null,n.S=!0,C9(n,t)}function Zy(t){null!=t.v&&(le.clearTimeout(t.v),t.v=null)}function tH(t,e){var n=null;if(t.g==e){Zy(t),wR(t),t.g=null;var r=2}else{if(!mR(t.i,e))return;n=e.F,U9(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;Tn(r=By(),new I9(r,n)),Jy(t)}else Z9(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function WIe(t,e){return!(L9(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=If(Vn(t.Na,t,e),nH(t,t.C)),t.C++,0)))}(t,e)||2==r&&ER(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Wa(t,5);break;case 4:Wa(t,10);break;case 3:Wa(t,6);break;default:Wa(t,2)}}function nH(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Wa(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=Vn(t.pb,t);n||(n=new Ha("//www.google.com/images/cleardot.gif"),le.location&&"http"==le.location.protocol||zy(n,"https"),Wy(n)),function jIe(t,e){const n=new Uy;if(le.Image){const r=new Image;r.onload=Ny(Ky,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ny(Ky,n,r,"TestLoadImage: error",!1,e),r.onabort=Ny(Ky,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ny(Ky,n,r,"TestLoadImage: timeout",!1,e),le.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else or(2);t.H=0,t.h&&t.h.za(e),rH(t),Y9(t)}function rH(t){if(t.H=0,t.ma=[],t.h){const e=B9(t.i);(0!=e.length||0!=t.j.length)&&(Jz(t.ma,e),Jz(t.ma,t.j),t.i.i.length=0,$x(t.j),t.j.length=0),t.h.ya()}}function iH(t,e,n){var r=n instanceof Ha?Os(n):new Ha(n);if(""!=r.g)e&&(r.g=e+"."+r.g),Hy(r,r.m);else{var i=le.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ha(null);r&&zy(s,r),e&&(s.g=e),i&&Hy(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&tt(r,n,e),tt(r,"VER",t.ra),Mf(t,r),r}function sH(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wt(n&&t.Ha&&!t.va?new Sf({ob:!0}):t.va)).Oa(t.J),e}function oH(){}function ev(){if(Xc&&!(10<=Number(oIe)))throw Error("Environmental error: no available transport.")}function jr(t,e){sn.call(this),this.g=new Q9(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ff(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ff(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new el(this)}function aH(t){lR.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function uH(){dR.call(this),this.status=1}function el(t){this.g=t}function Ei(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function TR(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function Le(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(U=wt.prototype).Oa=function(t){this.M=t},U.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():hR.g(),this.C=function w9(t){return t.h||(t.h=t.i())}(this.u?this.u:hR),this.g.onreadystatechange=Vn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void G9(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=le.FormData&&t instanceof le.FormData,!(0<=Xz(qIe,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{H9(this),0<this.B&&((this.L=function zIe(t){return Xc&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vn(this.ua,this)):this.A=uR(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){G9(this,s)}},U.ua=function(){typeof Bx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tn(this,"timeout"),this.abort(8))},U.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Tn(this,"complete"),Tn(this,"abort"),Yy(this))},U.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yy(this,!0)),wt.$.N.call(this)},U.La=function(){this.s||(this.G||this.v||this.l?z9(this):this.kb())},U.kb=function(){z9(this)},U.isActive=function(){return!!this.g},U.da=function(){try{return 2<Ki(this)?this.g.status:-1}catch{return-1}},U.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},U.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),$Ie(e)}},U.Ia=function(){return this.m},U.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(U=Q9.prototype).ra=8,U.H=1,U.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new wf(this,this.l,t);let s=this.s;if(this.U&&(s?(s=r9(s),s9(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=J9(this,i,e),tt(n=Os(this.I),"RID",t),tt(n,"CVER",22),this.F&&tt(n,"X-HTTP-Session-Id",this.F),Mf(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(K9(s)))+"&"+e:this.o&&vR(n,this.o,s)),_R(this.i,i),this.bb&&tt(n,"TYPE","init"),this.P?(tt(n,"$req",e),tt(n,"SID","null"),i.aa=!0,pR(i,n,null)):pR(i,n,e),this.H=2}}else 3==this.H&&(t?X9(this,t):0==this.j.length||V9(this.i)||X9(this))},U.Ma=function(){if(this.u=null,eH(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=If(Vn(this.jb,this),t)}},U.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,or(10),Xy(this),eH(this))},U.ib=function(){null!=this.v&&(this.v=null,Xy(this),ER(this),or(19))},U.pb=function(t){t?(this.l.info("Successfully pinged google.com"),or(2)):(this.l.info("Failed to ping google.com"),or(1))},U.isActive=function(){return!!this.h&&this.h.isActive(this)},(U=oH.prototype).Ba=function(){},U.Aa=function(){},U.za=function(){},U.ya=function(){},U.isActive=function(){return!0},U.Va=function(){},ev.prototype.g=function(t,e){return new jr(t,e)},rn(jr,sn),jr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;or(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=iH(t,null,t.Y),Jy(t)},jr.prototype.close=function(){IR(this.g)},jr.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=sR(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&Jy(e)},jr.prototype.N=function(){this.g.h=null,delete this.j,IR(this.g),delete this.g,jr.$.N.call(this)},rn(aH,lR),rn(uH,dR),rn(el,oH),el.prototype.Ba=function(){Tn(this.g,"a")},el.prototype.Aa=function(t){Tn(this.g,new aH(t))},el.prototype.za=function(t){Tn(this.g,new uH)},el.prototype.ya=function(){Tn(this.g,"b")},rn(Ei,function KIe(){this.blockSize=-1}),Ei.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ei.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)TR(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){TR(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){TR(this,r),i=0;break}}this.h=i,this.i+=e},Ei.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var QIe={};function DR(t){return-128<=t&&128>t?function rIe(t,e){var n=QIe;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Le([0|e],0>e?-1:0)}):new Le([0|t],0>t?-1:0)}function Qi(t){if(isNaN(t)||!isFinite(t))return tl;if(0>t)return Dn(Qi(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=CR;return new Le(e,0)}var CR=4294967296,tl=DR(0),AR=DR(1),lH=DR(16777216);function Fs(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function ai(t){return-1==t.h}function Dn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Le(n,~t.h).add(AR)}function tv(t,e){return t.add(Dn(e))}function nv(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Nf(t,e){this.g=t,this.h=e}function rv(t,e){if(Fs(e))throw Error("division by zero");if(Fs(t))return new Nf(tl,tl);if(ai(t))return e=rv(Dn(t),e),new Nf(Dn(e.g),Dn(e.h));if(ai(e))return e=rv(t,Dn(e)),new Nf(Dn(e.g),e.h);if(30<t.g.length){if(ai(t)||ai(e))throw Error("slowDivide_ only works with positive integers.");for(var n=AR,r=e;0>=r.X(t);)n=dH(n),r=dH(r);var i=nl(n,1),s=nl(r,1);for(r=nl(r,2),n=nl(n,2);!Fs(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=nl(r,1),n=nl(n,1)}return e=tv(t,i.R(e)),new Nf(i,e)}for(i=tl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Qi(n)).R(e);ai(o)||0<o.X(t);)o=(s=Qi(n-=r)).R(e);Fs(s)&&(s=AR),i=i.add(s),t=tv(t,o)}return new Nf(i,t)}function dH(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Le(n,t.h)}function nl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Le(i,t.h)}(U=Le.prototype).ea=function(){if(ai(this))return-Dn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:CR+r)*e,e*=CR}return t},U.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(Fs(this))return"0";if(ai(this))return"-"+Dn(this).toString(t);for(var e=Qi(Math.pow(t,6)),n=this,r="";;){var i=rv(n,e).g,s=((0<(n=tv(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(Fs(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},U.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},U.X=function(t){return ai(t=tv(this,t))?-1:Fs(t)?0:1},U.abs=function(){return ai(this)?Dn(this):this},U.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new Le(n,-2147483648&n[n.length-1]?-1:0)},U.R=function(t){if(Fs(this)||Fs(t))return tl;if(ai(this))return ai(t)?Dn(this).R(Dn(t)):Dn(Dn(this).R(t));if(ai(t))return Dn(this.R(Dn(t)));if(0>this.X(lH)&&0>t.X(lH))return Qi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,nv(n,2*r+2*i),n[2*r+2*i+1]+=s*u,nv(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,nv(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,nv(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Le(n,0)},U.gb=function(t){return rv(this,t).h},U.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Le(n,this.h&t.h)},U.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Le(n,this.h|t.h)},U.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Le(n,this.h^t.h)},ev.prototype.createWebChannel=ev.prototype.g,jr.prototype.send=jr.prototype.u,jr.prototype.open=jr.prototype.m,jr.prototype.close=jr.prototype.close,jy.NO_ERROR=0,jy.TIMEOUT=8,jy.HTTP_ERROR=6,E9.COMPLETE="complete",T9.EventType=Ef,Ef.OPEN="a",Ef.CLOSE="b",Ef.ERROR="c",Ef.MESSAGE="d",sn.prototype.listen=sn.prototype.O,wt.prototype.listenOnce=wt.prototype.P,wt.prototype.getLastError=wt.prototype.Sa,wt.prototype.getLastErrorCode=wt.prototype.Ia,wt.prototype.getStatus=wt.prototype.da,wt.prototype.getResponseJson=wt.prototype.Wa,wt.prototype.getResponseText=wt.prototype.ja,wt.prototype.send=wt.prototype.ha,wt.prototype.setWithCredentials=wt.prototype.Oa,Ei.prototype.digest=Ei.prototype.l,Ei.prototype.reset=Ei.prototype.reset,Ei.prototype.update=Ei.prototype.j,Le.prototype.add=Le.prototype.add,Le.prototype.multiply=Le.prototype.R,Le.prototype.modulo=Le.prototype.gb,Le.prototype.compare=Le.prototype.X,Le.prototype.toNumber=Le.prototype.ea,Le.prototype.toString=Le.prototype.toString,Le.prototype.getBits=Le.prototype.D,Le.fromNumber=Qi,Le.fromString=function cH(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Dn(cH(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Qi(Math.pow(e,8)),r=tl,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Qi(Math.pow(e,s)),r=r.R(s).add(Qi(o))):r=(r=r.R(n)).add(Qi(o))}return r};var YIe=Ii.createWebChannelTransport=function(){return new ev},XIe=Ii.getStatEventTarget=function(){return By()},bR=Ii.ErrorCode=jy,JIe=Ii.EventType=E9,ZIe=Ii.Event=qa,hH=Ii.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},iv=(Ii.FetchXmlHttpFactory=Sf,Ii.WebChannel=T9),eEe=Ii.XhrIo=wt,tEe=Ii.Md5=Ei,rl=Ii.Integer=Le;const fH="@firebase/firestore";class on{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let il="10.4.0";const So=new Io("@firebase/firestore");function sl(){return So.logLevel}function x(t,...e){if(So.logLevel<=_e.DEBUG){const n=e.map(SR);So.debug(`Firestore (${il}): ${t}`,...n)}}function Pt(t,...e){if(So.logLevel<=_e.ERROR){const n=e.map(SR);So.error(`Firestore (${il}): ${t}`,...n)}}function $r(t,...e){if(So.logLevel<=_e.WARN){const n=e.map(SR);So.warn(`Firestore (${il}): ${t}`,...n)}}function SR(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function z(t="Unexpected state"){const e=`FIRESTORE (${il}) INTERNAL ASSERTION FAILED: `+t;throw Pt(e),new Error(e)}function K(t,e){t||z()}function O(t,e){return t}const T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class b extends Er{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class pH{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nEe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(on.UNAUTHENTICATED))}shutdown(){}}class iEe{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new Yt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Yt,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(_(function*(){yield c.promise,yield s(r.currentUser)}))},u=c=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Yt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K("string"==typeof r.accessToken),new pH(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return K(null===e||"string"==typeof e),new on(e)}}class sEe{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class oEe{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new sEe(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gH{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aEe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,x("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(K("string"==typeof n.token),this.R=n.token,new gH(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function uEe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class mH{static V(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=uEe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function se(t,e){return t<e?-1:t>e?1:0}function ol(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new b(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new b(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new b(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new b(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new pt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new pt(0,0))}static max(){return new Y(new pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class kf{constructor(e,n,r){void 0===n?n=0:n>e.length&&z(),void 0===r?r=e.length-n:r>e.length-n&&z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===kf.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof kf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ae extends kf{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new b(T.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const cEe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends kf{construct(e,n,r){return new Tt(e,n,r)}static isValidIdentifier(e){return cEe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Tt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new b(T.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new b(T.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new b(T.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new b(T.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(n)}static emptyPath(){return new Tt([])}}class F{constructor(e){this.path=e}static fromPath(e){return new F(Ae.fromString(e))}static fromName(e){return new F(Ae.fromString(e).popFirst(5))}static empty(){return new F(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ae.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new F(new Ae(e.slice()))}}function vH(t){return new Gr(t.readTime,t.key,-1)}class Gr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Gr(Y.min(),F.empty(),-1)}static max(){return new Gr(Y.max(),F.empty(),-1)}}function RR(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=F.comparator(t.documentKey,e.documentKey),0!==n?n:se(t.largestBatchId,e.largestBatchId))}const IH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hEe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function xo(t){return PR.apply(this,arguments)}function PR(){return PR=_(function*(t){if(t.code!==T.FAILED_PRECONDITION||t.message!==IH)throw t;x("LocalStore","Unexpectedly lost primary lease")}),PR.apply(this,arguments)}class I{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new I((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof I?n:I.resolve(n)}catch(n){return I.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):I.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):I.reject(n)}static resolve(e){return new I((n,r)=>{n(e)})}static reject(e){return new I((n,r)=>{r(e)})}static waitFor(e){return new I((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=I.resolve(!1);for(const r of e)n=n.next(i=>i?I.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new I((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new I((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}function Ro(t){return"IndexedDbTransactionError"===t.name}let qr=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this._e&&this._e(n),n}}return t.ae=-1,t})();function Ff(t){return null==t}function Vf(t){return 0===t&&1/t==-1/0}function xH(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Po(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}class Xe{constructor(e,n){this.comparator=e,this.root=n||Cn.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new av(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new av(this.root,e,this.comparator,!1)}getReverseIterator(){return new av(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new av(this.root,e,this.comparator,!0)}}class av{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Cn.RED,this.left=i??Cn.EMPTY,this.right=s??Cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Cn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Cn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();const e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}}Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1,Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Cn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Je{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new PH(this.data.getIterator())}getIteratorFrom(e){return new PH(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Je(this.comparator);return n.data=e,n}}class PH{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Cr{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new Cr([])}unionWith(e){let n=new Je(Tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Cr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ol(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class MH extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new MH("Invalid base64 string: "+s):s}}(e);return new Xt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const OEe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mo(t){if(K(!!t),"string"==typeof t){let e=0;const n=OEe.exec(t);if(K(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(t.seconds),nanos:Dt(t.nanos)}}function Dt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Vs(t){return"string"==typeof t?Xt.fromBase64String(t):Xt.fromUint8Array(t)}function uv(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function cv(t){const e=t.mapValue.fields.__previous_value__;return uv(e)?cv(e):e}function Lf(t){const e=Mo(t.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}class FEe{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Xa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Xa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Xa&&e.projectId===this.projectId&&e.database===this.database}}const No={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ko(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?uv(t)?4:FH(t)?9007199254740991:10:z()}function Xi(t,e){if(t===e)return!0;const n=ko(t);if(n!==ko(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lf(t).isEqual(Lf(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Mo(i.timestampValue),a=Mo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,Vs(t.bytesValue).isEqual(Vs(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Dt(i.geoPointValue.latitude)===Dt(s.geoPointValue.latitude)&&Dt(i.geoPointValue.longitude)===Dt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Dt(i.integerValue)===Dt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Dt(i.doubleValue),a=Dt(s.doubleValue);return o===a?Vf(o)===Vf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ol(t.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(xH(o)!==xH(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!Xi(o[u],a[u])))return!1;return!0}(t,e);default:return z()}var s}function Uf(t,e){return void 0!==(t.values||[]).find(n=>Xi(n,e))}function Oo(t,e){if(t===e)return 0;const n=ko(t),r=ko(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Dt(s.integerValue||s.doubleValue),u=Dt(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return NH(t.timestampValue,e.timestampValue);case 4:return NH(Lf(t),Lf(e));case 5:return se(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Vs(s),u=Vs(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const l=se(a[c],u[c]);if(0!==l)return l}return se(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=se(Dt(s.latitude),Dt(o.latitude));return 0!==a?a:se(Dt(s.longitude),Dt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let c=0;c<a.length&&c<u.length;++c){const l=Oo(a[c],u[c]);if(l)return l}return se(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===No.mapValue&&o===No.mapValue)return 0;if(s===No.mapValue)return 1;if(o===No.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let d=0;d<u.length&&d<l.length;++d){const h=se(u[d],l[d]);if(0!==h)return h;const f=Oo(a[u[d]],c[l[d]]);if(0!==f)return f}return se(u.length,l.length)}(t.mapValue,e.mapValue);default:throw z()}}function NH(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return se(t,e);const n=Mo(t),r=Mo(e),i=se(n.seconds,r.seconds);return 0!==i?i:se(n.nanos,r.nanos)}function ll(t){return kR(t)}function kR(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Mo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Vs(t.bytesValue).toBase64():"referenceValue"in t?F.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=kR(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${kR(n.fields[o])}`;return i+"}"}(t.mapValue):z()}function OR(t){return!!t&&"integerValue"in t}function Bf(t){return!!t&&"arrayValue"in t}function kH(t){return!!t&&"nullValue"in t}function OH(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hv(t){return!!t&&"mapValue"in t}function jf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Po(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=jf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function FH(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!hv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jf(n)}setAll(e){let n=Tt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=jf(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());hv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];hv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Po(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new An(jf(this.value))}}class nt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new nt(e,0,Y.min(),Y.min(),Y.min(),An.empty(),0)}static newFoundDocument(e,n,r,i){return new nt(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new nt(e,2,n,Y.min(),Y.min(),An.empty(),0)}static newUnknownDocument(e,n){return new nt(e,3,n,Y.min(),Y.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fo{constructor(e,n){this.position=e,this.inclusive=n}}function BH(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?F.comparator(F.fromName(o.referenceValue),n.key):Oo(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function jH(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xi(t.position[n],e.position[n]))return!1;return!0}class dl{constructor(e,n="asc"){this.field=e,this.dir=n}}function UEe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class $H{}class Ie extends $H{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new BEe(e,n,r):"array-contains"===n?new GEe(e,r):"in"===n?new KH(e,r):"not-in"===n?new qEe(e,r):"array-contains-any"===n?new zEe(e,r):new Ie(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new jEe(e,r):new $Ee(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Oo(n,this.value)):null!==n&&ko(this.value)===ko(n)&&this.matchesComparison(Oo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ue extends $H{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Ue(e,n)}matches(e){return hl(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return null!==e?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function hl(t){return"and"===t.op}function VR(t){return function GH(t){for(const e of t.filters)if(e instanceof Ue)return!1;return!0}(t)&&hl(t)}function LR(t){if(t instanceof Ie)return t.field.canonicalString()+t.op.toString()+ll(t.value);if(VR(t))return t.filters.map(e=>LR(e)).join(",");{const e=t.filters.map(n=>LR(n)).join(",");return`${t.op}(${e})`}}function qH(t,e){return t instanceof Ie?(r=t,(i=e)instanceof Ie&&r.op===i.op&&r.field.isEqual(i.field)&&Xi(r.value,i.value)):t instanceof Ue?function(r,i){return i instanceof Ue&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&qH(o,i.filters[a]),!0)}(t,e):void z();var r,i}function HH(t){return t instanceof Ie?`${(n=t).field.canonicalString()} ${n.op} ${ll(n.value)}`:t instanceof Ue?function(n){return n.op.toString()+" {"+n.getFilters().map(HH).join(" ,")+"}"}(t):"Filter";var n}class BEe extends Ie{constructor(e,n,r){super(e,n,r),this.key=F.fromName(r.referenceValue)}matches(e){const n=F.comparator(e.key,this.key);return this.matchesComparison(n)}}class jEe extends Ie{constructor(e,n){super(e,"in",n),this.keys=WH(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $Ee extends Ie{constructor(e,n){super(e,"not-in",n),this.keys=WH(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function WH(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>F.fromName(r.referenceValue))}class GEe extends Ie{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bf(n)&&Uf(n.arrayValue,this.value)}}class KH extends Ie{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Uf(this.value.arrayValue,n)}}class qEe extends Ie{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Uf(this.value.arrayValue,n)}}class zEe extends Ie{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Uf(this.value.arrayValue,r))}}class HEe{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.he=null}}function UR(t,e=null,n=[],r=[],i=null,s=null,o=null){return new HEe(t,e,n,r,i,s,o)}function Za(t){const e=O(t);if(null===e.he){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>LR(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Ff(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ll(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ll(r)).join(",")),e.he=n}return e.he}function $f(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!UEe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qH(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jH(t.startAt,e.startAt)&&jH(t.endAt,e.endAt)}function fv(t){return F.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Ls{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.Pe=null,this.Ie=null,this.de=null}}function fl(t){return new Ls(t)}function JH(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function pl(t){const e=O(t);if(null===e.Pe){e.Pe=[];const n=function gv(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}(e),r=function BR(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==n&&null===r)n.isKeyField()||e.Pe.push(new dl(n)),e.Pe.push(new dl(Tt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new dl(Tt.keyField(),s))}}}return e.Pe}function ar(t){const e=O(t);return e.Ie||(e.Ie=function ZH(t,e){if("F"===t.limitType)return UR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new dl(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Fo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Fo(t.startAt.position,t.startAt.inclusive):null;return UR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,pl(t))),e.Ie}function mv(t,e,n){return new Ls(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gf(t,e){return $f(ar(t),ar(e))&&t.limitType===e.limitType}function e7(t){return`${Za(ar(t))}|lt:${t.limitType}`}function gl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>HH(i)).join(", ")}]`),Ff(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ll(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ll(i)).join(",")),`Target(${r})`}(ar(t))}; limitType=${t.limitType})`}function qf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):F.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of pl(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,u){const c=BH(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,pl(r),i)||r.endAt&&!function(o,a,u){const c=BH(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,pl(r),i)));var r,i}function n7(t){return(e,n)=>{let r=!1;for(const i of pl(t)){const s=WEe(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function WEe(t,e,n){const r=t.field.isKeyField()?F.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return null!==u&&null!==c?Oo(u,c):z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}class Us{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Po(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return function RH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(this.inner)}size(){return this.innerSize}}const KEe=new Xe(F.comparator);function Ar(){return KEe}const r7=new Xe(F.comparator);function zf(...t){let e=r7;for(const n of t)e=e.insert(n.key,n);return e}function i7(t){let e=r7;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ji(){return Hf()}function s7(){return Hf()}function Hf(){return new Us(t=>t.toString(),(t,e)=>t.isEqual(e))}new Xe(F.comparator);const YEe=new Je(F.comparator);function pe(...t){let e=YEe;for(const n of t)e=e.add(n);return e}const XEe=new Je(se);class _v{constructor(){this._=void 0}}function JEe(t,e,n){return t instanceof ml?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&uv(s)&&(s=cv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof eu?l7(t,e):t instanceof tu?d7(t,e):function(i,s){const o=function c7(t,e){return t instanceof _l?OR(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}(i,s),a=h7(o)+h7(i.Te);return OR(o)&&OR(i.Te)?function a7(t){return{integerValue:""+t}}(a):function o7(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vf(e)?"-0":e}}(i.serializer,a)}(t,e)}function ZEe(t,e,n){return t instanceof eu?l7(t,e):t instanceof tu?d7(t,e):n}class ml extends _v{}class eu extends _v{constructor(e){super(),this.elements=e}}function l7(t,e){const n=f7(e);for(const r of t.elements)n.some(i=>Xi(i,r))||n.push(r);return{arrayValue:{values:n}}}class tu extends _v{constructor(e){super(),this.elements=e}}function d7(t,e){let n=f7(e);for(const r of t.elements)n=n.filter(i=>!Xi(i,r));return{arrayValue:{values:n}}}class _l extends _v{constructor(e,n){super(),this.serializer=e,this.Te=n}}function h7(t){return Dt(t.integerValue||t.doubleValue)}function f7(t){return Bf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class ct{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ct}static exists(e){return new ct(void 0,e)}static updateTime(e){return new ct(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yv(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class qR{}function p7(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new vl(t.key,ct.none()):new yl(t.key,t.data,ct.none());{const n=t.data,r=An.empty();let i=new Je(Tt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Bs(t.key,r,new Cr(i.toArray()),ct.none())}}function nwe(t,e,n){t instanceof yl?function(i,s,o){const a=i.value.clone(),u=_7(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Bs?function(i,s,o){if(!yv(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=_7(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(m7(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Kf(t,e,n,r){return t instanceof yl?function(s,o,a,u){if(!yv(s.precondition,o))return a;const c=s.value.clone(),l=y7(s.fieldTransforms,u,o);return c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Bs?function(s,o,a,u){if(!yv(s.precondition,o))return a;const c=y7(s.fieldTransforms,u,o),l=o.data;return l.setAll(m7(s)),l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):(a=n,yv(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function g7(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&ol(r,i,(s,o)=>function ewe(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof eu&&i instanceof eu||r instanceof tu&&i instanceof tu?ol(r.elements,i.elements,Xi):r instanceof _l&&i instanceof _l?Xi(r.Te,i.Te):r instanceof ml&&i instanceof ml);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class yl extends qR{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bs extends qR{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function m7(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function _7(t,e,n){const r=new Map;K(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ZEe(o,a,n[i]))}return r}function y7(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,JEe(s,o,e))}return r}class vl extends qR{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&nwe(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Kf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Kf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=s7();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=p7(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&ol(this.mutations,e.mutations,(n,r)=>g7(n,r))&&ol(this.baseMutations,e.baseMutations,(n,r)=>g7(n,r))}}class KR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class swe{constructor(e,n){this.count=e,this.unchangedNames=n}}var Gt,be;function I7(t){if(void 0===t)return Pt("GRPC error has no .code"),T.UNKNOWN;switch(t){case Gt.OK:return T.OK;case Gt.CANCELLED:return T.CANCELLED;case Gt.UNKNOWN:return T.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return T.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return T.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return T.INTERNAL;case Gt.UNAVAILABLE:return T.UNAVAILABLE;case Gt.UNAUTHENTICATED:return T.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return T.INVALID_ARGUMENT;case Gt.NOT_FOUND:return T.NOT_FOUND;case Gt.ALREADY_EXISTS:return T.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return T.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return T.FAILED_PRECONDITION;case Gt.ABORTED:return T.ABORTED;case Gt.OUT_OF_RANGE:return T.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return T.UNIMPLEMENTED;case Gt.DATA_LOSS:return T.DATA_LOSS;default:return z()}}(be=Gt||(Gt={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";const owe=new rl([4294967295,4294967295],0);function w7(t){const e=function E7(){return new TextEncoder}().encode(t),n=new tEe;return n.update(e),new Uint8Array(n.digest())}function T7(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new rl([n,r],0),new rl([i,s],0)]}class QR{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qf(`Invalid padding: ${n}`);if(r<0)throw new Qf(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Qf(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Qf(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=rl.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(rl.fromNumber(r)));return 1===i.compare(owe)&&(i=new rl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ae)return!1;const n=w7(e),[r,i]=T7(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new QR(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ae)return;const n=w7(e),[r,i]=T7(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Qf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Yf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Xf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yf(Y.min(),i,new Xe(se),Ar(),pe())}}class Xf{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xf(r,n,pe(),pe(),pe())}}class Iv{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class D7{constructor(e,n){this.targetId=e,this.ye=n}}class C7{constructor(e,n,r=Xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class A7{constructor(){this.we=0,this.Se=S7(),this.be=Xt.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}get current(){return this.De}get resumeToken(){return this.be}get ve(){return 0!==this.we}get Fe(){return this.Ce}Me(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}xe(){let e=pe(),n=pe(),r=pe();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:z()}}),new Xf(this.be,this.De,e,n,r)}Oe(){this.Ce=!1,this.Se=S7()}Ne(e,n){this.Ce=!0,this.Se=this.Se.insert(e,n)}Be(e){this.Ce=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.Ce=!0,this.De=!0}}class awe{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Ar(),this.Ue=b7(),this.We=new Xe(se)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){const n=e.targetId,r=e.ye.count,i=this.et(n);if(i){const s=i.target;if(fv(s))if(0===r){const o=new F(s.path);this.je(n,o,nt.newNoDocument(o,Y.min()))}else K(1===r);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),u=a?this.rt(a,e,o):1;0!==u&&(this.Ze(n),this.We=this.We.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Vs(r).toUint8Array()}catch(u){if(u instanceof MH)return $r("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new QR(o,i,s)}catch(u){return $r(u instanceof Qf?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ae?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.je(n,s,null),i++)}),i}_t(e){const n=new Map;this.Ke.forEach((s,o)=>{const a=this.et(o);if(a){if(s.current&&fv(a.target)){const u=new F(a.target.path);null!==this.$e.get(u)||this.ut(o,u)||this.je(o,u,nt.newNoDocument(u,e))}s.Fe&&(n.set(o,s.xe()),s.Oe())}});let r=pe();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.et(u);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new Yf(e,n,this.We,this.$e,r);return this.$e=Ar(),this.Ue=b7(),this.We=new Xe(se),i}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new A7,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Je(se),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=null!==this.et(e);return n||x("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.ve?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new A7),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function b7(){return new Xe(F.comparator)}function S7(){return new Xe(F.comparator)}const uwe={asc:"ASCENDING",desc:"DESCENDING"},cwe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lwe={and:"AND",or:"OR"};class dwe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function YR(t,e){return t.useProto3Json||Ff(e)?e:{value:e}}function Mt(t){return K(!!t),Y.fromTimestamp(function(n){const r=Mo(n);return new pt(r.seconds,r.nanos)}(t))}function R7(t){const e=Ae.fromString(t);return K(U7(e)),e}function Zi(t,e){const n=R7(e);if(n.get(1)!==t.databaseId.projectId)throw new b(T.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new b(T.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new F(M7(n))}function JR(t,e){return function XR(t,e){return(r=t,new Ae(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}(t.databaseId,e)}function Zf(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function M7(t){return K(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function O7(t,e){return{documents:[JR(t,e.path)]}}function e1(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=JR(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=JR(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return L7(Ue.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(c=>{return{field:Vo((d=c).field),direction:_we(d.dir)};var d})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=YR(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n;var u}function F7(t){let e=function P7(t){const e=R7(t);return 4===e.length?Ae.emptyPath():M7(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){K(1===r);const l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){const h=V7(d);return h instanceof Ue&&VR(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(h=>{return new dl(El((p=h).field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction));var p}));let a=null;n.limit&&(a=function(d){let h;return h="object"==typeof d?d.value:d,Ff(h)?null:h}(n.limit));let u=null;var d;n.startAt&&(u=new Fo((d=n.startAt).values||[],!!d.before));let c=null;return n.endAt&&(c=function(d){return new Fo(d.values||[],!d.before)}(n.endAt)),function XH(t,e,n,r,i,s,o,a){return new Ls(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",u,c)}function V7(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=El(n.unaryFilter.field);return Ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=El(n.unaryFilter.field);return Ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=El(n.unaryFilter.field);return Ie.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=El(n.unaryFilter.field);return Ie.create(o,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(t):void 0!==t.fieldFilter?Ie.create(El((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Ue.create(n.compositeFilter.filters.map(r=>V7(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(n.compositeFilter.op))}(t):z();var n}function _we(t){return uwe[t]}function ywe(t){return cwe[t]}function vwe(t){return lwe[t]}function Vo(t){return{fieldPath:t.canonicalString()}}function El(t){return Tt.fromServerFormat(t.fieldPath)}function L7(t){return t instanceof Ie?function(n){if("=="===n.op){if(OH(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NAN"}};if(kH(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(OH(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NAN"}};if(kH(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(n.field),op:ywe(n.op),value:n.value}}}(t):t instanceof Ue?function(n){const r=n.getFilters().map(i=>L7(i));return 1===r.length?r[0]:{compositeFilter:{op:vwe(n.op),filters:r}}}(t):z()}function U7(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class js{constructor(e,n,r,i,s=Y.min(),o=Y.min(),a=Xt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class B7{constructor(e){this.ht=e}}function t1(t){const e=F7({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?mv(e,e.limit,"L"):e}class su{constructor(){}dt(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.At(n,5);else if("booleanValue"in e)this.At(n,10),n.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(n,15),n.Rt(Dt(e.integerValue));else if("doubleValue"in e){const r=Dt(e.doubleValue);isNaN(r)?this.At(n,13):(this.At(n,15),Vf(r)?n.Rt(0):n.Rt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.At(n,20),"string"==typeof r?n.Vt(r):(n.Vt(`${r.seconds||""}`),n.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,n),this.gt(n);else if("bytesValue"in e)this.At(n,30),n.yt(Vs(e.bytesValue)),this.gt(n);else if("referenceValue"in e)this.wt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.At(n,45),n.Rt(r.latitude||0),n.Rt(r.longitude||0)}else"mapValue"in e?FH(e)?this.At(n,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,n),this.gt(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.gt(n)):z()}ft(e,n){this.At(n,25),this.Dt(e,n)}Dt(e,n){n.Vt(e)}St(e,n){const r=e.fields||{};this.At(n,55);for(const i of Object.keys(r))this.ft(i,n),this.Tt(r[i],n)}bt(e,n){const r=e.values||[];this.At(n,50);for(const i of r)this.Tt(i,n)}wt(e,n){this.At(n,37),F.fromName(e).path.forEach(r=>{this.At(n,60),this.Dt(r,n)})}At(e,n){e.Rt(n)}gt(e){e.Rt(2)}}su.Ct=new su;class Swe{constructor(){this.an=new a1}addToCollectionParentIndex(e,n){return this.an.add(n),I.resolve()}getCollectionParents(e,n){return I.resolve(this.an.getEntries(n))}addFieldIndex(e,n){return I.resolve()}deleteFieldIndex(e,n){return I.resolve()}deleteAllFieldIndexes(e){return I.resolve()}createTargetIndexes(e,n){return I.resolve()}getDocumentsMatchingTarget(e,n){return I.resolve(null)}getIndexType(e,n){return I.resolve(0)}getFieldIndexes(e,n){return I.resolve([])}getNextCollectionGroupToUpdate(e){return I.resolve(null)}getMinOffset(e,n){return I.resolve(Gr.min())}getMinOffsetFromCollectionGroup(e,n){return I.resolve(Gr.min())}updateCollectionGroup(e,n,r){return I.resolve()}updateIndexEntries(e,n){return I.resolve()}}class a1{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Je(Ae.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Je(Ae.comparator)).toArray()}}new Uint8Array(0);class Bn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(41943040,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);class au{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Bn(){return new au(0)}static Ln(){return new au(-1)}}class kwe{constructor(){this.changes=new Us(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?I.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Vwe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class f3{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Kf(r.mutation,i,Cr.empty(),pt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const i=Ji();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=zf();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ji();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ar();const o=Hf(),a=Hf();return n.forEach((u,c)=>{const l=r.get(c.key);i.has(c.key)&&(void 0===l||l.mutation instanceof Bs)?s=s.insert(c.key,c):void 0!==l?(o.set(c.key,l.mutation.getFieldMask()),Kf(l.mutation,c,l.mutation.getFieldMask(),pt.now())):o.set(c.key,Cr.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new Vwe(l,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Hf();let i=new Xe((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(null===c)return;let l=r.get(u)||Cr.empty();l=a.applyToLocalView(c,l),r.set(u,l);const d=(i.get(a.batchId)||pe()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,l=u.value,d=s7();l.forEach(h=>{if(!s.has(h)){const f=p7(n.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return I.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return F.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):function jR(t){return null!==t.collectionGroup}(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):I.resolve(Ji());let a=-1,u=s;return o.next(c=>I.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?I.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,pe())).next(l=>({batchId:a,changes:i7(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new F(n)).next(r=>{let i=zf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=zf();return this.indexManager.getCollectionParents(e,s).next(a=>I.forEach(a,u=>{const c=(d=n,h=u.child(s),new Ls(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt));var d,h;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const l=c.getKey();null===o.get(l)&&(o=o.insert(l,nt.newInvalidDocument(l)))});let a=zf();return o.forEach((u,c)=>{const l=s.get(u);void 0!==l&&Kf(l.mutation,c,Cr.empty(),pt.now()),qf(n,c)&&(a=a.insert(u,c))}),a})}}class Lwe{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,n){return I.resolve(this.lr.get(n))}saveBundleMetadata(e,n){return this.lr.set(n.id,{id:(i=n).id,version:i.version,createTime:Mt(i.createTime)}),I.resolve();var i}getNamedQuery(e,n){return I.resolve(this.hr.get(n))}saveNamedQuery(e,n){return this.hr.set(n.name,{name:(i=n).name,query:t1(i.bundledQuery),readTime:Mt(i.readTime)}),I.resolve();var i}}class Uwe{constructor(){this.overlays=new Xe(F.comparator),this.Pr=new Map}getOverlay(e,n){return I.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ji();return I.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.It(e,n,s)}),I.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Pr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(r)),I.resolve()}getOverlaysForCollection(e,n,r){const i=Ji(),s=n.length+1,o=new F(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return I.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Xe((c,l)=>c-l);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);null===l&&(l=Ji(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const a=Ji(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return I.resolve(a)}It(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new KR(n,r));let s=this.Pr.get(n);void 0===s&&(s=pe(),this.Pr.set(n,s)),this.Pr.set(n,s.add(r.key))}}class u1{constructor(){this.Ir=new Je(un.dr),this.Tr=new Je(un.Er)}isEmpty(){return this.Ir.isEmpty()}addReference(e,n){const r=new un(e,n);this.Ir=this.Ir.add(r),this.Tr=this.Tr.add(r)}Ar(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Rr(new un(e,n))}Vr(e,n){e.forEach(r=>this.removeReference(r,n))}mr(e){const n=new F(new Ae([])),r=new un(n,e),i=new un(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Rr(o),s.push(o.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}pr(e){const n=new F(new Ae([])),r=new un(n,e),i=new un(n,e+1);let s=pe();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new un(e,0),r=this.Ir.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class un{constructor(e,n){this.key=e,this.yr=n}static dr(e,n){return F.comparator(e.key,n.key)||se(e.yr,n.yr)}static Er(e,n){return se(e.yr,n.yr)||F.comparator(e.key,n.key)}}class Bwe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new Je(un.dr)}checkEmpty(e){return I.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.wr;this.wr++;const o=new HR(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Sr=this.Sr.add(new un(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return I.resolve(o)}lookupMutationBatch(e,n){return I.resolve(this.br(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Dr(n+1),s=i<0?0:i;return I.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return I.resolve(0===this.mutationQueue.length?-1:this.wr-1)}getAllMutationBatches(e){return I.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new un(n,0),i=new un(n,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([r,i],o=>{const a=this.br(o.yr);s.push(a)}),I.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Je(se);return n.forEach(i=>{const s=new un(i,0),o=new un(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,o],a=>{r=r.add(a.yr)})}),I.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;F.isDocumentKey(s)||(s=s.child(""));const o=new un(new F(s),0);let a=new Je(se);return this.Sr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.yr)),!0)},o),I.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.br(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){K(0===this.vr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.Sr;return I.forEach(n.mutations,i=>{const s=new un(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,n){const r=new un(n,0),i=this.Sr.firstAfterOrEqual(r);return I.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return I.resolve()}vr(e,n){return this.Dr(e)}Dr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}br(e){const n=this.Dr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class jwe{constructor(e){this.Fr=e,this.docs=new Xe(F.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Fr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return I.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(n))}getEntries(e,n){let r=Ar();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():nt.newInvalidDocument(i))}),I.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ar();const o=n.path,a=new F(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:l}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||RR(vH(l),r)<=0||(i.has(l.key)||qf(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return I.resolve(s)}getAllFromCollectionGroup(e,n,r,i){z()}Mr(e,n){return I.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $we(this)}getSize(e){return I.resolve(this.size)}}class $we extends kwe{constructor(e){super(),this.ur=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),I.waitFor(n)}getFromCache(e,n){return this.ur.getEntry(e,n)}getAllFromCache(e,n){return this.ur.getEntries(e,n)}}class Gwe{constructor(e){this.persistence=e,this.Or=new Us(n=>Za(n),$f),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Nr=0,this.Br=new u1,this.targetCount=0,this.Lr=au.Bn()}forEachTarget(e,n){return this.Or.forEach((r,i)=>n(i)),I.resolve()}getLastRemoteSnapshotVersion(e){return I.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return I.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),I.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Nr&&(this.Nr=n),I.resolve()}Qn(e){this.Or.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new au(n),this.highestTargetId=n),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,n){return this.Qn(n),this.targetCount+=1,I.resolve()}updateTargetData(e,n){return this.Qn(n),I.resolve()}removeTargetData(e,n){return this.Or.delete(n.target),this.Br.mr(n.targetId),this.targetCount-=1,I.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Or.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Or.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),I.waitFor(s).next(()=>i)}getTargetCount(e){return I.resolve(this.targetCount)}getTargetData(e,n){const r=this.Or.get(n)||null;return I.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Ar(n,r),I.resolve()}removeMatchingKeys(e,n,r){this.Br.Vr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),I.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.mr(n),I.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.pr(n);return I.resolve(r)}containsKey(e,n){return I.resolve(this.Br.containsKey(n))}}class c1{constructor(e,n){this.kr={},this.overlays={},this.qr=new qr(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=e(this),this.Kr=new Gwe(this),this.indexManager=new Swe,this.remoteDocumentCache=new jwe(r=>this.referenceDelegate.$r(r)),this.serializer=new B7(n),this.Ur=new Lwe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Uwe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.kr[e.toKey()];return r||(r=new Bwe(n,this.referenceDelegate),this.kr[e.toKey()]=r),r}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ur}runTransaction(e,n,r){x("MemoryPersistence","Starting transaction:",e);const i=new qwe(this.qr.next());return this.referenceDelegate.Wr(),r(i).next(s=>this.referenceDelegate.Gr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}zr(e,n){return I.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,n)))}}class qwe extends hEe{constructor(e){super(),this.currentSequenceNumber=e}}class Sv{constructor(e){this.persistence=e,this.jr=new u1,this.Hr=null}static Jr(e){return new Sv(e)}get Yr(){if(this.Hr)return this.Hr;throw z()}addReference(e,n,r){return this.jr.addReference(r,n),this.Yr.delete(r.toString()),I.resolve()}removeReference(e,n,r){return this.jr.removeReference(r,n),this.Yr.add(r.toString()),I.resolve()}markPotentiallyOrphaned(e,n){return this.Yr.add(n.toString()),I.resolve()}removeTarget(e,n){this.jr.mr(n.targetId).forEach(i=>this.Yr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Yr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Wr(){this.Hr=new Set}Gr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return I.forEach(this.Yr,r=>{const i=F.fromPath(r);return this.Zr(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.Hr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Zr(e,n).next(r=>{r?this.Yr.delete(n.toString()):this.Yr.add(n.toString())})}$r(e){return 0}Zr(e,n){return I.or([()=>I.resolve(this.jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.zr(e,n)])}}class f1{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Qi=r,this.Ki=i}static $i(e,n){let r=pe(),i=pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new f1(e,n.fromCache,r,i)}}class Hwe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class g3{constructor(){this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}initialize(e,n){this.ji=e,this.indexManager=n,this.Ui=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Hi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Hwe;return this.Yi(e,n,o).next(a=>{if(s.result=a,this.Wi)return this.Zi(e,n,o,a.size)})}).next(()=>s.result)}Zi(e,n,r,i){return r.documentReadCount<this.Gi?(sl()<=_e.DEBUG&&x("QueryEngine","SDK will not create cache indexes for query:",gl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),I.resolve()):(sl()<=_e.DEBUG&&x("QueryEngine","Query:",gl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.zi*i?(sl()<=_e.DEBUG&&x("QueryEngine","The SDK decides to create cache indexes for query:",gl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ar(n))):I.resolve())}Hi(e,n){if(JH(n))return I.resolve(null);let r=ar(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=mv(n,null,"F"),r=ar(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=pe(...s);return this.ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Xi(n,a);return this.es(n,c,o,u.readTime)?this.Hi(e,mv(n,null,"F")):this.ts(e,c,n,u)}))})))}Ji(e,n,r,i){return JH(n)||i.isEqual(Y.min())?I.resolve(null):this.ji.getDocuments(e,r).next(s=>{const o=this.Xi(n,s);return this.es(n,o,r,i)?I.resolve(null):(sl()<=_e.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gl(n)),this.ts(e,o,n,function yH(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(1e9===r?new pt(n+1,0):new pt(n,r));return new Gr(i,F.empty(),e)}(i,-1)).next(a=>a))})}Xi(e,n){let r=new Je(n7(e));return n.forEach((i,s)=>{qf(e,s)&&(r=r.add(s))}),r}es(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Yi(e,n,r){return sl()<=_e.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",gl(n)),this.ji.getDocumentsMatchingQuery(e,n,Gr.min(),r)}ts(e,n,r,i){return this.ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Wwe{constructor(e,n,r,i){this.persistence=e,this.ns=n,this.serializer=i,this.rs=new Xe(se),this.ss=new Us(s=>Za(s),$f),this.os=new Map,this._s=e.getRemoteDocumentCache(),this.Kr=e.getTargetCache(),this.Ur=e.getBundleCache(),this.us(r)}us(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new f3(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.rs))}}function _3(t,e){return p1.apply(this,arguments)}function p1(){return p1=_(function*(t,e){const n=O(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.us(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=pe();for(const c of i){o.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of s){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({cs:c,removedBatchIds:o,addedBatchIds:a}))})})}),p1.apply(this,arguments)}function y3(t){const e=O(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Kr.getLastRemoteSnapshotVersion(n))}function bl(t,e,n){return g1.apply(this,arguments)}function g1(){return g1=_(function*(t,e,n){const r=O(t),i=r.rs.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ro(o))throw o;x("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.rs=r.rs.remove(e),r.ss.delete(i.target)}),g1.apply(this,arguments)}function Pv(t,e,n){const r=O(t);let i=Y.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,l){const d=O(u),h=d.ss.get(l);return void 0!==h?I.resolve(d.rs.get(h)):d.Kr.getTargetData(c,l)}(r,o,ar(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ns.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:pe())).next(a=>(function w3(t,e,n){let r=t.os.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.os.set(e,r)}(r,function t7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,Ps:s})))}class I1{constructor(){this.activeTargetIds=function GR(){return XEe}()}Rs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}As(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class C3{constructor(){this.ro=new I1,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.ro.Rs(e),this.io[e]||"not-current"}updateQueryState(e,n,r){this.io[e]=n}removeLocalQueryTarget(e){this.ro.Vs(e)}isLocalQueryTarget(e){return this.ro.activeTargetIds.has(e)}clearQueryState(e){delete this.io[e]}getAllActiveQueryTargets(){return this.ro.activeTargetIds}isActiveQueryTarget(e){return this.ro.activeTargetIds.has(e)}start(){return this.ro=new I1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Zwe{so(e){}shutdown(){}}class A3{constructor(){this.oo=()=>this._o(),this.ao=()=>this.uo(),this.co=[],this.lo()}so(e){this.co.push(e)}shutdown(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}lo(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}_o(){x("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.co)e(0)}uo(){x("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.co)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let kv=null;function w1(){return null===kv?kv=268435456+Math.round(2147483648*Math.random()):kv++,"0x"+kv.toString(16)}const eTe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tTe{constructor(e){this.ho=e.ho,this.Po=e.Po}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.Po()}send(e){this.ho(e)}Vo(){this.To()}mo(e){this.Ao(e)}fo(e){this.Ro(e)}}const jn="WebChannelConnection";class nTe extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+n.host,this.yo=`projects/${i}/databases/${s}`,this.wo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get So(){return!1}bo(n,r,i,s,o){const a=w1(),u=this.Do(n,r);x("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(c,s,o),this.vo(n,u,c,i).then(l=>(x("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw $r("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}Fo(n,r,i,s,o,a){return this.bo(n,r,i,s,o)}Co(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+il,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}Do(n,r){return`${this.po}/v1/${r}:${eTe[n]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,i){const s=w1();return new Promise((o,a)=>{const u=new eEe;u.setWithCredentials(!0),u.listenOnce(JIe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case bR.NO_ERROR:const l=u.getResponseJson();x(jn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case bR.TIMEOUT:x(jn,`RPC '${e}' ${s} timed out`),a(new b(T.DEADLINE_EXCEEDED,"Request time out"));break;case bR.HTTP_ERROR:const d=u.getStatus();if(x(jn,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h?.error;if(f&&f.status&&f.message){const p=function(m){const v=m.toLowerCase().replace(/_/g,"-");return Object.values(T).indexOf(v)>=0?v:T.UNKNOWN}(f.status);a(new b(p,f.message))}else a(new b(T.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new b(T.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{x(jn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);x(jn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Mo(e,n,r){const i=w1(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=YIe(),a=XIe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Co(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const l=s.join("");x(jn,`Creating RPC '${e}' stream ${i}: ${l}`,u);const d=o.createWebChannel(l,u);let h=!1,f=!1;const p=new tTe({ho:m=>{f?x(jn,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(x(jn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),x(jn,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},Po:()=>d.close()}),g=(m,v,y)=>{m.listen(v,w=>{try{y(w)}catch(A){setTimeout(()=>{throw A},0)}})};return g(d,iv.EventType.OPEN,()=>{f||x(jn,`RPC '${e}' stream ${i} transport opened.`)}),g(d,iv.EventType.CLOSE,()=>{f||(f=!0,x(jn,`RPC '${e}' stream ${i} transport closed`),p.mo())}),g(d,iv.EventType.ERROR,m=>{f||(f=!0,$r(jn,`RPC '${e}' stream ${i} transport errored:`,m),p.mo(new b(T.UNAVAILABLE,"The operation could not be completed")))}),g(d,iv.EventType.MESSAGE,m=>{var v;if(!f){const y=m.data[0];K(!!y);const A=y.error||(null===(v=y[0])||void 0===v?void 0:v.error);if(A){x(jn,`RPC '${e}' stream ${i} received error:`,A);const N=A.status;let j=function(li){const Vd=Gt[li];if(void 0!==Vd)return I7(Vd)}(N),ae=A.message;void 0===j&&(j=T.INTERNAL,ae="Unknown error status: "+N+" with message "+A.message),f=!0,p.mo(new b(j,ae)),d.close()}else x(jn,`RPC '${e}' stream ${i} received:`,y),p.fo(y)}}),g(a,ZIe.STAT_EVENT,m=>{m.stat===hH.PROXY?x(jn,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===hH.NOPROXY&&x(jn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Vo()},0),p}}function Ov(){return typeof document<"u"?document:null}function up(t){return new dwe(t,!0)}class T1{constructor(e,n,r=1e3,i=1.5,s=6e4){this._i=e,this.timerId=n,this.xo=r,this.Oo=i,this.No=s,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(e){this.cancel();const n=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,n-r);i>0&&x("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,()=>(this.ko=Date.now(),e())),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}class rTe{constructor(e,n,r,i,s,o,a,u){this._i=e,this.Uo=r,this.Wo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new T1(e,n)}Jo(){return 1===this.state||5===this.state||this.Yo()}Yo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Zo()}stop(){var e=this;return _(function*(){e.Jo()&&(yield e.close(0))})()}Xo(){this.state=0,this.Ho.reset()}e_(){this.Yo()&&null===this.zo&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,()=>this.t_()))}n_(e){this.r_(),this.stream.send(e)}t_(){var e=this;return _(function*(){if(e.Yo())return e.close(0)})()}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}close(e,n){var r=this;return _(function*(){r.r_(),r.i_(),r.Ho.cancel(),r.Go++,4!==e?r.Ho.reset():n&&n.code===T.RESOURCE_EXHAUSTED?(Pt(n.toString()),Pt("Using maximum backoff delay to prevent overloading the backend."),r.Ho.qo()):n&&n.code===T.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.s_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Eo(n)})()}s_(){}auth(){this.state=1;const e=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Go===n&&this.__(r,i)},r=>{e(()=>{const i=new b(T.UNKNOWN,"Fetching auth token failed: "+r.message);return this.a_(i)})})}__(e,n){const r=this.o_(this.Go);this.stream=this.u_(e,n),this.stream.Io(()=>{r(()=>(this.state=2,this.jo=this._i.enqueueAfterDelay(this.Wo,1e4,()=>(this.Yo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.a_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Zo(){var e=this;this.state=5,this.Ho.Qo(_(function*(){e.state=0,e.start()}))}a_(e){return x("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}o_(e){return n=>{this._i.enqueueAndForget(()=>this.Go===e?n():(x("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iTe extends rTe{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}u_(e,n){return this.connection.Mo("Listen",e,n)}onMessage(e){this.Ho.reset();const n=function pwe(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:z(),i=e.targetChange.targetIds||[],s=function(c,l){return c.useProto3Json?(K(void 0===l||"string"==typeof l),Xt.fromBase64String(l||"")):(K(void 0===l||l instanceof Uint8Array),Xt.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const l=void 0===c.code?T.UNKNOWN:I7(c.code);return new b(l,c.message||"")}(o);n=new C7(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Zi(t,r.document.name),s=Mt(r.document.updateTime),o=r.document.createTime?Mt(r.document.createTime):Y.min(),a=new An({mapValue:{fields:r.document.fields}}),u=nt.newFoundDocument(i,s,o,a);n=new Iv(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Zi(t,r.document),s=r.readTime?Mt(r.readTime):Y.min(),o=nt.newNoDocument(i,s);n=new Iv([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Zi(t,r.document);n=new Iv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return z();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new swe(i,s);n=new D7(r.targetId,o)}}var c;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?Mt(o.readTime):Y.min()}(e);return this.listener.c_(n,r)}l_(e){const n={};n.database=Zf(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=fv(u)?{documents:O7(s,u)}:{query:e1(s,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=function x7(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}(s,o.resumeToken);const c=YR(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Y.min())>0){a.readTime=function Il(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}(s,o.snapshotVersion.toTimestamp());const c=YR(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function mwe(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.n_(n)}h_(e){const n={};n.database=Zf(this.serializer),n.removeTarget=e,this.n_(n)}}class oTe extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.R_=!1}V_(){if(this.R_)throw new b(T.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,n,r){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.bo(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new b(T.UNKNOWN,i.toString())})}Fo(e,n,r,i){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Fo(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new b(T.UNKNOWN,s.toString())})}terminate(){this.R_=!0}}class uTe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}y_(){0===this.f_&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.g_=null,this.S_("Backend didn't respond within 10 seconds."),this.w_("Offline"),Promise.resolve())))}b_(e){"Online"===this.state?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.w_("Offline")))}set(e){this.D_(),this.f_=0,"Online"===e&&(this.p_=!1),this.w_(e)}w_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}S_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.p_?(Pt(n),this.p_=!1):x("OnlineStateTracker",n)}D_(){null!==this.g_&&(this.g_.cancel(),this.g_=null)}}class cTe{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=s,this.x_.so(a=>{r.enqueueAndForget(_(function*(){var u;jo(o)&&(x("RemoteStore","Restarting streams for network reachability change."),yield(u=_(function*(l){const d=O(l);d.F_.add(4),yield Sl(d),d.O_.set("Unknown"),d.F_.delete(4),yield cp(d)}),function c(l){return u.apply(this,arguments)})(o))}))}),this.O_=new uTe(r,i)}}function cp(t){return C1.apply(this,arguments)}function C1(){return C1=_(function*(t){if(jo(t))for(const e of t.M_)yield e(!0)}),C1.apply(this,arguments)}function Sl(t){return A1.apply(this,arguments)}function A1(){return A1=_(function*(t){for(const e of t.M_)yield e(!1)}),A1.apply(this,arguments)}function Fv(t,e){const n=O(t);n.v_.has(e.targetId)||(n.v_.set(e.targetId,e),x1(n)?S1(n):Rl(n).Yo()&&b1(n,e))}function lp(t,e){const n=O(t),r=Rl(n);n.v_.delete(e),r.Yo()&&S3(n,e),0===n.v_.size&&(r.Yo()?r.e_():jo(n)&&n.O_.set("Unknown"))}function b1(t,e){if(t.N_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Rl(t).l_(e)}function S3(t,e){t.N_.Le(e),Rl(t).h_(e)}function S1(t){t.N_=new awe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.v_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),Rl(t).start(),t.O_.y_()}function x1(t){return jo(t)&&!Rl(t).Jo()&&t.v_.size>0}function jo(t){return 0===O(t).F_.size}function x3(t){t.N_=void 0}function lTe(t){return R1.apply(this,arguments)}function R1(){return R1=_(function*(t){t.v_.forEach((e,n)=>{b1(t,e)})}),R1.apply(this,arguments)}function dTe(t,e){return P1.apply(this,arguments)}function P1(){return P1=_(function*(t,e){x3(t),x1(t)?(t.O_.b_(e),S1(t)):t.O_.set("Unknown")}),P1.apply(this,arguments)}function hTe(t,e,n){return M1.apply(this,arguments)}function M1(){return M1=_(function*(t,e,n){if(t.O_.set("Online"),e instanceof C7&&2===e.state&&e.cause)try{yield(r=_(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.v_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.v_.delete(u),s.N_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){x("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Vv(t,r)}else if(e instanceof Iv?t.N_.Ge(e):e instanceof D7?t.N_.Xe(e):t.N_.He(e),!n.isEqual(Y.min()))try{const r=yield y3(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.N_._t(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const l=s.v_.get(c);l&&s.v_.set(c,l.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const l=s.v_.get(u);if(!l)return;s.v_.set(u,l.withResumeToken(Xt.EMPTY_BYTE_STRING,l.snapshotVersion)),S3(s,u);const d=new js(l.target,u,c,l.sequenceNumber);b1(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){x("RemoteStore","Failed to raise snapshot:",r),yield Vv(t,r)}var r}),M1.apply(this,arguments)}function Vv(t,e,n){return N1.apply(this,arguments)}function N1(){return N1=_(function*(t,e,n){if(!Ro(e))throw e;t.F_.add(1),yield Sl(t),t.O_.set("Offline"),n||(n=()=>y3(t.localStore)),t.asyncQueue.enqueueRetryable(_(function*(){x("RemoteStore","Retrying IndexedDB access"),yield n(),t.F_.delete(1),yield cp(t)}))}),N1.apply(this,arguments)}function N3(t,e){return U1.apply(this,arguments)}function U1(){return U1=_(function*(t,e){const n=O(t);n.asyncQueue.verifyOperationInProgress(),x("RemoteStore","RemoteStore received new credentials");const r=jo(n);n.F_.add(3),yield Sl(n),r&&n.O_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.F_.delete(3),yield cp(n)}),U1.apply(this,arguments)}function j1(){return j1=_(function*(t,e){const n=O(t);e?(n.F_.delete(2),yield cp(n)):e||(n.F_.add(2),yield Sl(n),n.O_.set("Unknown"))}),j1.apply(this,arguments)}function Rl(t){return t.B_||(t.B_=function(n,r,i){const s=O(n);return s.V_(),new iTe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Io:lTe.bind(null,t),Eo:dTe.bind(null,t),c_:hTe.bind(null,t)}),t.M_.push(function(){var e=_(function*(n){n?(t.B_.Xo(),x1(t)?S1(t):t.O_.set("Unknown")):(yield t.B_.stop(),x3(t))});return function(n){return e.apply(this,arguments)}}())),t.B_}class $1{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Yt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new $1(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new b(T.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pl(t,e){if(Pt("AsyncQueue",`${e}: ${t}`),Ro(t))return new b(T.UNAVAILABLE,`${e}: ${t}`);throw t}class Ml{constructor(e){this.comparator=e?(n,r)=>e(n,r)||F.comparator(n.key,r.key):(n,r)=>F.comparator(n.key,r.key),this.keyedMap=zf(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new Ml(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ml)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Ml;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class k3{constructor(){this.k_=new Xe(F.comparator)}track(e){const n=e.doc.key,r=this.k_.get(n);r?0!==e.type&&3===r.type?this.k_=this.k_.insert(n,e):3===e.type&&1!==r.type?this.k_=this.k_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.k_=this.k_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.k_=this.k_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.k_=this.k_.remove(n):1===e.type&&2===r.type?this.k_=this.k_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.k_=this.k_.insert(n,{type:2,doc:e.doc}):z():this.k_=this.k_.insert(n,e)}q_(){const e=[];return this.k_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Nl{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Nl(e,n,Ml.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class vTe{constructor(){this.Q_=void 0,this.listeners=[]}}class ITe{constructor(){this.queries=new Us(e=>e7(e),Gf),this.onlineState="Unknown",this.K_=new Set}}function q1(){return q1=_(function*(t,e){const n=O(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new vTe),i)try{s.Q_=yield n.onListen(r)}catch(o){const a=Pl(o,`Initialization of query '${gl(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.U_(n.onlineState),s.Q_&&e.W_(s.Q_)&&W1(n)}),q1.apply(this,arguments)}function H1(){return H1=_(function*(t,e){const n=O(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),H1.apply(this,arguments)}function ETe(t,e){const n=O(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.W_(i)&&(r=!0);o.Q_=i}}r&&W1(n)}function wTe(t,e,n){const r=O(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function W1(t){t.K_.forEach(e=>{e.next()})}class K1{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){return!e.fromCache||(!this.options.Z_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=Nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class V3{constructor(e){this.key=e}}class L3{constructor(e){this.key=e}}class U3{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=pe(),this.mutatedKeys=pe(),this.ua=n7(e),this.ca=new Ml(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new k3,i=n?n.ca:this.ca;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const h=i.get(l),f=qf(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),m=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),m=!0,(u&&this.ua(f,u)>0||c&&this.ua(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(u||c)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{ca:o,Pa:r,es:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.q_();s.sort((c,l)=>function(h,f){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return p(h)-p(f)}(c.type,l.type)||this.ua(c.doc,l.doc)),this.da(r);const o=n?this.Ta():[],a=0===this.aa.size&&this.current?1:0,u=a!==this._a;return this._a=a,0!==s.length||u?{snapshot:new Nl(this.query,e.ca,i,s,e.mutatedKeys,0===a,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new k3,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}da(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ta(){if(!this.current)return[];const e=this.aa;this.aa=pe(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new L3(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new V3(r))}),n}Ra(e){this.oa=e.Ps,this.aa=pe();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Nl.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class CTe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ATe{constructor(e){this.key=e,this.ma=!1}}class bTe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Us(a=>e7(a),Gf),this.pa=new Map,this.ya=new Set,this.wa=new Xe(F.comparator),this.Sa=new Map,this.ba=new u1,this.Da={},this.Ca=new Map,this.va=au.Ln(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function STe(t,e){return Q1.apply(this,arguments)}function Q1(){return Q1=_(function*(t,e){const n=function yP(t){const e=O(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=B3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VTe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PTe.bind(null,e),e.fa.c_=ETe.bind(null,e.eventManager),e.fa.xa=wTe.bind(null,e.eventManager),e}(t);let r,i;const s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const o=yield function Al(t,e){const n=O(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Kr.getTargetData(r,e).next(s=>s?(i=s,I.resolve(i)):n.Kr.allocateTargetId(r).next(o=>(i=new js(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Kr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.rs.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.rs=n.rs.insert(r.targetId,r),n.ss.set(e,r.targetId)),r})}(n.localStore,ar(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield function Y1(t,e,n,r,i){return X1.apply(this,arguments)}(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&Fv(n.remoteStore,o)}return i}),Q1.apply(this,arguments)}function X1(){return X1=_(function*(t,e,n,r,i){t.Ma=(d,h,f)=>{return(p=_(function*(m,v,y,w){let A=v.view.ha(y);A.es&&(A=yield Pv(m.localStore,v.query,!1).then(({documents:ae})=>v.view.ha(ae,A)));const N=w&&w.targetChanges.get(v.targetId),j=v.view.applyChanges(A,m.isPrimaryClient,N);return aP(m,v.targetId,j.Ea),j.snapshot}),function g(m,v,y,w){return p.apply(this,arguments)})(t,d,h,f);var p};const s=yield Pv(t.localStore,e,!0),o=new U3(e,s.Ps),a=o.ha(s.documents),u=Xf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=o.applyChanges(a,t.isPrimaryClient,u);aP(t,n,c.Ea);const l=new CTe(e,n,o);return t.ga.set(e,l),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),c.snapshot}),X1.apply(this,arguments)}function xTe(t,e){return J1.apply(this,arguments)}function J1(){return J1=_(function*(t,e){const n=O(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!Gf(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield bl(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),lp(n.remoteStore,r.targetId),kl(n,r.targetId)}).catch(xo))):(kl(n,r.targetId),yield bl(n.localStore,r.targetId,!0))}),J1.apply(this,arguments)}function B3(t,e){return eP.apply(this,arguments)}function eP(){return eP=_(function*(t,e){const n=O(t);try{const r=yield function Qwe(t,e){const n=O(t),r=e.snapshotVersion;let i=n.rs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n._s.newChangeBuffer({trackRemovals:!0});i=n.rs;const a=[];e.targetChanges.forEach((l,d)=>{const h=i.get(d);if(!h)return;a.push(n.Kr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Kr.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var g,m,v;null!==e.targetMismatches.get(d)?f=f.withResumeToken(Xt.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),m=f,v=l,(0===(g=h).resumeToken.approximateByteSize()||m.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8||v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0)&&a.push(n.Kr.updateTargetData(s,f))});let u=Ar(),c=pe();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(function v3(t,e,n){let r=pe(),i=pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ar();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):x("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{ls:o,hs:i}})}(s,o,e.documentUpdates).next(l=>{u=l.ls,c=l.hs})),!r.isEqual(Y.min())){const l=n.Kr.getLastRemoteSnapshotVersion(s).next(d=>n.Kr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return I.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.rs=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Sa.get(s);o&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?K(o.ma):i.removedDocuments.size>0&&(K(o.ma),o.ma=!1))}),yield $s(n,r,e)}catch(r){yield xo(r)}}),eP.apply(this,arguments)}function j3(t,e,n){const r=O(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ga.forEach((s,o)=>{const a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=O(o);u.onlineState=a;let c=!1;u.queries.forEach((l,d)=>{for(const h of d.listeners)h.U_(a)&&(c=!0)}),c&&W1(u)}(r.eventManager,e),i.length&&r.fa.c_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function PTe(t,e,n){return tP.apply(this,arguments)}function tP(){return tP=_(function*(t,e,n){const r=O(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Sa.get(e),s=i&&i.key;if(s){let o=new Xe(F.comparator);o=o.insert(s,nt.newNoDocument(s,Y.min()));const a=pe().add(s),u=new Yf(Y.min(),new Map,new Xe(se),o,a);yield B3(r,u),r.wa=r.wa.remove(s),r.Sa.delete(e),uP(r)}else yield bl(r.localStore,e,!1).then(()=>kl(r,e,n)).catch(xo)}),tP.apply(this,arguments)}function kl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.mr(e).forEach(r=>{t.ba.containsKey(r)||$3(t,r)})}function $3(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);null!==n&&(lp(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),uP(t))}function aP(t,e,n){for(const r of n)r instanceof V3?(t.ba.addReference(r.key,e),OTe(t,r)):r instanceof L3?(x("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||$3(t,r.key)):z()}function OTe(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(x("SyncEngine","New document in limbo: "+n),t.ya.add(r),uP(t))}function uP(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new F(Ae.fromString(e)),r=t.va.next();t.Sa.set(r,new ATe(n)),t.wa=t.wa.insert(n,r),Fv(t.remoteStore,new js(ar(fl(n.path)),r,"TargetPurposeLimboResolution",qr.ae))}}function $s(t,e,n){return cP.apply(this,arguments)}function cP(){return cP=_(function*(t,e,n){const r=O(t),i=[],s=[],o=[];var a;r.ga.isEmpty()||(r.ga.forEach((a,u)=>{o.push(r.Ma(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const l=f1.$i(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.fa.c_(i),yield(a=_(function*(c,l){const d=O(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>I.forEach(l,f=>I.forEach(f.Qi,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>I.forEach(f.Ki,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Ro(h))throw h;x("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const f=h.targetId;if(!h.fromCache){const p=d.rs.get(f),m=p.withLastLimboFreeSnapshotVersion(p.snapshotVersion);d.rs=d.rs.insert(f,m)}}}),function u(c,l){return a.apply(this,arguments)})(r.localStore,s))}),cP.apply(this,arguments)}function FTe(t,e){return lP.apply(this,arguments)}function lP(){return lP=_(function*(t,e){const n=O(t);if(!n.currentUser.isEqual(e)){x("SyncEngine","User change. New user:",e.toKey());const r=yield _3(n.localStore,e);n.currentUser=e,(s=n).Ca.forEach(a=>{a.forEach(u=>{u.reject(new b(T.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ca.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $s(n,r.cs)}var s}),lP.apply(this,arguments)}function VTe(t,e){const n=O(t),r=n.Sa.get(e);if(r&&r.ma)return pe().add(r.key);{let i=pe();const s=n.pa.get(e);if(!s)return i;for(const o of s){const a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}class Lv{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return _(function*(){n.serializer=up(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return function m3(t,e,n,r){return new Wwe(t,e,n,r)}(this.persistence,new g3,e.initialUser,this.serializer)}createPersistence(e){return new c1(Sv.Jr,this.serializer)}createSharedClientState(e){return new C3}terminate(){var e=this;return _(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ol{initialize(e,n){var r=this;return _(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>j3(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=FTe.bind(null,r.syncEngine),yield function B1(t,e){return j1.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ITe}createDatastore(e){const n=up(e.databaseInfo.databaseId),r=new nTe(e.databaseInfo);return new oTe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>j3(this.syncEngine,n,0),a=A3.C()?new A3:new Zwe,new cTe(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,u,c,l){const d=new bTe(i,s,o,a,u,c);return l&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return function(){var e=_(function*(r){const i=O(r);x("RemoteStore","RemoteStore shutting down."),i.F_.add(5),yield Sl(i),i.x_.shutdown(),i.O_.set("Unknown")});return function n(r){return e.apply(this,arguments)}}()(this.remoteStore)}}class Uv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Pt("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class YTe{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=on.UNAUTHENTICATED,this.clientId=mH.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=_(function*(a){x("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(x("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return _(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new b(T.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Yt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(_(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Pl(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function Bv(t,e){return IP.apply(this,arguments)}function IP(){return IP=_(function*(t,e){t.asyncQueue.verifyOperationInProgress(),x("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=_(function*(s){r.isEqual(s)||(yield _3(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),IP.apply(this,arguments)}function EP(t,e){return wP.apply(this,arguments)}function wP(){return wP=_(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function TP(t){return DP.apply(this,arguments)}(t);x("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>N3(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>N3(e.remoteStore,s)),t._onlineComponents=e}),wP.apply(this,arguments)}function DP(){return DP=_(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){x("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Bv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function K3(t){return"FirebaseError"===t.name?t.code===T.FAILED_PRECONDITION||t.code===T.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;$r("Error using user provided cache. Falling back to memory cache: "+n),yield Bv(t,new Lv)}}else x("FirestoreClient","Using default OfflineComponentProvider"),yield Bv(t,new Lv);return t._offlineComponents}),DP.apply(this,arguments)}function CP(){return CP=_(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(x("FirestoreClient","Using user provided OnlineComponentProvider"),yield EP(t,t._uninitializedComponentsProvider._online)):(x("FirestoreClient","Using default OnlineComponentProvider"),yield EP(t,new Ol))),t._onlineComponents}),CP.apply(this,arguments)}function Vl(t){return bP.apply(this,arguments)}function bP(){return bP=_(function*(t){const e=yield function jv(t){return CP.apply(this,arguments)}(t),n=e.eventManager;return n.onListen=STe.bind(null,e.syncEngine),n.onUnlisten=xTe.bind(null,e.syncEngine),n}),bP.apply(this,arguments)}function e5(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const t5=new Map;function Ee(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new b(T.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=function $v(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":z()}(t);throw new b(T.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class s5{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new b(T.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new b(T.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function a0e(t,e,n,r){if(!0===e&&!0===r)throw new b(T.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=e5(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new b(T.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new b(T.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new b(T.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s5({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new b(T.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new b(T.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s5(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new nEe;switch(r.type){case"firstParty":return new oEe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new b(T.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=t5.get(n);r&&(x("ComponentProvider","Removing Datastore"),t5.delete(n),r.terminate())}(this),Promise.resolve()}}class bn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bn(this.firestore,e,this._query)}}class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}}class es extends bn{constructor(e,n,r){super(e,n,fl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new F(e))}withConverter(e){return new es(this.firestore,e,this._path)}}class l0e{constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new T1(this,"async_queue_retry"),this.ou=()=>{const n=Ov();n&&x("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Ho.$o()};const e=Ov();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this._u(),this.au(e)}enterRestrictedMode(e){if(!this.eu){this.eu=!0,this.iu=e||!1;const n=Ov();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.ou)}}enqueue(e){if(this._u(),this.eu)return new Promise(()=>{});const n=new Yt;return this.au(()=>this.eu&&this.iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xa.push(e),this.uu()))}uu(){var e=this;return _(function*(){if(0!==e.Xa.length){try{yield e.Xa[0](),e.Xa.shift(),e.Ho.reset()}catch(n){if(!Ro(n))throw n;x("AsyncQueue","Operation failed with retryable error: "+n)}e.Xa.length>0&&e.Ho.Qo(()=>e.uu())}})()}au(e){const n=this.Za.then(()=>(this.ru=!0,e().catch(r=>{throw this.nu=r,this.ru=!1,Pt("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.ru=!1,r))));return this.Za=n,n}enqueueAfterDelay(e,n,r){this._u(),this.su.indexOf(e)>-1&&(n=0);const i=$1.createAndSchedule(this,e,n,r,s=>this.cu(s));return this.tu.push(i),i}_u(){this.nu&&z()}verifyOperationInProgress(){}lu(){var e=this;return _(function*(){let n;do{n=e.Za,yield n}while(n!==e.Za)})()}hu(e){for(const n of this.tu)if(n.timerId===e)return!0;return!1}Pu(e){return this.lu().then(()=>{this.tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tu)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.lu()})}Iu(e){this.su.push(e)}cu(e){const n=this.tu.indexOf(e);this.tu.splice(n,1)}}function xP(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class Ze extends dp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new l0e,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||a5(this),this._firestoreClient.terminate()}}function a5(t){var e,n,r;const i=t._freezeSettings(),s=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new FEe(t._databaseId,u,t._persistenceKey,(l=i).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,e5(l.experimentalLongPollingOptions),l.useFetchStreams));var u,l;t._firestoreClient=new YTe(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class cu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cu(Xt.fromBase64String(e))}catch(n){throw new b(T.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new cu(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ll{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new b(T.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class RP{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new b(T.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new b(T.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}}const v0e=new RegExp("[~\\*/\\[\\]]");function zv(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new b(T.INVALID_ARGUMENT,a+t+u)}class kP{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new I0e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class I0e extends kP{data(){return super.data()}}function Hv(t,e){return"string"==typeof e?function qv(t,e,n){if(e.search(v0e)>=0)throw zv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ll(...e.split("."))._internalPath}catch{throw zv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}(t,e):e instanceof Ll?e._internalPath:e._delegate._internalPath}class w0e{convertValue(e,n="none"){switch(ko(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Po(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new RP(Dt(e.latitude),Dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cv(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Lf(e));default:return null}}convertTimestamp(e){const n=Mo(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);K(U7(r));const i=new Xa(r.get(1),r.get(3)),s=new F(r.popFirst(5));return i.isEqual(n)||Pt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}class du{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jl extends kP{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Yv extends jl{data(e={}){return super.data(e)}}class $l{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new du(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yv(this._firestore,this._userDataWriter,r.key,r,new du(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new b(T.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Yv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new du(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new Yv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new du(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,l=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:D0e(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function D0e(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}class Go extends w0e{constructor(e){super(),this.firestore=e}convertBytes(e){return new cu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}!function(e,n=!0){il="10.4.0",Br(new jt("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ze(new iEe(r.getProvider("auth-internal")),new aEe(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new b(T.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xa(c.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),wr(fH,"4.2.0",e),wr(fH,"4.2.0","esm2017")}();var Zv=function(){return Zv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++)for(var s in n=arguments[r])Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);return e},Zv.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var L0e={includeMetadataChanges:!1};function BP(t,e){return void 0===e&&(e=L0e),new dt(function(n){var r=function C0e(t,...e){var n,r,i;t=Ur(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||xP(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(xP(e[o])){const d=e[o];e[o]=null===(n=d.next)||void 0===n?void 0:n.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let u,c,l;if(t instanceof Nt)c=Ee(t.firestore,Ze),l=fl(t._key.path),u={next:d=>{e[o]&&e[o](function VP(t,e,n){const r=n.docs.get(e._key),i=new Go(t);return new jl(t,i,e._key,r,new du(n.hasPendingWrites,n.fromCache),e.converter)}(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Ee(t,bn);c=Ee(d.firestore,Ze),l=d._query;const h=new Go(c);u={next:f=>{e[o]&&e[o](new $l(c,h,d,f))},error:e[o+1],complete:e[o+2]},function I5(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new b(T.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query)}return function(h,f,p,g){const m=new Uv(g),v=new K1(f,m,p);return h.asyncQueue.enqueueAndForget(_(function*(){return function G1(t,e){return q1.apply(this,arguments)}(yield Vl(h),v)})),()=>{m.La(),h.asyncQueue.enqueueAndForget(_(function*(){return function z1(t,e){return H1.apply(this,arguments)}(yield Vl(h),v)}))}}(function kt(t){return t._firestoreClient||a5(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}(c),l,a,u)}(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function z0e(t,e){return void 0===e&&(e={}),function q0e(t){return BP(t,{includeMetadataChanges:!0}).pipe(ke(function(e){return e.docs}))}(t).pipe(ke(function(n){return n.map(function(r){return function R5(t,e){var n;void 0===e&&(e={});var r=t.data(e);return t.exists()&&"object"==typeof r&&null!==r&&e.idField?Zv(Zv({},r),((n={})[e.idField]=t.id,n)):r}(r,e)})}))}var B,W0e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ti={},GP=GP||{},de=W0e||self;function eI(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function _p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var qP="closure_uid_"+(1e9*Math.random()>>>0),Q0e=0;function Y0e(t,e,n){return t.call.apply(t.bind,arguments)}function X0e(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function $n(t,e,n){return($n=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Y0e:X0e).apply(null,arguments)}function tI(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function cn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function qo(){this.s=this.s,this.o=this.o}qo.prototype.s=!1,qo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function K0e(t){Object.prototype.hasOwnProperty.call(t,qP)&&t[qP]||(t[qP]=++Q0e)}(this)},qo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const k5=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function zP(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function O5(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(eI(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Gn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Gn.prototype.h=function(){this.defaultPrevented=!0};var Z0e=function(){if(!de.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{de.addEventListener("test",()=>{},e),de.removeEventListener("test",()=>{},e)}catch{}return t}();function yp(t){return/^[\s\xa0]*$/.test(t)}function nI(){var t=de.navigator;return t&&(t=t.userAgent)?t:""}function ts(t){return-1!=nI().indexOf(t)}function HP(t){return HP[" "](t),t}HP[" "]=function(){};var KP,tDe=ts("Opera"),Gl=ts("Trident")||ts("MSIE"),F5=ts("Edge"),WP=F5||Gl,V5=ts("Gecko")&&!(-1!=nI().toLowerCase().indexOf("webkit")&&!ts("Edge"))&&!(ts("Trident")||ts("MSIE"))&&!ts("Edge"),nDe=-1!=nI().toLowerCase().indexOf("webkit")&&!ts("Edge");function L5(){var t=de.document;return t?t.documentMode:void 0}e:{var QP="",YP=function(){var t=nI();return V5?/rv:([^\);]+)(\)|;)/.exec(t):F5?/Edge\/([\d\.]+)/.exec(t):Gl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):nDe?/WebKit\/(\S+)/.exec(t):tDe?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(YP&&(QP=YP?YP[1]:""),Gl){var XP=L5();if(null!=XP&&XP>parseFloat(QP)){KP=String(XP);break e}}KP=QP}var rDe=de.document&&Gl&&(L5()||parseInt(KP,10))||void 0;function vp(t,e){if(Gn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(V5){e:{try{HP(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:iDe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&vp.$.h.call(this)}}cn(vp,Gn);var iDe={2:"touch",3:"pen",4:"mouse"};vp.prototype.h=function(){vp.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ip="closure_listenable_"+(1e6*Math.random()|0),sDe=0;function oDe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++sDe,this.fa=this.ia=!1}function rI(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function ZP(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function B5(t){const e={};for(const n in t)e[n]=t[n];return e}const j5="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $5(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<j5.length;s++)n=j5[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function iI(t){this.src=t,this.g={},this.h=0}function eM(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=k5(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(rI(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function tM(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}iI.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=tM(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new oDe(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var nM="closure_lm_"+(1e6*Math.random()|0),rM={};function G5(t,e,n,r,i){if(r&&r.once)return z5(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)G5(t,e[s],n,r,i);return null}return n=aM(n),t&&t[Ip]?t.O(e,n,_p(r)?!!r.capture:!!r,i):q5(t,e,n,!1,r,i)}function q5(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=_p(i)?!!i.capture:!!i,a=sM(t);if(a||(t[nM]=a=new iI(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function uDe(){const e=cDe;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Z0e||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(W5(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function z5(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)z5(t,e[s],n,r,i);return null}return n=aM(n),t&&t[Ip]?t.P(e,n,_p(r)?!!r.capture:!!r,i):q5(t,e,n,!0,r,i)}function H5(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)H5(t,e[s],n,r,i);else r=_p(r)?!!r.capture:!!r,n=aM(n),t&&t[Ip]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=tM(s=t.g[e],n,r,i))&&(rI(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=sM(t))&&(e=t.g[e.toString()],t=-1,e&&(t=tM(e,n,r,i)),(n=-1<t?e[t]:null)&&iM(n))}function iM(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[Ip])eM(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(W5(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=sM(e))?(eM(n,t),0==n.h&&(n.src=null,e[nM]=null)):rI(t)}}}function W5(t){return t in rM?rM[t]:rM[t]="on"+t}function cDe(t,e){if(t.fa)t=!0;else{e=new vp(e,this);var n=t.listener,r=t.la||t.src;t.ia&&iM(t),t=n.call(r,e)}return t}function sM(t){return(t=t[nM])instanceof iI?t:null}var oM="__closure_events_fn_"+(1e9*Math.random()>>>0);function aM(t){return"function"==typeof t?t:(t[oM]||(t[oM]=function(e){return t.handleEvent(e)}),t[oM])}function ln(){qo.call(this),this.i=new iI(this),this.S=this,this.J=null}function Sn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Gn(e,t);else if(e instanceof Gn)e.target=e.target||t;else{var i=e;$5(e=new Gn(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=sI(o,r,!0,e)&&i}if(i=sI(o=e.g=t,r,!0,e)&&i,i=sI(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=sI(o=e.g=n[s],r,!1,e)&&i}function sI(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&eM(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}cn(ln,qo),ln.prototype[Ip]=!0,ln.prototype.removeEventListener=function(t,e,n,r){H5(this,t,e,n,r)},ln.prototype.N=function(){if(ln.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)rI(n[r]);delete t.g[e],t.h--}}this.J=null},ln.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},ln.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var uM=de.JSON.stringify;function dDe(){var t=cM;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var K5=new class lDe{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new fDe,t=>t.reset());class fDe{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function pDe(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function gDe(t){de.setTimeout(()=>{throw t},0)}let Ep,wp=!1,cM=new class hDe{constructor(){this.h=this.g=null}add(e,n){const r=K5.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},Q5=()=>{const t=de.Promise.resolve(void 0);Ep=()=>{t.then(mDe)}};var mDe=()=>{for(var t;t=dDe();){try{t.h.call(t.g)}catch(n){gDe(n)}var e=K5;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}wp=!1};function oI(t,e){ln.call(this),this.h=t||1,this.g=e||de,this.j=$n(this.qb,this),this.l=Date.now()}function lM(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function dM(t,e,n){if("function"==typeof t)n&&(t=$n(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=$n(t.handleEvent,t)}return 2147483647<Number(e)?-1:de.setTimeout(t,e||0)}function Y5(t){t.g=dM(()=>{t.g=null,t.i&&(t.i=!1,Y5(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}cn(oI,ln),(B=oI.prototype).ga=!1,B.T=null,B.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Sn(this,"tick"),this.ga&&(lM(this),this.start()))}},B.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},B.N=function(){oI.$.N.call(this),lM(this),delete this.g};class _De extends qo{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Y5(this)}N(){super.N(),this.g&&(de.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tp(t){qo.call(this),this.h=t,this.g={}}cn(Tp,qo);var X5=[];function J5(t,e,n,r){Array.isArray(n)||(n&&(X5[0]=n.toString()),n=X5);for(var i=0;i<n.length;i++){var s=G5(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Z5(t){ZP(t.g,function(e,n){this.g.hasOwnProperty(n)&&iM(e)},t),t.g={}}function aI(){this.g=!0}function ql(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function EDe(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return uM(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Tp.prototype.N=function(){Tp.$.N.call(this),Z5(this)},Tp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},aI.prototype.Ea=function(){this.g=!1},aI.prototype.info=function(){};var hu={},e6=null;function uI(){return e6=e6||new ln}function t6(t){Gn.call(this,hu.Ta,t)}function Dp(t){const e=uI();Sn(e,new t6(e))}function n6(t,e){Gn.call(this,hu.STAT_EVENT,t),this.stat=e}function ur(t){const e=uI();Sn(e,new n6(e,t))}function r6(t,e){Gn.call(this,hu.Ua,t),this.size=e}function Cp(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return de.setTimeout(function(){t()},e)}hu.Ta="serverreachability",cn(t6,Gn),hu.STAT_EVENT="statevent",cn(n6,Gn),hu.Ua="timingevent",cn(r6,Gn);var cI={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},i6={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function hM(){}function o6(){}hM.prototype.h=null;var gM,Ap={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function fM(){Gn.call(this,"d")}function pM(){Gn.call(this,"c")}function lI(){}function bp(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Tp(this),this.P=wDe,this.V=new oI(t=WP?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new a6}function a6(){this.i=null,this.g="",this.h=!1}cn(fM,Gn),cn(pM,Gn),cn(lI,hM),lI.prototype.g=function(){return new XMLHttpRequest},lI.prototype.i=function(){return{}},gM=new lI;var wDe=45e3,mM={},dI={};function _M(t,e,n){t.L=1,t.v=gI(Gs(e)),t.s=n,t.S=!0,u6(t,null)}function u6(t,e){t.G=Date.now(),Sp(t),t.A=Gs(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),y6(n.i,"t",r),t.C=0,n=t.l.J,t.h=new a6,t.g=$6(t.l,n?e:null,!t.s),0<t.O&&(t.M=new _De($n(t.Pa,t,t.g),t.O)),J5(t.U,t.g,"readystatechange",t.nb),e=t.I?B5(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Dp(),function yDe(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.W,t.s)}function c6(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.l.Ha}function l6(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=TDe(t,n),i==dI){4==e&&(t.o=4,ur(14),r=!1),ql(t.j,t.m,null,"[Incomplete Response]");break}if(i==mM){t.o=4,ur(15),ql(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}ql(t.j,t.m,i,null),yM(t,i)}c6(t)&&i!=dI&&i!=mM&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ur(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),CM(e),e.M=!0,ur(11))):(ql(t.j,t.m,n,"[Invalid Chunked Response]"),fu(t),xp(t))}function TDe(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?dI:(n=Number(e.substring(n,r)),isNaN(n)?mM:(r+=1)+n>e.length?dI:(e=e.slice(r,r+n),t.C=r+n,e))}function Sp(t){t.Y=Date.now()+t.P,d6(t,t.P)}function d6(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Cp($n(t.lb,t),e)}function hI(t){t.B&&(de.clearTimeout(t.B),t.B=null)}function xp(t){0==t.l.H||t.J||L6(t.l,t)}function fu(t){hI(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,lM(t.V),Z5(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function yM(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||vM(n.i,t)))if(!t.K&&vM(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break e;EI(n),vI(n)}DM(n),ur(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Cp($n(n.ib,n),6e3));if(1>=E6(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else gu(n,11)}else if((t.K||n.g==t)&&EI(n),!yp(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const l=c[3];null!=l&&(n.ra=l,n.l.info("VER="+n.ra));const d=c[4];null!=d&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(n.L=r=1.5*h,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(IM(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,rt(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=j6(r,r.J?r.pa:null,r.Y),o.K){w6(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.B&&(hI(a),Sp(a)),r.g=o}else F6(r);0<n.j.length&&II(n)}else"stop"!=c[0]&&"close"!=c[0]||gu(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?gu(n,7):TM(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Dp()}catch{}}function h6(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(eI(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function CDe(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(eI(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function DDe(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(eI(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(B=bp.prototype).setTimeout=function(t){this.P=t},B.nb=function(t){t=t.target;const e=this.M;e&&3==ns(t)?e.l():this.Pa(t)},B.Pa=function(t){try{if(t==this.g)e:{const l=ns(this.g);var e=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||WP||this.g&&(this.h.h||this.g.ja()||R6(this.g)))){this.J||4!=l||7==e||Dp(),hI(this);var n=this.g.da();this.ca=n;t:if(c6(this)){var r=R6(this.g);t="";var i=r.length,s=4==ns(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){fu(this),xp(this);var o="";break t}this.h.i=new de.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function vDe(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yp(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,ur(12),fu(this),xp(this);break e}ql(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yM(this,n)}this.S?(l6(this,l,o),WP&&this.i&&3==l&&(J5(this.U,this.V,"tick",this.mb),this.V.start())):(ql(this.j,this.m,o,null),yM(this,o)),4==l&&fu(this),this.i&&!this.J&&(4==l?L6(this.l,this):(this.i=!1,Sp(this)))}else(function GDe(t){const e={};t=(t.g&&2<=ns(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(yp(t[r]))continue;var n=pDe(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function aDe(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(r){return r.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,ur(12)):(this.o=0,ur(13)),fu(this),xp(this)}}}catch{}},B.mb=function(){if(this.g){var t=ns(this.g),e=this.g.ja();this.C<e.length&&(hI(this),l6(this,t,e),this.i&&4!=t&&Sp(this))}},B.cancel=function(){this.J=!0,fu(this)},B.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function IDe(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Dp(),ur(17)),fu(this),this.o=2,xp(this)):d6(this,this.Y-t)};var f6=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pu(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof pu){this.h=t.h,fI(this,t.j),this.s=t.s,this.g=t.g,pI(this,t.m),this.l=t.l;var e=t.i,n=new Mp;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),p6(this,n),this.o=t.o}else t&&(e=String(t).match(f6))?(this.h=!1,fI(this,e[1]||"",!0),this.s=Rp(e[2]||""),this.g=Rp(e[3]||"",!0),pI(this,e[4]),this.l=Rp(e[5]||"",!0),p6(this,e[6]||"",!0),this.o=Rp(e[7]||"")):(this.h=!1,this.i=new Mp(null,this.h))}function Gs(t){return new pu(t)}function fI(t,e,n){t.j=n?Rp(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function pI(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function p6(t,e,n){e instanceof Mp?(t.i=e,function MDe(t,e){e&&!t.j&&(zo(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(m6(this,r),y6(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Pp(e,RDe)),t.i=new Mp(e,t.h))}function rt(t,e,n){t.i.set(e,n)}function gI(t){return rt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Rp(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Pp(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,bDe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function bDe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}pu.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Pp(e,g6,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Pp(e,g6,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Pp(n,"/"==n.charAt(0)?xDe:SDe,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Pp(n,PDe)),t.join("")};var g6=/[#\/\?@]/g,SDe=/[#\?:]/g,xDe=/[#\?]/g,RDe=/[#\?@]/g,PDe=/#/g;function Mp(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function zo(t){t.g||(t.g=new Map,t.h=0,t.i&&function ADe(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function m6(t,e){zo(t),e=zl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function _6(t,e){return zo(t),e=zl(t,e),t.g.has(e)}function y6(t,e,n){m6(t,e),0<n.length&&(t.i=null,t.g.set(zl(t,e),zP(n)),t.h+=n.length)}function zl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function v6(t){this.l=t||kDe,t=de.PerformanceNavigationTiming?0<(t=de.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(de.g&&de.g.Ka&&de.g.Ka()&&de.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(B=Mp.prototype).add=function(t,e){zo(this),this.i=null,t=zl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},B.forEach=function(t,e){zo(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},B.ta=function(){zo(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},B.Z=function(t){zo(this);let e=[];if("string"==typeof t)_6(this,t)&&(e=e.concat(this.g.get(zl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},B.set=function(t,e){return zo(this),this.i=null,_6(this,t=zl(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},B.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},B.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var kDe=10;function I6(t){return!!t.h||!!t.g&&t.g.size>=t.j}function E6(t){return t.h?1:t.g?t.g.size:0}function vM(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function IM(t,e){t.g?t.g.add(e):t.h=e}function w6(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function T6(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return zP(t.i)}v6.prototype.cancel=function(){if(this.i=T6(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var ODe=class{stringify(t){return de.JSON.stringify(t,void 0)}parse(t){return de.JSON.parse(t,void 0)}};function FDe(){this.g=new ODe}function VDe(t,e,n){const r=n||"";try{h6(t,function(i,s){let o=i;_p(i)&&(o=uM(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function mI(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Np(t){this.l=t.fc||null,this.j=t.ob||!1}function _I(t,e){ln.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=EM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cn(Np,hM),Np.prototype.g=function(){return new _I(this.l,this.j)},Np.prototype.i=function(t){return function(){return t}}({}),cn(_I,ln);var EM=0;function D6(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function kp(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Op(t)}function Op(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(B=_I.prototype).open=function(t,e){if(this.readyState!=EM)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Op(this)},B.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||de).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},B.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kp(this)),this.readyState=EM},B.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Op(this)),this.g&&(this.readyState=3,Op(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof de.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;D6(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},B.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?kp(this):Op(this),3==this.readyState&&D6(this)}},B.Za=function(t){this.g&&(this.response=this.responseText=t,kp(this))},B.Ya=function(t){this.g&&(this.response=t,kp(this))},B.ka=function(){this.g&&kp(this)},B.setRequestHeader=function(t,e){this.v.append(t,e)},B.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},B.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(_I.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var UDe=de.JSON.parse;function Ct(t){ln.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=C6,this.L=this.M=!1}cn(Ct,ln);var C6="",BDe=/^https?$/i,jDe=["POST","PUT"];function A6(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,b6(t),yI(t)}function b6(t){t.F||(t.F=!0,Sn(t,"complete"),Sn(t,"error"))}function S6(t){if(t.h&&typeof GP<"u"&&(!t.C[1]||4!=ns(t)||2!=t.da()))if(t.v&&4==ns(t))dM(t.La,0,t);else if(Sn(t,"readystatechange"),4==ns(t)){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.I).match(f6)[1]||null;!i&&de.self&&de.self.location&&(i=de.self.location.protocol.slice(0,-1)),r=!BDe.test(i?i.toLowerCase():"")}n=r}if(n)Sn(t,"complete"),Sn(t,"success");else{t.m=6;try{var s=2<ns(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",b6(t)}}finally{yI(t)}}}function yI(t,e){if(t.g){x6(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Sn(t,"ready");try{n.onreadystatechange=r}catch{}}}function x6(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(de.clearTimeout(t.A),t.A=null)}function ns(t){return t.g?t.g.readyState:0}function R6(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case C6:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function P6(t){let e="";return ZP(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function wM(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=P6(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):rt(t,e,n))}function Fp(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function M6(t){this.Ga=0,this.j=[],this.l=new aI,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Fp("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Fp("baseRetryDelayMs",5e3,t),this.hb=Fp("retryDelaySeedMs",1e4,t),this.eb=Fp("forwardChannelMaxRetries",2,t),this.xa=Fp("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new v6(t&&t.concurrentRequestLimit),this.Ja=new FDe,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function TM(t){if(N6(t),3==t.H){var e=t.W++,n=Gs(t.I);if(rt(n,"SID",t.K),rt(n,"RID",e),rt(n,"TYPE","terminate"),Vp(t,n),(e=new bp(t,t.l,e)).L=2,e.v=gI(Gs(n)),n=!1,de.navigator&&de.navigator.sendBeacon)try{n=de.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&de.Image&&((new Image).src=e.v,n=!0),n||(e.g=$6(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Sp(e)}B6(t)}function vI(t){t.g&&(CM(t),t.g.cancel(),t.g=null)}function N6(t){vI(t),t.u&&(de.clearTimeout(t.u),t.u=null),EI(t),t.i.cancel(),t.m&&("number"==typeof t.m&&de.clearTimeout(t.m),t.m=null)}function II(t){if(!I6(t.i)&&!t.m){t.m=!0;var e=t.Na;Ep||Q5(),wp||(Ep(),wp=!0),cM.add(e,t),t.C=0}}function k6(t,e){var n;n=e?e.m:t.W++;const r=Gs(t.I);rt(r,"SID",t.K),rt(r,"RID",n),rt(r,"AID",t.V),Vp(t,r),t.o&&t.s&&wM(r,t.o,t.s),n=new bp(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=O6(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),IM(t.i,n),_M(n,r,e)}function Vp(t,e){t.na&&ZP(t.na,function(n,r){rt(e,r,n)}),t.h&&h6({},function(n,r){rt(e,r,n)})}function O6(t,e,n){n=Math.min(t.j.length,n);var r=t.h?$n(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].g;const l=i[u].map;if(c-=s,0>c)s=Math.max(0,i[u].g-100),a=!1;else try{VDe(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function F6(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ep||Q5(),wp||(Ep(),wp=!0),cM.add(e,t),t.A=0}}function DM(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=Cp($n(t.Ma,t),U6(t,t.A)),t.A++,0))}function CM(t){null!=t.B&&(de.clearTimeout(t.B),t.B=null)}function V6(t){t.g=new bp(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Gs(t.wa);rt(e,"RID","rpc"),rt(e,"SID",t.K),rt(e,"AID",t.V),rt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&rt(e,"TO",t.qa),rt(e,"TYPE","xmlhttp"),Vp(t,e),t.o&&t.s&&wM(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=gI(Gs(e)),n.s=null,n.S=!0,u6(n,t)}function EI(t){null!=t.v&&(de.clearTimeout(t.v),t.v=null)}function L6(t,e){var n=null;if(t.g==e){EI(t),CM(t),t.g=null;var r=2}else{if(!vM(t.i,e))return;n=e.F,w6(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;Sn(r=uI(),new r6(r,n)),II(t)}else F6(t);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function qDe(t,e){return!(E6(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=Cp($n(t.Na,t,e),U6(t,t.C)),t.C++,0)))}(t,e)||2==r&&DM(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:gu(t,5);break;case 4:gu(t,10);break;case 3:gu(t,6);break;default:gu(t,2)}}function U6(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function gu(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=$n(t.pb,t);n||(n=new pu("//www.google.com/images/cleardot.gif"),de.location&&"http"==de.location.protocol||fI(n,"https"),gI(n)),function LDe(t,e){const n=new aI;if(de.Image){const r=new Image;r.onload=tI(mI,n,r,"TestLoadImage: loaded",!0,e),r.onerror=tI(mI,n,r,"TestLoadImage: error",!1,e),r.onabort=tI(mI,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=tI(mI,n,r,"TestLoadImage: timeout",!1,e),de.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else ur(2);t.H=0,t.h&&t.h.za(e),B6(t),N6(t)}function B6(t){if(t.H=0,t.ma=[],t.h){const e=T6(t.i);(0!=e.length||0!=t.j.length)&&(O5(t.ma,e),O5(t.ma,t.j),t.i.i.length=0,zP(t.j),t.j.length=0),t.h.ya()}}function j6(t,e,n){var r=n instanceof pu?Gs(n):new pu(n);if(""!=r.g)e&&(r.g=e+"."+r.g),pI(r,r.m);else{var i=de.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new pu(null);r&&fI(s,r),e&&(s.g=e),i&&pI(s,i),n&&(s.l=n),r=s}return e=t.Da,(n=t.F)&&e&&rt(r,n,e),rt(r,"VER",t.ra),Vp(t,r),r}function $6(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ct(n&&t.Ha&&!t.va?new Np({ob:!0}):t.va)).Oa(t.J),e}function G6(){}function wI(){if(Gl&&!(10<=Number(rDe)))throw Error("Environmental error: no available transport.")}function zr(t,e){ln.call(this),this.g=new M6(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!yp(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!yp(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Hl(this)}function q6(t){fM.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function z6(){pM.call(this),this.status=1}function Hl(t){this.g=t}function Di(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function AM(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=t.g[3],o=(e=t.g[0])+(s^(n=t.g[1])&((i=t.g[2])^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function Be(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(B=Ct.prototype).Oa=function(t){this.M=t},B.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():gM.g(),this.C=function s6(t){return t.h||(t.h=t.i())}(this.u?this.u:gM),this.g.onreadystatechange=$n(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void A6(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=de.FormData&&t instanceof de.FormData,!(0<=k5(jDe,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{x6(this),0<this.B&&((this.L=function $De(t){return Gl&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$n(this.ua,this)):this.A=dM(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){A6(this,s)}},B.ua=function(){typeof GP<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Sn(this,"timeout"),this.abort(8))},B.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Sn(this,"complete"),Sn(this,"abort"),yI(this))},B.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yI(this,!0)),Ct.$.N.call(this)},B.La=function(){this.s||(this.G||this.v||this.l?S6(this):this.kb())},B.kb=function(){S6(this)},B.isActive=function(){return!!this.g},B.da=function(){try{return 2<ns(this)?this.g.status:-1}catch{return-1}},B.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},B.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),UDe(e)}},B.Ia=function(){return this.m},B.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(B=M6.prototype).ra=8,B.H=1,B.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new bp(this,this.l,t);let s=this.s;if(this.U&&(s?(s=B5(s),$5(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=O6(this,i,e),rt(n=Gs(this.I),"RID",t),rt(n,"CVER",22),this.F&&rt(n,"X-HTTP-Session-Id",this.F),Vp(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(P6(s)))+"&"+e:this.o&&wM(n,this.o,s)),IM(this.i,i),this.bb&&rt(n,"TYPE","init"),this.P?(rt(n,"$req",e),rt(n,"SID","null"),i.aa=!0,_M(i,n,null)):_M(i,n,e),this.H=2}}else 3==this.H&&(t?k6(this,t):0==this.j.length||I6(this.i)||k6(this))},B.Ma=function(){if(this.u=null,V6(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Cp($n(this.jb,this),t)}},B.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ur(10),vI(this),V6(this))},B.ib=function(){null!=this.v&&(this.v=null,vI(this),DM(this),ur(19))},B.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ur(2)):(this.l.info("Failed to ping google.com"),ur(1))},B.isActive=function(){return!!this.h&&this.h.isActive(this)},(B=G6.prototype).Ba=function(){},B.Aa=function(){},B.za=function(){},B.ya=function(){},B.isActive=function(){return!0},B.Va=function(){},wI.prototype.g=function(t,e){return new zr(t,e)},cn(zr,ln),zr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ur(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=j6(t,null,t.Y),II(t)},zr.prototype.close=function(){TM(this.g)},zr.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=uM(t),t=n);e.j.push(new class{constructor(t,e){this.g=t,this.map=e}}(e.fb++,t)),3==e.H&&II(e)},zr.prototype.N=function(){this.g.h=null,delete this.j,TM(this.g),delete this.g,zr.$.N.call(this)},cn(q6,fM),cn(z6,pM),cn(Hl,G6),Hl.prototype.Ba=function(){Sn(this.g,"a")},Hl.prototype.Aa=function(t){Sn(this.g,new q6(t))},Hl.prototype.za=function(t){Sn(this.g,new z6)},Hl.prototype.ya=function(){Sn(this.g,"b")},cn(Di,function zDe(){this.blockSize=-1}),Di.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Di.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)AM(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){AM(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){AM(this,r),i=0;break}}this.h=i,this.i+=e},Di.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var HDe={};function bM(t){return-128<=t&&128>t?function eDe(t,e){var n=HDe;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(e){return new Be([0|e],0>e?-1:0)}):new Be([0|t],0>t?-1:0)}function rs(t){if(isNaN(t)||!isFinite(t))return Wl;if(0>t)return xn(rs(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=SM;return new Be(e,0)}var SM=4294967296,Wl=bM(0),xM=bM(1),W6=bM(16777216);function qs(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function ui(t){return-1==t.h}function xn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Be(n,~t.h).add(xM)}function TI(t,e){return t.add(xn(e))}function DI(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Lp(t,e){this.g=t,this.h=e}function CI(t,e){if(qs(e))throw Error("division by zero");if(qs(t))return new Lp(Wl,Wl);if(ui(t))return e=CI(xn(t),e),new Lp(xn(e.g),xn(e.h));if(ui(e))return e=CI(t,xn(e)),new Lp(xn(e.g),e.h);if(30<t.g.length){if(ui(t)||ui(e))throw Error("slowDivide_ only works with positive integers.");for(var n=xM,r=e;0>=r.X(t);)n=K6(n),r=K6(r);var i=Kl(n,1),s=Kl(r,1);for(r=Kl(r,2),n=Kl(n,2);!qs(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Kl(r,1),n=Kl(n,1)}return e=TI(t,i.R(e)),new Lp(i,e)}for(i=Wl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=rs(n)).R(e);ui(o)||0<o.X(t);)o=(s=rs(n-=r)).R(e);qs(s)&&(s=xM),i=i.add(s),t=TI(t,o)}return new Lp(i,t)}function K6(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Be(n,t.h)}function Kl(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Be(i,t.h)}(B=Be.prototype).ea=function(){if(ui(this))return-xn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:SM+r)*e,e*=SM}return t},B.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(qs(this))return"0";if(ui(this))return"-"+xn(this).toString(t);for(var e=rs(Math.pow(t,6)),n=this,r="";;){var i=CI(n,e).g,s=((0<(n=TI(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(qs(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},B.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},B.X=function(t){return ui(t=TI(this,t))?-1:qs(t)?0:1},B.abs=function(){return ui(this)?xn(this):this},B.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,n[i]=(o&=65535)<<16|(s&=65535)}return new Be(n,-2147483648&n[n.length-1]?-1:0)},B.R=function(t){if(qs(this)||qs(t))return Wl;if(ui(this))return ui(t)?xn(this).R(xn(t)):xn(xn(this).R(t));if(ui(t))return xn(this.R(xn(t)));if(0>this.X(W6)&&0>t.X(W6))return rs(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,u=65535&t.D(i);n[2*r+2*i]+=o*u,DI(n,2*r+2*i),n[2*r+2*i+1]+=s*u,DI(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,DI(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,DI(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Be(n,0)},B.gb=function(t){return CI(this,t).h},B.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Be(n,this.h&t.h)},B.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Be(n,this.h|t.h)},B.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Be(n,this.h^t.h)},wI.prototype.createWebChannel=wI.prototype.g,zr.prototype.send=zr.prototype.u,zr.prototype.open=zr.prototype.m,zr.prototype.close=zr.prototype.close,cI.NO_ERROR=0,cI.TIMEOUT=8,cI.HTTP_ERROR=6,i6.COMPLETE="complete",o6.EventType=Ap,Ap.OPEN="a",Ap.CLOSE="b",Ap.ERROR="c",Ap.MESSAGE="d",ln.prototype.listen=ln.prototype.O,Ct.prototype.listenOnce=Ct.prototype.P,Ct.prototype.getLastError=Ct.prototype.Sa,Ct.prototype.getLastErrorCode=Ct.prototype.Ia,Ct.prototype.getStatus=Ct.prototype.da,Ct.prototype.getResponseJson=Ct.prototype.Wa,Ct.prototype.getResponseText=Ct.prototype.ja,Ct.prototype.send=Ct.prototype.ha,Ct.prototype.setWithCredentials=Ct.prototype.Oa,Di.prototype.digest=Di.prototype.l,Di.prototype.reset=Di.prototype.reset,Di.prototype.update=Di.prototype.j,Be.prototype.add=Be.prototype.add,Be.prototype.multiply=Be.prototype.R,Be.prototype.modulo=Be.prototype.gb,Be.prototype.compare=Be.prototype.X,Be.prototype.toNumber=Be.prototype.ea,Be.prototype.toString=Be.prototype.toString,Be.prototype.getBits=Be.prototype.D,Be.fromNumber=rs,Be.fromString=function H6(t,e){if(0==t.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return xn(H6(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=rs(Math.pow(e,8)),r=Wl,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=rs(Math.pow(e,s)),r=r.R(s).add(rs(o))):r=(r=r.R(n)).add(rs(o))}return r};var WDe=Ti.createWebChannelTransport=function(){return new wI},KDe=Ti.getStatEventTarget=function(){return uI()},RM=Ti.ErrorCode=cI,QDe=Ti.EventType=i6,YDe=Ti.Event=hu,Q6=Ti.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},XDe=Ti.FetchXmlHttpFactory=Np,AI=Ti.WebChannel=o6,JDe=Ti.XhrIo=Ct,ZDe=Ti.Md5=Di,Ql=Ti.Integer=Be;const Y6="@firebase/firestore";class dn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");let Yl="9.23.0";const Ho=new Io("@firebase/firestore");function PM(){return Ho.logLevel}function M(t,...e){if(Ho.logLevel<=_e.DEBUG){const n=e.map(MM);Ho.debug(`Firestore (${Yl}): ${t}`,...n)}}function Ot(t,...e){if(Ho.logLevel<=_e.ERROR){const n=e.map(MM);Ho.error(`Firestore (${Yl}): ${t}`,...n)}}function Ci(t,...e){if(Ho.logLevel<=_e.WARN){const n=e.map(MM);Ho.warn(`Firestore (${Yl}): ${t}`,...n)}}function MM(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function H(t="Unexpected state"){const e=`FIRESTORE (${Yl}) INTERNAL ASSERTION FAILED: `+t;throw Ot(e),new Error(e)}function Q(t,e){t||H()}function L(t,e){return t}const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class S extends Er{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class X6{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eCe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dn.UNAUTHENTICATED))}shutdown(){}}class tCe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nCe{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new Jt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Jt,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(_(function*(){yield c.promise,yield s(r.currentUser)}))},u=c=>{M("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(M("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Jt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(M("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Q("string"==typeof r.accessToken),new X6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Q(null===e||"string"==typeof e),new dn(e)}}class rCe{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class iCe{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new rCe(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class J6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sCe{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=s=>{null!=s.error&&M("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,M("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{M("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):M("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Q("string"==typeof n.token),this.T=n.token,new J6(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function oCe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Z6{static A(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=oCe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function Xl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class gt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new S(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new S(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new S(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new S(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new gt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new gt(0,0))}static max(){return new X(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Up{constructor(e,n,r){void 0===n?n=0:n>e.length&&H(),void 0===r?r=e.length-n:r>e.length-n&&H(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Up.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Up?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends Up{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new S(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const aCe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Up{construct(e,n,r){return new Ft(e,n,r)}static isValidIdentifier(e){return aCe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ft(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new S(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new S(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new S(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new S(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}class V{constructor(e){this.path=e}static fromPath(e){return new V(Se.fromString(e))}static fromName(e){return new V(Se.fromString(e).popFirst(5))}static empty(){return new V(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Se.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new V(new Se(e.slice()))}}function nW(t){return new Hr(t.readTime,t.key,-1)}class Hr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hr(X.min(),V.empty(),-1)}static max(){return new Hr(X.max(),V.empty(),-1)}}function kM(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=V.comparator(t.documentKey,e.documentKey),0!==n?n:oe(t.largestBatchId,e.largestBatchId))}const rW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lCe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Wo(t){return OM.apply(this,arguments)}function OM(){return OM=_(function*(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==rW)throw t;M("LocalStore","Unexpectedly lost primary lease")}),OM.apply(this,arguments)}class E{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new E((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof E?n:E.resolve(n)}catch(n){return E.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):E.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):E.reject(n)}static resolve(e){return new E((n,r)=>{n(e)})}static reject(e){return new E((n,r)=>{r(e)})}static waitFor(e){return new E((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=E.resolve(!1);for(const r of e)n=n.next(i=>i?E.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new E((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new E((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}function Ko(t){return"IndexedDbTransactionError"===t.name}let Wr=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ut&&this.ut(n),n}}return t.ct=-1,t})();function $p(t){return null==t}function Gp(t){return 0===t&&1/t==-1/0}function hW(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fW(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class et{constructor(e,n){this.comparator=e,this.root=n||Rn.EMPTY}insert(e,n){return new et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new PI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new PI(this.root,e,this.comparator,!1)}getReverseIterator(){return new PI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new PI(this.root,e,this.comparator,!0)}}class PI{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Rn.RED,this.left=i??Rn.EMPTY,this.right=s??Rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Rn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Rn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();const e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}}Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1,Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Rn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class it{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pW(this.data.getIterator())}getIteratorFrom(e){return new pW(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new it(this.comparator);return n.data=e,n}}class pW{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class br{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new br([])}unionWith(e){let n=new it(Ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new br(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class gW extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new gW("Invalid base64 string: "+i):i}}(e);return new Zt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const NCe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yo(t){if(Q(!!t),"string"==typeof t){let e=0;const n=NCe.exec(t);if(Q(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(t.seconds),nanos:At(t.nanos)}}function At(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function zs(t){return"string"==typeof t?Zt.fromBase64String(t):Zt.fromUint8Array(t)}function MI(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function NI(t){const e=t.mapValue.fields.__previous_value__;return MI(e)?NI(e):e}function qp(t){const e=Yo(t.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}class kCe{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class yu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new yu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}const Xo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Jo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?MI(t)?4:vW(t)?9007199254740991:10:H()}function ss(t,e){if(t===e)return!0;const n=Jo(t);if(n!==Jo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qp(t).isEqual(qp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Yo(r.timestampValue),o=Yo(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,zs(t.bytesValue).isEqual(zs(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return At(r.geoPointValue.latitude)===At(i.geoPointValue.latitude)&&At(r.geoPointValue.longitude)===At(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return At(r.integerValue)===At(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=At(r.doubleValue),o=At(i.doubleValue);return s===o?Gp(s)===Gp(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Xl(t.arrayValue.values||[],e.arrayValue.values||[],ss);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(hW(s)!==hW(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!ss(s[a],o[a])))return!1;return!0}(t,e);default:return H()}var i}function zp(t,e){return void 0!==(t.values||[]).find(n=>ss(n,e))}function Zo(t,e){if(t===e)return 0;const n=Jo(t),r=Jo(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=At(i.integerValue||i.doubleValue),a=At(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return mW(t.timestampValue,e.timestampValue);case 4:return mW(qp(t),qp(e));case 5:return oe(t.stringValue,e.stringValue);case 6:return function(i,s){const o=zs(i),a=zs(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=oe(o[u],a[u]);if(0!==c)return c}return oe(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=oe(At(i.latitude),At(s.latitude));return 0!==o?o:oe(At(i.longitude),At(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const c=Zo(o[u],a[u]);if(c)return c}return oe(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Xo.mapValue&&s===Xo.mapValue)return 0;if(i===Xo.mapValue)return 1;if(s===Xo.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let l=0;l<a.length&&l<c.length;++l){const d=oe(a[l],c[l]);if(0!==d)return d;const h=Zo(o[a[l]],u[c[l]]);if(0!==h)return h}return oe(a.length,c.length)}(t.mapValue,e.mapValue);default:throw H()}}function mW(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return oe(t,e);const n=Yo(t),r=Yo(e),i=oe(n.seconds,r.seconds);return 0!==i?i:oe(n.nanos,r.nanos)}function Zl(t){return LM(t)}function LM(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Yo(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?zs(t.bytesValue).toBase64():"referenceValue"in t?V.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=LM(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${LM(r.fields[a])}`;return s+"}"}(t.mapValue):H();var e}function vu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function UM(t){return!!t&&"integerValue"in t}function Hp(t){return!!t&&"arrayValue"in t}function _W(t){return!!t&&"nullValue"in t}function yW(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function FI(t){return!!t&&"mapValue"in t}function Wp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Qo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Wp(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wp(t.arrayValue.values[n]);return e}return Object.assign({},t)}function vW(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!FI(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wp(n)}setAll(e){let n=Ft.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Wp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());FI(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ss(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];FI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Qo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Pn(Wp(this.value))}}function wW(t){const e=[];return Qo(t.fields,(n,r)=>{const i=new Ft([n]);if(FI(r)){const s=wW(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new br(e)}class st{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new st(e,0,X.min(),X.min(),X.min(),Pn.empty(),0)}static newFoundDocument(e,n,r,i){return new st(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new st(e,2,n,X.min(),X.min(),Pn.empty(),0)}static newUnknownDocument(e,n){return new st(e,3,n,X.min(),X.min(),Pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof st&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new st(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ea{constructor(e,n){this.position=e,this.inclusive=n}}function TW(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?V.comparator(V.fromName(o.referenceValue),n.key):Zo(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function DW(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ss(t.position[n],e.position[n]))return!1;return!0}class ed{constructor(e,n="asc"){this.field=e,this.dir=n}}function VCe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class CW{}class we extends CW{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new LCe(e,n,r):"array-contains"===n?new jCe(e,r):"in"===n?new PW(e,r):"not-in"===n?new $Ce(e,r):"array-contains-any"===n?new GCe(e,r):new we(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new UCe(e,r):new BCe(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Zo(n,this.value)):null!==n&&Jo(this.value)===Jo(n)&&this.matchesComparison(Zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class je extends CW{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new je(e,n)}matches(e){return td(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return null!==e?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function td(t){return"and"===t.op}function jM(t){return function AW(t){for(const e of t.filters)if(e instanceof je)return!1;return!0}(t)&&td(t)}function $M(t){if(t instanceof we)return t.field.canonicalString()+t.op.toString()+Zl(t.value);if(jM(t))return t.filters.map(e=>$M(e)).join(",");{const e=t.filters.map(n=>$M(n)).join(",");return`${t.op}(${e})`}}function bW(t,e){return t instanceof we?(n=t,(r=e)instanceof we&&n.op===r.op&&n.field.isEqual(r.field)&&ss(n.value,r.value)):t instanceof je?function(n,r){return r instanceof je&&n.op===r.op&&n.filters.length===r.filters.length&&n.filters.reduce((i,s,o)=>i&&bW(s,r.filters[o]),!0)}(t,e):void H();var n,r}function xW(t){return t instanceof we?function(e){return`${e.field.canonicalString()} ${e.op} ${Zl(e.value)}`}(t):t instanceof je?function(e){return e.op.toString()+" {"+e.getFilters().map(xW).join(" ,")+"}"}(t):"Filter"}class LCe extends we{constructor(e,n,r){super(e,n,r),this.key=V.fromName(r.referenceValue)}matches(e){const n=V.comparator(e.key,this.key);return this.matchesComparison(n)}}class UCe extends we{constructor(e,n){super(e,"in",n),this.keys=RW(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class BCe extends we{constructor(e,n){super(e,"not-in",n),this.keys=RW(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function RW(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>V.fromName(r.referenceValue))}class jCe extends we{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Hp(n)&&zp(n.arrayValue,this.value)}}class PW extends we{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&zp(this.value.arrayValue,n)}}class $Ce extends we{constructor(e,n){super(e,"not-in",n)}matches(e){if(zp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!zp(this.value.arrayValue,n)}}class GCe extends we{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Hp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zp(this.value.arrayValue,r))}}class qCe{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function GM(t,e=null,n=[],r=[],i=null,s=null,o=null){return new qCe(t,e,n,r,i,s,o)}function Iu(t){const e=L(t);if(null===e.dt){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$M(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),$p(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zl(r)).join(",")),e.dt=n}return e.dt}function Kp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!VCe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bW(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!DW(t.startAt,e.startAt)&&DW(t.endAt,e.endAt)}function VI(t){return V.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Hs{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.wt=null,this._t=null}}function nd(t){return new Hs(t)}function OW(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function qM(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function UI(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}function zM(t){return null!==t.collectionGroup}function Eu(t){const e=L(t);if(null===e.wt){e.wt=[];const n=UI(e),r=qM(e);if(null!==n&&null===r)n.isKeyField()||e.wt.push(new ed(n)),e.wt.push(new ed(Ft.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new ed(Ft.keyField(),s))}}}return e.wt}function cr(t){const e=L(t);if(!e._t)if("F"===e.limitType)e._t=GM(e.path,e.collectionGroup,Eu(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Eu(e))n.push(new ed(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new ea(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ea(e.startAt.position,e.startAt.inclusive):null;e._t=GM(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function HM(t,e){e.getFirstInequalityField(),UI(t);const n=t.filters.concat([e]);return new Hs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function BI(t,e,n){return new Hs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qp(t,e){return Kp(cr(t),cr(e))&&t.limitType===e.limitType}function FW(t){return`${Iu(cr(t))}|lt:${t.limitType}`}function WM(t){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>xW(r)).join(", ")}]`),$p(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zl(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zl(r)).join(",")),`Target(${n})`}(cr(t))}; limitType=${t.limitType})`}function Yp(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):V.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Eu(n))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(i,s,o){const a=TW(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Eu(n),r)||n.endAt&&!function(i,s,o){const a=TW(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Eu(n),r)));var n,r}function LW(t){return(e,n)=>{let r=!1;for(const i of Eu(t)){const s=zCe(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function zCe(t,e,n){const r=t.field.isKeyField()?V.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return null!==a&&null!==u?Zo(a,u):H()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}class Ws{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return fW(this.inner)}size(){return this.innerSize}}const HCe=new et(V.comparator);function Sr(){return HCe}const UW=new et(V.comparator);function Xp(...t){let e=UW;for(const n of t)e=e.insert(n.key,n);return e}function BW(t){let e=UW;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function os(){return Jp()}function jW(){return Jp()}function Jp(){return new Ws(t=>t.toString(),(t,e)=>t.isEqual(e))}const WCe=new et(V.comparator),KCe=new it(V.comparator);function ge(...t){let e=KCe;for(const n of t)e=e.add(n);return e}const QCe=new it(oe);function $W(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gp(e)?"-0":e}}function GW(t){return{integerValue:""+t}}function qW(t,e){return function sW(t){return"number"==typeof t&&Number.isInteger(t)&&!Gp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?GW(e):$W(t,e)}class jI{constructor(){this._=void 0}}function YCe(t,e,n){return t instanceof rd?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&MI(i)&&(i=NI(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof wu?HW(t,e):t instanceof Tu?WW(t,e):function(r,i){const s=zW(r,i),o=KW(s)+KW(r.gt);return UM(s)&&UM(r.gt)?GW(o):$W(r.serializer,o)}(t,e)}function XCe(t,e,n){return t instanceof wu?HW(t,e):t instanceof Tu?WW(t,e):n}function zW(t,e){return t instanceof id?UM(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null;var r,n}class rd extends jI{}class wu extends jI{constructor(e){super(),this.elements=e}}function HW(t,e){const n=QW(e);for(const r of t.elements)n.some(i=>ss(i,r))||n.push(r);return{arrayValue:{values:n}}}class Tu extends jI{constructor(e){super(),this.elements=e}}function WW(t,e){let n=QW(e);for(const r of t.elements)n=n.filter(i=>!ss(i,r));return{arrayValue:{values:n}}}class id extends jI{constructor(e,n){super(),this.serializer=e,this.gt=n}}function KW(t){return At(t.integerValue||t.doubleValue)}function QW(t){return Hp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class ZCe{constructor(e,n){this.version=e,this.transformResults=n}}class lt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new lt}static exists(e){return new lt(void 0,e)}static updateTime(e){return new lt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $I(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class GI{}function YW(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new od(t.key,lt.none()):new sd(t.key,t.data,lt.none());{const n=t.data,r=Pn.empty();let i=new it(Ft.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ks(t.key,r,new br(i.toArray()),lt.none())}}function eAe(t,e,n){t instanceof sd?function(r,i,s){const o=r.value.clone(),a=ZW(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Ks?function(r,i,s){if(!$I(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=ZW(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(JW(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function eg(t,e,n,r){return t instanceof sd?function(i,s,o,a){if(!$I(i.precondition,s))return o;const u=i.value.clone(),c=eK(i.fieldTransforms,a,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ks?function(i,s,o,a){if(!$I(i.precondition,s))return o;const u=eK(i.fieldTransforms,a,s),c=s.data;return c.setAll(JW(i)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(l=>l.field))}(t,e,n,r):(o=n,$I(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function tAe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=zW(r.transform,i||null);null!=s&&(null===n&&(n=Pn.empty()),n.set(r.field,s))}return n||null}function XW(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===r||n&&r&&Xl(n,r,(i,s)=>function JCe(t,e){return t.field.isEqual(e.field)&&(r=e.transform,(n=t.transform)instanceof wu&&r instanceof wu||n instanceof Tu&&r instanceof Tu?Xl(n.elements,r.elements,ss):n instanceof id&&r instanceof id?ss(n.gt,r.gt):n instanceof rd&&r instanceof rd);var n,r}(i,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}class sd extends GI{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ks extends GI{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function JW(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ZW(t,e,n){const r=new Map;Q(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,XCe(o,a,n[i]))}return r}function eK(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,YCe(s,o,e))}return r}class od extends GI{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QM extends GI{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class YM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&eAe(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=eg(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=eg(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jW();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=YW(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Xl(this.mutations,e.mutations,(n,r)=>XW(n,r))&&Xl(this.baseMutations,e.baseMutations,(n,r)=>XW(n,r))}}class XM{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Q(e.mutations.length===r.length);let i=WCe;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new XM(e,n,r,i)}}class JM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class rAe{constructor(e,n){this.count=e,this.unchangedNames=n}}var qt,xe;function nK(t){if(void 0===t)return Ot("GRPC error has no .code"),D.UNKNOWN;switch(t){case qt.OK:return D.OK;case qt.CANCELLED:return D.CANCELLED;case qt.UNKNOWN:return D.UNKNOWN;case qt.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case qt.INTERNAL:return D.INTERNAL;case qt.UNAVAILABLE:return D.UNAVAILABLE;case qt.UNAUTHENTICATED:return D.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case qt.NOT_FOUND:return D.NOT_FOUND;case qt.ALREADY_EXISTS:return D.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return D.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case qt.ABORTED:return D.ABORTED;case qt.OUT_OF_RANGE:return D.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return D.UNIMPLEMENTED;case qt.DATA_LOSS:return D.DATA_LOSS;default:return H()}}(xe=qt||(qt={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";class ZM{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return qI}static getOrCreateInstance(){return null===qI&&(qI=new ZM),qI}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let qI=null;const iAe=new Ql([4294967295,4294967295],0);function iK(t){const e=function rK(){return new TextEncoder}().encode(t),n=new ZDe;return n.update(e),new Uint8Array(n.digest())}function sK(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ql([n,r],0),new Ql([i,s],0)]}class eN{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new tg(`Invalid padding: ${n}`);if(r<0)throw new tg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new tg(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new tg(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Ql.fromNumber(this.It)}Et(e,n,r){let i=e.add(n.multiply(Ql.fromNumber(r)));return 1===i.compare(iAe)&&(i=new Ql([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const n=iK(e),[r,i]=sK(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new eN(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.It)return;const n=iK(e),[r,i]=sK(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class tg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ng{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,rg.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ng(X.min(),i,new et(oe),Sr(),ge())}}class rg{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rg(r,n,ge(),ge(),ge())}}class zI{constructor(e,n,r,i){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=i}}class oK{constructor(e,n){this.targetId=e,this.Vt=n}}class aK{constructor(e,n,r=Zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class uK{constructor(){this.St=0,this.Dt=lK(),this.Ct=Zt.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ge(),n=ge(),r=ge();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:H()}}),new rg(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=lK()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class sAe{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Sr(),this.zt=cK(),this.Wt=new et(oe)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:H()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,i)=>{this.te(i)&&n(i)})}ne(e){var n;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if(VI(o))if(0===i){const a=new V(o.path);this.Yt(r,a,st.newNoDocument(a,X.min()))}else Q(1===i);else{const a=this.ie(r);if(a!==i){const u=this.re(e,a);0!==u&&(this.ee(r),this.Wt=this.Wt.insert(r,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(n=ZM.instance)||void 0===n||n.notifyOnExistenceFilterMismatch(function(c,l,d){var h,f,p,g,m,v;const y={localCacheCount:l,existenceFilterCount:d.count},w=d.unchangedNames;return w&&(y.bloomFilter={applied:0===c,hashCount:null!==(h=w?.hashCount)&&void 0!==h?h:0,bitmapLength:null!==(g=null===(p=null===(f=w?.bits)||void 0===f?void 0:f.bitmap)||void 0===p?void 0:p.length)&&void 0!==g?g:0,padding:null!==(v=null===(m=w?.bits)||void 0===m?void 0:m.padding)&&void 0!==v?v:0}),y}(u,a,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=r;let u,c;try{u=zs(s).toUint8Array()}catch(l){if(l instanceof gW)return Ci("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw l}try{c=new eN(u,o,a)}catch(l){return Ci(l instanceof tg?"BloomFilter error: ":"Applying bloom filter failed: ",l),1}return 0===c.It?1:i!==n-this.oe(e.targetId,c)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;n.vt(a)||(this.Yt(e,s,null),i++)}),i}ce(e){const n=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&VI(a.target)){const u=new V(a.target.path);null!==this.jt.get(u)||this.ae(o,u)||this.Yt(o,u,st.newNoDocument(u,e))}s.Mt&&(n.set(o,s.Ot()),s.Ft())}});let r=ge();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.se(u);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new ng(e,n,this.Wt,this.jt,r);return this.jt=Sr(),this.zt=cK(),this.Wt=new et(oe),i}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,n)?i.Bt(n,1):i.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new uK,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new it(oe),this.zt=this.zt.insert(e,n)),n}te(e){const n=null!==this.se(e);return n||M("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new uK),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function cK(){return new et(V.comparator)}function lK(){return new et(V.comparator)}const oAe={asc:"ASCENDING",desc:"DESCENDING"},aAe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uAe={and:"AND",or:"OR"};class cAe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tN(t,e){return t.useProto3Json||$p(e)?e:{value:e}}function ad(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dK(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lAe(t,e){return ad(t,e.toTimestamp())}function Vt(t){return Q(!!t),X.fromTimestamp(function(e){const n=Yo(e);return new gt(n.seconds,n.nanos)}(t))}function nN(t,e){return(n=t,new Se(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function hK(t){const e=Se.fromString(t);return Q(EK(e)),e}function ig(t,e){return nN(t.databaseId,e.path)}function as(t,e){const n=hK(e);if(n.get(1)!==t.databaseId.projectId)throw new S(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new S(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new V(pK(n))}function rN(t,e){return nN(t.databaseId,e)}function sg(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pK(t){return Q(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function gK(t,e,n){return{name:ig(t,e),fields:n.value.mapValue.fields}}function _K(t,e){return{documents:[rN(t,e.path)]}}function sN(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=rN(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=rN(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return IK(je.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(c=>{return{field:ta((l=c).field),direction:gAe(l.dir)};var l})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=tN(t,e.limit);var a,u;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt={before:!(u=e.endAt).inclusive,values:u.position}),n}function yK(t){let e=function fK(t){const e=hK(t);return 4===e.length?Se.emptyPath():pK(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Q(1===r);const l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(l){const d=vK(l);return d instanceof je&&jM(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(l=>{return new ed(ud((d=l).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;n.limit&&(a=function(l){let d;return d="object"==typeof l?l.value:l,$p(d)?null:d}(n.limit));let u=null;var l;n.startAt&&(u=new ea((l=n.startAt).values||[],!!l.before));let c=null;return n.endAt&&(c=function(l){return new ea(l.values||[],!l.before)}(n.endAt)),function kW(t,e,n,r,i,s,o,a){return new Hs(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",u,c)}function vK(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=ud(e.unaryFilter.field);return we.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=ud(e.unaryFilter.field);return we.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ud(e.unaryFilter.field);return we.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ud(e.unaryFilter.field);return we.create(s,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(t):void 0!==t.fieldFilter?function(e){return we.create(ud(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(e){return je.create(e.compositeFilter.filters.map(n=>vK(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return H()}}(e.compositeFilter.op))}(t):H()}function gAe(t){return oAe[t]}function mAe(t){return aAe[t]}function _Ae(t){return uAe[t]}function ta(t){return{fieldPath:t.canonicalString()}}function ud(t){return Ft.fromServerFormat(t.fieldPath)}function IK(t){return t instanceof we?function(e){if("=="===e.op){if(yW(e.value))return{unaryFilter:{field:ta(e.field),op:"IS_NAN"}};if(_W(e.value))return{unaryFilter:{field:ta(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(yW(e.value))return{unaryFilter:{field:ta(e.field),op:"IS_NOT_NAN"}};if(_W(e.value))return{unaryFilter:{field:ta(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ta(e.field),op:mAe(e.op),value:e.value}}}(t):t instanceof je?function(e){const n=e.getFilters().map(r=>IK(r));return 1===n.length?n[0]:{compositeFilter:{op:_Ae(e.op),filters:n}}}(t):H()}function yAe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function EK(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Qs{constructor(e,n,r,i,s=X.min(),o=X.min(),a=Zt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class wK{constructor(e){this.fe=e}}function oN(t){const e=yK({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?BI(e,e.limit,"L"):e}class bu{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(At(e.integerValue));else if("doubleValue"in e){const r=At(e.doubleValue);isNaN(r)?this.ye(n,13):(this.ye(n,15),Gp(r)?n.pe(0):n.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(n,20),"string"==typeof r?n.Ie(r):(n.Ie(`${r.seconds||""}`),n.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(zs(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(n,45),n.pe(r.latitude||0),n.pe(r.longitude||0)}else"mapValue"in e?vW(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):H()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const r=e.fields||{};this.ye(n,55);for(const i of Object.keys(r))this.Te(i,n),this.me(r[i],n)}Pe(e,n){const r=e.values||[];this.ye(n,50);for(const i of r)this.me(i,n)}ve(e,n){this.ye(n,37),V.fromName(e).path.forEach(r=>{this.ye(n,60),this.be(r,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}bu.Ve=new bu;class bAe{constructor(){this.rn=new hN}addToCollectionParentIndex(e,n){return this.rn.add(n),E.resolve()}getCollectionParents(e,n){return E.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return E.resolve()}deleteFieldIndex(e,n){return E.resolve()}getDocumentsMatchingTarget(e,n){return E.resolve(null)}getIndexType(e,n){return E.resolve(0)}getFieldIndexes(e,n){return E.resolve([])}getNextCollectionGroupToUpdate(e){return E.resolve(null)}getMinOffset(e,n){return E.resolve(Hr.min())}getMinOffsetFromCollectionGroup(e,n){return E.resolve(Hr.min())}updateCollectionGroup(e,n,r){return E.resolve()}updateIndexEntries(e,n){return E.resolve()}}class hN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new it(Se.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new it(Se.comparator)).toArray()}}new Uint8Array(0);class zn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new zn(e,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}zn.DEFAULT_COLLECTION_PERCENTILE=10,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zn.DEFAULT=new zn(41943040,zn.DEFAULT_COLLECTION_PERCENTILE,zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zn.DISABLED=new zn(-1,0,0);class xu{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new xu(0)}static Mn(){return new xu(-1)}}class NAe{constructor(){this.changes=new Ws(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,st.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?E.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class FAe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class KK{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&eg(r.mutation,i,br.empty(),gt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const i=os();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Xp();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=os();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Sr();const o=Jp(),a=Jp();return n.forEach((u,c)=>{const l=r.get(c.key);i.has(c.key)&&(void 0===l||l.mutation instanceof Ks)?s=s.insert(c.key,c):void 0!==l?(o.set(c.key,l.mutation.getFieldMask()),eg(l.mutation,c,l.mutation.getFieldMask(),gt.now())):o.set(c.key,br.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new FAe(l,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Jp();let i=new et((o,a)=>o-a),s=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(null===c)return;let l=r.get(u)||br.empty();l=a.applyToLocalView(c,l),r.set(u,l);const d=(i.get(a.batchId)||ge()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,l=u.value,d=jW();l.forEach(h=>{if(!s.has(h)){const f=YW(n.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return E.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return V.isDocumentKey((i=n).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):zM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r);var i}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):E.resolve(os());let a=-1,u=s;return o.next(c=>E.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?E.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,ge())).next(l=>({batchId:a,changes:BW(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new V(n)).next(r=>{let i=Xp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Xp();return this.indexManager.getCollectionParents(e,i).next(o=>E.forEach(o,a=>{const u=(c=n,l=a.child(i),new Hs(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,l;return this.getDocumentsMatchingCollectionQuery(e,u,r).next(c=>{c.forEach((l,d)=>{s=s.insert(l,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,u)=>{const c=u.getKey();null===s.get(c)&&(s=s.insert(c,st.newInvalidDocument(c)))});let o=Xp();return s.forEach((a,u)=>{const c=i.get(a);void 0!==c&&eg(c.mutation,u,br.empty(),gt.now()),Yp(n,u)&&(o=o.insert(a,u))}),o})}}class VAe{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return E.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:Vt(r.createTime)}),E.resolve()}getNamedQuery(e,n){return E.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,{name:(r=n).name,query:oN(r.bundledQuery),readTime:Vt(r.readTime)}),E.resolve();var r}}class LAe{constructor(){this.overlays=new et(V.comparator),this.ls=new Map}getOverlay(e,n){return E.resolve(this.overlays.get(n))}getOverlays(e,n){const r=os();return E.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.we(e,n,s)}),E.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),E.resolve()}getOverlaysForCollection(e,n,r){const i=os(),s=n.length+1,o=new V(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return E.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new et((c,l)=>c-l);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);null===l&&(l=os(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const a=os(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return E.resolve(a)}we(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new JM(n,r));let s=this.ls.get(n);void 0===s&&(s=ge(),this.ls.set(n,s)),this.ls.set(n,s.add(r.key))}}class fN{constructor(){this.fs=new it(fn.ds),this.ws=new it(fn._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new fn(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new fn(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new V(new Se([])),r=new fn(n,e),i=new fn(n,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new V(new Se([])),r=new fn(n,e),i=new fn(n,e+1);let s=ge();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new fn(e,0),r=this.fs.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class fn{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return V.comparator(e.key,n.key)||oe(e.As,n.As)}static _s(e,n){return oe(e.As,n.As)||V.comparator(e.key,n.key)}}class UAe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new it(fn.ds)}checkEmpty(e){return E.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.vs;this.vs++;const o=new YM(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new fn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return E.resolve(o)}lookupMutationBatch(e,n){return E.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.bs(n+1),s=i<0?0:i;return E.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return E.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return E.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new fn(n,0),i=new fn(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const a=this.Ps(o.As);s.push(a)}),E.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(oe);return n.forEach(i=>{const s=new fn(i,0),o=new fn(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{r=r.add(a.As)})}),E.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;V.isDocumentKey(s)||(s=s.child(""));const o=new fn(new V(s),0);let a=new it(oe);return this.Rs.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.As)),!0)},o),E.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){Q(0===this.Ss(n.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return E.forEach(n.mutations,i=>{const s=new fn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new fn(n,0),i=this.Rs.firstAfterOrEqual(r);return E.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return E.resolve()}Ss(e,n){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class BAe{constructor(e){this.Ds=e,this.docs=new et(V.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return E.resolve(r?r.document.mutableCopy():st.newInvalidDocument(n))}getEntries(e,n){let r=Sr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():st.newInvalidDocument(i))}),E.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Sr();const o=n.path,a=new V(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:l}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||kM(nW(l),r)<=0||(i.has(l.key)||Yp(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return E.resolve(s)}getAllFromCollectionGroup(e,n,r,i){H()}Cs(e,n){return E.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new jAe(this)}getSize(e){return E.resolve(this.size)}}class jAe extends NAe{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),E.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}class $Ae{constructor(e){this.persistence=e,this.xs=new Ws(n=>Iu(n),Kp),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Ns=0,this.ks=new fN,this.targetCount=0,this.Ms=xu.kn()}forEachTarget(e,n){return this.xs.forEach((r,i)=>n(i)),E.resolve()}getLastRemoteSnapshotVersion(e){return E.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return E.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),E.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),E.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new xu(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,E.resolve()}updateTargetData(e,n){return this.Fn(n),E.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,E.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),E.waitFor(s).next(()=>i)}getTargetCount(e){return E.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return E.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),E.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),E.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),E.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return E.resolve(r)}containsKey(e,n){return E.resolve(this.ks.containsKey(n))}}class pN{constructor(e,n){this.$s={},this.overlays={},this.Os=new Wr(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new $Ae(this),this.indexManager=new bAe,this.remoteDocumentCache=new BAe(r=>this.referenceDelegate.Ls(r)),this.serializer=new wK(n),this.qs=new VAe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new LAe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new UAe(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){M("MemoryPersistence","Starting transaction:",e);const i=new GAe(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,n){return E.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class GAe extends lCe{constructor(e){super(),this.currentSequenceNumber=e}}class eE{constructor(e){this.persistence=e,this.Qs=new fN,this.js=null}static zs(e){return new eE(e)}get Ws(){if(this.js)return this.js;throw H()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),E.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),E.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),E.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return E.forEach(this.Ws,r=>{const i=V.fromPath(r);return this.Hs(e,i).next(s=>{s||n.removeEntry(i,X.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return E.or([()=>E.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}class yN{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=i}static Li(e,n){let r=ge(),i=ge();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new yN(e,n.fromCache,r,i)}}class YK{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ki(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(OW(n))return E.resolve(null);let r=cr(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=BI(n,null,"F"),r=cr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ge(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ji(n,a);return this.zi(n,c,o,u.readTime)?this.Ki(e,BI(n,null,"F")):this.Wi(e,c,n,u)}))})))}Gi(e,n,r,i){return OW(n)||i.isEqual(X.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.zi(n,o,r,i)?this.Qi(e,n):(PM()<=_e.DEBUG&&M("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),WM(n)),this.Wi(e,o,n,function tW(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(1e9===r?new gt(n+1,0):new gt(n,r));return new Hr(i,V.empty(),e)}(i,-1)))})}ji(e,n){let r=new it(LW(e));return n.forEach((i,s)=>{Yp(e,s)&&(r=r.add(s))}),r}zi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,n){return PM()<=_e.DEBUG&&M("QueryEngine","Using full collection scan to execute query:",WM(n)),this.Ui.getDocumentsMatchingQuery(e,n,Hr.min())}Wi(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class zAe{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new et(oe),this.Yi=new Ws(s=>Iu(s),Kp),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KK(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function JK(t,e){return vN.apply(this,arguments)}function vN(){return vN=_(function*(t,e){const n=L(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ge();for(const c of i){o.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of s){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({er:c,removedBatchIds:o,addedBatchIds:a}))})})}),vN.apply(this,arguments)}function ZK(t){const e=L(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function KAe(t,e){const n=L(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hd(t,e,n){return IN.apply(this,arguments)}function IN(){return IN=_(function*(t,e,n){const r=L(t),i=r.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ko(o))throw o;M("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),IN.apply(this,arguments)}function rE(t,e,n){const r=L(t);let i=X.min(),s=ge();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,c){const l=L(a),d=l.Yi.get(c);return void 0!==d?E.resolve(l.Ji.get(d)):l.Bs.getTargetData(u,c)}(r,o,cr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?i:X.min(),n?s:ge())).next(a=>(function r8(t,e,n){let r=t.Xi.get(e)||X.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Xi.set(e,r)}(r,function VW(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,ir:s})))}class CN{constructor(){this.activeTargetIds=function KM(){return QCe}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class o8{constructor(){this.Hr=new CN,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new CN,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class XAe{Yr(e){}shutdown(){}}class a8{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){M("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){M("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let oE=null;function bN(){return null===oE?oE=268435456+Math.round(2147483648*Math.random()):oE++,"0x"+oE.toString(16)}const JAe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZAe{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Hn="WebChannelConnection";class ebe extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,i,s){const o=bN(),a=this.To(e,n);M("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const u={};return this.Eo(u,i,s),this.Ao(e,a,u,r).then(c=>(M("RestConnection",`Received RPC '${e}' ${o}: `,c),c),c=>{throw Ci("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}vo(e,n,r,i,s,o){return this.Io(e,n,r,i,s)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Yl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,n){return`${this.mo}/v1/${n}:${JAe[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,i){const s=bN();return new Promise((o,a)=>{const u=new JDe;u.setWithCredentials(!0),u.listenOnce(QDe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case RM.NO_ERROR:const l=u.getResponseJson();M(Hn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case RM.TIMEOUT:M(Hn,`RPC '${e}' ${s} timed out`),a(new S(D.DEADLINE_EXCEEDED,"Request time out"));break;case RM.HTTP_ERROR:const d=u.getStatus();if(M(Hn,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h?.error;if(f&&f.status&&f.message){const p=function(g){const m=g.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(m)>=0?m:D.UNKNOWN}(f.status);a(new S(p,f.message))}else a(new S(D.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new S(D.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{M(Hn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);M(Hn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Ro(e,n,r){const i=bN(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=WDe(),a=KDe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new XDe({})),this.Eo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const l=s.join("");M(Hn,`Creating RPC '${e}' stream ${i}: ${l}`,u);const d=o.createWebChannel(l,u);let h=!1,f=!1;const p=new ZAe({ro:m=>{f?M(Hn,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(M(Hn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),M(Hn,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},oo:()=>d.close()}),g=(m,v,y)=>{m.listen(v,w=>{try{y(w)}catch(A){setTimeout(()=>{throw A},0)}})};return g(d,AI.EventType.OPEN,()=>{f||M(Hn,`RPC '${e}' stream ${i} transport opened.`)}),g(d,AI.EventType.CLOSE,()=>{f||(f=!0,M(Hn,`RPC '${e}' stream ${i} transport closed`),p.wo())}),g(d,AI.EventType.ERROR,m=>{f||(f=!0,Ci(Hn,`RPC '${e}' stream ${i} transport errored:`,m),p.wo(new S(D.UNAVAILABLE,"The operation could not be completed")))}),g(d,AI.EventType.MESSAGE,m=>{var v;if(!f){const y=m.data[0];Q(!!y);const A=y.error||(null===(v=y[0])||void 0===v?void 0:v.error);if(A){M(Hn,`RPC '${e}' stream ${i} received error:`,A);const N=A.status;let j=function(ze){const li=qt[ze];if(void 0!==li)return nK(li)}(N),ae=A.message;void 0===j&&(j=D.INTERNAL,ae="Unknown error status: "+N+" with message "+A.message),f=!0,p.wo(new S(j,ae)),d.close()}else M(Hn,`RPC '${e}' stream ${i} received:`,y),p._o(y)}}),g(a,YDe.STAT_EVENT,m=>{m.stat===Q6.PROXY?M(Hn,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===Q6.NOPROXY&&M(Hn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function aE(){return typeof document<"u"?document:null}function gg(t){return new cAe(t,!0)}class SN{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&M("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class c8{constructor(e,n,r,i,s,o,a,u){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new SN(e,n)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return _(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return _(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,n){var r=this;return _(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(Ot(n.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):n&&n.code===D.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(n)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===n&&this.Zo(r,i)},r=>{e(()=>{const i=new S(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No(_(function*(){e.state=0,e.start()}))}tu(e){return M("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(M("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tbe extends c8{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=function hAe(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:H(),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(Q(void 0===c||"string"==typeof c),Zt.fromBase64String(c||"")):(Q(void 0===c||c instanceof Uint8Array),Zt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=void 0===u.code?D.UNKNOWN:nK(u.code);return new S(c,u.message||"")}(o);n=new aK(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=as(t,r.document.name),s=Vt(r.document.updateTime),o=r.document.createTime?Vt(r.document.createTime):X.min(),a=new Pn({mapValue:{fields:r.document.fields}}),u=st.newFoundDocument(i,s,o,a);n=new zI(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=as(t,r.document),s=r.readTime?Vt(r.readTime):X.min(),o=st.newNoDocument(i,s);n=new zI([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=as(t,r.document);n=new zI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return H();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new rAe(i,s);n=new oK(r.targetId,o)}}var u;return n}(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?Vt(s.readTime):X.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=sg(this.serializer),n.addTarget=function(i,s){let o;const a=s.target;if(o=VI(a)?{documents:_K(i,a)}:{query:sN(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=dK(i,s.resumeToken);const u=tN(i,s.expectedCount);null!==u&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(X.min())>0){o.readTime=ad(i,s.snapshotVersion.toTimestamp());const u=tN(i,s.expectedCount);null!==u&&(o.expectedCount=u)}return o}(this.serializer,e);const r=function pAe(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=sg(this.serializer),n.removeTarget=e,this.Wo(n)}}class nbe extends c8{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(Q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=function fAe(t,e){return t&&t.length>0?(Q(void 0!==e),t.map(n=>function(r,i){let s=Vt(r.updateTime?r.updateTime:i);return s.isEqual(X.min())&&(s=Vt(i)),new ZCe(s,r.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Vt(e.commitTime);return this.listener.cu(r,n)}return Q(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=sg(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function og(t,e){let n;if(e instanceof sd)n={update:gK(t,e.key,e.value)};else if(e instanceof od)n={delete:ig(t,e.key)};else if(e instanceof Ks)n={update:gK(t,e.key,e.data),updateMask:yAe(e.fieldMask)};else{if(!(e instanceof QM))return H();n={verify:ig(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof rd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof wu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Tu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof id)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw H()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:lAe(t,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:H()),n;var i}(this.serializer,r))};this.Wo(n)}}class rbe extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new S(D.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new S(D.UNKNOWN,i.toString())})}vo(e,n,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new S(D.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class sbe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ot(n),this.mu=!1):M("OnlineStateTracker",n)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class obe{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(a=>{r.enqueueAndForget(_(function*(){var u;sa(o)&&(M("RemoteStore","Restarting streams for network reachability change."),yield(u=_(function*(c){const l=L(c);l.vu.add(4),yield fd(l),l.bu.set("Unknown"),l.vu.delete(4),yield mg(l)}),function(c){return u.apply(this,arguments)})(o))}))}),this.bu=new sbe(r,i)}}function mg(t){return RN.apply(this,arguments)}function RN(){return RN=_(function*(t){if(sa(t))for(const e of t.Ru)yield e(!0)}),RN.apply(this,arguments)}function fd(t){return PN.apply(this,arguments)}function PN(){return PN=_(function*(t){for(const e of t.Ru)yield e(!1)}),PN.apply(this,arguments)}function uE(t,e){const n=L(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),kN(n)?NN(n):gd(n).Ko()&&MN(n,e))}function _g(t,e){const n=L(t),r=gd(n);n.Au.delete(e),r.Ko()&&l8(n,e),0===n.Au.size&&(r.Ko()?r.jo():sa(n)&&n.bu.set("Unknown"))}function MN(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gd(t).su(e)}function l8(t,e){t.Vu.qt(e),gd(t).iu(e)}function NN(t){t.Vu=new sAe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),gd(t).start(),t.bu.gu()}function kN(t){return sa(t)&&!gd(t).Uo()&&t.Au.size>0}function sa(t){return 0===L(t).vu.size}function d8(t){t.Vu=void 0}function abe(t){return ON.apply(this,arguments)}function ON(){return ON=_(function*(t){t.Au.forEach((e,n)=>{MN(t,e)})}),ON.apply(this,arguments)}function ube(t,e){return FN.apply(this,arguments)}function FN(){return FN=_(function*(t,e){d8(t),kN(t)?(t.bu.Iu(e),NN(t)):t.bu.set("Unknown")}),FN.apply(this,arguments)}function cbe(t,e,n){return VN.apply(this,arguments)}function VN(){return VN=_(function*(t,e,n){if(t.bu.set("Online"),e instanceof aK&&2===e.state&&e.cause)try{yield(r=_(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.Au.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Au.delete(a),i.Vu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(t,e)}catch(r){M("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield cE(t,r)}else if(e instanceof zI?t.Vu.Ht(e):e instanceof oK?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(X.min()))try{const r=yield ZK(t.localStore);n.compareTo(r)>=0&&(yield function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.Au.get(u);c&&i.Au.set(u,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,u)=>{const c=i.Au.get(a);if(!c)return;i.Au.set(a,c.withResumeToken(Zt.EMPTY_BYTE_STRING,c.snapshotVersion)),l8(i,a);const l=new Qs(c.target,a,u,c.sequenceNumber);MN(i,l)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n))}catch(r){M("RemoteStore","Failed to raise snapshot:",r),yield cE(t,r)}var r}),VN.apply(this,arguments)}function cE(t,e,n){return LN.apply(this,arguments)}function LN(){return LN=_(function*(t,e,n){if(!Ko(e))throw e;t.vu.add(1),yield fd(t),t.bu.set("Offline"),n||(n=()=>ZK(t.localStore)),t.asyncQueue.enqueueRetryable(_(function*(){M("RemoteStore","Retrying IndexedDB access"),yield n(),t.vu.delete(1),yield mg(t)}))}),LN.apply(this,arguments)}function h8(t,e){return e().catch(n=>cE(t,n,e))}function pd(t){return UN.apply(this,arguments)}function UN(){return UN=_(function*(t){const e=L(t),n=oa(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;lbe(e);)try{const i=yield KAe(e.localStore,r);if(null===i){0===e.Eu.length&&n.jo();break}r=i.batchId,dbe(e,i)}catch(i){yield cE(e,i)}f8(e)&&p8(e)}),UN.apply(this,arguments)}function lbe(t){return sa(t)&&t.Eu.length<10}function dbe(t,e){t.Eu.push(e);const n=oa(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function f8(t){return sa(t)&&!oa(t).Uo()&&t.Eu.length>0}function p8(t){oa(t).start()}function hbe(t){return BN.apply(this,arguments)}function BN(){return BN=_(function*(t){oa(t).hu()}),BN.apply(this,arguments)}function fbe(t){return jN.apply(this,arguments)}function jN(){return jN=_(function*(t){const e=oa(t);for(const n of t.Eu)e.uu(n.mutations)}),jN.apply(this,arguments)}function pbe(t,e,n){return $N.apply(this,arguments)}function $N(){return $N=_(function*(t,e,n){const r=t.Eu.shift(),i=XM.from(r,e,n);yield h8(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield pd(t)}),$N.apply(this,arguments)}function gbe(t,e){return GN.apply(this,arguments)}function GN(){return GN=_(function*(t,e){var n;e&&oa(t).ou&&(yield(n=_(function*(r,i){if(function tK(t){switch(t){default:return H();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}(s=i.code)&&s!==D.ABORTED){const o=r.Eu.shift();oa(r).Qo(),yield h8(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield pd(r)}var s}),function(r,i){return n.apply(this,arguments)})(t,e)),f8(t)&&p8(t)}),GN.apply(this,arguments)}function g8(t,e){return qN.apply(this,arguments)}function qN(){return qN=_(function*(t,e){const n=L(t);n.asyncQueue.verifyOperationInProgress(),M("RemoteStore","RemoteStore received new credentials");const r=sa(n);n.vu.add(3),yield fd(n),r&&n.bu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),yield mg(n)}),qN.apply(this,arguments)}function HN(){return HN=_(function*(t,e){const n=L(t);e?(n.vu.delete(2),yield mg(n)):e||(n.vu.add(2),yield fd(n),n.bu.set("Unknown"))}),HN.apply(this,arguments)}function gd(t){return t.Su||(t.Su=function(e,n,r){const i=L(e);return i.fu(),new tbe(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:abe.bind(null,t),ao:ube.bind(null,t),nu:cbe.bind(null,t)}),t.Ru.push(function(){var e=_(function*(n){n?(t.Su.Qo(),kN(t)?NN(t):t.bu.set("Unknown")):(yield t.Su.stop(),d8(t))});return function(n){return e.apply(this,arguments)}}())),t.Su}function oa(t){return t.Du||(t.Du=function(e,n,r){const i=L(e);return i.fu(),new nbe(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:hbe.bind(null,t),ao:gbe.bind(null,t),au:fbe.bind(null,t),cu:pbe.bind(null,t)}),t.Ru.push(function(){var e=_(function*(n){n?(t.Du.Qo(),yield pd(t)):(yield t.Du.stop(),t.Eu.length>0&&(M("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))});return function(n){return e.apply(this,arguments)}}())),t.Du}class WN{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Jt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new WN(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new S(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function md(t,e){if(Ot("AsyncQueue",`${e}: ${t}`),Ko(t))return new S(D.UNAVAILABLE,`${e}: ${t}`);throw t}class _d{constructor(e){this.comparator=e?(n,r)=>e(n,r)||V.comparator(n.key,r.key):(n,r)=>V.comparator(n.key,r.key),this.keyedMap=Xp(),this.sortedSet=new et(this.comparator)}static emptySet(e){return new _d(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _d)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new _d;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class m8{constructor(){this.Cu=new et(V.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(n,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(n):1===e.type&&2===r.type?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):H():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class yd{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new yd(e,n,_d.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class mbe{constructor(){this.Nu=void 0,this.listeners=[]}}class _be{constructor(){this.queries=new Ws(e=>FW(e),Qp),this.onlineState="Unknown",this.ku=new Set}}function QN(){return QN=_(function*(t,e){const n=L(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new mbe),i)try{s.Nu=yield n.onListen(r)}catch(o){const a=md(o,`Initialization of query '${WM(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Mu(n.onlineState),s.Nu&&e.$u(s.Nu)&&JN(n)}),QN.apply(this,arguments)}function XN(){return XN=_(function*(t,e){const n=L(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),XN.apply(this,arguments)}function ybe(t,e){const n=L(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.$u(i)&&(r=!0);o.Nu=i}}r&&JN(n)}function vbe(t,e,n){const r=L(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function JN(t){t.ku.forEach(e=>{e.next()})}class ZN{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new yd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){return!e.fromCache||(!this.options.Ku||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=yd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class v8{constructor(e){this.key=e}}class I8{constructor(e){this.key=e}}class E8{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ge(),this.mutatedKeys=ge(),this.tc=LW(e),this.ec=new _d(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new m8,i=n?n.ec:this.ec;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const h=i.get(l),f=Yp(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),m=!0):this.rc(h,f)||(r.track({type:2,doc:f}),m=!0,(u&&this.tc(f,u)>0||c&&this.tc(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(u||c)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:a,mutatedKeys:s}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((c,l)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return f(d)-f(h)}(c.type,l.type)||this.tc(c.doc,l.doc)),this.oc(r);const o=n?this.uc():[],a=0===this.Zu.size&&this.current?1:0,u=a!==this.Xu;return this.Xu=a,0!==s.length||u?{snapshot:new yd(this.query,e.ec,i,s,e.mutatedKeys,0===a,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new m8,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ge(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new I8(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new v8(r))}),n}hc(e){this.Yu=e.ir,this.Zu=ge();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return yd.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class wbe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Tbe{constructor(e){this.key=e,this.fc=!1}}class Dbe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Ws(a=>FW(a),Qp),this._c=new Map,this.mc=new Set,this.gc=new et(V.comparator),this.yc=new Map,this.Ic=new fN,this.Tc={},this.Ec=new Map,this.Ac=xu.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function Cbe(t,e){return ek.apply(this,arguments)}function ek(){return ek=_(function*(t,e){const n=function Tk(t){const e=L(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=w8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kbe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sbe.bind(null,e),e.dc.nu=ybe.bind(null,e.eventManager),e.dc.Pc=vbe.bind(null,e.eventManager),e}(t);let r,i;const s=n.wc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=yield function dd(t,e){const n=L(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Bs.getTargetData(r,e).next(s=>s?(i=s,E.resolve(i)):n.Bs.allocateTargetId(r).next(o=>(i=new Qs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}(n.localStore,cr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield function tk(t,e,n,r,i){return nk.apply(this,arguments)}(n,e,r,"current"===a,o.resumeToken),n.isPrimaryClient&&uE(n.remoteStore,o)}return i}),ek.apply(this,arguments)}function nk(){return nk=_(function*(t,e,n,r,i){t.Rc=(d,h,f)=>{return(p=_(function*(g,m,v,y){let w=m.view.sc(v);w.zi&&(w=yield rE(g.localStore,m.query,!1).then(({documents:j})=>m.view.sc(j,w)));const A=y&&y.targetChanges.get(m.targetId),N=m.view.applyChanges(w,g.isPrimaryClient,A);return hk(g,m.targetId,N.cc),N.snapshot}),function(g,m,v,y){return p.apply(this,arguments)})(t,d,h,f);var p};const s=yield rE(t.localStore,e,!0),o=new E8(e,s.ir),a=o.sc(s.documents),u=rg.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=o.applyChanges(a,t.isPrimaryClient,u);hk(t,n,c.cc);const l=new wbe(e,n,o);return t.wc.set(e,l),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),c.snapshot}),nk.apply(this,arguments)}function Abe(t,e){return rk.apply(this,arguments)}function rk(){return rk=_(function*(t,e){const n=L(t),r=n.wc.get(e),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(s=>!Qp(s,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield hd(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),_g(n.remoteStore,r.targetId),vd(n,r.targetId)}).catch(Wo))):(vd(n,r.targetId),yield hd(n.localStore,r.targetId,!0))}),rk.apply(this,arguments)}function ik(){return ik=_(function*(t,e,n){const r=function Dk(t){const e=L(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xbe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Rbe.bind(null,e),e}(t);try{const i=yield function(s,o){const a=L(s),u=gt.now(),c=o.reduce((h,f)=>h.add(f.key),ge());let l,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=Sr(),p=ge();return a.Zi.getEntries(h,c).next(g=>{f=g,f.forEach((m,v)=>{v.isValidDocument()||(p=p.add(m))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{l=g;const m=[];for(const v of o){const y=tAe(v,l.get(v.key).overlayedDocument);null!=y&&m.push(new Ks(v.key,y,wW(y.value.mapValue),lt.exists(!0)))}return a.mutationQueue.addMutationBatch(h,u,m,o)}).next(g=>{d=g;const m=g.applyToLocalDocumentSet(l,p);return a.documentOverlayCache.saveOverlays(h,g.batchId,m)})}).then(()=>({batchId:d.batchId,changes:BW(l)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.Tc[s.currentUser.toKey()];u||(u=new et(oe)),u=u.insert(o,a),s.Tc[s.currentUser.toKey()]=u}(r,i.batchId,n),yield Ys(r,i.changes),yield pd(r.remoteStore)}catch(i){const s=md(i,"Failed to persist write");n.reject(s)}}),ik.apply(this,arguments)}function w8(t,e){return sk.apply(this,arguments)}function sk(){return sk=_(function*(t,e){const n=L(t);try{const r=yield function WAe(t,e){const n=L(t),r=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];e.targetChanges.forEach((l,d)=>{const h=i.get(d);if(!h)return;a.push(n.Bs.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Bs.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,g,m;null!==e.targetMismatches.get(d)?f=f.withResumeToken(Zt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),g=f,m=l,(0===(p=h).resumeToken.approximateByteSize()||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0)&&a.push(n.Bs.updateTargetData(s,f))});let u=Sr(),c=ge();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(function e8(t,e,n){let r=ge(),i=ge();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Sr();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):M("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{nr:o,sr:i}})}(s,o,e.documentUpdates).next(l=>{u=l.nr,c=l.sr})),!r.isEqual(X.min())){const l=n.Bs.getLastRemoteSnapshotVersion(s).next(d=>n.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return E.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Ji=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.yc.get(s);o&&(Q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?Q(o.fc):i.removedDocuments.size>0&&(Q(o.fc),o.fc=!1))}),yield Ys(n,r,e)}catch(r){yield Wo(r)}}),sk.apply(this,arguments)}function T8(t,e,n){const r=L(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=L(s);a.onlineState=o;let u=!1;a.queries.forEach((c,l)=>{for(const d of l.listeners)d.Mu(o)&&(u=!0)}),u&&JN(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Sbe(t,e,n){return ok.apply(this,arguments)}function ok(){return ok=_(function*(t,e,n){const r=L(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new et(V.comparator);o=o.insert(s,st.newNoDocument(s,X.min()));const a=ge().add(s),u=new ng(X.min(),new Map,new et(oe),o,a);yield w8(r,u),r.gc=r.gc.remove(s),r.yc.delete(e),fk(r)}else yield hd(r.localStore,e,!1).then(()=>vd(r,e,n)).catch(Wo)}),ok.apply(this,arguments)}function xbe(t,e){return ak.apply(this,arguments)}function ak(){return ak=_(function*(t,e){const n=L(t),r=e.batch.batchId;try{const i=yield function HAe(t,e){const n=L(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,u,c){const l=u.batch,d=l.keys();let h=E.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const g=u.docVersions.get(f);Q(null!==g),p.version.compareTo(g)<0&&(l.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),c.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,l))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=ge();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);dk(n,r,null),lk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ys(n,i)}catch(i){yield Wo(i)}}),ak.apply(this,arguments)}function Rbe(t,e,n){return uk.apply(this,arguments)}function uk(){return uk=_(function*(t,e,n){const r=L(t);try{const i=yield function(s,o){const a=L(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return a.mutationQueue.lookupMutationBatch(u,o).next(l=>(Q(null!==l),c=l.keys(),a.mutationQueue.removeMutationBatch(u,l))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>a.localDocuments.getDocuments(u,c))})}(r.localStore,e);dk(r,e,n),lk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ys(r,i)}catch(i){yield Wo(i)}}),uk.apply(this,arguments)}function lk(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function dk(t,e,n){const r=L(t);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function vd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||D8(t,r)})}function D8(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);null!==n&&(_g(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),fk(t))}function hk(t,e,n){for(const r of n)r instanceof v8?(t.Ic.addReference(r.key,e),Mbe(t,r)):r instanceof I8?(M("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||D8(t,r.key)):H()}function Mbe(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(M("SyncEngine","New document in limbo: "+n),t.mc.add(r),fk(t))}function fk(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new V(Se.fromString(e)),r=t.Ac.next();t.yc.set(r,new Tbe(n)),t.gc=t.gc.insert(n,r),uE(t.remoteStore,new Qs(cr(nd(n.path)),r,"TargetPurposeLimboResolution",Wr.ct))}}function Ys(t,e,n){return pk.apply(this,arguments)}function pk(){return pk=_(function*(t,e,n){const r=L(t),i=[],s=[],o=[];var a;r.wc.isEmpty()||(r.wc.forEach((a,u)=>{o.push(r.Rc(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const l=yN.Li(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.dc.nu(i),yield(a=_(function*(u,c){const l=L(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>E.forEach(c,h=>E.forEach(h.Fi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>E.forEach(h.Bi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Ko(d))throw d;M("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=l.Ji.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);l.Ji=l.Ji.insert(h,g)}}}),function(u,c){return a.apply(this,arguments)})(r.localStore,s))}),pk.apply(this,arguments)}function Nbe(t,e){return gk.apply(this,arguments)}function gk(){return gk=_(function*(t,e){const n=L(t);if(!n.currentUser.isEqual(e)){M("SyncEngine","User change. New user:",e.toKey());const r=yield JK(n.localStore,e);n.currentUser=e,(i=n).Ec.forEach(o=>{o.forEach(a=>{a.reject(new S(D.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ys(n,r.er)}var i}),gk.apply(this,arguments)}function kbe(t,e){const n=L(t),r=n.yc.get(e);if(r&&r.fc)return ge().add(r.key);{let i=ge();const s=n._c.get(e);if(!s)return i;for(const o of s){const a=n.wc.get(o);i=i.unionWith(a.view.nc)}return i}}class lE{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return _(function*(){n.serializer=gg(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return function XK(t,e,n,r){return new zAe(t,e,n,r)}(this.persistence,new YK,e.initialUser,this.serializer)}createPersistence(e){return new pN(eE.zs,this.serializer)}createSharedClientState(e){return new o8}terminate(){var e=this;return _(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Id{initialize(e,n){var r=this;return _(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>T8(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Nbe.bind(null,r.syncEngine),yield function zN(t,e){return HN.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new _be}createDatastore(e){const n=gg(e.databaseInfo.databaseId),r=new ebe(e.databaseInfo);return new rbe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>T8(this.syncEngine,a,0),o=a8.D()?new a8:new XAe,new obe(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,u,c){const l=new Dbe(r,i,s,o,a,u);return c&&(l.vc=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return function(){var e=_(function*(n){const r=L(n);M("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield fd(r),r.Pu.shutdown(),r.bu.set("Unknown")});return function(n){return e.apply(this,arguments)}}()(this.remoteStore)}}class dE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ot("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class Wbe{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dn.UNAUTHENTICATED,this.clientId=Z6.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=_(function*(a){M("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(M("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return _(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new S(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Jt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(_(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=md(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function hE(t,e){return Ck.apply(this,arguments)}function Ck(){return Ck=_(function*(t,e){t.asyncQueue.verifyOperationInProgress(),M("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=_(function*(s){r.isEqual(s)||(yield JK(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),Ck.apply(this,arguments)}function Ak(t,e){return bk.apply(this,arguments)}function bk(){return bk=_(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function Sk(t){return xk.apply(this,arguments)}(t);M("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>g8(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>g8(e.remoteStore,s)),t._onlineComponents=e}),bk.apply(this,arguments)}function xk(){return xk=_(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){M("FirestoreClient","Using user provided OfflineComponentProvider");try{yield hE(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function R8(t){return"FirebaseError"===t.name?t.code===D.FAILED_PRECONDITION||t.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;Ci("Error using user provided cache. Falling back to memory cache: "+n),yield hE(t,new lE)}}else M("FirestoreClient","Using default OfflineComponentProvider"),yield hE(t,new lE);return t._offlineComponents}),xk.apply(this,arguments)}function fE(t){return Rk.apply(this,arguments)}function Rk(){return Rk=_(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(M("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ak(t,t._uninitializedComponentsProvider._online)):(M("FirestoreClient","Using default OnlineComponentProvider"),yield Ak(t,new Id))),t._onlineComponents}),Rk.apply(this,arguments)}function Mk(){return Mk=_(function*(t){const e=yield fE(t),n=e.eventManager;return n.onListen=Cbe.bind(null,e.syncEngine),n.onUnlisten=Abe.bind(null,e.syncEngine),n}),Mk.apply(this,arguments)}function O8(t,e,n={}){const r=new Jt;return t.asyncQueue.enqueueAndForget(_(function*(){return function(i,s,o,a,u){const c=new dE({next:d=>{s.enqueueAndForget(()=>function YN(t,e){return XN.apply(this,arguments)}(i,l)),d.fromCache&&"server"===a.source?u.reject(new S(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),l=new ZN(o,c,{includeMetadataChanges:!0,Ku:!0});return function KN(t,e){return QN.apply(this,arguments)}(i,l)}(yield function Ed(t){return Mk.apply(this,arguments)}(t),t.asyncQueue,e,n,r)})),r.promise}function F8(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const V8=new Map;function Nk(t,e,n){if(!n)throw new S(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function L8(t){if(!V.isDocumentKey(t))throw new S(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function U8(t){if(V.isDocumentKey(t))throw new S(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gE(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(n=t).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof t?"a function":H()}function Te(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new S(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gE(t);throw new S(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class j8{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new S(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new S(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function nSe(t,e,n,r){if(!0===e&&!0===r)throw new S(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=F8(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new S(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new S(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new S(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new j8({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new S(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new S(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new j8(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new eCe;switch(n.type){case"firstParty":return new iCe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new S(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=V8.get(e);n&&(M("ComponentProvider","Removing Datastore"),V8.delete(e),n.terminate())}(this),Promise.resolve()}}class Lt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}}class Mn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mn(this.firestore,e,this._query)}}class us extends Mn{constructor(e,n,r){super(e,n,nd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new V(e))}withConverter(e){return new us(this.firestore,e,this._path)}}function iSe(t,e,...n){if(t=Ur(t),Nk("collection","path",e),t instanceof yg){const r=Se.fromString(e,...n);return U8(r),new us(t,null,r)}{if(!(t instanceof Lt||t instanceof us))throw new S(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return U8(r),new us(t.firestore,null,r)}}class oSe{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new SN(this,"async_queue_retry"),this.Xc=()=>{const n=aE();n&&M("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=aE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=aE();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new Jt;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return _(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(n){if(!Ko(n))throw n;M("AsyncQueue","Operation failed with retryable error: "+n)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Ot("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const i=WN.createAndSchedule(this,e,n,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&H()}verifyOperationInProgress(){}sa(){var e=this;return _(function*(){let n;do{n=e.Gc,yield n}while(n!==e.Gc)})()}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}class ot extends yg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new oSe,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||G8(this),this._firestoreClient.terminate()}}function uSe(t,e){const r="string"==typeof t?t:e||"(default)",i=function ZG(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}("object"==typeof t?t:t4(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(t=>{const e=(t=>{var e,n;return null===(n=null===(e=K_())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})("firestore");s&&function rSe(t,e,n,r={}){var i;const s=(t=Te(t,yg))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ci("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=dn.MOCK_USER;else{a=function lde(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Bc(JSON.stringify({alg:"none",type:"JWT"})),Bc(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new S(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new dn(c)}t._authCredentials=new tCe(new X6(a,u))}}(i,...s)}return i}function zt(t){return t._firestoreClient||G8(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function G8(t){var e,n,r;const i=t._freezeSettings(),s=(a=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new kCe(t._databaseId,a,t._persistenceKey,(c=i).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,F8(c.experimentalLongPollingOptions),c.useFetchStreams));var a,c;t._firestoreClient=new Wbe(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.cache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Pu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pu(Zt.fromBase64String(e))}catch(n){throw new S(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pu(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wd{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new S(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class H8{constructor(e){this._methodName=e}}class Ok{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new S(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new S(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}const lSe=/^__.*__$/;class dSe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Ks(e,this.data,this.fieldMask,n,this.fieldTransforms):new sd(e,this.data,n,this.fieldTransforms)}}function K8(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}class mE{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new mE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return yE(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(K8(this.ca)&&lSe.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class hSe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gg(e)}ya(e,n,r,i=!1){return new mE({ca:e,methodName:n,ga:r,path:Ft.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Td(t){const e=t._freezeSettings(),n=gg(t._databaseId);return new hSe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Fk(t,e,n,r,i,s={}){const o=t.ya(s.merge||s.mergeFields?2:0,e,n,i);Lk("Data must be an object, but it was:",o,r);const a=Z8(r,o);let u,c;if(s.merge)u=new br(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const l=[];for(const d of s.mergeFields){const h=Eg(e,d,n);if(!o.contains(h))throw new S(D.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);tQ(l,h)||l.push(h)}u=new br(l),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new dSe(new Pn(a),u,c)}function Mu(t,e){if(eQ(t=Ur(t)))return Lk("Unsupported field value:",e,t),Z8(t,e);if(t instanceof H8)return function(n,r){if(!K8(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=Mu(o,r.wa(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if(null===(n=Ur(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return qW(r.serializer,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const i=gt.fromDate(n);return{timestampValue:ad(r.serializer,i)}}if(n instanceof gt){const i=new gt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ad(r.serializer,i)}}if(n instanceof Ok)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Pu)return{bytesValue:dK(r.serializer,n._byteString)};if(n instanceof Lt){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:nN(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${gE(n)}`)}(t,e)}function Z8(t,e){const n={};return fW(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qo(t,(r,i)=>{const s=Mu(i,e.ha(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function eQ(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof Ok||t instanceof Pu||t instanceof Lt||t instanceof H8)}function Lk(t,e,n){if(!eQ(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=gE(n);throw e._a("an object"===r?t+" a custom object":t+" "+r)}var r}function Eg(t,e,n){if((e=Ur(e))instanceof wd)return e._internalPath;if("string"==typeof e)return _E(t,e);throw yE("Field path arguments must be of type string or ",t,!1,void 0,n)}const mSe=new RegExp("[~\\*/\\[\\]]");function _E(t,e,n){if(e.search(mSe)>=0)throw yE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wd(...e.split("."))._internalPath}catch{throw yE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yE(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new S(D.INVALID_ARGUMENT,a+t+u)}function tQ(t,e){return t.some(n=>n.isEqual(e))}class Uk{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _Se(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class _Se extends Uk{data(){return super.data()}}function vE(t,e){return"string"==typeof e?_E(t,e):e instanceof wd?e._internalPath:e._delegate._internalPath}class Bk{}class ySe extends Bk{}function vSe(t,e,...n){let r=[];e instanceof Bk&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof Dd).length,o=i.filter(a=>a instanceof wg).length;if(s>1||s>0&&o>0)throw new S(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class wg extends ySe{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new wg(e,n,r)}_apply(e){const n=this._parse(e);return oQ(e._query,n),new Mn(e.firestore,e.converter,HM(e._query,n))}_parse(e){const n=Td(e.firestore);return function(i,s,o,a,u,c,l){let d;if(u.isKeyField()){if("array-contains"===c||"array-contains-any"===c)throw new S(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if("in"===c||"not-in"===c){sQ(l,c);const h=[];for(const f of l)h.push(iQ(a,i,f));d={arrayValue:{values:h}}}else d=iQ(a,i,l)}else"in"!==c&&"not-in"!==c&&"array-contains-any"!==c||sQ(l,c),d=function J8(t,e,n,r=!1){return Mu(n,t.ya(r?4:3,e))}(o,"where",l,"in"===c||"not-in"===c);return we.create(u,c,d)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Dd extends Bk{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:je.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)oQ(s,a),s=HM(s,a)}(e._query,n),new Mn(e.firestore,e.converter,HM(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function iQ(t,e,n){if("string"==typeof(n=Ur(n))){if(""===n)throw new S(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zM(e)&&-1!==n.indexOf("/"))throw new S(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!V.isDocumentKey(r))throw new S(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vu(t,new V(r))}if(n instanceof Lt)return vu(t,n._key);throw new S(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gE(n)}.`)}function sQ(t,e){if(!Array.isArray(t)||0===t.length)throw new S(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oQ(t,e){if(e.isInequality()){const r=UI(t),i=e.field;if(null!==r&&!r.isEqual(i))throw new S(D.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=qM(t);null!==s&&function aQ(t,e,n){if(!n.isEqual(e))throw new S(D.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}(0,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new S(D.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ISe{convertValue(e,n="none"){switch(Jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw H()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Qo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Ok(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=NI(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qp(e));default:return null}}convertTimestamp(e){const n=Yo(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);Q(EK(r));const i=new yu(r.get(1),r.get(3)),s=new V(r.popFirst(5));return i.isEqual(n)||Ot(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}class Nu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cd extends Uk{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new TE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vE("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class TE extends Cd{data(e={}){return super.data(e)}}class Ad{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Nu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new TE(this._firestore,this._userDataWriter,r.key,r,new Nu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new S(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new TE(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Nu(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new TE(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Nu(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,c=-1;return 0!==o.type&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:wSe(o.type),doc:a,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function wSe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}class aa extends ISe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,n)}}function TSe(t){t=Te(t,Mn);const e=Te(t.firestore,ot),n=zt(e),r=new aa(e);return function nQ(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new S(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),O8(n,t._query).then(i=>new Ad(e,r,t,i))}function DSe(t,e){const n=Te(t.firestore,ot),r=function sSe(t,e,...n){if(t=Ur(t),1===arguments.length&&(e=Z6.A()),Nk("doc","path",e),t instanceof yg){const r=Se.fromString(e,...n);return L8(r),new Lt(t,null,new V(r))}{if(!(t instanceof Lt||t instanceof us))throw new S(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return L8(r),new Lt(t.firestore,t instanceof us?t.converter:null,new V(r))}}(t),i=function $k(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e);return function Tg(t,e){return function(n,r){const i=new Jt;return n.asyncQueue.enqueueAndForget(_(function*(){return function bbe(t,e,n){return ik.apply(this,arguments)}(yield function Pk(t){return fE(t).then(e=>e.syncEngine)}(n),r,i)})),i.promise}(zt(t),e)}(n,[Fk(Td(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,lt.exists(!1))]).then(()=>r)}!function(t,e=!0){Yl=Z_,$c(new jt("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new ot(new nCe(n.getProvider("auth-internal")),new sCe(n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new S(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(a.options.projectId,u)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),si(Y6,"3.13.0",t),si(Y6,"3.13.0","esm2017")}();class CE{constructor(e){return e}}const lQ="firestore",qk=new W("angularfire2.firestore-instances");function LSe(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new CE(r)}}const USe={provide:class FSe{constructor(){return db(lQ)}},deps:[[new mr,qk]]},BSe={provide:CE,useFactory:function VSe(t,e){const n=function lb(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}(lQ,t,e);return n&&new CE(n)},deps:[[new mr,qk],Hc]};let jSe=(()=>{class t{constructor(){si("angularfire",nb.full,"fst")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Mr({type:t}),t.\u0275inj=dr({providers:[BSe,USe]}),t})();function $Se(t,...e){return{ngModule:jSe,providers:[{provide:qk,useFactory:LSe(t),multi:!0,deps:[Fe,Jn,Tq,Dq,[new mr,Sz],[new mr,Yz],...e]}]}}const GSe=Ua(z0e,!0),qSe=Ua(DSe,!0),zk=Ua(iSe,!0),zSe=Ua(TSe,!0),HSe=Ua(uSe,!0),WSe=Ua(vSe,!0);let dQ=(()=>{class t{constructor(){this.firestore=q(CE)}guardarDatosEnFirebase(n){var r=this;return _(function*(){return yield qSe(zk(r.firestore,"entradas"),{title:n.title,content:n.content})})()}getData(){var n=this;return _(function*(){const r=zk(n.firestore,"entradas");return yield zSe(r)})()}getDatos(){const n=zk(this.firestore,"entradas");let r=WSe(n);return GSe(r)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var QSe=function(){function t(e,n,r){this.el=e,this.vcr=n,this.renderer=r,this.dtOptions={}}return t.prototype.ngOnInit=function(){var e=this;this.dtTrigger?this.dtTrigger.subscribe(function(n){e.displayTable(n)}):this.displayTable(null)},t.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},t.prototype.displayTable=function(e){var n=this;e&&(this.dtOptions=e),this.dtInstance=new Promise(function(r,i){Promise.resolve(n.dtOptions).then(function(s){0===Object.keys(s).length&&0===$("tbody tr",n.el.nativeElement).length?i("Both the table and dtOptions cannot be empty"):setTimeout(function(){var a={rowCallback:function(u,c,l){if(s.columns){var d=s.columns;n.applyNgPipeTransform(u,d),n.applyNgRefTemplate(u,d,c)}s.rowCallback&&s.rowCallback(u,c,l)}};a=Object.assign({},s,a),n.dt=$(n.el.nativeElement).DataTable(a),r(n.dt)})})})},t.prototype.applyNgPipeTransform=function(e,n){n.filter(function(i){return i.ngPipeInstance&&!i.ngTemplateRef}).forEach(function(i){var s=i.ngPipeInstance,o=i.ngPipeArgs||[],a=n.filter(function(d){return!1!==d.visible}).findIndex(function(d){return d.data===i.data}),u=e.childNodes.item(a),c=$(u).text(),l=s.transform.apply(s,function(t,e,n){if(n||2===arguments.length)for(var s,r=0,i=e.length;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}([c],o,!1));$(u).text(l)})},t.prototype.applyNgRefTemplate=function(e,n,r){var i=this;n.filter(function(o){return o.ngTemplateRef&&!o.ngPipeInstance}).forEach(function(o){var a,u=(a=o.ngTemplateRef).ref,c=a.context,l=n.filter(function(p){return!1!==p.visible}).findIndex(function(p){return p.data===o.data}),d=e.childNodes.item(l);$(d).html("");var h=Object.assign({},c,c?.userData,{adtData:r}),f=i.vcr.createEmbeddedView(u,h);i.renderer.appendChild(d,f.rootNodes[0])})},t.\u0275fac=function(n){return new(n||t)(P(yr),P(ti),P(Fi))},t.\u0275dir=te({type:t,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),t}(),YSe=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Mr({type:t}),t.\u0275inj=dr({imports:[s$]}),t}();function XSe(t,e){if(1&t&&(yt(0,"tr")(1,"td"),er(2),xt(),yt(3,"td"),er(4),xt()()),2&t){const n=e.$implicit;lo(2),xh(n.title),lo(2),xh(n.content)}}let hQ=(()=>{class t{constructor(){this.nuevoValor={title:"",content:""},this.datGuada="",this.dtOptions={},this.dtTrigger=new xr,this.globalValues=[],this.firebaseService=q(dQ)}ngOnInit(){var n=this;return _(function*(){n.dtOptions={pagingType:"full_numbers",language:{processing:"Procesando...",search:"Buscar:",lengthMenu:"Mostrar _MENU_ elementos",info:"Mostrando desde _START_ al _END_ de _TOTAL_ elementos",infoEmpty:"Mostrando ning\xfan elemento.",infoFiltered:"(filtrado _MAX_ elementos total)",infoPostFix:"",loadingRecords:"Cargando registros...",zeroRecords:"No se encontraron registros",emptyTable:"No hay datos disponibles en la tabla",paginate:{first:"Primero",previous:"Anterior",next:"Siguiente",last:"\xdaltimo"},aria:{sortAscending:": Activar para ordenar la tabla en orden ascendente",sortDescending:": Activar para ordenar la tabla en orden descendente"}}},(yield n.firebaseService.getData()).forEach(i=>{n.globalValues.push({title:i.data().title,content:i.data().content})}),n.dtTrigger.next(null)})()}guardarValorGlobal(){this.datGuada="",this.firebaseService.guardarDatosEnFirebase(this.nuevoValor).then(n=>{console.log("Datos guardados con \xe9xito en Firebase:",n),this.datGuada="Datos guardados con \xe9xito en Firebase",this.nuevoValor={title:"",content:""},window.location.reload()}).catch(n=>{console.error("Error al guardar los datos en Firebase:",n),this.datGuada=""})}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=zd({type:t,selectors:[["app-new-tema"]],decls:41,vars:6,consts:[[1,"card","card-pink"],[1,"card-header"],[1,"card-title"],[3,"submit"],[1,"card-body"],[1,"row"],[1,"col-3"],[1,"form-group"],["for","title"],["type","text","id","title","name","title","placeholder","Ingresa el T\xedtulo",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-7"],["for","content"],["id","content","name","content","placeholder","Ingresa el contenido",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-2"],["for","content",1,"d-block"],["type","submit",1,"btn","btn-primary"],[1,"ml-5"],[1,"container"],["datatable","",1,"table","table-bordered","table-striped","table-hover",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(yt(0,"div",0)(1,"div",1)(2,"h5",2),er(3,"Formulario"),xt()(),yt(4,"form",3),Zn("submit",function(){return i.guardarValorGlobal()}),yt(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"label",8),er(10,"T\xedtulo"),xt(),yt(11,"input",9),Zn("ngModelChange",function(o){return i.nuevoValor.title=o}),xt()()(),yt(12,"div",10)(13,"div",7)(14,"label",11),er(15,"Contenido"),xt(),yt(16,"textarea",12),Zn("ngModelChange",function(o){return i.nuevoValor.content=o}),er(17,"                hola hola\n              "),xt()()(),yt(18,"div",13)(19,"div",7)(20,"label",14),er(21,"\xa0"),xt(),yt(22,"button",15),er(23,"Guardar"),xt()()(),yt(24,"label",16),er(25),xt()()()()(),yt(26,"div",0)(27,"div",1)(28,"h5",2),er(29,"Resultados"),xt()(),yt(30,"div",4)(31,"div",17)(32,"table",18)(33,"thead")(34,"tr")(35,"th"),er(36,"T\xedtulo"),xt(),yt(37,"th"),er(38,"Contenido"),xt()()(),yt(39,"tbody"),function FL(t,e,n,r,i,s,o,a){const u=C(),c=Ce(),l=t+ve,d=c.firstCreatePass?function zne(t,e,n,r,i,s,o,a,u){const c=e.consts,l=yc(e,t,4,o||null,so(c,a));GT(e,n,l,so(c,u)),cm(e,l);const d=l.tView=$T(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];ki(d,!1);const h=VL(c,u,d,t);um()&&Rm(c,u,h,d),kn(h,u),Qm(u,u[l]=sL(h,u,h,d)),im(d)&&BT(c,u,d),null!=o&&jT(u,d,a)}(40,XSe,5,2,"tr",19),xt()()()()()),2&r&&(lo(11),Sc("ngModel",i.nuevoValor.title),lo(5),Sc("ngModel",i.nuevoValor.content),lo(9),xh(i.datGuada),lo(7),Sc("dtOptions",i.dtOptions)("dtTrigger",i.dtTrigger),lo(8),Sc("ngForOf",i.globalValues))},dependencies:[e$,yG,O_,rG,iG,kD,H_,QSe]})}return t})(),JSe=(()=>{class t{constructor(){this.title="finderluzy"}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=zd({type:t,selectors:[["app-root"]],decls:20,vars:0,consts:[["lang","en"],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1"],[1,"hold-transition","sidebar-mini"],[1,"wrapper"],[1,"container"],[1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-12","text-center"],[1,"h4"],[1,"content"],[1,"col-12"],[1,"control-sidebar","control-sidebar-dark"]],template:function(r,i){1&r&&(yt(0,"html",0)(1,"head"),xc(2,"meta",1)(3,"meta",2),yt(4,"title"),er(5,"Buscador Luzy"),xt()(),yt(6,"body",3)(7,"div",4)(8,"div",5)(9,"section",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"span",10),er(14,"Buscador B\xedblico"),xt()()()()(),yt(15,"section",11)(16,"div",7)(17,"div",8),xc(18,"app-new-tema",12),xt()()()(),xc(19,"aside",13),xt()()())},dependencies:[hQ]})}return t})();function Hk(...t){const e=Bd(t),n=BO(t),{args:r,keys:i}=x$(t);if(0===r.length)return en([],e);const s=new dt(function exe(t,e,n=Zs){return r=>{fQ(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)fQ(e,()=>{const c=en(t[u],e);let l=!1;c.subscribe(Ut(r,d=>{s[u]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>P$(i,o):Zs));return n?s.pipe(R$(n)):s}function fQ(t,e,n){t?ds(n,t,e):e()}const AE=Ld(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Wk(...t){return function txe(){return Uu(1)}()(en(t,Bd(t)))}function pQ(t){return new dt(e=>{Rr(t()).subscribe(e)})}function Dg(t,e){const n=Ge(t)?t:()=>t,r=i=>i.error(n());return new dt(e?i=>e.schedule(r,0,i):r)}function Kk(){return Ht((t,e)=>{let n=null;t._refCount++;const r=Ut(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class gQ extends dt{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,CO(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new lr;const n=this.getSubject();e.add(this.source.subscribe(Ut(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=lr.EMPTY)}return e}refCount(){return Kk()(this)}}function bd(t){return t<=0?()=>Si:Ht((e,n)=>{let r=0;e.subscribe(Ut(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function ua(t,e){return Ht((n,r)=>{let i=0;n.subscribe(Ut(r,s=>t.call(e,s,i++)&&r.next(s)))})}function bE(t){return Ht((e,n)=>{let r=!1;e.subscribe(Ut(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function mQ(t=rxe){return Ht((e,n)=>{let r=!1;e.subscribe(Ut(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function rxe(){return new AE}function ku(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ua((i,s)=>t(i,s,r)):Zs,bd(1),n?bE(e):mQ(()=>new AE))}function Cg(t,e){return Ge(e)?pn(t,e,1):pn(t,1)}function Ou(t){return Ht((e,n)=>{let s,r=null,i=!1;r=e.subscribe(Ut(n,void 0,void 0,o=>{s=Rr(t(o,Ou(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Qk(t){return t<=0?()=>Si:Ht((e,n)=>{let r=[];e.subscribe(Ut(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Yk(t){return Ht((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const me="primary",Ag=Symbol("RouteTitle");class cxe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Sd(t){return new cxe(t)}function lxe(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function cs(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!_Q(t[i],e[i]))return!1;return!0}function _Q(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function yQ(t){return t.length>0?t[t.length-1]:null}function ca(t){return function ZSe(t){return!!t&&(t instanceof dt||Ge(t.lift)&&Ge(t.subscribe))}(t)?t:bh(t)?en(Promise.resolve(t)):ie(t)}const hxe={exact:function EQ(t,e,n){if(!Fu(t.segments,e.segments)||!SE(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!EQ(t.children[r],e.children[r],n))return!1;return!0},subset:wQ},vQ={exact:function fxe(t,e){return cs(t,e)},subset:function pxe(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>_Q(t[n],e[n]))},ignored:()=>!0};function IQ(t,e,n){return hxe[n.paths](t.root,e.root,n.matrixParams)&&vQ[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function wQ(t,e,n){return TQ(t,e,e.segments,n)}function TQ(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Fu(i,n)||e.hasChildren()||!SE(i,n,r))}if(t.segments.length===n.length){if(!Fu(t.segments,n)||!SE(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!wQ(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(Fu(t.segments,i)&&SE(t.segments,i,r)&&t.children[me])&&TQ(t.children[me],e,s,r)}}function SE(t,e,n){return e.every((r,i)=>vQ[n](t[i].parameters,r.parameters))}class xd{constructor(e=new $e([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sd(this.queryParams)),this._queryParamMap}toString(){return _xe.serialize(this)}}class $e{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xE(this)}}class bg{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Sd(this.parameters)),this._parameterMap}toString(){return AQ(this)}}function Fu(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Sg=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:function(){return new Xk},providedIn:"root"})}return t})();class Xk{parse(e){const n=new Sxe(e);return new xd(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${xg(e.root,!0)}`,r=function Ixe(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${RE(n)}=${RE(i)}`).join("&"):`${RE(n)}=${RE(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function yxe(t){return encodeURI(t)}(e.fragment)}`:"";return`${n}${r}${i}`}}const _xe=new Xk;function xE(t){return t.segments.map(e=>AQ(e)).join("/")}function xg(t,e){if(!t.hasChildren())return xE(t);if(e){const n=t.children[me]?xg(t.children[me],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==me&&r.push(`${i}:${xg(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function mxe(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===me&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==me&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===me?[xg(t.children[me],!1)]:[`${i}:${xg(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[me]?`${xE(t)}/${n[0]}`:`${xE(t)}/(${n.join("//")})`}}function DQ(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function RE(t){return DQ(t).replace(/%3B/gi,";")}function Jk(t){return DQ(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function PE(t){return decodeURIComponent(t)}function CQ(t){return PE(t.replace(/\+/g,"%20"))}function AQ(t){return`${Jk(t.path)}${function vxe(t){return Object.keys(t).map(e=>`;${Jk(e)}=${Jk(t[e])}`).join("")}(t.parameters)}`}const Exe=/^[^\/()?;#]+/;function Zk(t){const e=t.match(Exe);return e?e[0]:""}const wxe=/^[^\/()?;=#]+/,Dxe=/^[^=?&#]+/,Axe=/^[^&#]+/;class Sxe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $e([],{}):new $e([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[me]=new $e(e,n)),r}parseSegment(){const e=Zk(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new R(4009,!1);return this.capture(e),new bg(PE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function Txe(t){const e=t.match(wxe);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Zk(this.remaining);i&&(r=i,this.capture(r))}e[PE(n)]=PE(r)}parseQueryParam(e){const n=function Cxe(t){const e=t.match(Dxe);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function bxe(t){const e=t.match(Axe);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=CQ(n),s=CQ(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Zk(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new R(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=me);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[me]:new $e([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new R(4011,!1)}}function bQ(t){return t.segments.length>0?new $e([],{[me]:t}):t}function SQ(t){const e={};for(const r of Object.keys(t.children)){const s=SQ(t.children[r]);if(r===me&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function xxe(t){if(1===t.numberOfChildren&&t.children[me]){const e=t.children[me];return new $e(t.segments.concat(e.segments),e.children)}return t}(new $e(t.segments,e))}function Vu(t){return t instanceof xd}function xQ(t){let e;const i=bQ(function n(s){const o={};for(const u of s.children){const c=n(u);o[u.outlet]=c}const a=new $e(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function RQ(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return eO(i,i,i,n,r);const s=function Pxe(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new MQ(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,c])=>{a[u]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new MQ(n,e,r)}(e);if(s.toRoot())return eO(i,i,new $e([],{}),n,r);const o=function Mxe(t,e,n){if(t.isAbsolute)return new NE(e,!0,0);if(!n)return new NE(e,!1,NaN);if(null===n.parent)return new NE(n,!0,0);const r=ME(t.commands[0])?0:1;return function Nxe(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new R(4005,!1);i=r.segments.length}return new NE(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?Pg(o.segmentGroup,o.index,s.commands):NQ(o.segmentGroup,o.index,s.commands);return eO(i,o.segmentGroup,a,n,r)}function ME(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Rg(t){return"object"==typeof t&&null!=t&&t.outlets}function eO(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`}),o=t===e?n:PQ(t,e,n);const a=bQ(SQ(o));return new xd(a,s,i)}function PQ(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:PQ(s,e,n)}),new $e(t.segments,r)}class MQ{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ME(r[0]))throw new R(4003,!1);const i=r.find(Rg);if(i&&i!==yQ(r))throw new R(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class NE{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function NQ(t,e,n){if(t||(t=new $e([],{})),0===t.segments.length&&t.hasChildren())return Pg(t,e,n);const r=function Oxe(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(Rg(a))break;const u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!OQ(u,c,o))return s;r+=2}else{if(!OQ(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new $e(t.segments.slice(0,r.pathIndex),{});return s.children[me]=new $e(t.segments.slice(r.pathIndex),t.children),Pg(s,0,i)}return r.match&&0===i.length?new $e(t.segments,{}):r.match&&!t.hasChildren()?tO(t,e,n):r.match?Pg(t,0,i):tO(t,e,n)}function Pg(t,e,n){if(0===n.length)return new $e(t.segments,{});{const r=function kxe(t){return Rg(t[0])?t[0].outlets:{[me]:t}}(n),i={};if(Object.keys(r).some(s=>s!==me)&&t.children[me]&&1===t.numberOfChildren&&0===t.children[me].segments.length){const s=Pg(t.children[me],e,n);return new $e(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=NQ(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new $e(t.segments,i)}}function tO(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Rg(s)){const u=Fxe(s.outlets);return new $e(r,u)}if(0===i&&ME(n[0])){r.push(new bg(t.segments[e].path,kQ(n[0]))),i++;continue}const o=Rg(s)?s.outlets[me]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&ME(a)?(r.push(new bg(o,kQ(a))),i+=2):(r.push(new bg(o,{})),i++)}return new $e(r,{})}function Fxe(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=tO(new $e([],{}),0,r))}),e}function kQ(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function OQ(t,e,n){return t==n.path&&cs(e,n.parameters)}const Mg="imperative";class ls{constructor(e,n){this.id=e,this.url=n}}class kE extends ls{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class la extends ls{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ng extends ls{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Rd extends ls{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class OE extends ls{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class FQ extends ls{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vxe extends ls{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lxe extends ls{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Uxe extends ls{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bxe extends ls{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jxe{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class $xe{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Gxe{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qxe{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zxe{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hxe{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VQ{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class nO{}class rO{constructor(e){this.url=e}}class Wxe{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new kg,this.attachRef=null}}let kg=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Wxe,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class LQ{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=iO(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=iO(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=sO(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return sO(e,this._root).map(n=>n.value)}}function iO(t,e){if(t===e.value)return e;for(const n of e.children){const r=iO(t,n);if(r)return r}return null}function sO(t,e){if(t===e.value)return[e];for(const n of e.children){const r=sO(t,n);if(r.length)return r.unshift(e),r}return[]}class Xs{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Pd(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class UQ extends LQ{constructor(e,n){super(e),this.snapshot=n,oO(this,e)}toString(){return this.snapshot.toString()}}function BQ(t,e){const n=function Kxe(t,e){const o=new FE([],{},{},"",{},me,e,null,{});return new $Q("",new Xs(o,[]))}(0,e),r=new Kr([new bg("",{})]),i=new Kr({}),s=new Kr({}),o=new Kr({}),a=new Kr(""),u=new Md(r,i,o,a,s,me,e,n.root);return u.snapshot=n.root,new UQ(new Xs(u,[]),n)}class Md{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ke(c=>c[Ag]))??ie(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ke(e=>Sd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ke(e=>Sd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function jQ(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Qxe(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class FE{get title(){return this.data?.[Ag]}constructor(e,n,r,i,s,o,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Sd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $Q extends LQ{constructor(e,n){super(n),this.url=e,oO(this,n)}toString(){return GQ(this._root)}}function oO(t,e){e.value._routerState=t,e.children.forEach(n=>oO(t,n))}function GQ(t){const e=t.children.length>0?` { ${t.children.map(GQ).join(", ")} } `:"";return`${t.value}${e}`}function aO(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,cs(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),cs(e.params,n.params)||t.paramsSubject.next(n.params),function dxe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!cs(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),cs(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function uO(t,e){const n=cs(t.params,e.params)&&function gxe(t,e){return Fu(t,e)&&t.every((n,r)=>cs(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||uO(t.parent,e.parent))}let qQ=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=me,this.activateEvents=new _t,this.deactivateEvents=new _t,this.attachEvents=new _t,this.detachEvents=new _t,this.parentContexts=q(kg),this.location=q(ti),this.changeDetector=q(__),this.environmentInjector=q(Zr),this.inputBinder=q(VE,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new R(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new R(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new R(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new R(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Yxe(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=te({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Xr]})}return t})();class Yxe{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Md?this.route:e===kg?this.childContexts:this.parent.get(e,n)}}const VE=new W("");let zQ=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=Hk([r.queryParams,r.params,r.data]).pipe(xi(([s,o,a],u)=>(a={...s,...o,...a},0===u?ie(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function Eae(t){const e=De(t);if(!e)return null;const n=new wh(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})();function Og(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function Jxe(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Og(t,r,i);return Og(t,r)})}(t,e,n);return new Xs(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Og(t,a)),o}}const r=function Zxe(t){return new Md(new Kr(t.url),new Kr(t.params),new Kr(t.queryParams),new Kr(t.fragment),new Kr(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>Og(t,s));return new Xs(r,i)}}const cO="ngNavigationCancelingError";function HQ(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Vu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=WQ(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function WQ(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[cO]=!0,r.cancellationCode=e,n&&(r.url=n),r}function KQ(t){return t&&t[cO]}let QQ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=zd({type:t,selectors:[["ng-component"]],standalone:!0,features:[hB],decls:1,vars:0,template:function(r,i){1&r&&xc(0,"router-outlet")},dependencies:[qQ],encapsulation:2})}return t})();function lO(t){const e=t.children&&t.children.map(lO),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==me&&(n.component=QQ),n}function bi(t){return t.outlet||me}function Fg(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class aRe{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),aO(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Pd(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Pd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Pd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Pd(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Hxe(s.value.snapshot))}),e.children.length&&this.forwardEvent(new qxe(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(aO(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),aO(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Fg(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class YQ{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class LE{constructor(e,n){this.component=e,this.route=n}}function uRe(t,e,n){const r=t._root;return Vg(r,e?e._root:null,n,[r.value])}function Nd(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function CX(t){return null!==Qg(t)}(t)?e.get(t):t:r}function Vg(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Pd(e);return t.children.forEach(o=>{(function lRe(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function dRe(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Fu(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Fu(t.url,e.url)||!cs(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!uO(t,e)||!cs(t.queryParams,e.queryParams);default:return!uO(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new YQ(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Vg(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new LE(a.outlet.component,o))}else o&&Lg(e,a,i),i.canActivateChecks.push(new YQ(r)),Vg(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Lg(a,n.getContext(o),i)),i}function Lg(t,e,n){const r=Pd(t),i=t.value;Object.entries(r).forEach(([s,o])=>{Lg(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new LE(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Ug(t){return"function"==typeof t}function XQ(t){return t instanceof AE||"EmptyError"===t?.name}const UE=Symbol("INITIAL_VALUE");function kd(){return xi(t=>Hk(t.map(e=>e.pipe(bd(1),function nxe(...t){const e=Bd(t);return Ht((n,r)=>{(e?Wk(t,n,e):Wk(t,n)).subscribe(r)})}(UE)))).pipe(ke(e=>{for(const n of e)if(!0!==n){if(n===UE)return UE;if(!1===n||n instanceof xd)return n}return!0}),ua(e=>e!==UE),bd(1)))}function JQ(t){return function SY(...t){return wO(t)}(En(e=>{if(Vu(e))throw HQ(0,e)}),ke(e=>!0===e))}class BE{constructor(e){this.segmentGroup=e||null}}class ZQ{constructor(e){this.urlTree=e}}function Od(t){return Dg(new BE(t))}function eY(t){return Dg(new ZQ(t))}class PRe{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new R(4002,!1)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ie(r);if(i.numberOfChildren>1||!i.children[me])return Dg(new R(4e3,!1));i=i.children[me]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new xd(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new $e(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new R(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const dO={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function MRe(t,e,n,r,i){const s=hO(t,e,n);return s.matched?(r=function tRe(t,e){return t.providers&&!t._injector&&(t._injector=v0(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function SRe(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?ie(i.map(o=>{const a=Nd(o,t);return ca(function _Re(t){return t&&Ug(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(kd(),JQ()):ie(!0)}(r,e,n).pipe(ke(o=>!0===o?s:{...dO}))):ie(s)}function hO(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...dO}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||lxe)(n,t,e);if(!i)return{...dO};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function tY(t,e,n,r){return n.length>0&&function ORe(t,e,n){return n.some(r=>jE(t,e,r)&&bi(r)!==me)}(t,n,r)?{segmentGroup:new $e(e,kRe(r,new $e(n,t.children))),slicedSegments:[]}:0===n.length&&function FRe(t,e,n){return n.some(r=>jE(t,e,r))}(t,n,r)?{segmentGroup:new $e(t.segments,NRe(t,0,n,r,t.children)),slicedSegments:n}:{segmentGroup:new $e(t.segments,t.children),slicedSegments:n}}function NRe(t,e,n,r,i){const s={};for(const o of r)if(jE(t,n,o)&&!i[bi(o)]){const a=new $e([],{});s[bi(o)]=a}return{...i,...s}}function kRe(t,e){const n={};n[me]=e;for(const r of t)if(""===r.path&&bi(r)!==me){const i=new $e([],{});n[bi(r)]=i}return n}function jE(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class BRe{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new PRe(this.urlSerializer,this.urlTree)}noMatchError(e){return new R(4002,!1)}recognize(){const e=tY(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,me).pipe(Ou(n=>{if(n instanceof ZQ)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof BE?this.noMatchError(n):n}),ke(n=>{const r=new FE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},me,this.rootComponentType,null,{}),i=new Xs(r,n),s=new $Q("",i),o=function Rxe(t,e,n=null,r=null){return RQ(xQ(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,me).pipe(Ou(r=>{throw r instanceof BE?this.noMatchError(r):r}))}inheritParamsAndData(e){const n=e.value,r=jQ(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0)}processChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return en(i).pipe(Cg(s=>{const o=r.children[s],a=function sRe(t,e){const n=t.filter(r=>bi(r)===e);return n.push(...t.filter(r=>bi(r)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),function sxe(t,e){return Ht(function ixe(t,e,n,r,i){return(s,o)=>{let a=n,u=e,c=0;s.subscribe(Ut(o,l=>{const d=c++;u=a?t(u,l,d):(a=!0,l),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),bE(null),function oxe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ua((i,s)=>t(i,s,r)):Zs,Qk(1),n?bE(e):mQ(()=>new AE))}(),pn(s=>{if(null===s)return Od(r);const o=nY(s);return function jRe(t){t.sort((e,n)=>e.value.outlet===me?-1:n.value.outlet===me?1:e.value.outlet.localeCompare(n.value.outlet))}(o),ie(o)}))}processSegment(e,n,r,i,s,o){return en(n).pipe(Cg(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Ou(u=>{if(u instanceof BE)return ie(null);throw u}))),ku(a=>!!a),Ou(a=>{if(XQ(a))return function LRe(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?ie([]):Od(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return function VRe(t,e,n,r){return!!(bi(t)===r||r!==me&&jE(e,n,t))&&("**"===t.path||hO(e,t,n).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Od(i):Od(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?eY(s):this.applyRedirects.lineralizeSegments(r,s).pipe(pn(o=>{const a=new $e(o,{});return this.processSegment(e,n,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:c,positionalParamSegments:l}=hO(n,i,s);if(!a)return Od(n);const d=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return i.redirectTo.startsWith("/")?eY(d):this.applyRedirects.lineralizeSegments(i,d).pipe(pn(h=>this.processSegment(e,r,n,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?yQ(i).parameters:{};a=ie({snapshot:new FE(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rY(r),bi(r),r.component??r._loadedComponent??null,r,iY(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=MRe(n,r,i,e).pipe(ke(({matched:u,consumedSegments:c,remainingSegments:l,parameters:d})=>u?{snapshot:new FE(c,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rY(r),bi(r),r.component??r._loadedComponent??null,r,iY(r)),consumedSegments:c,remainingSegments:l}:null));return a.pipe(xi(u=>null===u?Od(n):this.getChildConfig(e=r._injector??e,r,i).pipe(xi(({routes:c})=>{const l=r._loadedInjector??e,{snapshot:d,consumedSegments:h,remainingSegments:f}=u,{segmentGroup:p,slicedSegments:g}=tY(n,h,f,c);if(0===g.length&&p.hasChildren())return this.processChildren(l,c,p).pipe(ke(v=>null===v?null:[new Xs(d,v)]));if(0===c.length&&0===g.length)return ie([new Xs(d,[])]);const m=bi(r)===s;return this.processSegment(l,c,p,g,m?me:s,!0).pipe(ke(v=>[new Xs(d,v)]))}))))}getChildConfig(e,n,r){return n.children?ie({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?ie({routes:n._loadedRoutes,injector:n._loadedInjector}):function bRe(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?ie(!0):ie(i.map(o=>{const a=Nd(o,t);return ca(function fRe(t){return t&&Ug(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(kd(),JQ())}(e,n,r).pipe(pn(i=>i?this.configLoader.loadChildren(e,n).pipe(En(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function RRe(t){return Dg(WQ(!1,3))}())):ie({routes:[],injector:e})}}function $Re(t){const e=t.value.routeConfig;return e&&""===e.path}function nY(t){const e=[],n=new Set;for(const r of t){if(!$Re(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=nY(r.children);e.push(new Xs(r.value,i))}return e.filter(r=>!n.has(r))}function rY(t){return t.data||{}}function iY(t){return t.resolve||{}}function sY(t){return"string"==typeof t.title||null===t.title}function fO(t){return xi(e=>{const n=t(e);return n?en(n).pipe(ke(()=>e)):ie(e)})}const Fd=new W("ROUTES");let pO=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=q(sj)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return ie(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=ca(n.loadComponent()).pipe(ke(oY),En(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Yk(()=>{this.componentLoaders.delete(n)})),i=new gQ(r,()=>new xr).pipe(Kk());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ie({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function QRe(t,e,n,r){return ca(t.loadChildren()).pipe(ke(oY),pn(i=>i instanceof lB||Array.isArray(i)?ie(i):en(e.compileModuleAsync(i))),ke(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(n).injector,o=s.get(Fd,[],{optional:!0,self:!0}).flat()),{routes:o.map(lO),injector:s}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(Yk(()=>{this.childrenLoaders.delete(r)})),o=new gQ(s,()=>new xr).pipe(Kk());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function oY(t){return function YRe(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let $E=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new xr,this.transitionAbortSubject=new xr,this.configLoader=q(pO),this.environmentInjector=q(Zr),this.urlSerializer=q(Sg),this.rootContexts=q(kg),this.inputBindingEnabled=null!==q(VE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ie(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new $xe(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new jxe(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new Kr({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Mg,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ua(s=>0!==s.id),ke(s=>({...s,extractedUrl:n.urlHandlingStrategy.extract(s.rawUrl)})),xi(s=>{this.currentTransition=s;let o=!1,a=!1;return ie(s).pipe(En(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),xi(u=>{const c=u.currentBrowserUrl.toString(),l=!n.navigated||u.extractedUrl.toString()!==c||c!==u.currentUrlTree.toString();if(!l&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const h="";return this.events.next(new Rd(u.id,this.urlSerializer.serialize(u.rawUrl),h,0)),u.resolve(null),Si}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ie(u).pipe(xi(h=>{const f=this.transitions?.getValue();return this.events.next(new kE(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Si:Promise.resolve(h)}),function GRe(t,e,n,r,i,s){return pn(o=>function URe(t,e,n,r,i,s,o="emptyOnly"){return new BRe(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(ke(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),En(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const f=new FQ(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:h,extractedUrl:f,source:p,restoredState:g,extras:m}=u,v=new kE(h,this.urlSerializer.serialize(f),p,g);this.events.next(v);const y=BQ(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:y,urlAfterRedirects:f,extras:{...m,skipLocationChange:!1,replaceUrl:!1}},ie(s)}{const h="";return this.events.next(new Rd(u.id,this.urlSerializer.serialize(u.extractedUrl),h,1)),u.resolve(null),Si}}),En(u=>{const c=new Vxe(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}),ke(u=>(this.currentTransition=s={...u,guards:uRe(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function vRe(t,e){return pn(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?ie({...n,guardsResult:!0}):function IRe(t,e,n,r){return en(t).pipe(pn(i=>function ARe(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ie(s.map(a=>{const u=Fg(e)??i,c=Nd(a,u);return ca(function mRe(t){return t&&Ug(t.canDeactivate)}(c)?c.canDeactivate(t,e,n,r):u.runInContext(()=>c(t,e,n,r))).pipe(ku())})).pipe(kd()):ie(!0)}(i.component,i.route,n,e,r)),ku(i=>!0!==i,!0))}(o,r,i,t).pipe(pn(a=>a&&function hRe(t){return"boolean"==typeof t}(a)?function ERe(t,e,n,r){return en(e).pipe(Cg(i=>Wk(function TRe(t,e){return null!==t&&e&&e(new Gxe(t)),ie(!0)}(i.route.parent,r),function wRe(t,e){return null!==t&&e&&e(new zxe(t)),ie(!0)}(i.route,r),function CRe(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function cRe(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>pQ(()=>ie(o.guards.map(u=>{const c=Fg(o.node)??n,l=Nd(u,c);return ca(function gRe(t){return t&&Ug(t.canActivateChild)}(l)?l.canActivateChild(r,t):c.runInContext(()=>l(r,t))).pipe(ku())})).pipe(kd())));return ie(s).pipe(kd())}(t,i.path,n),function DRe(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ie(!0);const i=r.map(s=>pQ(()=>{const o=Fg(e)??n,a=Nd(s,o);return ca(function pRe(t){return t&&Ug(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(ku())}));return ie(i).pipe(kd())}(t,i.route,n))),ku(i=>!0!==i,!0))}(r,s,t,e):ie(a)),ke(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),En(u=>{if(s.guardsResult=u.guardsResult,Vu(u.guardsResult))throw HQ(0,u.guardsResult);const c=new Lxe(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(c)}),ua(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),fO(u=>{if(u.guards.canActivateChecks.length)return ie(u).pipe(En(c=>{const l=new Uxe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),xi(c=>{let l=!1;return ie(c).pipe(function qRe(t,e){return pn(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ie(n);let s=0;return en(i).pipe(Cg(o=>function zRe(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!sY(i)&&(s[Ag]=i.title),function HRe(t,e,n,r){const i=function WRe(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return ie({});const s={};return en(i).pipe(pn(o=>function KRe(t,e,n,r){const i=Fg(e)??r,s=Nd(t,i);return ca(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(ku(),En(a=>{s[o]=a}))),Qk(1),function axe(t){return ke(()=>t)}(s),Ou(o=>XQ(o)?Si:Dg(o)))}(s,t,e,r).pipe(ke(o=>(t._resolvedData=o,t.data=jQ(t,n).resolve,i&&sY(i)&&(t.data[Ag]=i.title),null)))}(o.route,r,t,e)),En(()=>s++),Qk(1),pn(o=>s===i.length?ie(n):Si))})}(n.paramsInheritanceStrategy,this.environmentInjector),En({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(c,"",2)}}))}),En(c=>{const l=new Bxe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}))}),fO(u=>{const c=l=>{const d=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(l.routeConfig).pipe(En(h=>{l.component=h}),ke(()=>{})));for(const h of l.children)d.push(...c(h));return d};return Hk(c(u.targetSnapshot.root)).pipe(bE(),bd(1))}),fO(()=>this.afterPreactivation()),ke(u=>{const c=function Xxe(t,e,n){const r=Og(t,e._root,n?n._root:void 0);return new UQ(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:c},s}),En(()=>{this.events.next(new nO)}),((t,e,n,r)=>ke(i=>(new aRe(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),bd(1),En({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new la(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function uxe(t){return Ht((e,n)=>{Rr(t).subscribe(Ut(n,()=>n.complete(),qE)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(En(u=>{throw u}))),Yk(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Ou(u=>{if(a=!0,KQ(u))this.events.next(new Ng(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function eRe(t){return KQ(t)&&Vu(t.url)}(u)?this.events.next(new rO(u.url)):s.resolve(!1);else{this.events.next(new OE(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(c){s.reject(c)}}return Si}))}))}cancelNavigationTransition(n,r,i){const s=new Ng(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function aY(t){return t!==Mg}let uY=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===me);return r}getResolvedTitleForRoute(n){return n.data[Ag]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:function(){return q(XRe)},providedIn:"root"})}return t})(),XRe=(()=>{class t extends uY{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(Z(C$))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),JRe=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:function(){return q(e1e)},providedIn:"root"})}return t})();class ZRe{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let e1e=(()=>{class t extends ZRe{static#e=this.\u0275fac=function(){let n;return function(i){return(n||(n=vn(t)))(i||t)}}();static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const GE=new W("",{providedIn:"root",factory:()=>({})});let t1e=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:function(){return q(n1e)},providedIn:"root"})}return t})(),n1e=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Bg=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Bg||{});function cY(t,e){t.events.pipe(ua(n=>n instanceof la||n instanceof Ng||n instanceof OE||n instanceof Rd),ke(n=>n instanceof la||n instanceof Rd?Bg.COMPLETE:n instanceof Ng&&(0===n.code||1===n.code)?Bg.REDIRECTING:Bg.FAILED),ua(n=>n!==Bg.REDIRECTING),bd(1)).subscribe(()=>{e()})}function r1e(t){throw t}function i1e(t,e,n){return e.parse("/")}const s1e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},o1e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ci=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=q(rj),this.isNgZoneEnabled=!1,this._events=new xr,this.options=q(GE,{optional:!0})||{},this.pendingTasks=q(ij),this.errorHandler=this.options.errorHandler||r1e,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||i1e,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=q(t1e),this.routeReuseStrategy=q(JRe),this.titleStrategy=q(uY),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=q(Fd,{optional:!0})?.flat()??[],this.navigationTransitions=q($E),this.urlSerializer=q(Sg),this.location=q(X0),this.componentInputBindingEnabled=!!q(VE,{optional:!0}),this.eventsSubscription=new lr,this.isNgZoneEnabled=q(Fe)instanceof Fe&&Fe.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new xd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=BQ(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(lY(r)&&this._events.next(r));if(r instanceof kE)aY(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Rd)this.rawUrlTree=i.rawUrl;else if(r instanceof FQ){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof nO)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Ng)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof rO){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||aY(i.source)};this.scheduleNavigation(s,Mg,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof OE&&this.restoreHistory(i,!0),r instanceof la&&(this.navigated=!0),lY(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Mg,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(lO),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:o;let d,l=null;switch(a){case"merge":l={...this.currentUrlTree.queryParams,...s};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=s||null}null!==l&&(l=this.removeEmptyProps(l));try{d=xQ(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),d=this.currentUrlTree.root}return RQ(d,n,l,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Vu(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Mg,null,r)}navigate(n,r={skipLocationChange:!1}){return function a1e(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new R(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...s1e}:!1===r?{...o1e}:r,Vu(n))return IQ(this.currentUrlTree,n,i);const s=this.parseUrl(n);return IQ(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,c;o?(a=o.resolve,u=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,u=h});const l=this.pendingTasks.add();return cY(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lY(t){return!(t instanceof nO||t instanceof rO)}class dY{}let l1e=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ua(n=>n instanceof la),Cg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=v0(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return en(i).pipe(Uu())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):ie(null);const s=i.pipe(pn(o=>null===o?ie(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?en([s,this.loader.loadComponent(r)]).pipe(Uu()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(Z(ci),Z(sj),Z(Zr),Z(dY),Z(pO))};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const mO=new W("");let hY=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof kE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof la?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Rd&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof VQ&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new VQ(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function Y2(){throw new Error("invalid")}()};static#t=this.\u0275prov=J({token:t,factory:t.\u0275fac})}return t})();function Js(t,e){return{\u0275kind:t,\u0275providers:e}}function pY(){const t=q(Jn);return e=>{const n=t.get(Oc);if(e!==n.components[0])return;const r=t.get(ci),i=t.get(gY);1===t.get(_O)&&r.initialNavigation(),t.get(mY,null,ye.Optional)?.setUpPreloading(),t.get(mO,null,ye.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const gY=new W("",{factory:()=>new xr}),_O=new W("",{providedIn:"root",factory:()=>1}),mY=new W("");function p1e(t){return Js(0,[{provide:mY,useExisting:l1e},{provide:dY,useExisting:t}])}const _Y=new W("ROUTER_FORROOT_GUARD"),m1e=[X0,{provide:Sg,useClass:Xk},ci,kg,{provide:Md,useFactory:function fY(t){return t.routerState.root},deps:[ci]},pO,[]];function _1e(){return new hj("Router",ci)}let yY=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[m1e,[],{provide:Fd,multi:!0,useValue:n},{provide:_Y,useFactory:E1e,deps:[[ci,new mr,new vm]]},{provide:GE,useValue:r||{}},r?.useHash?{provide:Ca,useClass:Aae}:{provide:Ca,useClass:$j},{provide:mO,useFactory:()=>{const t=q(Hue),e=q(Fe),n=q(GE),r=q($E),i=q(Sg);return n.scrollOffset&&t.setOffset(n.scrollOffset),new hY(i,r,t,e,n)}},r?.preloadingStrategy?p1e(r.preloadingStrategy).\u0275providers:[],{provide:hj,multi:!0,useFactory:_1e},r?.initialNavigation?w1e(r):[],r?.bindToComponentInputs?Js(8,[zQ,{provide:VE,useExisting:zQ}]).\u0275providers:[],[{provide:vY,useFactory:pY},{provide:j0,multi:!0,useExisting:vY}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Fd,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(Z(_Y,8))};static#t=this.\u0275mod=Mr({type:t});static#n=this.\u0275inj=dr({})}return t})();function E1e(t){return"guarded"}function w1e(t){return["disabled"===t.initialNavigation?Js(3,[{provide:N0,multi:!0,useFactory:()=>{const e=q(ci);return()=>{e.setUpLocationChangeListener()}}},{provide:_O,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Js(2,[{provide:_O,useValue:0},{provide:N0,multi:!0,deps:[Jn],useFactory:e=>{const n=e.get(Dae,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(ci),s=e.get(gY);cY(i,()=>{r(!0)}),e.get($E).afterPreactivation=()=>(r(!0),s.closed?ie(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const vY=new W(""),D1e=[{path:"new-tema",component:hQ},{path:"resultados-tema",component:(()=>{class t{constructor(){this.dtOptions={},this.dtTrigger=new xr,this.firebaseService=q(dQ)}ngOnInit(){this.globalValues$=this.firebaseService.getDatos(),this.dtOptions={pagingType:"full_numbers"},this.dtTrigger.next(null)}ngOnDestroy(){this.dtTrigger.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=zd({type:t,selectors:[["app-resultados-tema"]],decls:0,vars:0,template:function(r,i){}})}return t})()}];let C1e=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Mr({type:t});static#n=this.\u0275inj=dr({imports:[yY.forRoot(D1e),yY]})}return t})();const A1e_firebase={projectId:"finderluzy",appId:"1:554925423172:web:95849be8b724a981eb1a11",databaseURL:"https://finderluzy-default-rtdb.firebaseio.com",storageBucket:"finderluzy.appspot.com",apiKey:"AIzaSyCFe3f49FtHC5uNtqV8JDZRs05JEjwOm_Y",authDomain:"finderluzy.firebaseapp.com",messagingSenderId:"554925423172"};let b1e=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=Mr({type:t,bootstrap:[JSe]});static#n=this.\u0275inj=dr({imports:[Bce,C1e,Yle,YSe,Nme(()=>kme(A1e_firebase)),$Se(()=>HSe())]})}return t})();Lce().bootstrapModule(b1e).catch(t=>console.error(t))}},Ge=>{Ge(Ge.s=289)}]);